"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0";
exports.ids = ["vendor-chunks/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0/node_modules/@livekit/components-react/dist/components-BO8CL-ek.mjs":
/*!*************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0/node_modules/@livekit/components-react/dist/components-BO8CL-ek.mjs ***!
  \*************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $: () => (/* binding */ it),\n/* harmony export */   A: () => (/* binding */ ya),\n/* harmony export */   B: () => (/* binding */ Yt),\n/* harmony export */   C: () => (/* binding */ ca),\n/* harmony export */   D: () => (/* binding */ la),\n/* harmony export */   E: () => (/* binding */ Ht),\n/* harmony export */   F: () => (/* binding */ va),\n/* harmony export */   G: () => (/* binding */ Ea),\n/* harmony export */   H: () => (/* binding */ Bt),\n/* harmony export */   I: () => (/* binding */ Ke),\n/* harmony export */   J: () => (/* binding */ et),\n/* harmony export */   K: () => (/* binding */ D),\n/* harmony export */   L: () => (/* binding */ ka),\n/* harmony export */   M: () => (/* binding */ ma),\n/* harmony export */   N: () => (/* binding */ tt),\n/* harmony export */   O: () => (/* binding */ at),\n/* harmony export */   P: () => (/* binding */ jt),\n/* harmony export */   Q: () => (/* binding */ nt),\n/* harmony export */   R: () => (/* binding */ Ra),\n/* harmony export */   S: () => (/* binding */ oa),\n/* harmony export */   T: () => (/* binding */ ga),\n/* harmony export */   U: () => (/* binding */ rt),\n/* harmony export */   V: () => (/* binding */ Zt),\n/* harmony export */   W: () => (/* binding */ ct),\n/* harmony export */   X: () => (/* binding */ lt),\n/* harmony export */   Y: () => (/* binding */ ot),\n/* harmony export */   Z: () => (/* binding */ st),\n/* harmony export */   _: () => (/* binding */ se),\n/* harmony export */   a: () => (/* binding */ Ia),\n/* harmony export */   a0: () => (/* binding */ U),\n/* harmony export */   a1: () => (/* binding */ ut),\n/* harmony export */   b: () => (/* binding */ ht),\n/* harmony export */   c: () => (/* binding */ $),\n/* harmony export */   d: () => (/* binding */ sa),\n/* harmony export */   e: () => (/* binding */ ia),\n/* harmony export */   f: () => (/* binding */ ua),\n/* harmony export */   g: () => (/* binding */ ha),\n/* harmony export */   h: () => (/* binding */ wa),\n/* harmony export */   i: () => (/* binding */ pa),\n/* harmony export */   j: () => (/* binding */ Ca),\n/* harmony export */   k: () => (/* binding */ fe),\n/* harmony export */   l: () => (/* binding */ Sa),\n/* harmony export */   m: () => (/* binding */ R),\n/* harmony export */   n: () => (/* binding */ Dt),\n/* harmony export */   o: () => (/* binding */ Pa),\n/* harmony export */   p: () => (/* binding */ na),\n/* harmony export */   q: () => (/* binding */ ra),\n/* harmony export */   r: () => (/* binding */ dt),\n/* harmony export */   s: () => (/* binding */ fa),\n/* harmony export */   t: () => (/* binding */ ue),\n/* harmony export */   u: () => (/* binding */ q),\n/* harmony export */   v: () => (/* binding */ B),\n/* harmony export */   w: () => (/* binding */ da),\n/* harmony export */   x: () => (/* binding */ de),\n/* harmony export */   y: () => (/* binding */ Ma),\n/* harmony export */   z: () => (/* binding */ ba)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/.pnpm/next@14.2.9_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./hooks-C7Q76A3H.mjs */ \"(ssr)/./node_modules/.pnpm/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0/node_modules/@livekit/components-react/dist/hooks-C7Q76A3H.mjs\");\n/* harmony import */ var livekit_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! livekit-client */ \"(ssr)/./node_modules/.pnpm/livekit-client@2.5.5/node_modules/livekit-client/dist/livekit-client.esm.mjs\");\n/* harmony import */ var _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./contexts-DjicKJUz.mjs */ \"(ssr)/./node_modules/.pnpm/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0/node_modules/@livekit/components-react/dist/contexts-DjicKJUz.mjs\");\n/* harmony import */ var _room_C0QEsGui_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./room-C0QEsGui.mjs */ \"(ssr)/./node_modules/.pnpm/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0/node_modules/@livekit/components-react/dist/room-C0QEsGui.mjs\");\n\n\n\n\n\n\nconst na = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function(a, n) {\n    const { buttonProps: r } = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(a);\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { ref: n, ...r }, a.children);\n  }\n), ra = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ room: a, ...n }, r) {\n    const c = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.a)(a);\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ref: r, ...n }, c);\n  }\n), ca = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function(a, n) {\n    const { mergedProps: r } = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.b)({ props: a });\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { ref: n, ...r }, a.children);\n  }\n), la = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function(a, n) {\n    const { buttonProps: r } = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.c)(a);\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { ref: n, ...r }, a.children);\n  }\n), Ke = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentColor\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z\" })), et = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentColor\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z\" })), oa = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, viewBox: \"0 0 24 24\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"#FFF\",\n    d: \"M4.99 3.99a1 1 0 0 0-.697 1.717L10.586 12l-6.293 6.293a1 1 0 1 0 1.414 1.414L12 13.414l6.293 6.293a1 1 0 1 0 1.414-1.414L13.414 12l6.293-6.293a1 1 0 0 0-.727-1.717 1 1 0 0 0-.687.303L12 10.586 5.707 4.293a1 1 0 0 0-.717-.303z\"\n  }\n)), sa = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 18, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z\",\n    clipRule: \"evenodd\"\n  }\n)), D = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentcolor\",\n    fillRule: \"evenodd\",\n    d: \"M5.293 2.293a1 1 0 0 1 1.414 0l4.823 4.823a1.25 1.25 0 0 1 0 1.768l-4.823 4.823a1 1 0 0 1-1.414-1.414L9.586 8 5.293 3.707a1 1 0 0 1 0-1.414z\",\n    clipRule: \"evenodd\"\n  }\n)), tt = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\", strokeWidth: 1.5 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M10 1.75h4.25m0 0V6m0-4.25L9 7M6 14.25H1.75m0 0V10m0 4.25L7 9\" }))), ia = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentcolor\",\n    fillRule: \"evenodd\",\n    d: \"M8.961.894C8.875-.298 7.125-.298 7.04.894c-.066.912-1.246 1.228-1.76.472-.67-.99-2.186-.115-1.664.96.399.824-.465 1.688-1.288 1.289-1.076-.522-1.95.994-.961 1.665.756.513.44 1.693-.472 1.759-1.192.086-1.192 1.836 0 1.922.912.066 1.228 1.246.472 1.76-.99.67-.115 2.186.96 1.664.824-.399 1.688.465 1.289 1.288-.522 1.076.994 1.95 1.665.961.513-.756 1.693-.44 1.759.472.086 1.192 1.836 1.192 1.922 0 .066-.912 1.246-1.228 1.76-.472.67.99 2.186.115 1.664-.96-.399-.824.465-1.688 1.288-1.289 1.076.522 1.95-.994.961-1.665-.756-.513-.44-1.693.472-1.759 1.192-.086 1.192-1.836 0-1.922-.912-.066-1.228-1.246-.472-1.76.99-.67.115-2.186-.96-1.664-.824.399-1.688-.465-1.289-1.288.522-1.076-.994-1.95-1.665-.961-.513.756-1.693.44-1.759-.472ZM8 13A5 5 0 1 0 8 3a5 5 0 0 0 0 10Z\",\n    clipRule: \"evenodd\"\n  }\n)), ua = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z\",\n    clipRule: \"evenodd\"\n  }\n)), at = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentcolor\",\n    fillRule: \"evenodd\",\n    d: \"M4 6.104V4a4 4 0 1 1 8 0v2.104c1.154.326 2 1.387 2 2.646v4.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-4.5c0-1.259.846-2.32 2-2.646ZM5.5 4a2.5 2.5 0 0 1 5 0v2h-5V4Z\",\n    clipRule: \"evenodd\"\n  }\n)), nt = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentColor\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z\" })), rt = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentColor\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fillRule: \"evenodd\",\n    d: \"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z\" })), ct = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentcolor\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" })), lt = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentcolor\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { opacity: 0.25 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }))), ot = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentcolor\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { opacity: 0.25 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }))), st = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentColor\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { opacity: 0.25 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z\" }))), se = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 20, height: 16, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z\",\n    clipRule: \"evenodd\"\n  }\n)), it = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 20, height: 16, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { fill: \"currentColor\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fillRule: \"evenodd\",\n    d: \"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z\",\n    clipRule: \"evenodd\"\n  }\n))), U = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M8 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M8 12a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 8 12Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.7\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M12 1.072a.75.75 0 0 1 .274 1.024l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 12 1.072Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M6 11.464a.75.75 0 0 1 .274 1.025l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 6 11.464Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.6\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M14.928 4a.75.75 0 0 1-.274 1.025l-2.165 1.25a.75.75 0 1 1-.75-1.3l2.165-1.25A.75.75 0 0 1 14.928 4Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M4.536 10a.75.75 0 0 1-.275 1.024l-2.165 1.25a.75.75 0 0 1-.75-1.298l2.165-1.25A.75.75 0 0 1 4.536 10Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.5\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M16 8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 16 8Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M4 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 8Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.4\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M14.928 12a.75.75 0 0 1-1.024.274l-2.165-1.25a.75.75 0 0 1 .75-1.299l2.165 1.25A.75.75 0 0 1 14.928 12Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.9\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M4.536 6a.75.75 0 0 1-1.025.275l-2.165-1.25a.75.75 0 1 1 .75-1.3l2.165 1.25A.75.75 0 0 1 4.536 6Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.3\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M12 14.928a.75.75 0 0 1-1.024-.274l-1.25-2.165a.75.75 0 0 1 1.298-.75l1.25 2.165A.75.75 0 0 1 12 14.928Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.8\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M6 4.536a.75.75 0 0 1-1.024-.275l-1.25-2.165a.75.75 0 1 1 1.299-.75l1.25 2.165A.75.75 0 0 1 6 4.536Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.2\n  }\n)), ut = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\", strokeWidth: 1.5 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M13.25 7H9m0 0V2.75M9 7l5.25-5.25M2.75 9H7m0 0v4.25M7 9l-5.25 5.25\" }))), dt = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ trackRef: a, ...n }, r) {\n    const c = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.a9)(), { mergedProps: s, inFocus: i } = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.d)({\n      trackRef: a ?? c,\n      props: n\n    });\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.aa.Consumer, null, (l) => l !== void 0 && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { ref: r, ...s }, n.children ? n.children : i ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ut, null) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(tt, null)));\n  }\n);\nfunction mt(t) {\n  return t !== void 0;\n}\nfunction R(...t) {\n  return (0,_room_C0QEsGui_mjs__WEBPACK_IMPORTED_MODULE_4__.m)(...t.filter(mt));\n}\nfunction $(t, a, n) {\n  return react__WEBPACK_IMPORTED_MODULE_0__.Children.map(t, (r) => react__WEBPACK_IMPORTED_MODULE_0__.isValidElement(r) && react__WEBPACK_IMPORTED_MODULE_0__.Children.only(t) ? (r.props.class && (a ?? (a = {}), a.class = (0,_room_C0QEsGui_mjs__WEBPACK_IMPORTED_MODULE_4__.c)(r.props.class, a.class), a.style = { ...r.props.style, ...a.style }), react__WEBPACK_IMPORTED_MODULE_0__.cloneElement(r, { ...a, key: n })) : r);\n}\nfunction da(t) {\n  var a, n;\n  if (typeof window < \"u\" && typeof process < \"u\" && // eslint-disable-next-line turbo/no-undeclared-env-vars\n  (((a = process == null ? void 0 : process.env) == null ? void 0 : a.NODE_ENV) === \"dev\" || // eslint-disable-next-line turbo/no-undeclared-env-vars\n  ((n = process == null ? void 0 : process.env) == null ? void 0 : n.NODE_ENV) === \"development\")) {\n    const r = document.querySelector(\".lk-room-container\");\n    r && !getComputedStyle(r).getPropertyValue(\"--lk-has-imported-styles\") && _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.l.warn(\n      \"It looks like you're not using the `@livekit/components-styles package`. To render the UI with the default styling, please import it in your layout or page.\"\n    );\n  }\n}\nconst ma = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({\n    kind: a,\n    initialSelection: n,\n    onActiveDeviceChange: r,\n    onDeviceListChange: c,\n    onDeviceSelectError: s,\n    exactMatch: i,\n    track: l,\n    requestPermissions: o,\n    onError: u,\n    ...d\n  }, f) {\n    const m = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.w)(), p = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n      (w) => {\n        m && m.emit(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.MediaDevicesError, w), u == null || u(w);\n      },\n      [m, u]\n    ), { devices: E, activeDeviceId: h, setActiveMediaDevice: g, className: k } = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.e)({\n      kind: a,\n      room: m,\n      track: l,\n      requestPermissions: o,\n      onError: p\n    });\n    react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      n !== void 0 && g(n);\n    }, [g]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      typeof c == \"function\" && c(E);\n    }, [c, E]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      h && h !== \"\" && (r == null || r(h));\n    }, [h]);\n    const C = async (w) => {\n      try {\n        await g(w, { exact: i });\n      } catch (v) {\n        if (v instanceof Error)\n          s == null || s(v);\n        else\n          throw v;\n      }\n    }, b = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n      () => R(d, { className: k }, { className: \"lk-list\" }),\n      [k, d]\n    );\n    function S(w, v, M) {\n      return w === v || M === 0 && v === \"default\";\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"ul\", { ref: f, ...b }, E.map((w, v) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      \"li\",\n      {\n        key: w.deviceId,\n        id: w.deviceId,\n        \"data-lk-active\": S(w.deviceId, h, v),\n        \"aria-selected\": S(w.deviceId, h, v),\n        role: \"option\"\n      },\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { className: \"lk-button\", onClick: () => C(w.deviceId) }, w.label)\n    )));\n  }\n), fa = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ label: a = \"Allow Audio\", ...n }, r) {\n    const c = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.f)(), { mergedProps: s } = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.f)({ room: c, props: n });\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { ref: r, ...s }, a);\n  }\n), ha = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ label: a, ...n }, r) {\n    const c = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.f)(), { mergedProps: s, canPlayAudio: i } = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.f)({ room: c, props: n }), { mergedProps: l, canPlayVideo: o } = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.g)({ room: c, props: s }), { style: u, ...d } = l;\n    return u.display = i && o ? \"none\" : \"block\", /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { ref: r, style: u, ...d }, a ?? `Start ${i ? \"Video\" : \"Audio\"}`);\n  }\n);\nfunction ie(t, a) {\n  switch (t) {\n    case livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone:\n      return a ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(rt, null) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(nt, null);\n    case livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera:\n      return a ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(et, null) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Ke, null);\n    case livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.ScreenShare:\n      return a ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(it, null) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(se, null);\n    default:\n      return;\n  }\n}\nfunction ft(t) {\n  switch (t) {\n    case livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionQuality.Excellent:\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ct, null);\n    case livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionQuality.Good:\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(lt, null);\n    case livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionQuality.Poor:\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ot, null);\n    default:\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(st, null);\n  }\n}\nconst ga = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(function({ showIcon: a, ...n }, r) {\n  const { buttonProps: c, enabled: s } = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.h)(n);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { ref: r, ...c }, (a ?? !0) && ie(n.source, s), n.children);\n}), ue = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(function(a, n) {\n  const { className: r, quality: c } = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.i)(a), s = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => ({ ...R(a, { className: r }), \"data-lk-quality\": c }), [c, a, r]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ref: n, ...s }, a.children ?? ft(c));\n}), B = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ participant: a, ...n }, r) {\n    const c = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.c)(a), { className: s, infoObserver: i } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.ab)(c), [c]), { identity: l, name: o } = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.j)(i, {\n      name: c.name,\n      identity: c.identity,\n      metadata: c.metadata\n    }), u = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => R(n, { className: s, \"data-lk-participant-name\": o }), [n, s, o]);\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { ref: r, ...u }, o !== \"\" ? o : l, n.children);\n  }\n), de = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ trackRef: a, show: n = \"always\", ...r }, c) {\n    const { className: s, isMuted: i } = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.k)(a), l = n === \"always\" || n === \"muted\" && i || n === \"unmuted\" && !i, o = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n      () => R(r, {\n        className: s\n      }),\n      [s, r]\n    );\n    return l ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ref: c, ...o, \"data-lk-muted\": i }, r.children ?? ie(a.source, !i)) : null;\n  }\n), ht = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"svg\",\n  {\n    width: 320,\n    height: 320,\n    viewBox: \"0 0 320 320\",\n    preserveAspectRatio: \"xMidYMid meet\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ...t\n  },\n  /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"path\",\n    {\n      d: \"M160 180C204.182 180 240 144.183 240 100C240 55.8172 204.182 20 160 20C115.817 20 79.9997 55.8172 79.9997 100C79.9997 144.183 115.817 180 160 180Z\",\n      fill: \"white\",\n      fillOpacity: 0.25\n    }\n  ),\n  /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"path\",\n    {\n      d: \"M97.6542 194.614C103.267 191.818 109.841 192.481 115.519 195.141C129.025 201.466 144.1 205 159.999 205C175.899 205 190.973 201.466 204.48 195.141C210.158 192.481 216.732 191.818 222.345 194.614C262.703 214.719 291.985 253.736 298.591 300.062C300.15 310.997 291.045 320 280 320H39.9997C28.954 320 19.8495 310.997 21.4087 300.062C28.014 253.736 57.2966 214.72 97.6542 194.614Z\",\n      fill: \"white\",\n      fillOpacity: 0.25\n    }\n  )\n);\nfunction me(t, a = {}) {\n  const [n, r] = react__WEBPACK_IMPORTED_MODULE_0__.useState((0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.X)(t)), [c, s] = react__WEBPACK_IMPORTED_MODULE_0__.useState(n == null ? void 0 : n.isMuted), [i, l] = react__WEBPACK_IMPORTED_MODULE_0__.useState(n == null ? void 0 : n.isSubscribed), [o, u] = react__WEBPACK_IMPORTED_MODULE_0__.useState(n == null ? void 0 : n.track), [d, f] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\"landscape\"), m = react__WEBPACK_IMPORTED_MODULE_0__.useRef(), { className: p, trackObserver: E } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.Y)(t), [\n    t.participant.sid ?? t.participant.identity,\n    t.source,\n    (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.a1)(t) && t.publication.trackSid\n  ]);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const h = E.subscribe((g) => {\n      _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.l.debug(\"update track\", g), r(g), s(g == null ? void 0 : g.isMuted), l(g == null ? void 0 : g.isSubscribed), u(g == null ? void 0 : g.track);\n    });\n    return () => h == null ? void 0 : h.unsubscribe();\n  }, [E]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var h, g;\n    return o && (m.current && o.detach(m.current), (h = a.element) != null && h.current && !((0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.ac)(t.participant) && (o == null ? void 0 : o.kind) === \"audio\") && o.attach(a.element.current)), m.current = (g = a.element) == null ? void 0 : g.current, () => {\n      m.current && (o == null || o.detach(m.current));\n    };\n  }, [o, a.element]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var h, g;\n    if (typeof ((h = n == null ? void 0 : n.dimensions) == null ? void 0 : h.width) == \"number\" && typeof ((g = n == null ? void 0 : n.dimensions) == null ? void 0 : g.height) == \"number\") {\n      const k = n.dimensions.width > n.dimensions.height ? \"landscape\" : \"portrait\";\n      f(k);\n    }\n  }, [n]), {\n    publication: n,\n    isMuted: c,\n    isSubscribed: i,\n    track: o,\n    elementProps: R(a.props, {\n      className: p,\n      \"data-lk-local-participant\": t.participant.isLocal,\n      \"data-lk-source\": n == null ? void 0 : n.source,\n      ...(n == null ? void 0 : n.kind) === \"video\" && { \"data-lk-orientation\": d }\n    })\n  };\n}\nvar gt = \"Expected a function\", G = NaN, vt = \"[object Symbol]\", pt = /^\\s+|\\s+$/g, Et = /^[-+]0x[0-9a-f]+$/i, wt = /^0b[01]+$/i, kt = /^0o[0-7]+$/i, yt = parseInt, Mt = typeof _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.ad == \"object\" && _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.ad && _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.ad.Object === Object && _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.ad, Rt = typeof self == \"object\" && self && self.Object === Object && self, bt = Mt || Rt || Function(\"return this\")(), St = Object.prototype, Ct = St.toString, It = Math.max, Pt = Math.min, Z = function() {\n  return bt.Date.now();\n};\nfunction Tt(t, a, n) {\n  var r, c, s, i, l, o, u = 0, d = !1, f = !1, m = !0;\n  if (typeof t != \"function\")\n    throw new TypeError(gt);\n  a = Q(a) || 0, j(n) && (d = !!n.leading, f = \"maxWait\" in n, s = f ? It(Q(n.maxWait) || 0, a) : s, m = \"trailing\" in n ? !!n.trailing : m);\n  function p(v) {\n    var M = r, x = c;\n    return r = c = void 0, u = v, i = t.apply(x, M), i;\n  }\n  function E(v) {\n    return u = v, l = setTimeout(k, a), d ? p(v) : i;\n  }\n  function h(v) {\n    var M = v - o, x = v - u, W = a - M;\n    return f ? Pt(W, s - x) : W;\n  }\n  function g(v) {\n    var M = v - o, x = v - u;\n    return o === void 0 || M >= a || M < 0 || f && x >= s;\n  }\n  function k() {\n    var v = Z();\n    if (g(v))\n      return C(v);\n    l = setTimeout(k, h(v));\n  }\n  function C(v) {\n    return l = void 0, m && r ? p(v) : (r = c = void 0, i);\n  }\n  function b() {\n    l !== void 0 && clearTimeout(l), u = 0, r = o = c = l = void 0;\n  }\n  function S() {\n    return l === void 0 ? i : C(Z());\n  }\n  function w() {\n    var v = Z(), M = g(v);\n    if (r = arguments, c = this, o = v, M) {\n      if (l === void 0)\n        return E(o);\n      if (f)\n        return l = setTimeout(k, a), p(o);\n    }\n    return l === void 0 && (l = setTimeout(k, a)), i;\n  }\n  return w.cancel = b, w.flush = S, w;\n}\nfunction j(t) {\n  var a = typeof t;\n  return !!t && (a == \"object\" || a == \"function\");\n}\nfunction xt(t) {\n  return !!t && typeof t == \"object\";\n}\nfunction At(t) {\n  return typeof t == \"symbol\" || xt(t) && Ct.call(t) == vt;\n}\nfunction Q(t) {\n  if (typeof t == \"number\")\n    return t;\n  if (At(t))\n    return G;\n  if (j(t)) {\n    var a = typeof t.valueOf == \"function\" ? t.valueOf() : t;\n    t = j(a) ? a + \"\" : a;\n  }\n  if (typeof t != \"string\")\n    return t === 0 ? t : +t;\n  t = t.replace(pt, \"\");\n  var n = wt.test(t);\n  return n || kt.test(t) ? yt(t.slice(2), n ? 2 : 8) : Et.test(t) ? G : +t;\n}\nvar Nt = Tt;\nconst X = /* @__PURE__ */ (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.ae)(Nt);\nfunction Lt(t) {\n  const a = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(t);\n  a.current = t, (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(\n    () => () => {\n      a.current();\n    },\n    []\n  );\n}\nfunction Vt(t, a = 500, n) {\n  const r = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  Lt(() => {\n    r.current && r.current.cancel();\n  });\n  const c = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    const s = X(t, a, n), i = (...l) => s(...l);\n    return i.cancel = () => {\n      s.cancel();\n    }, i.isPending = () => !!r.current, i.flush = () => s.flush(), i;\n  }, [t, a, n]);\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    r.current = X(t, a, n);\n  }, [t, a, n]), c;\n}\nfunction zt(t, a, n) {\n  const r = (u, d) => u === d, c = t instanceof Function ? t() : t, [s, i] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(c), l = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(c), o = Vt(\n    i,\n    a,\n    n\n  );\n  return r(l.current, c) || (o(c), l.current = c), [s, o];\n}\nfunction Ft({\n  threshold: t = 0,\n  root: a = null,\n  rootMargin: n = \"0%\",\n  freezeOnceVisible: r = !1,\n  initialIsIntersecting: c = !1,\n  onChange: s\n} = {}) {\n  var i;\n  const [l, o] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null), [u, d] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => ({\n    isIntersecting: c,\n    entry: void 0\n  })), f = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  f.current = s;\n  const m = ((i = u.entry) == null ? void 0 : i.isIntersecting) && r;\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!l || !(\"IntersectionObserver\" in window) || m)\n      return;\n    let h;\n    const g = new IntersectionObserver(\n      (k) => {\n        const C = Array.isArray(g.thresholds) ? g.thresholds : [g.thresholds];\n        k.forEach((b) => {\n          const S = b.isIntersecting && C.some((w) => b.intersectionRatio >= w);\n          d({ isIntersecting: S, entry: b }), f.current && f.current(S, b), S && r && h && (h(), h = void 0);\n        });\n      },\n      { threshold: t, root: a, rootMargin: n }\n    );\n    return g.observe(l), () => {\n      g.disconnect();\n    };\n  }, [\n    l,\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    JSON.stringify(t),\n    a,\n    n,\n    m,\n    r\n  ]);\n  const p = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    var h;\n    !l && ((h = u.entry) != null && h.target) && !r && !m && p.current !== u.entry.target && (p.current = u.entry.target, d({ isIntersecting: c, entry: void 0 }));\n  }, [l, u.entry, r, m, c]);\n  const E = [\n    o,\n    !!u.isIntersecting,\n    u.entry\n  ];\n  return E.ref = E[0], E.isIntersecting = E[1], E.entry = E[2], E;\n}\nconst Zt = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({\n    onTrackClick: a,\n    onClick: n,\n    onSubscriptionStatusChanged: r,\n    trackRef: c,\n    manageSubscription: s,\n    ...i\n  }, l) {\n    const o = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.i)(c), u = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n    react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle(l, () => u.current);\n    const d = Ft({ root: u.current }), [f] = zt(d, 3e3);\n    react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      s && o.publication instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.RemoteTrackPublication && (f == null ? void 0 : f.isIntersecting) === !1 && (d == null ? void 0 : d.isIntersecting) === !1 && o.publication.setSubscribed(!1);\n    }, [f, o, s]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      s && o.publication instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.RemoteTrackPublication && (d == null ? void 0 : d.isIntersecting) === !0 && o.publication.setSubscribed(!0);\n    }, [d, o, s]);\n    const {\n      elementProps: m,\n      publication: p,\n      isSubscribed: E\n    } = me(o, {\n      element: u,\n      props: i\n    });\n    react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      r == null || r(!!E);\n    }, [E, r]);\n    const h = (g) => {\n      n == null || n(g), a == null || a({ participant: o == null ? void 0 : o.participant, track: p });\n    };\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"video\", { ref: u, ...m, muted: !0, onClick: h });\n  }\n), q = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ trackRef: a, onSubscriptionStatusChanged: n, volume: r, muted: c, ...s }, i) {\n    const l = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.i)(a), o = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n    react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle(i, () => o.current);\n    const {\n      elementProps: u,\n      isSubscribed: d,\n      track: f,\n      publication: m\n    } = me(l, {\n      element: o,\n      props: s\n    });\n    return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      n == null || n(!!d);\n    }, [d, n]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      f === void 0 || r === void 0 || (f instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.RemoteAudioTrack ? f.setVolume(r) : _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.l.warn(\"Volume can only be set on remote audio tracks.\"));\n    }, [r, f]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      m === void 0 || c === void 0 || (m instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.RemoteTrackPublication ? m.setEnabled(!c) : _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.l.warn(\"Can only call setEnabled on remote track publications.\"));\n    }, [c, m, f]), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"audio\", { ref: o, ...u });\n  }\n);\nfunction Ht(t) {\n  const a = !!(0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.B)();\n  return t.participant && !a ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.af.Provider, { value: t.participant }, t.children) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, t.children);\n}\nfunction Bt(t) {\n  const a = !!(0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.a9)();\n  return t.trackRef && !a ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.ag.Provider, { value: t.trackRef }, t.children) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, t.children);\n}\nconst jt = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({\n    trackRef: a,\n    children: n,\n    onParticipantClick: r,\n    disableSpeakingIndicator: c,\n    ...s\n  }, i) {\n    var p, E;\n    const l = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.i)(a), { elementProps: o } = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.l)({\n      htmlProps: s,\n      disableSpeakingIndicator: c,\n      onParticipantClick: r,\n      trackRef: l\n    }), u = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.m)(l.participant), d = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.j)(), f = (p = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.ah)()) == null ? void 0 : p.autoSubscription, m = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n      (h) => {\n        l.source && !h && d && d.pin.dispatch && (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.m)(l, d.pin.state) && d.pin.dispatch({ msg: \"clear_pin\" });\n      },\n      [l, d]\n    );\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ref: i, style: { position: \"relative\" }, ...o }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Bt, { trackRef: l }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Ht, { participant: l.participant }, n ?? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.a1)(l) && (((E = l.publication) == null ? void 0 : E.kind) === \"video\" || l.source === livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera || l.source === livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.ScreenShare) ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      Zt,\n      {\n        trackRef: l,\n        onSubscriptionStatusChanged: m,\n        manageSubscription: f\n      }\n    ) : (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.a1)(l) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      q,\n      {\n        trackRef: l,\n        onSubscriptionStatusChanged: m\n      }\n    ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-participant-placeholder\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ht, null)), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-participant-metadata\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-participant-metadata-item\" }, l.source === livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, u && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(at, { style: { marginRight: \"0.25rem\" } }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      de,\n      {\n        trackRef: {\n          participant: l.participant,\n          source: livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone\n        },\n        show: \"muted\"\n      }\n    ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(B, null)) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(se, { style: { marginRight: \"0.25rem\" } }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(B, null, \"'s screen\"))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ue, { className: \"lk-participant-metadata-item\" }))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(dt, { trackRef: l }))));\n  }\n);\nfunction va(t) {\n  const a = R(t, { className: \"lk-focus-layout\" });\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ...a }, t.children);\n}\nfunction pa({ trackRef: t, ...a }) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(jt, { trackRef: t, ...a });\n}\nfunction fe({ tracks: t, ...a }) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, t.map((n) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.ag.Provider,\n    {\n      value: n,\n      key: (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.p)(n)\n    },\n    $(a.children)\n  )));\n}\nfunction Ot({\n  totalPageCount: t,\n  nextPage: a,\n  prevPage: n,\n  currentPage: r,\n  pagesContainer: c\n}) {\n  const [s, i] = react__WEBPACK_IMPORTED_MODULE_0__.useState(!1);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    let l;\n    return c && (l = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.ai)(c.current, 2e3).subscribe(\n      i\n    )), () => {\n      l && l.unsubscribe();\n    };\n  }, [c]), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-pagination-control\", \"data-lk-user-interaction\": s }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { className: \"lk-button\", onClick: n }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(D, null)), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { className: \"lk-pagination-count\" }, `${r} of ${t}`), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { className: \"lk-button\", onClick: a }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(D, null)));\n}\nconst _t = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ totalPageCount: a, currentPage: n }, r) {\n    const c = new Array(a).fill(\"\").map((s, i) => i + 1 === n ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { \"data-lk-active\": !0, key: i }) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { key: i }));\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ref: r, className: \"lk-pagination-indicator\" }, c);\n  }\n);\nfunction Ea({ tracks: t, ...a }) {\n  const n = react__WEBPACK_IMPORTED_MODULE_0__.createRef(), r = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => R(a, { className: \"lk-grid-layout\" }),\n    [a]\n  ), { layout: c } = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.n)(n, t.length), s = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.o)(c.maxTiles, t);\n  return (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.p)(n, {\n    onLeftSwipe: s.nextPage,\n    onRightSwipe: s.prevPage\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ref: n, \"data-lk-pagination\": s.totalPageCount > 1, ...r }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(fe, { tracks: s.tracks }, a.children), t.length > c.maxTiles && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    _t,\n    {\n      totalPageCount: s.totalPageCount,\n      currentPage: s.currentPage\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Ot, { pagesContainer: n, ...s })));\n}\nconst $t = 130, qt = 140, Y = 1, he = 16 / 10, Wt = (1 - he) * -1;\nfunction wa({ tracks: t, orientation: a, ...n }) {\n  const r = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null), [c, s] = react__WEBPACK_IMPORTED_MODULE_0__.useState(0), { width: i, height: l } = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.q)(r), o = a || (l >= i ? \"vertical\" : \"horizontal\"), u = o === \"vertical\" ? Math.max(i * Wt, $t) : Math.max(l * he, qt), d = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.aj)(), f = Math.max(o === \"vertical\" ? (l - d) / u : (i - d) / u, Y);\n  let m = Math.round(f);\n  Math.abs(f - c) < 0.5 ? m = Math.round(c) : c !== f && s(f);\n  const p = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.r)(t, m);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect(() => {\n    r.current && (r.current.dataset.lkOrientation = o, r.current.style.setProperty(\"--lk-max-visible-tiles\", m.toString()));\n  }, [m, o]), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"aside\", { key: o, className: \"lk-carousel\", ref: r, ...n }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(fe, { tracks: p }, n.children));\n}\nfunction ka({\n  value: t,\n  onPinChange: a,\n  onWidgetChange: n,\n  children: r\n}) {\n  const c = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.ak)(t);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.l.debug(\"PinState Updated\", { state: c.pin.state }), a && c.pin.state && a(c.pin.state);\n  }, [c.pin.state, a]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.l.debug(\"Widget Updated\", { widgetState: c.widget.state }), n && c.widget.state && n(c.widget.state);\n  }, [n, c.widget.state]), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.aa.Provider, { value: c }, r);\n}\nconst ya = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ trackRef: a, ...n }, r) {\n    const d = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.i)(a), f = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.s)(d, { bands: 7, loPass: 300 });\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      \"svg\",\n      {\n        ref: r,\n        width: \"100%\",\n        height: \"100%\",\n        viewBox: \"0 0 200 90\",\n        ...n,\n        className: \"lk-audio-visualizer\"\n      },\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"rect\", { x: \"0\", y: \"0\", width: \"100%\", height: \"100%\" }),\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n        \"g\",\n        {\n          style: {\n            transform: `translate(${(200 - 7 * 10) / 2}px, 0)`\n          }\n        },\n        f.map((m, p) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n          \"rect\",\n          {\n            key: p,\n            x: p * 10,\n            y: 90 / 2 - m * 50 / 2,\n            width: 6,\n            height: m * 50\n          }\n        ))\n      )\n    );\n  }\n);\nfunction Ma({ participants: t, ...a }) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, t.map((n) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.af.Provider, { value: n, key: n.identity }, $(a.children))));\n}\nfunction Ra({ volume: t, muted: a }) {\n  const n = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.t)(\n    [livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone, livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.ScreenShareAudio, livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Unknown],\n    {\n      updateOnlyOn: [],\n      onlySubscribed: !0\n    }\n  ).filter((r) => !(0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.ac)(r.participant) && r.publication.kind === livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Kind.Audio);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { style: { display: \"none\" } }, n.map((r) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    q,\n    {\n      key: (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.p)(r),\n      trackRef: r,\n      volume: t,\n      muted: a\n    }\n  )));\n}\nconst ba = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(function({ childrenPosition: a = \"before\", children: n, ...r }, c) {\n  const { name: s } = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.v)();\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { ref: c, ...r }, a === \"before\" && n, s, a === \"after\" && n);\n});\nfunction Dt(t) {\n  const a = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => R(t, { className: \"lk-toast\" }), [t]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ...a }, t.children);\n}\nconst Ut = (t) => {\n  const a = [];\n  for (let n = 0; n < t; n++)\n    a.push([n, t - 1 - n]);\n  return a;\n}, J = (t) => [[Math.floor(t / 2)], [-1]], Gt = (t, a, n) => {\n  const [r, c] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0), [s, i] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([[]]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (t === \"thinking\")\n      i(J(a));\n    else if (t === \"connecting\" || t === \"initializing\") {\n      const o = [...Ut(a)];\n      i(o);\n    } else i(t === \"listening\" ? J(a) : t === void 0 ? [new Array(a).fill(0).map((o, u) => u)] : [[]]);\n    c(0);\n  }, [t, a]);\n  const l = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    let o = performance.now();\n    const u = (d) => {\n      d - o >= n && (c((m) => m + 1), o = d), l.current = requestAnimationFrame(u);\n    };\n    return l.current = requestAnimationFrame(u), () => {\n      l.current !== null && cancelAnimationFrame(l.current);\n    };\n  }, [n, a, t, s.length]), s[r % s.length];\n}, Qt = /* @__PURE__ */ new Map([\n  [\"connecting\", 2e3],\n  [\"initializing\", 2e3],\n  [\"listening\", 500],\n  [\"thinking\", 150]\n]), Xt = (t, a) => {\n  if (t === void 0)\n    return 1e3;\n  let n = Qt.get(t);\n  if (n)\n    switch (t) {\n      case \"connecting\":\n        n /= a;\n        break;\n    }\n  return n;\n}, Yt = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ state: a, options: n, barCount: r = 15, trackRef: c, children: s, ...i }, l) {\n    const o = R(i, { className: \"lk-audio-bar-visualizer\" });\n    let u = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.a9)();\n    c && (u = c);\n    const d = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.s)(u, {\n      bands: r,\n      loPass: 100,\n      hiPass: 200\n    }), f = (n == null ? void 0 : n.minHeight) ?? 20, m = (n == null ? void 0 : n.maxHeight) ?? 100, p = Gt(\n      a,\n      r,\n      Xt(a, r) ?? 100\n    );\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ref: l, ...o, \"data-lk-va-state\": a }, d.map(\n      (E, h) => s ? $(s, {\n        \"data-lk-highlighted\": p.includes(h),\n        \"data-lk-bar-index\": h,\n        class: \"lk-audio-bar\",\n        style: { height: `${Math.min(m, Math.max(f, E * 100 + 5))}%` }\n      }) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n        \"span\",\n        {\n          key: h,\n          \"data-lk-highlighted\": p.includes(h),\n          \"data-lk-bar-index\": h,\n          className: `lk-audio-bar ${p.includes(h) && \"lk-highlighted\"}`,\n          style: {\n            // TODO transform animations would be more performant, however the border-radius gets distorted when using scale transforms. a 9-slice approach (or 3 in this case) could work\n            // transform: `scale(1, ${Math.min(maxHeight, Math.max(minHeight, volume))}`,\n            height: `${Math.min(m, Math.max(f, E * 100 + 5))}%`\n          }\n        }\n      )\n    ));\n  }\n), Sa = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({\n    children: a,\n    disableSpeakingIndicator: n,\n    onParticipantClick: r,\n    trackRef: c,\n    ...s\n  }, i) {\n    const l = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.i)(c), { elementProps: o } = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.l)({\n      trackRef: l,\n      htmlProps: s,\n      disableSpeakingIndicator: n,\n      onParticipantClick: r\n    });\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ref: i, style: { position: \"relative\", minHeight: \"160px\" }, ...o }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.ag.Provider, { value: l }, a ?? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.a1)(l) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(q, { trackRef: l }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Yt, { barCount: 7, options: { minHeight: 8 } }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-participant-metadata\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-participant-metadata-item\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(de, { trackRef: l }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(B, null)), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ue, { className: \"lk-participant-metadata-item\" })))));\n  }\n);\nfunction Ca(t) {\n  const [a, n] = react__WEBPACK_IMPORTED_MODULE_0__.useState(void 0), r = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.a)(t.room);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    switch (r) {\n      case livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Reconnecting:\n        n(\n          /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(U, { className: \"lk-spinner\" }), \" Reconnecting\")\n        );\n        break;\n      case livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Connecting:\n        n(\n          /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(U, { className: \"lk-spinner\" }), \" Connecting\")\n        );\n        break;\n      case livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Disconnected:\n        n(/* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, \"Disconnected\"));\n        break;\n      default:\n        n(void 0);\n        break;\n    }\n  }, [r]), a ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Dt, { className: \"lk-toast-connection-state\" }, a) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null);\n}\nconst Ia = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ entry: a, hideName: n = !1, hideTimestamp: r = !1, messageFormatter: c, ...s }, i) {\n    var f, m, p;\n    const l = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => c ? c(a.message) : a.message, [a.message, c]), o = !!a.editTimestamp, u = new Date(a.timestamp), d = navigator ? navigator.language : \"en-US\";\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      \"li\",\n      {\n        ref: i,\n        className: \"lk-chat-entry\",\n        title: u.toLocaleTimeString(d, { timeStyle: \"full\" }),\n        \"data-lk-message-origin\": (f = a.from) != null && f.isLocal ? \"local\" : \"remote\",\n        ...s\n      },\n      (!r || !n || o) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { className: \"lk-meta-data\" }, !n && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"strong\", { className: \"lk-participant-name\" }, ((m = a.from) == null ? void 0 : m.name) ?? ((p = a.from) == null ? void 0 : p.identity)), (!r || o) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { className: \"lk-timestamp\" }, o && \"edited \", u.toLocaleTimeString(d, { timeStyle: \"short\" }))),\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { className: \"lk-message-body\" }, l)\n    );\n  }\n);\nfunction Pa(t) {\n  return (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.al)(t, (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.am)()).map((a, n) => {\n    if (typeof a == \"string\")\n      return a;\n    {\n      const r = a.content.toString(), c = a.type === \"url\" ? /^http(s?):\\/\\//.test(r) ? r : `https://${r}` : `mailto:${r}`;\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"a\", { className: \"lk-chat-link\", key: n, href: c, target: \"_blank\", rel: \"noreferrer\" }, r);\n    }\n  });\n}\n\n//# sourceMappingURL=components-BO8CL-ek.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxpdmVraXQrY29tcG9uZW50cy1yZWFjdEAyX2VkZmZiMGQ3YjM1ZjdkZTlhY2VjNjY3ZWVlZjE2NGMwL25vZGVfbW9kdWxlcy9AbGl2ZWtpdC9jb21wb25lbnRzLXJlYWN0L2Rpc3QvY29tcG9uZW50cy1CTzhDTC1lay5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUEyQjtBQUN1RDtBQUN5SjtBQUMzRTtBQUM0SDtBQUNyTztBQUN2RCwyQkFBMkIsNkNBQVk7QUFDdkM7QUFDQSxZQUFZLGlCQUFpQixFQUFFLHNEQUFFO0FBQ2pDLDJCQUEyQixnREFBZSxhQUFhLGNBQWM7QUFDckU7QUFDQSx3QkFBd0IsNkNBQVk7QUFDcEMsYUFBYSxlQUFlO0FBQzVCLGNBQWMsc0RBQUM7QUFDZiwyQkFBMkIsZ0RBQWUsVUFBVSxjQUFjO0FBQ2xFO0FBQ0Esd0JBQXdCLDZDQUFZO0FBQ3BDO0FBQ0EsWUFBWSxpQkFBaUIsRUFBRSxzREFBRSxHQUFHLFVBQVU7QUFDOUMsMkJBQTJCLGdEQUFlLGFBQWEsY0FBYztBQUNyRTtBQUNBLHdCQUF3Qiw2Q0FBWTtBQUNwQztBQUNBLFlBQVksaUJBQWlCLEVBQUUsc0RBQUU7QUFDakMsMkJBQTJCLGdEQUFlLGFBQWEsY0FBYztBQUNyRTtBQUNBLCtCQUErQixnREFBZSxVQUFVLHdGQUF3RixrQkFBa0IsZ0RBQWUsV0FBVyx1TUFBdU0sbUJBQW1CLGdEQUFlLFdBQVcscUdBQXFHLGdDQUFnQyxnREFBZSxVQUFVLHdGQUF3RixrQkFBa0IsZ0RBQWUsV0FBVyx1TUFBdU0sZ0NBQWdDLGdEQUFlLFVBQVUsd0ZBQXdGLGtCQUFrQixnREFBZTtBQUMza0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxnREFBZSxVQUFVLGdGQUFnRixrQkFBa0IsZ0RBQWU7QUFDMUs7QUFDQTtBQUNB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YSxzQkFBc0IsZ0RBQWUsV0FBVyw4QkFBOEI7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDBEQUFFLElBQUksMERBQUU7QUFDakI7QUFDQTtBQUNBO0FBQ0EsdUdBQXVHLEVBQUUsY0FBYyxFQUFFO0FBQ3pILDZCQUE2QixnREFBZSxRQUFRLGlGQUFpRjtBQUNySTtBQUNBLEdBQUc7QUFDSDtBQTBERTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdm9pY2UtYXNzaXN0YW50Mi8uL25vZGVfbW9kdWxlcy8ucG5wbS9AbGl2ZWtpdCtjb21wb25lbnRzLXJlYWN0QDJfZWRmZmIwZDdiMzVmN2RlOWFjZWM2NjdlZWVmMTY0YzAvbm9kZV9tb2R1bGVzL0BsaXZla2l0L2NvbXBvbmVudHMtcmVhY3QvZGlzdC9jb21wb25lbnRzLUJPOENMLWVrLm1qcz9kMzM4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGUgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VTdGF0ZSBhcyBBLCB1c2VSZWYgYXMgSSwgdXNlRWZmZWN0IGFzIFAsIHVzZU1lbW8gYXMgZ2UgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHUgYXMgdmUsIGEgYXMgSywgYiBhcyBwZSwgYyBhcyBFZSwgZCBhcyB3ZSwgZSBhcyBrZSwgZiBhcyBlZSwgZyBhcyB5ZSwgaCBhcyBNZSwgaSBhcyBSZSwgaiBhcyBiZSwgayBhcyBTZSwgbCBhcyB0ZSwgbSBhcyBDZSwgbiBhcyBJZSwgbyBhcyBQZSwgcCBhcyBUZSwgcSBhcyB4ZSwgciBhcyBBZSwgcyBhcyBhZSwgdCBhcyBOZSwgdiBhcyBMZSB9IGZyb20gXCIuL2hvb2tzLUM3UTc2QTNILm1qc1wiO1xuaW1wb3J0IHsgUm9vbUV2ZW50IGFzIFZlLCBUcmFjayBhcyB5LCBDb25uZWN0aW9uUXVhbGl0eSBhcyB6LCBSZW1vdGVUcmFja1B1YmxpY2F0aW9uIGFzIEgsIFJlbW90ZUF1ZGlvVHJhY2sgYXMgemUsIENvbm5lY3Rpb25TdGF0ZSBhcyBGIH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5pbXBvcnQgeyBhOSBhcyBPLCBhYSBhcyBuZSwgbCBhcyBULCB3IGFzIEZlLCBmIGFzIHJlLCBjIGFzIFplLCBhYiBhcyBIZSwgWCBhcyBCZSwgWSBhcyBqZSwgYTEgYXMgViwgYWMgYXMgY2UsIGFkIGFzIEwsIGFlIGFzIE9lLCBpIGFzIE4sIEIgYXMgX2UsIGFmIGFzIGxlLCBhZyBhcyBfLCBqIGFzICRlLCBhaCBhcyBxZSwgbSBhcyBXZSwgcCBhcyBvZSwgYWkgYXMgRGUsIGFqIGFzIFVlLCBhayBhcyBHZSwgYWwgYXMgUWUsIGFtIGFzIFhlIH0gZnJvbSBcIi4vY29udGV4dHMtRGppY0tKVXoubWpzXCI7XG5pbXBvcnQgeyBtIGFzIFllLCBjIGFzIEplIH0gZnJvbSBcIi4vcm9vbS1DMFFFc0d1aS5tanNcIjtcbmNvbnN0IG5hID0gLyogQF9fUFVSRV9fICovIGUuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24oYSwgbikge1xuICAgIGNvbnN0IHsgYnV0dG9uUHJvcHM6IHIgfSA9IHZlKGEpO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHsgcmVmOiBuLCAuLi5yIH0sIGEuY2hpbGRyZW4pO1xuICB9XG4pLCByYSA9IC8qIEBfX1BVUkVfXyAqLyBlLmZvcndhcmRSZWYoXG4gIGZ1bmN0aW9uKHsgcm9vbTogYSwgLi4ubiB9LCByKSB7XG4gICAgY29uc3QgYyA9IEsoYSk7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyByZWY6IHIsIC4uLm4gfSwgYyk7XG4gIH1cbiksIGNhID0gLyogQF9fUFVSRV9fICovIGUuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24oYSwgbikge1xuICAgIGNvbnN0IHsgbWVyZ2VkUHJvcHM6IHIgfSA9IHBlKHsgcHJvcHM6IGEgfSk7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgeyByZWY6IG4sIC4uLnIgfSwgYS5jaGlsZHJlbik7XG4gIH1cbiksIGxhID0gLyogQF9fUFVSRV9fICovIGUuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24oYSwgbikge1xuICAgIGNvbnN0IHsgYnV0dG9uUHJvcHM6IHIgfSA9IEVlKGEpO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHsgcmVmOiBuLCAuLi5yIH0sIGEuY2hpbGRyZW4pO1xuICB9XG4pLCBLZSA9ICh0KSA9PiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgd2lkdGg6IDE2LCBoZWlnaHQ6IDE2LCBmaWxsOiBcImN1cnJlbnRDb2xvclwiLCAuLi50IH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNMS4zNTQuNjQ2YS41LjUgMCAxIDAtLjcwOC43MDhsMTQgMTRhLjUuNSAwIDAgMCAuNzA4LS43MDhMMTEgMTAuMjkzVjQuNUExLjUgMS41IDAgMCAwIDkuNSAzSDMuNzA3ek0wIDQuNWExLjUgMS41IDAgMCAxIC45NDMtMS4zOTNsOS41MzIgOS41MzNjLS4yNjIuMjI0LS42MDMuMzYtLjk3NS4zNmgtOEExLjUgMS41IDAgMCAxIDAgMTEuNXpcIiB9KSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIm0xNS4yIDMuNi0yLjggMi4xYTEgMSAwIDAgMC0uNC44djNhMSAxIDAgMCAwIC40LjhsMi44IDIuMWEuNS41IDAgMCAwIC44LS40VjRhLjUuNSAwIDAgMC0uOC0uNHpcIiB9KSksIGV0ID0gKHQpID0+IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwiY3VycmVudENvbG9yXCIsIC4uLnQgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0wIDQuNUExLjUgMS41IDAgMCAxIDEuNSAzaDhBMS41IDEuNSAwIDAgMSAxMSA0LjV2N0ExLjUgMS41IDAgMCAxIDkuNSAxM2gtOEExLjUgMS41IDAgMCAxIDAgMTEuNXpNMTUuMiAzLjZsLTIuOCAyLjFhMSAxIDAgMCAwLS40Ljh2M2ExIDEgMCAwIDAgLjQuOGwyLjggMi4xYS41LjUgMCAwIDAgLjgtLjRWNGEuNS41IDAgMCAwLS44LS40elwiIH0pKSwgb2EgPSAodCkgPT4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInN2Z1wiLCB7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgdmlld0JveDogXCIwIDAgMjQgMjRcIiwgLi4udCB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiI0ZGRlwiLFxuICAgIGQ6IFwiTTQuOTkgMy45OWExIDEgMCAwIDAtLjY5NyAxLjcxN0wxMC41ODYgMTJsLTYuMjkzIDYuMjkzYTEgMSAwIDEgMCAxLjQxNCAxLjQxNEwxMiAxMy40MTRsNi4yOTMgNi4yOTNhMSAxIDAgMSAwIDEuNDE0LTEuNDE0TDEzLjQxNCAxMmw2LjI5My02LjI5M2ExIDEgMCAwIDAtLjcyNy0xLjcxNyAxIDEgMCAwIDAtLjY4Ny4zMDNMMTIgMTAuNTg2IDUuNzA3IDQuMjkzYTEgMSAwIDAgMC0uNzE3LS4zMDN6XCJcbiAgfVxuKSksIHNhID0gKHQpID0+IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTgsIGZpbGw6IFwibm9uZVwiLCAuLi50IH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNMCAyLjc1QTIuNzUgMi43NSAwIDAgMSAyLjc1IDBoMTAuNUEyLjc1IDIuNzUgMCAwIDEgMTYgMi43NXYxMy41OTRhLjc1Ljc1IDAgMCAxLTEuMjM0LjU3MmwtMy42OTEtMy4xMmExLjI1IDEuMjUgMCAwIDAtLjgwNy0uMjk2SDIuNzVBMi43NSAyLjc1IDAgMCAxIDAgMTAuNzV2LThaTTIuNzUgMS41Yy0uNjkgMC0xLjI1LjU2LTEuMjUgMS4yNXY4YzAgLjY5LjU2IDEuMjUgMS4yNSAxLjI1aDcuNTE4Yy42NSAwIDEuMjc5LjIzIDEuNzc1LjY1bDIuNDU3IDIuMDc3VjIuNzVjMC0uNjktLjU2LTEuMjUtMS4yNS0xLjI1SDIuNzVaXCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH1cbiksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNMyA0LjVhLjUuNSAwIDAgMSAuNS0uNWg5YS41LjUgMCAwIDEgMCAxaC05YS41LjUgMCAwIDEtLjUtLjVabTAgMmEuNS41IDAgMCAxIC41LS41aDlhLjUuNSAwIDAgMSAwIDFoLTlhLjUuNSAwIDAgMS0uNS0uNVptMCAyYS41LjUgMCAwIDEgLjUtLjVoNWEuNS41IDAgMCAxIDAgMWgtNWEuNS41IDAgMCAxLS41LS41WlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIlxuICB9XG4pKSwgRCA9ICh0KSA9PiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgd2lkdGg6IDE2LCBoZWlnaHQ6IDE2LCBmaWxsOiBcIm5vbmVcIiwgLi4udCB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudGNvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTUuMjkzIDIuMjkzYTEgMSAwIDAgMSAxLjQxNCAwbDQuODIzIDQuODIzYTEuMjUgMS4yNSAwIDAgMSAwIDEuNzY4bC00LjgyMyA0LjgyM2ExIDEgMCAwIDEtMS40MTQtMS40MTRMOS41ODYgOCA1LjI5MyAzLjcwN2ExIDEgMCAwIDEgMC0xLjQxNHpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCJcbiAgfVxuKSksIHR0ID0gKHQpID0+IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwibm9uZVwiLCAuLi50IH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJnXCIsIHsgc3Ryb2tlOiBcImN1cnJlbnRDb2xvclwiLCBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIsIHN0cm9rZUxpbmVqb2luOiBcInJvdW5kXCIsIHN0cm9rZVdpZHRoOiAxLjUgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0xMCAxLjc1aDQuMjVtMCAwVjZtMC00LjI1TDkgN002IDE0LjI1SDEuNzVtMCAwVjEwbTAgNC4yNUw3IDlcIiB9KSkpLCBpYSA9ICh0KSA9PiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgd2lkdGg6IDE2LCBoZWlnaHQ6IDE2LCBmaWxsOiBcIm5vbmVcIiwgLi4udCB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudGNvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTguOTYxLjg5NEM4Ljg3NS0uMjk4IDcuMTI1LS4yOTggNy4wNC44OTRjLS4wNjYuOTEyLTEuMjQ2IDEuMjI4LTEuNzYuNDcyLS42Ny0uOTktMi4xODYtLjExNS0xLjY2NC45Ni4zOTkuODI0LS40NjUgMS42ODgtMS4yODggMS4yODktMS4wNzYtLjUyMi0xLjk1Ljk5NC0uOTYxIDEuNjY1Ljc1Ni41MTMuNDQgMS42OTMtLjQ3MiAxLjc1OS0xLjE5Mi4wODYtMS4xOTIgMS44MzYgMCAxLjkyMi45MTIuMDY2IDEuMjI4IDEuMjQ2LjQ3MiAxLjc2LS45OS42Ny0uMTE1IDIuMTg2Ljk2IDEuNjY0LjgyNC0uMzk5IDEuNjg4LjQ2NSAxLjI4OSAxLjI4OC0uNTIyIDEuMDc2Ljk5NCAxLjk1IDEuNjY1Ljk2MS41MTMtLjc1NiAxLjY5My0uNDQgMS43NTkuNDcyLjA4NiAxLjE5MiAxLjgzNiAxLjE5MiAxLjkyMiAwIC4wNjYtLjkxMiAxLjI0Ni0xLjIyOCAxLjc2LS40NzIuNjcuOTkgMi4xODYuMTE1IDEuNjY0LS45Ni0uMzk5LS44MjQuNDY1LTEuNjg4IDEuMjg4LTEuMjg5IDEuMDc2LjUyMiAxLjk1LS45OTQuOTYxLTEuNjY1LS43NTYtLjUxMy0uNDQtMS42OTMuNDcyLTEuNzU5IDEuMTkyLS4wODYgMS4xOTItMS44MzYgMC0xLjkyMi0uOTEyLS4wNjYtMS4yMjgtMS4yNDYtLjQ3Mi0xLjc2Ljk5LS42Ny4xMTUtMi4xODYtLjk2LTEuNjY0LS44MjQuMzk5LTEuNjg4LS40NjUtMS4yODktMS4yODguNTIyLTEuMDc2LS45OTQtMS45NS0xLjY2NS0uOTYxLS41MTMuNzU2LTEuNjkzLjQ0LTEuNzU5LS40NzJaTTggMTNBNSA1IDAgMSAwIDggM2E1IDUgMCAwIDAgMCAxMFpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCJcbiAgfVxuKSksIHVhID0gKHQpID0+IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwibm9uZVwiLCAuLi50IH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNMiAyLjc1QTIuNzUgMi43NSAwIDAgMSA0Ljc1IDBoNi41QTIuNzUgMi43NSAwIDAgMSAxNCAyLjc1djEwLjVBMi43NSAyLjc1IDAgMCAxIDExLjI1IDE2aC02LjVBMi43NSAyLjc1IDAgMCAxIDIgMTMuMjV2LS41YS43NS43NSAwIDAgMSAxLjUgMHYuNWMwIC42OS41NiAxLjI1IDEuMjUgMS4yNWg2LjVjLjY5IDAgMS4yNS0uNTYgMS4yNS0xLjI1VjIuNzVjMC0uNjktLjU2LTEuMjUtMS4yNS0xLjI1aC02LjVjLS42OSAwLTEuMjUuNTYtMS4yNSAxLjI1di41YS43NS43NSAwIDAgMS0xLjUgMHYtLjVaXCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH1cbiksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNOC43OCA3LjQ3YS43NS43NSAwIDAgMSAwIDEuMDZsLTIuMjUgMi4yNWEuNzUuNzUgMCAxIDEtMS4wNi0xLjA2bC45Ny0uOTdIMS43NWEuNzUuNzUgMCAwIDEgMC0xLjVoNC42OWwtLjk3LS45N2EuNzUuNzUgMCAwIDEgMS4wNi0xLjA2bDIuMjUgMi4yNVpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCJcbiAgfVxuKSksIGF0ID0gKHQpID0+IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwibm9uZVwiLCAuLi50IH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Y29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNNCA2LjEwNFY0YTQgNCAwIDEgMSA4IDB2Mi4xMDRjMS4xNTQuMzI2IDIgMS4zODcgMiAyLjY0NnY0LjVBMi43NSAyLjc1IDAgMCAxIDExLjI1IDE2aC02LjVBMi43NSAyLjc1IDAgMCAxIDIgMTMuMjV2LTQuNWMwLTEuMjU5Ljg0Ni0yLjMyIDItMi42NDZaTTUuNSA0YTIuNSAyLjUgMCAwIDEgNSAwdjJoLTVWNFpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCJcbiAgfVxuKSksIG50ID0gKHQpID0+IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwiY3VycmVudENvbG9yXCIsIC4uLnQgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0xMi4yMjcgMTEuNTJhNS40NzcgNS40NzcgMCAwIDAgMS4yNDYtMi45Ny41LjUgMCAwIDAtLjk5NS0uMSA0LjQ3OCA0LjQ3OCAwIDAgMS0uOTYyIDIuMzU5bC0xLjA3LTEuMDdDMTAuNzk0IDkuMjQ3IDExIDguNjQ3IDExIDhWM2EzIDMgMCAwIDAtNiAwdjEuMjkzTDEuMzU0LjY0NmEuNS41IDAgMSAwLS43MDguNzA4bDE0IDE0YS41LjUgMCAwIDAgLjcwOC0uNzA4ek04IDEyLjVjLjY4MyAwIDEuMzMtLjE1MiAxLjkxMS0uNDI1bC43NDMuNzQzYy0uNjQ5LjM1OS0xLjM3OC41OS0yLjE1NC42NlYxNWgyYS41LjUgMCAwIDEgMCAxaC01YS41LjUgMCAwIDEgMC0xaDJ2LTEuNTIyYTUuNTAyIDUuNTAyIDAgMCAxLTQuOTczLTQuOTI5LjUuNSAwIDAgMSAuOTk1LS4wOThBNC41IDQuNSAwIDAgMCA4IDEyLjV6XCIgfSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNOC43NDMgMTAuOTA3IDUgNy4xNjRWOGEzIDMgMCAwIDAgMy43NDMgMi45MDd6XCIgfSkpLCBydCA9ICh0KSA9PiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgd2lkdGg6IDE2LCBoZWlnaHQ6IDE2LCBmaWxsOiBcImN1cnJlbnRDb2xvclwiLCAuLi50IH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTIuOTc1IDguMDAyYS41LjUgMCAwIDEgLjU0Ny40NDkgNC41IDQuNSAwIDAgMCA4Ljk1NiAwIC41LjUgMCAxIDEgLjk5NS4wOThBNS41MDIgNS41MDIgMCAwIDEgOC41IDEzLjQ3OFYxNWgyYS41LjUgMCAwIDEgMCAxaC01YS41LjUgMCAwIDEgMC0xaDJ2LTEuNTIyYTUuNTAyIDUuNTAyIDAgMCAxLTQuOTczLTQuOTI5LjUuNSAwIDAgMSAuNDQ4LS41NDd6XCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH1cbiksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNNSAzYTMgMyAwIDEgMSA2IDB2NWEzIDMgMCAwIDEtNiAwelwiIH0pKSwgY3QgPSAodCkgPT4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInN2Z1wiLCB7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgZmlsbDogXCJjdXJyZW50Y29sb3JcIiwgLi4udCB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTAgMTEuNWEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djRhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6bTYtNWEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djlhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6bTYtNmEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djE1YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41elwiIH0pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTAgMTEuNWEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djRhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6bTYtNWEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djlhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6bTYtNmEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djE1YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41elwiIH0pKSwgbHQgPSAodCkgPT4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInN2Z1wiLCB7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgZmlsbDogXCJjdXJyZW50Y29sb3JcIiwgLi4udCB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTAgMTEuNWEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djRhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6bTYtNWEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djlhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6XCIgfSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNMCAxMS41YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2NGEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXptNi01YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2OWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXpcIiB9KSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImdcIiwgeyBvcGFjaXR5OiAwLjI1IH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNMTIgLjVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXYxNWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXpcIiB9KSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0xMiAuNWEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djE1YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41elwiIH0pKSksIG90ID0gKHQpID0+IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwiY3VycmVudGNvbG9yXCIsIC4uLnQgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0wIDExLjVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY0YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41elwiIH0pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTAgMTEuNWEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djRhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6XCIgfSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJnXCIsIHsgb3BhY2l0eTogMC4yNSB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTYgNi41YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2OWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXpcIiB9KSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk02IDYuNWEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djlhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6bTYtNmEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djE1YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41elwiIH0pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTEyIC41YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2MTVhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6XCIgfSkpKSwgc3QgPSAodCkgPT4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInN2Z1wiLCB7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgZmlsbDogXCJjdXJyZW50Q29sb3JcIiwgLi4udCB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7IG9wYWNpdHk6IDAuMjUgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0wIDExLjVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY0YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41di00Wm02LTVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY5YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41di05Wm02LTZhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXYxNWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNVYuNVpcIiB9KSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0wIDExLjVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY0YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41di00Wm02LTVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY5YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41di05Wm02LTZhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXYxNWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNVYuNVpcIiB9KSkpLCBzZSA9ICh0KSA9PiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgd2lkdGg6IDIwLCBoZWlnaHQ6IDE2LCBmaWxsOiBcIm5vbmVcIiwgLi4udCB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTAgMi43NUEyLjc1IDIuNzUgMCAwIDEgMi43NSAwaDE0LjVBMi43NSAyLjc1IDAgMCAxIDIwIDIuNzV2MTAuNUEyLjc1IDIuNzUgMCAwIDEgMTcuMjUgMTZIMi43NUEyLjc1IDIuNzUgMCAwIDEgMCAxMy4yNVYyLjc1Wk0yLjc1IDEuNWMtLjY5IDAtMS4yNS41Ni0xLjI1IDEuMjV2MTAuNWMwIC42OS41NiAxLjI1IDEuMjUgMS4yNWgxNC41Yy42OSAwIDEuMjUtLjU2IDEuMjUtMS4yNVYyLjc1YzAtLjY5LS41Ni0xLjI1LTEuMjUtMS4yNUgyLjc1WlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIlxuICB9XG4pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTkuNDcgNC4yMmEuNzUuNzUgMCAwIDEgMS4wNiAwbDIuMjUgMi4yNWEuNzUuNzUgMCAwIDEtMS4wNiAxLjA2bC0uOTctLjk3djQuNjlhLjc1Ljc1IDAgMCAxLTEuNSAwVjYuNTZsLS45Ny45N2EuNzUuNzUgMCAwIDEtMS4wNi0xLjA2bDIuMjUtMi4yNVpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCJcbiAgfVxuKSksIGl0ID0gKHQpID0+IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMjAsIGhlaWdodDogMTYsIGZpbGw6IFwibm9uZVwiLCAuLi50IH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJnXCIsIHsgZmlsbDogXCJjdXJyZW50Q29sb3JcIiB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTcuMjggNC4yMmEuNzUuNzUgMCAwIDAtMS4wNiAxLjA2TDguOTQgOGwtMi43MiAyLjcyYS43NS43NSAwIDEgMCAxLjA2IDEuMDZMMTAgOS4wNmwyLjcyIDIuNzJhLjc1Ljc1IDAgMSAwIDEuMDYtMS4wNkwxMS4wNiA4bDIuNzItMi43MmEuNzUuNzUgMCAwIDAtMS4wNi0xLjA2TDEwIDYuOTR6XCIgfSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTIuNzUgMEEyLjc1IDIuNzUgMCAwIDAgMCAyLjc1djEwLjVBMi43NSAyLjc1IDAgMCAwIDIuNzUgMTZoMTQuNUEyLjc1IDIuNzUgMCAwIDAgMjAgMTMuMjVWMi43NUEyLjc1IDIuNzUgMCAwIDAgMTcuMjUgMHpNMS41IDIuNzVjMC0uNjkuNTYtMS4yNSAxLjI1LTEuMjVoMTQuNWMuNjkgMCAxLjI1LjU2IDEuMjUgMS4yNXYxMC41YzAgLjY5LS41NiAxLjI1LTEuMjUgMS4yNUgyLjc1Yy0uNjkgMC0xLjI1LS41Ni0xLjI1LTEuMjV6XCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH1cbikpKSwgVSA9ICh0KSA9PiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgd2lkdGg6IDE2LCBoZWlnaHQ6IDE2LCBmaWxsOiBcIm5vbmVcIiwgLi4udCB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTggMGEuNzUuNzUgMCAwIDEgLjc1Ljc1djIuNWEuNzUuNzUgMCAwIDEtMS41IDBWLjc1QS43NS43NSAwIDAgMSA4IDBaXCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH1cbiksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNOCAxMmEuNzUuNzUgMCAwIDEgLjc1Ljc1djIuNWEuNzUuNzUgMCAwIDEtMS41IDB2LTIuNUEuNzUuNzUgMCAwIDEgOCAxMlpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCIsXG4gICAgb3BhY2l0eTogMC43XG4gIH1cbiksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNMTIgMS4wNzJhLjc1Ljc1IDAgMCAxIC4yNzQgMS4wMjRsLTEuMjUgMi4xNjVhLjc1Ljc1IDAgMCAxLTEuMjk5LS43NWwxLjI1LTIuMTY1QS43NS43NSAwIDAgMSAxMiAxLjA3MlpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCJcbiAgfVxuKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk02IDExLjQ2NGEuNzUuNzUgMCAwIDEgLjI3NCAxLjAyNWwtMS4yNSAyLjE2NWEuNzUuNzUgMCAwIDEtMS4yOTktLjc1bDEuMjUtMi4xNjVBLjc1Ljc1IDAgMCAxIDYgMTEuNDY0WlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBvcGFjaXR5OiAwLjZcbiAgfVxuKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk0xNC45MjggNGEuNzUuNzUgMCAwIDEtLjI3NCAxLjAyNWwtMi4xNjUgMS4yNWEuNzUuNzUgMCAxIDEtLjc1LTEuM2wyLjE2NS0xLjI1QS43NS43NSAwIDAgMSAxNC45MjggNFpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCJcbiAgfVxuKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk00LjUzNiAxMGEuNzUuNzUgMCAwIDEtLjI3NSAxLjAyNGwtMi4xNjUgMS4yNWEuNzUuNzUgMCAwIDEtLjc1LTEuMjk4bDIuMTY1LTEuMjVBLjc1Ljc1IDAgMCAxIDQuNTM2IDEwWlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBvcGFjaXR5OiAwLjVcbiAgfVxuKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk0xNiA4YS43NS43NSAwIDAgMS0uNzUuNzVoLTIuNWEuNzUuNzUgMCAwIDEgMC0xLjVoMi41QS43NS43NSAwIDAgMSAxNiA4WlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIlxuICB9XG4pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTQgOGEuNzUuNzUgMCAwIDEtLjc1Ljc1SC43NWEuNzUuNzUgMCAwIDEgMC0xLjVoMi41QS43NS43NSAwIDAgMSA0IDhaXCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIG9wYWNpdHk6IDAuNFxuICB9XG4pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTE0LjkyOCAxMmEuNzUuNzUgMCAwIDEtMS4wMjQuMjc0bC0yLjE2NS0xLjI1YS43NS43NSAwIDAgMSAuNzUtMS4yOTlsMi4xNjUgMS4yNUEuNzUuNzUgMCAwIDEgMTQuOTI4IDEyWlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBvcGFjaXR5OiAwLjlcbiAgfVxuKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk00LjUzNiA2YS43NS43NSAwIDAgMS0xLjAyNS4yNzVsLTIuMTY1LTEuMjVhLjc1Ljc1IDAgMSAxIC43NS0xLjNsMi4xNjUgMS4yNUEuNzUuNzUgMCAwIDEgNC41MzYgNlpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCIsXG4gICAgb3BhY2l0eTogMC4zXG4gIH1cbiksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNMTIgMTQuOTI4YS43NS43NSAwIDAgMS0xLjAyNC0uMjc0bC0xLjI1LTIuMTY1YS43NS43NSAwIDAgMSAxLjI5OC0uNzVsMS4yNSAyLjE2NUEuNzUuNzUgMCAwIDEgMTIgMTQuOTI4WlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBvcGFjaXR5OiAwLjhcbiAgfVxuKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk02IDQuNTM2YS43NS43NSAwIDAgMS0xLjAyNC0uMjc1bC0xLjI1LTIuMTY1YS43NS43NSAwIDEgMSAxLjI5OS0uNzVsMS4yNSAyLjE2NUEuNzUuNzUgMCAwIDEgNiA0LjUzNlpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCIsXG4gICAgb3BhY2l0eTogMC4yXG4gIH1cbikpLCB1dCA9ICh0KSA9PiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgd2lkdGg6IDE2LCBoZWlnaHQ6IDE2LCBmaWxsOiBcIm5vbmVcIiwgLi4udCB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7IHN0cm9rZTogXCJjdXJyZW50Q29sb3JcIiwgc3Ryb2tlTGluZWNhcDogXCJyb3VuZFwiLCBzdHJva2VMaW5lam9pbjogXCJyb3VuZFwiLCBzdHJva2VXaWR0aDogMS41IH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNMTMuMjUgN0g5bTAgMFYyLjc1TTkgN2w1LjI1LTUuMjVNMi43NSA5SDdtMCAwdjQuMjVNNyA5bC01LjI1IDUuMjVcIiB9KSkpLCBkdCA9IC8qIEBfX1BVUkVfXyAqLyBlLmZvcndhcmRSZWYoXG4gIGZ1bmN0aW9uKHsgdHJhY2tSZWY6IGEsIC4uLm4gfSwgcikge1xuICAgIGNvbnN0IGMgPSBPKCksIHsgbWVyZ2VkUHJvcHM6IHMsIGluRm9jdXM6IGkgfSA9IHdlKHtcbiAgICAgIHRyYWNrUmVmOiBhID8/IGMsXG4gICAgICBwcm9wczogblxuICAgIH0pO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KG5lLkNvbnN1bWVyLCBudWxsLCAobCkgPT4gbCAhPT0gdm9pZCAwICYmIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgeyByZWY6IHIsIC4uLnMgfSwgbi5jaGlsZHJlbiA/IG4uY2hpbGRyZW4gOiBpID8gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudCh1dCwgbnVsbCkgOiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KHR0LCBudWxsKSkpO1xuICB9XG4pO1xuZnVuY3Rpb24gbXQodCkge1xuICByZXR1cm4gdCAhPT0gdm9pZCAwO1xufVxuZnVuY3Rpb24gUiguLi50KSB7XG4gIHJldHVybiBZZSguLi50LmZpbHRlcihtdCkpO1xufVxuZnVuY3Rpb24gJCh0LCBhLCBuKSB7XG4gIHJldHVybiBlLkNoaWxkcmVuLm1hcCh0LCAocikgPT4gZS5pc1ZhbGlkRWxlbWVudChyKSAmJiBlLkNoaWxkcmVuLm9ubHkodCkgPyAoci5wcm9wcy5jbGFzcyAmJiAoYSA/PyAoYSA9IHt9KSwgYS5jbGFzcyA9IEplKHIucHJvcHMuY2xhc3MsIGEuY2xhc3MpLCBhLnN0eWxlID0geyAuLi5yLnByb3BzLnN0eWxlLCAuLi5hLnN0eWxlIH0pLCBlLmNsb25lRWxlbWVudChyLCB7IC4uLmEsIGtleTogbiB9KSkgOiByKTtcbn1cbmZ1bmN0aW9uIGRhKHQpIHtcbiAgdmFyIGEsIG47XG4gIGlmICh0eXBlb2Ygd2luZG93IDwgXCJ1XCIgJiYgdHlwZW9mIHByb2Nlc3MgPCBcInVcIiAmJiAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdHVyYm8vbm8tdW5kZWNsYXJlZC1lbnYtdmFyc1xuICAoKChhID0gcHJvY2VzcyA9PSBudWxsID8gdm9pZCAwIDogcHJvY2Vzcy5lbnYpID09IG51bGwgPyB2b2lkIDAgOiBhLk5PREVfRU5WKSA9PT0gXCJkZXZcIiB8fCAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdHVyYm8vbm8tdW5kZWNsYXJlZC1lbnYtdmFyc1xuICAoKG4gPSBwcm9jZXNzID09IG51bGwgPyB2b2lkIDAgOiBwcm9jZXNzLmVudikgPT0gbnVsbCA/IHZvaWQgMCA6IG4uTk9ERV9FTlYpID09PSBcImRldmVsb3BtZW50XCIpKSB7XG4gICAgY29uc3QgciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubGstcm9vbS1jb250YWluZXJcIik7XG4gICAgciAmJiAhZ2V0Q29tcHV0ZWRTdHlsZShyKS5nZXRQcm9wZXJ0eVZhbHVlKFwiLS1say1oYXMtaW1wb3J0ZWQtc3R5bGVzXCIpICYmIFQud2FybihcbiAgICAgIFwiSXQgbG9va3MgbGlrZSB5b3UncmUgbm90IHVzaW5nIHRoZSBgQGxpdmVraXQvY29tcG9uZW50cy1zdHlsZXMgcGFja2FnZWAuIFRvIHJlbmRlciB0aGUgVUkgd2l0aCB0aGUgZGVmYXVsdCBzdHlsaW5nLCBwbGVhc2UgaW1wb3J0IGl0IGluIHlvdXIgbGF5b3V0IG9yIHBhZ2UuXCJcbiAgICApO1xuICB9XG59XG5jb25zdCBtYSA9IC8qIEBfX1BVUkVfXyAqLyBlLmZvcndhcmRSZWYoXG4gIGZ1bmN0aW9uKHtcbiAgICBraW5kOiBhLFxuICAgIGluaXRpYWxTZWxlY3Rpb246IG4sXG4gICAgb25BY3RpdmVEZXZpY2VDaGFuZ2U6IHIsXG4gICAgb25EZXZpY2VMaXN0Q2hhbmdlOiBjLFxuICAgIG9uRGV2aWNlU2VsZWN0RXJyb3I6IHMsXG4gICAgZXhhY3RNYXRjaDogaSxcbiAgICB0cmFjazogbCxcbiAgICByZXF1ZXN0UGVybWlzc2lvbnM6IG8sXG4gICAgb25FcnJvcjogdSxcbiAgICAuLi5kXG4gIH0sIGYpIHtcbiAgICBjb25zdCBtID0gRmUoKSwgcCA9IGUudXNlQ2FsbGJhY2soXG4gICAgICAodykgPT4ge1xuICAgICAgICBtICYmIG0uZW1pdChWZS5NZWRpYURldmljZXNFcnJvciwgdyksIHUgPT0gbnVsbCB8fCB1KHcpO1xuICAgICAgfSxcbiAgICAgIFttLCB1XVxuICAgICksIHsgZGV2aWNlczogRSwgYWN0aXZlRGV2aWNlSWQ6IGgsIHNldEFjdGl2ZU1lZGlhRGV2aWNlOiBnLCBjbGFzc05hbWU6IGsgfSA9IGtlKHtcbiAgICAgIGtpbmQ6IGEsXG4gICAgICByb29tOiBtLFxuICAgICAgdHJhY2s6IGwsXG4gICAgICByZXF1ZXN0UGVybWlzc2lvbnM6IG8sXG4gICAgICBvbkVycm9yOiBwXG4gICAgfSk7XG4gICAgZS51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgbiAhPT0gdm9pZCAwICYmIGcobik7XG4gICAgfSwgW2ddKSwgZS51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgdHlwZW9mIGMgPT0gXCJmdW5jdGlvblwiICYmIGMoRSk7XG4gICAgfSwgW2MsIEVdKSwgZS51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgaCAmJiBoICE9PSBcIlwiICYmIChyID09IG51bGwgfHwgcihoKSk7XG4gICAgfSwgW2hdKTtcbiAgICBjb25zdCBDID0gYXN5bmMgKHcpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGcodywgeyBleGFjdDogaSB9KTtcbiAgICAgIH0gY2F0Y2ggKHYpIHtcbiAgICAgICAgaWYgKHYgaW5zdGFuY2VvZiBFcnJvcilcbiAgICAgICAgICBzID09IG51bGwgfHwgcyh2KTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHRocm93IHY7XG4gICAgICB9XG4gICAgfSwgYiA9IGUudXNlTWVtbyhcbiAgICAgICgpID0+IFIoZCwgeyBjbGFzc05hbWU6IGsgfSwgeyBjbGFzc05hbWU6IFwibGstbGlzdFwiIH0pLFxuICAgICAgW2ssIGRdXG4gICAgKTtcbiAgICBmdW5jdGlvbiBTKHcsIHYsIE0pIHtcbiAgICAgIHJldHVybiB3ID09PSB2IHx8IE0gPT09IDAgJiYgdiA9PT0gXCJkZWZhdWx0XCI7XG4gICAgfVxuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwidWxcIiwgeyByZWY6IGYsIC4uLmIgfSwgRS5tYXAoKHcsIHYpID0+IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gICAgICBcImxpXCIsXG4gICAgICB7XG4gICAgICAgIGtleTogdy5kZXZpY2VJZCxcbiAgICAgICAgaWQ6IHcuZGV2aWNlSWQsXG4gICAgICAgIFwiZGF0YS1say1hY3RpdmVcIjogUyh3LmRldmljZUlkLCBoLCB2KSxcbiAgICAgICAgXCJhcmlhLXNlbGVjdGVkXCI6IFMody5kZXZpY2VJZCwgaCwgdiksXG4gICAgICAgIHJvbGU6IFwib3B0aW9uXCJcbiAgICAgIH0sXG4gICAgICAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHsgY2xhc3NOYW1lOiBcImxrLWJ1dHRvblwiLCBvbkNsaWNrOiAoKSA9PiBDKHcuZGV2aWNlSWQpIH0sIHcubGFiZWwpXG4gICAgKSkpO1xuICB9XG4pLCBmYSA9IC8qIEBfX1BVUkVfXyAqLyBlLmZvcndhcmRSZWYoXG4gIGZ1bmN0aW9uKHsgbGFiZWw6IGEgPSBcIkFsbG93IEF1ZGlvXCIsIC4uLm4gfSwgcikge1xuICAgIGNvbnN0IGMgPSByZSgpLCB7IG1lcmdlZFByb3BzOiBzIH0gPSBlZSh7IHJvb206IGMsIHByb3BzOiBuIH0pO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHsgcmVmOiByLCAuLi5zIH0sIGEpO1xuICB9XG4pLCBoYSA9IC8qIEBfX1BVUkVfXyAqLyBlLmZvcndhcmRSZWYoXG4gIGZ1bmN0aW9uKHsgbGFiZWw6IGEsIC4uLm4gfSwgcikge1xuICAgIGNvbnN0IGMgPSByZSgpLCB7IG1lcmdlZFByb3BzOiBzLCBjYW5QbGF5QXVkaW86IGkgfSA9IGVlKHsgcm9vbTogYywgcHJvcHM6IG4gfSksIHsgbWVyZ2VkUHJvcHM6IGwsIGNhblBsYXlWaWRlbzogbyB9ID0geWUoeyByb29tOiBjLCBwcm9wczogcyB9KSwgeyBzdHlsZTogdSwgLi4uZCB9ID0gbDtcbiAgICByZXR1cm4gdS5kaXNwbGF5ID0gaSAmJiBvID8gXCJub25lXCIgOiBcImJsb2NrXCIsIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgeyByZWY6IHIsIHN0eWxlOiB1LCAuLi5kIH0sIGEgPz8gYFN0YXJ0ICR7aSA/IFwiVmlkZW9cIiA6IFwiQXVkaW9cIn1gKTtcbiAgfVxuKTtcbmZ1bmN0aW9uIGllKHQsIGEpIHtcbiAgc3dpdGNoICh0KSB7XG4gICAgY2FzZSB5LlNvdXJjZS5NaWNyb3Bob25lOlxuICAgICAgcmV0dXJuIGEgPyAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KHJ0LCBudWxsKSA6IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQobnQsIG51bGwpO1xuICAgIGNhc2UgeS5Tb3VyY2UuQ2FtZXJhOlxuICAgICAgcmV0dXJuIGEgPyAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGV0LCBudWxsKSA6IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoS2UsIG51bGwpO1xuICAgIGNhc2UgeS5Tb3VyY2UuU2NyZWVuU2hhcmU6XG4gICAgICByZXR1cm4gYSA/IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoaXQsIG51bGwpIDogLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChzZSwgbnVsbCk7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybjtcbiAgfVxufVxuZnVuY3Rpb24gZnQodCkge1xuICBzd2l0Y2ggKHQpIHtcbiAgICBjYXNlIHouRXhjZWxsZW50OlxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoY3QsIG51bGwpO1xuICAgIGNhc2Ugei5Hb29kOlxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQobHQsIG51bGwpO1xuICAgIGNhc2Ugei5Qb29yOlxuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQob3QsIG51bGwpO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChzdCwgbnVsbCk7XG4gIH1cbn1cbmNvbnN0IGdhID0gLyogQF9fUFVSRV9fICovIGUuZm9yd2FyZFJlZihmdW5jdGlvbih7IHNob3dJY29uOiBhLCAuLi5uIH0sIHIpIHtcbiAgY29uc3QgeyBidXR0b25Qcm9wczogYywgZW5hYmxlZDogcyB9ID0gTWUobik7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHsgcmVmOiByLCAuLi5jIH0sIChhID8/ICEwKSAmJiBpZShuLnNvdXJjZSwgcyksIG4uY2hpbGRyZW4pO1xufSksIHVlID0gLyogQF9fUFVSRV9fICovIGUuZm9yd2FyZFJlZihmdW5jdGlvbihhLCBuKSB7XG4gIGNvbnN0IHsgY2xhc3NOYW1lOiByLCBxdWFsaXR5OiBjIH0gPSBSZShhKSwgcyA9IGUudXNlTWVtbygoKSA9PiAoeyAuLi5SKGEsIHsgY2xhc3NOYW1lOiByIH0pLCBcImRhdGEtbGstcXVhbGl0eVwiOiBjIH0pLCBbYywgYSwgcl0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHJlZjogbiwgLi4ucyB9LCBhLmNoaWxkcmVuID8/IGZ0KGMpKTtcbn0pLCBCID0gLyogQF9fUFVSRV9fICovIGUuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24oeyBwYXJ0aWNpcGFudDogYSwgLi4ubiB9LCByKSB7XG4gICAgY29uc3QgYyA9IFplKGEpLCB7IGNsYXNzTmFtZTogcywgaW5mb09ic2VydmVyOiBpIH0gPSBlLnVzZU1lbW8oKCkgPT4gSGUoYyksIFtjXSksIHsgaWRlbnRpdHk6IGwsIG5hbWU6IG8gfSA9IGJlKGksIHtcbiAgICAgIG5hbWU6IGMubmFtZSxcbiAgICAgIGlkZW50aXR5OiBjLmlkZW50aXR5LFxuICAgICAgbWV0YWRhdGE6IGMubWV0YWRhdGFcbiAgICB9KSwgdSA9IGUudXNlTWVtbygoKSA9PiBSKG4sIHsgY2xhc3NOYW1lOiBzLCBcImRhdGEtbGstcGFydGljaXBhbnQtbmFtZVwiOiBvIH0pLCBbbiwgcywgb10pO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IHJlZjogciwgLi4udSB9LCBvICE9PSBcIlwiID8gbyA6IGwsIG4uY2hpbGRyZW4pO1xuICB9XG4pLCBkZSA9IC8qIEBfX1BVUkVfXyAqLyBlLmZvcndhcmRSZWYoXG4gIGZ1bmN0aW9uKHsgdHJhY2tSZWY6IGEsIHNob3c6IG4gPSBcImFsd2F5c1wiLCAuLi5yIH0sIGMpIHtcbiAgICBjb25zdCB7IGNsYXNzTmFtZTogcywgaXNNdXRlZDogaSB9ID0gU2UoYSksIGwgPSBuID09PSBcImFsd2F5c1wiIHx8IG4gPT09IFwibXV0ZWRcIiAmJiBpIHx8IG4gPT09IFwidW5tdXRlZFwiICYmICFpLCBvID0gZS51c2VNZW1vKFxuICAgICAgKCkgPT4gUihyLCB7XG4gICAgICAgIGNsYXNzTmFtZTogc1xuICAgICAgfSksXG4gICAgICBbcywgcl1cbiAgICApO1xuICAgIHJldHVybiBsID8gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHJlZjogYywgLi4ubywgXCJkYXRhLWxrLW11dGVkXCI6IGkgfSwgci5jaGlsZHJlbiA/PyBpZShhLnNvdXJjZSwgIWkpKSA6IG51bGw7XG4gIH1cbiksIGh0ID0gKHQpID0+IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gIFwic3ZnXCIsXG4gIHtcbiAgICB3aWR0aDogMzIwLFxuICAgIGhlaWdodDogMzIwLFxuICAgIHZpZXdCb3g6IFwiMCAwIDMyMCAzMjBcIixcbiAgICBwcmVzZXJ2ZUFzcGVjdFJhdGlvOiBcInhNaWRZTWlkIG1lZXRcIixcbiAgICBmaWxsOiBcIm5vbmVcIixcbiAgICB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFxuICAgIC4uLnRcbiAgfSxcbiAgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgICBcInBhdGhcIixcbiAgICB7XG4gICAgICBkOiBcIk0xNjAgMTgwQzIwNC4xODIgMTgwIDI0MCAxNDQuMTgzIDI0MCAxMDBDMjQwIDU1LjgxNzIgMjA0LjE4MiAyMCAxNjAgMjBDMTE1LjgxNyAyMCA3OS45OTk3IDU1LjgxNzIgNzkuOTk5NyAxMDBDNzkuOTk5NyAxNDQuMTgzIDExNS44MTcgMTgwIDE2MCAxODBaXCIsXG4gICAgICBmaWxsOiBcIndoaXRlXCIsXG4gICAgICBmaWxsT3BhY2l0eTogMC4yNVxuICAgIH1cbiAgKSxcbiAgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgICBcInBhdGhcIixcbiAgICB7XG4gICAgICBkOiBcIk05Ny42NTQyIDE5NC42MTRDMTAzLjI2NyAxOTEuODE4IDEwOS44NDEgMTkyLjQ4MSAxMTUuNTE5IDE5NS4xNDFDMTI5LjAyNSAyMDEuNDY2IDE0NC4xIDIwNSAxNTkuOTk5IDIwNUMxNzUuODk5IDIwNSAxOTAuOTczIDIwMS40NjYgMjA0LjQ4IDE5NS4xNDFDMjEwLjE1OCAxOTIuNDgxIDIxNi43MzIgMTkxLjgxOCAyMjIuMzQ1IDE5NC42MTRDMjYyLjcwMyAyMTQuNzE5IDI5MS45ODUgMjUzLjczNiAyOTguNTkxIDMwMC4wNjJDMzAwLjE1IDMxMC45OTcgMjkxLjA0NSAzMjAgMjgwIDMyMEgzOS45OTk3QzI4Ljk1NCAzMjAgMTkuODQ5NSAzMTAuOTk3IDIxLjQwODcgMzAwLjA2MkMyOC4wMTQgMjUzLjczNiA1Ny4yOTY2IDIxNC43MiA5Ny42NTQyIDE5NC42MTRaXCIsXG4gICAgICBmaWxsOiBcIndoaXRlXCIsXG4gICAgICBmaWxsT3BhY2l0eTogMC4yNVxuICAgIH1cbiAgKVxuKTtcbmZ1bmN0aW9uIG1lKHQsIGEgPSB7fSkge1xuICBjb25zdCBbbiwgcl0gPSBlLnVzZVN0YXRlKEJlKHQpKSwgW2MsIHNdID0gZS51c2VTdGF0ZShuID09IG51bGwgPyB2b2lkIDAgOiBuLmlzTXV0ZWQpLCBbaSwgbF0gPSBlLnVzZVN0YXRlKG4gPT0gbnVsbCA/IHZvaWQgMCA6IG4uaXNTdWJzY3JpYmVkKSwgW28sIHVdID0gZS51c2VTdGF0ZShuID09IG51bGwgPyB2b2lkIDAgOiBuLnRyYWNrKSwgW2QsIGZdID0gZS51c2VTdGF0ZShcImxhbmRzY2FwZVwiKSwgbSA9IGUudXNlUmVmKCksIHsgY2xhc3NOYW1lOiBwLCB0cmFja09ic2VydmVyOiBFIH0gPSBlLnVzZU1lbW8oKCkgPT4gamUodCksIFtcbiAgICB0LnBhcnRpY2lwYW50LnNpZCA/PyB0LnBhcnRpY2lwYW50LmlkZW50aXR5LFxuICAgIHQuc291cmNlLFxuICAgIFYodCkgJiYgdC5wdWJsaWNhdGlvbi50cmFja1NpZFxuICBdKTtcbiAgcmV0dXJuIGUudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoID0gRS5zdWJzY3JpYmUoKGcpID0+IHtcbiAgICAgIFQuZGVidWcoXCJ1cGRhdGUgdHJhY2tcIiwgZyksIHIoZyksIHMoZyA9PSBudWxsID8gdm9pZCAwIDogZy5pc011dGVkKSwgbChnID09IG51bGwgPyB2b2lkIDAgOiBnLmlzU3Vic2NyaWJlZCksIHUoZyA9PSBudWxsID8gdm9pZCAwIDogZy50cmFjayk7XG4gICAgfSk7XG4gICAgcmV0dXJuICgpID0+IGggPT0gbnVsbCA/IHZvaWQgMCA6IGgudW5zdWJzY3JpYmUoKTtcbiAgfSwgW0VdKSwgZS51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHZhciBoLCBnO1xuICAgIHJldHVybiBvICYmIChtLmN1cnJlbnQgJiYgby5kZXRhY2gobS5jdXJyZW50KSwgKGggPSBhLmVsZW1lbnQpICE9IG51bGwgJiYgaC5jdXJyZW50ICYmICEoY2UodC5wYXJ0aWNpcGFudCkgJiYgKG8gPT0gbnVsbCA/IHZvaWQgMCA6IG8ua2luZCkgPT09IFwiYXVkaW9cIikgJiYgby5hdHRhY2goYS5lbGVtZW50LmN1cnJlbnQpKSwgbS5jdXJyZW50ID0gKGcgPSBhLmVsZW1lbnQpID09IG51bGwgPyB2b2lkIDAgOiBnLmN1cnJlbnQsICgpID0+IHtcbiAgICAgIG0uY3VycmVudCAmJiAobyA9PSBudWxsIHx8IG8uZGV0YWNoKG0uY3VycmVudCkpO1xuICAgIH07XG4gIH0sIFtvLCBhLmVsZW1lbnRdKSwgZS51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHZhciBoLCBnO1xuICAgIGlmICh0eXBlb2YgKChoID0gbiA9PSBudWxsID8gdm9pZCAwIDogbi5kaW1lbnNpb25zKSA9PSBudWxsID8gdm9pZCAwIDogaC53aWR0aCkgPT0gXCJudW1iZXJcIiAmJiB0eXBlb2YgKChnID0gbiA9PSBudWxsID8gdm9pZCAwIDogbi5kaW1lbnNpb25zKSA9PSBudWxsID8gdm9pZCAwIDogZy5oZWlnaHQpID09IFwibnVtYmVyXCIpIHtcbiAgICAgIGNvbnN0IGsgPSBuLmRpbWVuc2lvbnMud2lkdGggPiBuLmRpbWVuc2lvbnMuaGVpZ2h0ID8gXCJsYW5kc2NhcGVcIiA6IFwicG9ydHJhaXRcIjtcbiAgICAgIGYoayk7XG4gICAgfVxuICB9LCBbbl0pLCB7XG4gICAgcHVibGljYXRpb246IG4sXG4gICAgaXNNdXRlZDogYyxcbiAgICBpc1N1YnNjcmliZWQ6IGksXG4gICAgdHJhY2s6IG8sXG4gICAgZWxlbWVudFByb3BzOiBSKGEucHJvcHMsIHtcbiAgICAgIGNsYXNzTmFtZTogcCxcbiAgICAgIFwiZGF0YS1say1sb2NhbC1wYXJ0aWNpcGFudFwiOiB0LnBhcnRpY2lwYW50LmlzTG9jYWwsXG4gICAgICBcImRhdGEtbGstc291cmNlXCI6IG4gPT0gbnVsbCA/IHZvaWQgMCA6IG4uc291cmNlLFxuICAgICAgLi4uKG4gPT0gbnVsbCA/IHZvaWQgMCA6IG4ua2luZCkgPT09IFwidmlkZW9cIiAmJiB7IFwiZGF0YS1say1vcmllbnRhdGlvblwiOiBkIH1cbiAgICB9KVxuICB9O1xufVxudmFyIGd0ID0gXCJFeHBlY3RlZCBhIGZ1bmN0aW9uXCIsIEcgPSBOYU4sIHZ0ID0gXCJbb2JqZWN0IFN5bWJvbF1cIiwgcHQgPSAvXlxccyt8XFxzKyQvZywgRXQgPSAvXlstK10weFswLTlhLWZdKyQvaSwgd3QgPSAvXjBiWzAxXSskL2ksIGt0ID0gL14wb1swLTddKyQvaSwgeXQgPSBwYXJzZUludCwgTXQgPSB0eXBlb2YgTCA9PSBcIm9iamVjdFwiICYmIEwgJiYgTC5PYmplY3QgPT09IE9iamVjdCAmJiBMLCBSdCA9IHR5cGVvZiBzZWxmID09IFwib2JqZWN0XCIgJiYgc2VsZiAmJiBzZWxmLk9iamVjdCA9PT0gT2JqZWN0ICYmIHNlbGYsIGJ0ID0gTXQgfHwgUnQgfHwgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpLCBTdCA9IE9iamVjdC5wcm90b3R5cGUsIEN0ID0gU3QudG9TdHJpbmcsIEl0ID0gTWF0aC5tYXgsIFB0ID0gTWF0aC5taW4sIFogPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGJ0LkRhdGUubm93KCk7XG59O1xuZnVuY3Rpb24gVHQodCwgYSwgbikge1xuICB2YXIgciwgYywgcywgaSwgbCwgbywgdSA9IDAsIGQgPSAhMSwgZiA9ICExLCBtID0gITA7XG4gIGlmICh0eXBlb2YgdCAhPSBcImZ1bmN0aW9uXCIpXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihndCk7XG4gIGEgPSBRKGEpIHx8IDAsIGoobikgJiYgKGQgPSAhIW4ubGVhZGluZywgZiA9IFwibWF4V2FpdFwiIGluIG4sIHMgPSBmID8gSXQoUShuLm1heFdhaXQpIHx8IDAsIGEpIDogcywgbSA9IFwidHJhaWxpbmdcIiBpbiBuID8gISFuLnRyYWlsaW5nIDogbSk7XG4gIGZ1bmN0aW9uIHAodikge1xuICAgIHZhciBNID0gciwgeCA9IGM7XG4gICAgcmV0dXJuIHIgPSBjID0gdm9pZCAwLCB1ID0gdiwgaSA9IHQuYXBwbHkoeCwgTSksIGk7XG4gIH1cbiAgZnVuY3Rpb24gRSh2KSB7XG4gICAgcmV0dXJuIHUgPSB2LCBsID0gc2V0VGltZW91dChrLCBhKSwgZCA/IHAodikgOiBpO1xuICB9XG4gIGZ1bmN0aW9uIGgodikge1xuICAgIHZhciBNID0gdiAtIG8sIHggPSB2IC0gdSwgVyA9IGEgLSBNO1xuICAgIHJldHVybiBmID8gUHQoVywgcyAtIHgpIDogVztcbiAgfVxuICBmdW5jdGlvbiBnKHYpIHtcbiAgICB2YXIgTSA9IHYgLSBvLCB4ID0gdiAtIHU7XG4gICAgcmV0dXJuIG8gPT09IHZvaWQgMCB8fCBNID49IGEgfHwgTSA8IDAgfHwgZiAmJiB4ID49IHM7XG4gIH1cbiAgZnVuY3Rpb24gaygpIHtcbiAgICB2YXIgdiA9IFooKTtcbiAgICBpZiAoZyh2KSlcbiAgICAgIHJldHVybiBDKHYpO1xuICAgIGwgPSBzZXRUaW1lb3V0KGssIGgodikpO1xuICB9XG4gIGZ1bmN0aW9uIEModikge1xuICAgIHJldHVybiBsID0gdm9pZCAwLCBtICYmIHIgPyBwKHYpIDogKHIgPSBjID0gdm9pZCAwLCBpKTtcbiAgfVxuICBmdW5jdGlvbiBiKCkge1xuICAgIGwgIT09IHZvaWQgMCAmJiBjbGVhclRpbWVvdXQobCksIHUgPSAwLCByID0gbyA9IGMgPSBsID0gdm9pZCAwO1xuICB9XG4gIGZ1bmN0aW9uIFMoKSB7XG4gICAgcmV0dXJuIGwgPT09IHZvaWQgMCA/IGkgOiBDKFooKSk7XG4gIH1cbiAgZnVuY3Rpb24gdygpIHtcbiAgICB2YXIgdiA9IFooKSwgTSA9IGcodik7XG4gICAgaWYgKHIgPSBhcmd1bWVudHMsIGMgPSB0aGlzLCBvID0gdiwgTSkge1xuICAgICAgaWYgKGwgPT09IHZvaWQgMClcbiAgICAgICAgcmV0dXJuIEUobyk7XG4gICAgICBpZiAoZilcbiAgICAgICAgcmV0dXJuIGwgPSBzZXRUaW1lb3V0KGssIGEpLCBwKG8pO1xuICAgIH1cbiAgICByZXR1cm4gbCA9PT0gdm9pZCAwICYmIChsID0gc2V0VGltZW91dChrLCBhKSksIGk7XG4gIH1cbiAgcmV0dXJuIHcuY2FuY2VsID0gYiwgdy5mbHVzaCA9IFMsIHc7XG59XG5mdW5jdGlvbiBqKHQpIHtcbiAgdmFyIGEgPSB0eXBlb2YgdDtcbiAgcmV0dXJuICEhdCAmJiAoYSA9PSBcIm9iamVjdFwiIHx8IGEgPT0gXCJmdW5jdGlvblwiKTtcbn1cbmZ1bmN0aW9uIHh0KHQpIHtcbiAgcmV0dXJuICEhdCAmJiB0eXBlb2YgdCA9PSBcIm9iamVjdFwiO1xufVxuZnVuY3Rpb24gQXQodCkge1xuICByZXR1cm4gdHlwZW9mIHQgPT0gXCJzeW1ib2xcIiB8fCB4dCh0KSAmJiBDdC5jYWxsKHQpID09IHZ0O1xufVxuZnVuY3Rpb24gUSh0KSB7XG4gIGlmICh0eXBlb2YgdCA9PSBcIm51bWJlclwiKVxuICAgIHJldHVybiB0O1xuICBpZiAoQXQodCkpXG4gICAgcmV0dXJuIEc7XG4gIGlmIChqKHQpKSB7XG4gICAgdmFyIGEgPSB0eXBlb2YgdC52YWx1ZU9mID09IFwiZnVuY3Rpb25cIiA/IHQudmFsdWVPZigpIDogdDtcbiAgICB0ID0gaihhKSA/IGEgKyBcIlwiIDogYTtcbiAgfVxuICBpZiAodHlwZW9mIHQgIT0gXCJzdHJpbmdcIilcbiAgICByZXR1cm4gdCA9PT0gMCA/IHQgOiArdDtcbiAgdCA9IHQucmVwbGFjZShwdCwgXCJcIik7XG4gIHZhciBuID0gd3QudGVzdCh0KTtcbiAgcmV0dXJuIG4gfHwga3QudGVzdCh0KSA/IHl0KHQuc2xpY2UoMiksIG4gPyAyIDogOCkgOiBFdC50ZXN0KHQpID8gRyA6ICt0O1xufVxudmFyIE50ID0gVHQ7XG5jb25zdCBYID0gLyogQF9fUFVSRV9fICovIE9lKE50KTtcbmZ1bmN0aW9uIEx0KHQpIHtcbiAgY29uc3QgYSA9IEkodCk7XG4gIGEuY3VycmVudCA9IHQsIFAoXG4gICAgKCkgPT4gKCkgPT4ge1xuICAgICAgYS5jdXJyZW50KCk7XG4gICAgfSxcbiAgICBbXVxuICApO1xufVxuZnVuY3Rpb24gVnQodCwgYSA9IDUwMCwgbikge1xuICBjb25zdCByID0gSSgpO1xuICBMdCgoKSA9PiB7XG4gICAgci5jdXJyZW50ICYmIHIuY3VycmVudC5jYW5jZWwoKTtcbiAgfSk7XG4gIGNvbnN0IGMgPSBnZSgoKSA9PiB7XG4gICAgY29uc3QgcyA9IFgodCwgYSwgbiksIGkgPSAoLi4ubCkgPT4gcyguLi5sKTtcbiAgICByZXR1cm4gaS5jYW5jZWwgPSAoKSA9PiB7XG4gICAgICBzLmNhbmNlbCgpO1xuICAgIH0sIGkuaXNQZW5kaW5nID0gKCkgPT4gISFyLmN1cnJlbnQsIGkuZmx1c2ggPSAoKSA9PiBzLmZsdXNoKCksIGk7XG4gIH0sIFt0LCBhLCBuXSk7XG4gIHJldHVybiBQKCgpID0+IHtcbiAgICByLmN1cnJlbnQgPSBYKHQsIGEsIG4pO1xuICB9LCBbdCwgYSwgbl0pLCBjO1xufVxuZnVuY3Rpb24genQodCwgYSwgbikge1xuICBjb25zdCByID0gKHUsIGQpID0+IHUgPT09IGQsIGMgPSB0IGluc3RhbmNlb2YgRnVuY3Rpb24gPyB0KCkgOiB0LCBbcywgaV0gPSBBKGMpLCBsID0gSShjKSwgbyA9IFZ0KFxuICAgIGksXG4gICAgYSxcbiAgICBuXG4gICk7XG4gIHJldHVybiByKGwuY3VycmVudCwgYykgfHwgKG8oYyksIGwuY3VycmVudCA9IGMpLCBbcywgb107XG59XG5mdW5jdGlvbiBGdCh7XG4gIHRocmVzaG9sZDogdCA9IDAsXG4gIHJvb3Q6IGEgPSBudWxsLFxuICByb290TWFyZ2luOiBuID0gXCIwJVwiLFxuICBmcmVlemVPbmNlVmlzaWJsZTogciA9ICExLFxuICBpbml0aWFsSXNJbnRlcnNlY3Rpbmc6IGMgPSAhMSxcbiAgb25DaGFuZ2U6IHNcbn0gPSB7fSkge1xuICB2YXIgaTtcbiAgY29uc3QgW2wsIG9dID0gQShudWxsKSwgW3UsIGRdID0gQSgoKSA9PiAoe1xuICAgIGlzSW50ZXJzZWN0aW5nOiBjLFxuICAgIGVudHJ5OiB2b2lkIDBcbiAgfSkpLCBmID0gSSgpO1xuICBmLmN1cnJlbnQgPSBzO1xuICBjb25zdCBtID0gKChpID0gdS5lbnRyeSkgPT0gbnVsbCA/IHZvaWQgMCA6IGkuaXNJbnRlcnNlY3RpbmcpICYmIHI7XG4gIFAoKCkgPT4ge1xuICAgIGlmICghbCB8fCAhKFwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXJcIiBpbiB3aW5kb3cpIHx8IG0pXG4gICAgICByZXR1cm47XG4gICAgbGV0IGg7XG4gICAgY29uc3QgZyA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgIChrKSA9PiB7XG4gICAgICAgIGNvbnN0IEMgPSBBcnJheS5pc0FycmF5KGcudGhyZXNob2xkcykgPyBnLnRocmVzaG9sZHMgOiBbZy50aHJlc2hvbGRzXTtcbiAgICAgICAgay5mb3JFYWNoKChiKSA9PiB7XG4gICAgICAgICAgY29uc3QgUyA9IGIuaXNJbnRlcnNlY3RpbmcgJiYgQy5zb21lKCh3KSA9PiBiLmludGVyc2VjdGlvblJhdGlvID49IHcpO1xuICAgICAgICAgIGQoeyBpc0ludGVyc2VjdGluZzogUywgZW50cnk6IGIgfSksIGYuY3VycmVudCAmJiBmLmN1cnJlbnQoUywgYiksIFMgJiYgciAmJiBoICYmIChoKCksIGggPSB2b2lkIDApO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICB7IHRocmVzaG9sZDogdCwgcm9vdDogYSwgcm9vdE1hcmdpbjogbiB9XG4gICAgKTtcbiAgICByZXR1cm4gZy5vYnNlcnZlKGwpLCAoKSA9PiB7XG4gICAgICBnLmRpc2Nvbm5lY3QoKTtcbiAgICB9O1xuICB9LCBbXG4gICAgbCxcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gICAgSlNPTi5zdHJpbmdpZnkodCksXG4gICAgYSxcbiAgICBuLFxuICAgIG0sXG4gICAgclxuICBdKTtcbiAgY29uc3QgcCA9IEkobnVsbCk7XG4gIFAoKCkgPT4ge1xuICAgIHZhciBoO1xuICAgICFsICYmICgoaCA9IHUuZW50cnkpICE9IG51bGwgJiYgaC50YXJnZXQpICYmICFyICYmICFtICYmIHAuY3VycmVudCAhPT0gdS5lbnRyeS50YXJnZXQgJiYgKHAuY3VycmVudCA9IHUuZW50cnkudGFyZ2V0LCBkKHsgaXNJbnRlcnNlY3Rpbmc6IGMsIGVudHJ5OiB2b2lkIDAgfSkpO1xuICB9LCBbbCwgdS5lbnRyeSwgciwgbSwgY10pO1xuICBjb25zdCBFID0gW1xuICAgIG8sXG4gICAgISF1LmlzSW50ZXJzZWN0aW5nLFxuICAgIHUuZW50cnlcbiAgXTtcbiAgcmV0dXJuIEUucmVmID0gRVswXSwgRS5pc0ludGVyc2VjdGluZyA9IEVbMV0sIEUuZW50cnkgPSBFWzJdLCBFO1xufVxuY29uc3QgWnQgPSAvKiBAX19QVVJFX18gKi8gZS5mb3J3YXJkUmVmKFxuICBmdW5jdGlvbih7XG4gICAgb25UcmFja0NsaWNrOiBhLFxuICAgIG9uQ2xpY2s6IG4sXG4gICAgb25TdWJzY3JpcHRpb25TdGF0dXNDaGFuZ2VkOiByLFxuICAgIHRyYWNrUmVmOiBjLFxuICAgIG1hbmFnZVN1YnNjcmlwdGlvbjogcyxcbiAgICAuLi5pXG4gIH0sIGwpIHtcbiAgICBjb25zdCBvID0gTihjKSwgdSA9IGUudXNlUmVmKG51bGwpO1xuICAgIGUudXNlSW1wZXJhdGl2ZUhhbmRsZShsLCAoKSA9PiB1LmN1cnJlbnQpO1xuICAgIGNvbnN0IGQgPSBGdCh7IHJvb3Q6IHUuY3VycmVudCB9KSwgW2ZdID0genQoZCwgM2UzKTtcbiAgICBlLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBzICYmIG8ucHVibGljYXRpb24gaW5zdGFuY2VvZiBIICYmIChmID09IG51bGwgPyB2b2lkIDAgOiBmLmlzSW50ZXJzZWN0aW5nKSA9PT0gITEgJiYgKGQgPT0gbnVsbCA/IHZvaWQgMCA6IGQuaXNJbnRlcnNlY3RpbmcpID09PSAhMSAmJiBvLnB1YmxpY2F0aW9uLnNldFN1YnNjcmliZWQoITEpO1xuICAgIH0sIFtmLCBvLCBzXSksIGUudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIHMgJiYgby5wdWJsaWNhdGlvbiBpbnN0YW5jZW9mIEggJiYgKGQgPT0gbnVsbCA/IHZvaWQgMCA6IGQuaXNJbnRlcnNlY3RpbmcpID09PSAhMCAmJiBvLnB1YmxpY2F0aW9uLnNldFN1YnNjcmliZWQoITApO1xuICAgIH0sIFtkLCBvLCBzXSk7XG4gICAgY29uc3Qge1xuICAgICAgZWxlbWVudFByb3BzOiBtLFxuICAgICAgcHVibGljYXRpb246IHAsXG4gICAgICBpc1N1YnNjcmliZWQ6IEVcbiAgICB9ID0gbWUobywge1xuICAgICAgZWxlbWVudDogdSxcbiAgICAgIHByb3BzOiBpXG4gICAgfSk7XG4gICAgZS51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgciA9PSBudWxsIHx8IHIoISFFKTtcbiAgICB9LCBbRSwgcl0pO1xuICAgIGNvbnN0IGggPSAoZykgPT4ge1xuICAgICAgbiA9PSBudWxsIHx8IG4oZyksIGEgPT0gbnVsbCB8fCBhKHsgcGFydGljaXBhbnQ6IG8gPT0gbnVsbCA/IHZvaWQgMCA6IG8ucGFydGljaXBhbnQsIHRyYWNrOiBwIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJ2aWRlb1wiLCB7IHJlZjogdSwgLi4ubSwgbXV0ZWQ6ICEwLCBvbkNsaWNrOiBoIH0pO1xuICB9XG4pLCBxID0gLyogQF9fUFVSRV9fICovIGUuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24oeyB0cmFja1JlZjogYSwgb25TdWJzY3JpcHRpb25TdGF0dXNDaGFuZ2VkOiBuLCB2b2x1bWU6IHIsIG11dGVkOiBjLCAuLi5zIH0sIGkpIHtcbiAgICBjb25zdCBsID0gTihhKSwgbyA9IGUudXNlUmVmKG51bGwpO1xuICAgIGUudXNlSW1wZXJhdGl2ZUhhbmRsZShpLCAoKSA9PiBvLmN1cnJlbnQpO1xuICAgIGNvbnN0IHtcbiAgICAgIGVsZW1lbnRQcm9wczogdSxcbiAgICAgIGlzU3Vic2NyaWJlZDogZCxcbiAgICAgIHRyYWNrOiBmLFxuICAgICAgcHVibGljYXRpb246IG1cbiAgICB9ID0gbWUobCwge1xuICAgICAgZWxlbWVudDogbyxcbiAgICAgIHByb3BzOiBzXG4gICAgfSk7XG4gICAgcmV0dXJuIGUudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIG4gPT0gbnVsbCB8fCBuKCEhZCk7XG4gICAgfSwgW2QsIG5dKSwgZS51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgZiA9PT0gdm9pZCAwIHx8IHIgPT09IHZvaWQgMCB8fCAoZiBpbnN0YW5jZW9mIHplID8gZi5zZXRWb2x1bWUocikgOiBULndhcm4oXCJWb2x1bWUgY2FuIG9ubHkgYmUgc2V0IG9uIHJlbW90ZSBhdWRpbyB0cmFja3MuXCIpKTtcbiAgICB9LCBbciwgZl0pLCBlLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBtID09PSB2b2lkIDAgfHwgYyA9PT0gdm9pZCAwIHx8IChtIGluc3RhbmNlb2YgSCA/IG0uc2V0RW5hYmxlZCghYykgOiBULndhcm4oXCJDYW4gb25seSBjYWxsIHNldEVuYWJsZWQgb24gcmVtb3RlIHRyYWNrIHB1YmxpY2F0aW9ucy5cIikpO1xuICAgIH0sIFtjLCBtLCBmXSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJhdWRpb1wiLCB7IHJlZjogbywgLi4udSB9KTtcbiAgfVxuKTtcbmZ1bmN0aW9uIEh0KHQpIHtcbiAgY29uc3QgYSA9ICEhX2UoKTtcbiAgcmV0dXJuIHQucGFydGljaXBhbnQgJiYgIWEgPyAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGxlLlByb3ZpZGVyLCB7IHZhbHVlOiB0LnBhcnRpY2lwYW50IH0sIHQuY2hpbGRyZW4pIDogLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChlLkZyYWdtZW50LCBudWxsLCB0LmNoaWxkcmVuKTtcbn1cbmZ1bmN0aW9uIEJ0KHQpIHtcbiAgY29uc3QgYSA9ICEhTygpO1xuICByZXR1cm4gdC50cmFja1JlZiAmJiAhYSA/IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXy5Qcm92aWRlciwgeyB2YWx1ZTogdC50cmFja1JlZiB9LCB0LmNoaWxkcmVuKSA6IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoZS5GcmFnbWVudCwgbnVsbCwgdC5jaGlsZHJlbik7XG59XG5jb25zdCBqdCA9IC8qIEBfX1BVUkVfXyAqLyBlLmZvcndhcmRSZWYoXG4gIGZ1bmN0aW9uKHtcbiAgICB0cmFja1JlZjogYSxcbiAgICBjaGlsZHJlbjogbixcbiAgICBvblBhcnRpY2lwYW50Q2xpY2s6IHIsXG4gICAgZGlzYWJsZVNwZWFraW5nSW5kaWNhdG9yOiBjLFxuICAgIC4uLnNcbiAgfSwgaSkge1xuICAgIHZhciBwLCBFO1xuICAgIGNvbnN0IGwgPSBOKGEpLCB7IGVsZW1lbnRQcm9wczogbyB9ID0gdGUoe1xuICAgICAgaHRtbFByb3BzOiBzLFxuICAgICAgZGlzYWJsZVNwZWFraW5nSW5kaWNhdG9yOiBjLFxuICAgICAgb25QYXJ0aWNpcGFudENsaWNrOiByLFxuICAgICAgdHJhY2tSZWY6IGxcbiAgICB9KSwgdSA9IENlKGwucGFydGljaXBhbnQpLCBkID0gJGUoKSwgZiA9IChwID0gcWUoKSkgPT0gbnVsbCA/IHZvaWQgMCA6IHAuYXV0b1N1YnNjcmlwdGlvbiwgbSA9IGUudXNlQ2FsbGJhY2soXG4gICAgICAoaCkgPT4ge1xuICAgICAgICBsLnNvdXJjZSAmJiAhaCAmJiBkICYmIGQucGluLmRpc3BhdGNoICYmIFdlKGwsIGQucGluLnN0YXRlKSAmJiBkLnBpbi5kaXNwYXRjaCh7IG1zZzogXCJjbGVhcl9waW5cIiB9KTtcbiAgICAgIH0sXG4gICAgICBbbCwgZF1cbiAgICApO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgcmVmOiBpLCBzdHlsZTogeyBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiIH0sIC4uLm8gfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChCdCwgeyB0cmFja1JlZjogbCB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KEh0LCB7IHBhcnRpY2lwYW50OiBsLnBhcnRpY2lwYW50IH0sIG4gPz8gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChlLkZyYWdtZW50LCBudWxsLCBWKGwpICYmICgoKEUgPSBsLnB1YmxpY2F0aW9uKSA9PSBudWxsID8gdm9pZCAwIDogRS5raW5kKSA9PT0gXCJ2aWRlb1wiIHx8IGwuc291cmNlID09PSB5LlNvdXJjZS5DYW1lcmEgfHwgbC5zb3VyY2UgPT09IHkuU291cmNlLlNjcmVlblNoYXJlKSA/IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gICAgICBadCxcbiAgICAgIHtcbiAgICAgICAgdHJhY2tSZWY6IGwsXG4gICAgICAgIG9uU3Vic2NyaXB0aW9uU3RhdHVzQ2hhbmdlZDogbSxcbiAgICAgICAgbWFuYWdlU3Vic2NyaXB0aW9uOiBmXG4gICAgICB9XG4gICAgKSA6IFYobCkgJiYgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgICAgIHEsXG4gICAgICB7XG4gICAgICAgIHRyYWNrUmVmOiBsLFxuICAgICAgICBvblN1YnNjcmlwdGlvblN0YXR1c0NoYW5nZWQ6IG1cbiAgICAgIH1cbiAgICApLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLXBhcnRpY2lwYW50LXBsYWNlaG9sZGVyXCIgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChodCwgbnVsbCkpLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLXBhcnRpY2lwYW50LW1ldGFkYXRhXCIgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJsay1wYXJ0aWNpcGFudC1tZXRhZGF0YS1pdGVtXCIgfSwgbC5zb3VyY2UgPT09IHkuU291cmNlLkNhbWVyYSA/IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoZS5GcmFnbWVudCwgbnVsbCwgdSAmJiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGF0LCB7IHN0eWxlOiB7IG1hcmdpblJpZ2h0OiBcIjAuMjVyZW1cIiB9IH0pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICAgICAgZGUsXG4gICAgICB7XG4gICAgICAgIHRyYWNrUmVmOiB7XG4gICAgICAgICAgcGFydGljaXBhbnQ6IGwucGFydGljaXBhbnQsXG4gICAgICAgICAgc291cmNlOiB5LlNvdXJjZS5NaWNyb3Bob25lXG4gICAgICAgIH0sXG4gICAgICAgIHNob3c6IFwibXV0ZWRcIlxuICAgICAgfVxuICAgICksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoQiwgbnVsbCkpIDogLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChlLkZyYWdtZW50LCBudWxsLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KHNlLCB7IHN0eWxlOiB7IG1hcmdpblJpZ2h0OiBcIjAuMjVyZW1cIiB9IH0pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KEIsIG51bGwsIFwiJ3Mgc2NyZWVuXCIpKSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQodWUsIHsgY2xhc3NOYW1lOiBcImxrLXBhcnRpY2lwYW50LW1ldGFkYXRhLWl0ZW1cIiB9KSkpLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGR0LCB7IHRyYWNrUmVmOiBsIH0pKSkpO1xuICB9XG4pO1xuZnVuY3Rpb24gdmEodCkge1xuICBjb25zdCBhID0gUih0LCB7IGNsYXNzTmFtZTogXCJsay1mb2N1cy1sYXlvdXRcIiB9KTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyAuLi5hIH0sIHQuY2hpbGRyZW4pO1xufVxuZnVuY3Rpb24gcGEoeyB0cmFja1JlZjogdCwgLi4uYSB9KSB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGp0LCB7IHRyYWNrUmVmOiB0LCAuLi5hIH0pO1xufVxuZnVuY3Rpb24gZmUoeyB0cmFja3M6IHQsIC4uLmEgfSkge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChlLkZyYWdtZW50LCBudWxsLCB0Lm1hcCgobikgPT4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgICBfLlByb3ZpZGVyLFxuICAgIHtcbiAgICAgIHZhbHVlOiBuLFxuICAgICAga2V5OiBvZShuKVxuICAgIH0sXG4gICAgJChhLmNoaWxkcmVuKVxuICApKSk7XG59XG5mdW5jdGlvbiBPdCh7XG4gIHRvdGFsUGFnZUNvdW50OiB0LFxuICBuZXh0UGFnZTogYSxcbiAgcHJldlBhZ2U6IG4sXG4gIGN1cnJlbnRQYWdlOiByLFxuICBwYWdlc0NvbnRhaW5lcjogY1xufSkge1xuICBjb25zdCBbcywgaV0gPSBlLnVzZVN0YXRlKCExKTtcbiAgcmV0dXJuIGUudXNlRWZmZWN0KCgpID0+IHtcbiAgICBsZXQgbDtcbiAgICByZXR1cm4gYyAmJiAobCA9IERlKGMuY3VycmVudCwgMmUzKS5zdWJzY3JpYmUoXG4gICAgICBpXG4gICAgKSksICgpID0+IHtcbiAgICAgIGwgJiYgbC51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gIH0sIFtjXSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstcGFnaW5hdGlvbi1jb250cm9sXCIsIFwiZGF0YS1say11c2VyLWludGVyYWN0aW9uXCI6IHMgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7IGNsYXNzTmFtZTogXCJsay1idXR0b25cIiwgb25DbGljazogbiB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KEQsIG51bGwpKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwibGstcGFnaW5hdGlvbi1jb3VudFwiIH0sIGAke3J9IG9mICR7dH1gKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7IGNsYXNzTmFtZTogXCJsay1idXR0b25cIiwgb25DbGljazogYSB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KEQsIG51bGwpKSk7XG59XG5jb25zdCBfdCA9IC8qIEBfX1BVUkVfXyAqLyBlLmZvcndhcmRSZWYoXG4gIGZ1bmN0aW9uKHsgdG90YWxQYWdlQ291bnQ6IGEsIGN1cnJlbnRQYWdlOiBuIH0sIHIpIHtcbiAgICBjb25zdCBjID0gbmV3IEFycmF5KGEpLmZpbGwoXCJcIikubWFwKChzLCBpKSA9PiBpICsgMSA9PT0gbiA/IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgXCJkYXRhLWxrLWFjdGl2ZVwiOiAhMCwga2V5OiBpIH0pIDogLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBrZXk6IGkgfSkpO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgcmVmOiByLCBjbGFzc05hbWU6IFwibGstcGFnaW5hdGlvbi1pbmRpY2F0b3JcIiB9LCBjKTtcbiAgfVxuKTtcbmZ1bmN0aW9uIEVhKHsgdHJhY2tzOiB0LCAuLi5hIH0pIHtcbiAgY29uc3QgbiA9IGUuY3JlYXRlUmVmKCksIHIgPSBlLnVzZU1lbW8oXG4gICAgKCkgPT4gUihhLCB7IGNsYXNzTmFtZTogXCJsay1ncmlkLWxheW91dFwiIH0pLFxuICAgIFthXVxuICApLCB7IGxheW91dDogYyB9ID0gSWUobiwgdC5sZW5ndGgpLCBzID0gUGUoYy5tYXhUaWxlcywgdCk7XG4gIHJldHVybiBUZShuLCB7XG4gICAgb25MZWZ0U3dpcGU6IHMubmV4dFBhZ2UsXG4gICAgb25SaWdodFN3aXBlOiBzLnByZXZQYWdlXG4gIH0pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgcmVmOiBuLCBcImRhdGEtbGstcGFnaW5hdGlvblwiOiBzLnRvdGFsUGFnZUNvdW50ID4gMSwgLi4uciB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGZlLCB7IHRyYWNrczogcy50cmFja3MgfSwgYS5jaGlsZHJlbiksIHQubGVuZ3RoID4gYy5tYXhUaWxlcyAmJiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGUuRnJhZ21lbnQsIG51bGwsIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gICAgX3QsXG4gICAge1xuICAgICAgdG90YWxQYWdlQ291bnQ6IHMudG90YWxQYWdlQ291bnQsXG4gICAgICBjdXJyZW50UGFnZTogcy5jdXJyZW50UGFnZVxuICAgIH1cbiAgKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChPdCwgeyBwYWdlc0NvbnRhaW5lcjogbiwgLi4ucyB9KSkpO1xufVxuY29uc3QgJHQgPSAxMzAsIHF0ID0gMTQwLCBZID0gMSwgaGUgPSAxNiAvIDEwLCBXdCA9ICgxIC0gaGUpICogLTE7XG5mdW5jdGlvbiB3YSh7IHRyYWNrczogdCwgb3JpZW50YXRpb246IGEsIC4uLm4gfSkge1xuICBjb25zdCByID0gZS51c2VSZWYobnVsbCksIFtjLCBzXSA9IGUudXNlU3RhdGUoMCksIHsgd2lkdGg6IGksIGhlaWdodDogbCB9ID0geGUociksIG8gPSBhIHx8IChsID49IGkgPyBcInZlcnRpY2FsXCIgOiBcImhvcml6b250YWxcIiksIHUgPSBvID09PSBcInZlcnRpY2FsXCIgPyBNYXRoLm1heChpICogV3QsICR0KSA6IE1hdGgubWF4KGwgKiBoZSwgcXQpLCBkID0gVWUoKSwgZiA9IE1hdGgubWF4KG8gPT09IFwidmVydGljYWxcIiA/IChsIC0gZCkgLyB1IDogKGkgLSBkKSAvIHUsIFkpO1xuICBsZXQgbSA9IE1hdGgucm91bmQoZik7XG4gIE1hdGguYWJzKGYgLSBjKSA8IDAuNSA/IG0gPSBNYXRoLnJvdW5kKGMpIDogYyAhPT0gZiAmJiBzKGYpO1xuICBjb25zdCBwID0gQWUodCwgbSk7XG4gIHJldHVybiBlLnVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgci5jdXJyZW50ICYmIChyLmN1cnJlbnQuZGF0YXNldC5sa09yaWVudGF0aW9uID0gbywgci5jdXJyZW50LnN0eWxlLnNldFByb3BlcnR5KFwiLS1say1tYXgtdmlzaWJsZS10aWxlc1wiLCBtLnRvU3RyaW5nKCkpKTtcbiAgfSwgW20sIG9dKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImFzaWRlXCIsIHsga2V5OiBvLCBjbGFzc05hbWU6IFwibGstY2Fyb3VzZWxcIiwgcmVmOiByLCAuLi5uIH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoZmUsIHsgdHJhY2tzOiBwIH0sIG4uY2hpbGRyZW4pKTtcbn1cbmZ1bmN0aW9uIGthKHtcbiAgdmFsdWU6IHQsXG4gIG9uUGluQ2hhbmdlOiBhLFxuICBvbldpZGdldENoYW5nZTogbixcbiAgY2hpbGRyZW46IHJcbn0pIHtcbiAgY29uc3QgYyA9IEdlKHQpO1xuICByZXR1cm4gZS51c2VFZmZlY3QoKCkgPT4ge1xuICAgIFQuZGVidWcoXCJQaW5TdGF0ZSBVcGRhdGVkXCIsIHsgc3RhdGU6IGMucGluLnN0YXRlIH0pLCBhICYmIGMucGluLnN0YXRlICYmIGEoYy5waW4uc3RhdGUpO1xuICB9LCBbYy5waW4uc3RhdGUsIGFdKSwgZS51c2VFZmZlY3QoKCkgPT4ge1xuICAgIFQuZGVidWcoXCJXaWRnZXQgVXBkYXRlZFwiLCB7IHdpZGdldFN0YXRlOiBjLndpZGdldC5zdGF0ZSB9KSwgbiAmJiBjLndpZGdldC5zdGF0ZSAmJiBuKGMud2lkZ2V0LnN0YXRlKTtcbiAgfSwgW24sIGMud2lkZ2V0LnN0YXRlXSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQobmUuUHJvdmlkZXIsIHsgdmFsdWU6IGMgfSwgcik7XG59XG5jb25zdCB5YSA9IC8qIEBfX1BVUkVfXyAqLyBlLmZvcndhcmRSZWYoXG4gIGZ1bmN0aW9uKHsgdHJhY2tSZWY6IGEsIC4uLm4gfSwgcikge1xuICAgIGNvbnN0IGQgPSBOKGEpLCBmID0gYWUoZCwgeyBiYW5kczogNywgbG9QYXNzOiAzMDAgfSk7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gICAgICBcInN2Z1wiLFxuICAgICAge1xuICAgICAgICByZWY6IHIsXG4gICAgICAgIHdpZHRoOiBcIjEwMCVcIixcbiAgICAgICAgaGVpZ2h0OiBcIjEwMCVcIixcbiAgICAgICAgdmlld0JveDogXCIwIDAgMjAwIDkwXCIsXG4gICAgICAgIC4uLm4sXG4gICAgICAgIGNsYXNzTmFtZTogXCJsay1hdWRpby12aXN1YWxpemVyXCJcbiAgICAgIH0sXG4gICAgICAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwicmVjdFwiLCB7IHg6IFwiMFwiLCB5OiBcIjBcIiwgd2lkdGg6IFwiMTAwJVwiLCBoZWlnaHQ6IFwiMTAwJVwiIH0pLFxuICAgICAgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgICAgICAgXCJnXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlKCR7KDIwMCAtIDcgKiAxMCkgLyAyfXB4LCAwKWBcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGYubWFwKChtLCBwKSA9PiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgIFwicmVjdFwiLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGtleTogcCxcbiAgICAgICAgICAgIHg6IHAgKiAxMCxcbiAgICAgICAgICAgIHk6IDkwIC8gMiAtIG0gKiA1MCAvIDIsXG4gICAgICAgICAgICB3aWR0aDogNixcbiAgICAgICAgICAgIGhlaWdodDogbSAqIDUwXG4gICAgICAgICAgfVxuICAgICAgICApKVxuICAgICAgKVxuICAgICk7XG4gIH1cbik7XG5mdW5jdGlvbiBNYSh7IHBhcnRpY2lwYW50czogdCwgLi4uYSB9KSB7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGUuRnJhZ21lbnQsIG51bGwsIHQubWFwKChuKSA9PiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGxlLlByb3ZpZGVyLCB7IHZhbHVlOiBuLCBrZXk6IG4uaWRlbnRpdHkgfSwgJChhLmNoaWxkcmVuKSkpKTtcbn1cbmZ1bmN0aW9uIFJhKHsgdm9sdW1lOiB0LCBtdXRlZDogYSB9KSB7XG4gIGNvbnN0IG4gPSBOZShcbiAgICBbeS5Tb3VyY2UuTWljcm9waG9uZSwgeS5Tb3VyY2UuU2NyZWVuU2hhcmVBdWRpbywgeS5Tb3VyY2UuVW5rbm93bl0sXG4gICAge1xuICAgICAgdXBkYXRlT25seU9uOiBbXSxcbiAgICAgIG9ubHlTdWJzY3JpYmVkOiAhMFxuICAgIH1cbiAgKS5maWx0ZXIoKHIpID0+ICFjZShyLnBhcnRpY2lwYW50KSAmJiByLnB1YmxpY2F0aW9uLmtpbmQgPT09IHkuS2luZC5BdWRpbyk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgc3R5bGU6IHsgZGlzcGxheTogXCJub25lXCIgfSB9LCBuLm1hcCgocikgPT4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgICBxLFxuICAgIHtcbiAgICAgIGtleTogb2UociksXG4gICAgICB0cmFja1JlZjogcixcbiAgICAgIHZvbHVtZTogdCxcbiAgICAgIG11dGVkOiBhXG4gICAgfVxuICApKSk7XG59XG5jb25zdCBiYSA9IC8qIEBfX1BVUkVfXyAqLyBlLmZvcndhcmRSZWYoZnVuY3Rpb24oeyBjaGlsZHJlblBvc2l0aW9uOiBhID0gXCJiZWZvcmVcIiwgY2hpbGRyZW46IG4sIC4uLnIgfSwgYykge1xuICBjb25zdCB7IG5hbWU6IHMgfSA9IExlKCk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IHJlZjogYywgLi4uciB9LCBhID09PSBcImJlZm9yZVwiICYmIG4sIHMsIGEgPT09IFwiYWZ0ZXJcIiAmJiBuKTtcbn0pO1xuZnVuY3Rpb24gRHQodCkge1xuICBjb25zdCBhID0gZS51c2VNZW1vKCgpID0+IFIodCwgeyBjbGFzc05hbWU6IFwibGstdG9hc3RcIiB9KSwgW3RdKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyAuLi5hIH0sIHQuY2hpbGRyZW4pO1xufVxuY29uc3QgVXQgPSAodCkgPT4ge1xuICBjb25zdCBhID0gW107XG4gIGZvciAobGV0IG4gPSAwOyBuIDwgdDsgbisrKVxuICAgIGEucHVzaChbbiwgdCAtIDEgLSBuXSk7XG4gIHJldHVybiBhO1xufSwgSiA9ICh0KSA9PiBbW01hdGguZmxvb3IodCAvIDIpXSwgWy0xXV0sIEd0ID0gKHQsIGEsIG4pID0+IHtcbiAgY29uc3QgW3IsIGNdID0gQSgwKSwgW3MsIGldID0gQShbW11dKTtcbiAgUCgoKSA9PiB7XG4gICAgaWYgKHQgPT09IFwidGhpbmtpbmdcIilcbiAgICAgIGkoSihhKSk7XG4gICAgZWxzZSBpZiAodCA9PT0gXCJjb25uZWN0aW5nXCIgfHwgdCA9PT0gXCJpbml0aWFsaXppbmdcIikge1xuICAgICAgY29uc3QgbyA9IFsuLi5VdChhKV07XG4gICAgICBpKG8pO1xuICAgIH0gZWxzZSBpKHQgPT09IFwibGlzdGVuaW5nXCIgPyBKKGEpIDogdCA9PT0gdm9pZCAwID8gW25ldyBBcnJheShhKS5maWxsKDApLm1hcCgobywgdSkgPT4gdSldIDogW1tdXSk7XG4gICAgYygwKTtcbiAgfSwgW3QsIGFdKTtcbiAgY29uc3QgbCA9IEkobnVsbCk7XG4gIHJldHVybiBQKCgpID0+IHtcbiAgICBsZXQgbyA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIGNvbnN0IHUgPSAoZCkgPT4ge1xuICAgICAgZCAtIG8gPj0gbiAmJiAoYygobSkgPT4gbSArIDEpLCBvID0gZCksIGwuY3VycmVudCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh1KTtcbiAgICB9O1xuICAgIHJldHVybiBsLmN1cnJlbnQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodSksICgpID0+IHtcbiAgICAgIGwuY3VycmVudCAhPT0gbnVsbCAmJiBjYW5jZWxBbmltYXRpb25GcmFtZShsLmN1cnJlbnQpO1xuICAgIH07XG4gIH0sIFtuLCBhLCB0LCBzLmxlbmd0aF0pLCBzW3IgJSBzLmxlbmd0aF07XG59LCBRdCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKFtcbiAgW1wiY29ubmVjdGluZ1wiLCAyZTNdLFxuICBbXCJpbml0aWFsaXppbmdcIiwgMmUzXSxcbiAgW1wibGlzdGVuaW5nXCIsIDUwMF0sXG4gIFtcInRoaW5raW5nXCIsIDE1MF1cbl0pLCBYdCA9ICh0LCBhKSA9PiB7XG4gIGlmICh0ID09PSB2b2lkIDApXG4gICAgcmV0dXJuIDFlMztcbiAgbGV0IG4gPSBRdC5nZXQodCk7XG4gIGlmIChuKVxuICAgIHN3aXRjaCAodCkge1xuICAgICAgY2FzZSBcImNvbm5lY3RpbmdcIjpcbiAgICAgICAgbiAvPSBhO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIHJldHVybiBuO1xufSwgWXQgPSAvKiBAX19QVVJFX18gKi8gZS5mb3J3YXJkUmVmKFxuICBmdW5jdGlvbih7IHN0YXRlOiBhLCBvcHRpb25zOiBuLCBiYXJDb3VudDogciA9IDE1LCB0cmFja1JlZjogYywgY2hpbGRyZW46IHMsIC4uLmkgfSwgbCkge1xuICAgIGNvbnN0IG8gPSBSKGksIHsgY2xhc3NOYW1lOiBcImxrLWF1ZGlvLWJhci12aXN1YWxpemVyXCIgfSk7XG4gICAgbGV0IHUgPSBPKCk7XG4gICAgYyAmJiAodSA9IGMpO1xuICAgIGNvbnN0IGQgPSBhZSh1LCB7XG4gICAgICBiYW5kczogcixcbiAgICAgIGxvUGFzczogMTAwLFxuICAgICAgaGlQYXNzOiAyMDBcbiAgICB9KSwgZiA9IChuID09IG51bGwgPyB2b2lkIDAgOiBuLm1pbkhlaWdodCkgPz8gMjAsIG0gPSAobiA9PSBudWxsID8gdm9pZCAwIDogbi5tYXhIZWlnaHQpID8/IDEwMCwgcCA9IEd0KFxuICAgICAgYSxcbiAgICAgIHIsXG4gICAgICBYdChhLCByKSA/PyAxMDBcbiAgICApO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgcmVmOiBsLCAuLi5vLCBcImRhdGEtbGstdmEtc3RhdGVcIjogYSB9LCBkLm1hcChcbiAgICAgIChFLCBoKSA9PiBzID8gJChzLCB7XG4gICAgICAgIFwiZGF0YS1say1oaWdobGlnaHRlZFwiOiBwLmluY2x1ZGVzKGgpLFxuICAgICAgICBcImRhdGEtbGstYmFyLWluZGV4XCI6IGgsXG4gICAgICAgIGNsYXNzOiBcImxrLWF1ZGlvLWJhclwiLFxuICAgICAgICBzdHlsZTogeyBoZWlnaHQ6IGAke01hdGgubWluKG0sIE1hdGgubWF4KGYsIEUgKiAxMDAgKyA1KSl9JWAgfVxuICAgICAgfSkgOiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICAgICAgICBcInNwYW5cIixcbiAgICAgICAge1xuICAgICAgICAgIGtleTogaCxcbiAgICAgICAgICBcImRhdGEtbGstaGlnaGxpZ2h0ZWRcIjogcC5pbmNsdWRlcyhoKSxcbiAgICAgICAgICBcImRhdGEtbGstYmFyLWluZGV4XCI6IGgsXG4gICAgICAgICAgY2xhc3NOYW1lOiBgbGstYXVkaW8tYmFyICR7cC5pbmNsdWRlcyhoKSAmJiBcImxrLWhpZ2hsaWdodGVkXCJ9YCxcbiAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgLy8gVE9ETyB0cmFuc2Zvcm0gYW5pbWF0aW9ucyB3b3VsZCBiZSBtb3JlIHBlcmZvcm1hbnQsIGhvd2V2ZXIgdGhlIGJvcmRlci1yYWRpdXMgZ2V0cyBkaXN0b3J0ZWQgd2hlbiB1c2luZyBzY2FsZSB0cmFuc2Zvcm1zLiBhIDktc2xpY2UgYXBwcm9hY2ggKG9yIDMgaW4gdGhpcyBjYXNlKSBjb3VsZCB3b3JrXG4gICAgICAgICAgICAvLyB0cmFuc2Zvcm06IGBzY2FsZSgxLCAke01hdGgubWluKG1heEhlaWdodCwgTWF0aC5tYXgobWluSGVpZ2h0LCB2b2x1bWUpKX1gLFxuICAgICAgICAgICAgaGVpZ2h0OiBgJHtNYXRoLm1pbihtLCBNYXRoLm1heChmLCBFICogMTAwICsgNSkpfSVgXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApXG4gICAgKSk7XG4gIH1cbiksIFNhID0gLyogQF9fUFVSRV9fICovIGUuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24oe1xuICAgIGNoaWxkcmVuOiBhLFxuICAgIGRpc2FibGVTcGVha2luZ0luZGljYXRvcjogbixcbiAgICBvblBhcnRpY2lwYW50Q2xpY2s6IHIsXG4gICAgdHJhY2tSZWY6IGMsXG4gICAgLi4uc1xuICB9LCBpKSB7XG4gICAgY29uc3QgbCA9IE4oYyksIHsgZWxlbWVudFByb3BzOiBvIH0gPSB0ZSh7XG4gICAgICB0cmFja1JlZjogbCxcbiAgICAgIGh0bWxQcm9wczogcyxcbiAgICAgIGRpc2FibGVTcGVha2luZ0luZGljYXRvcjogbixcbiAgICAgIG9uUGFydGljaXBhbnRDbGljazogclxuICAgIH0pO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgcmVmOiBpLCBzdHlsZTogeyBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLCBtaW5IZWlnaHQ6IFwiMTYwcHhcIiB9LCAuLi5vIH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXy5Qcm92aWRlciwgeyB2YWx1ZTogbCB9LCBhID8/IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoZS5GcmFnbWVudCwgbnVsbCwgVihsKSAmJiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KHEsIHsgdHJhY2tSZWY6IGwgfSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoWXQsIHsgYmFyQ291bnQ6IDcsIG9wdGlvbnM6IHsgbWluSGVpZ2h0OiA4IH0gfSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstcGFydGljaXBhbnQtbWV0YWRhdGFcIiB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLXBhcnRpY2lwYW50LW1ldGFkYXRhLWl0ZW1cIiB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGRlLCB7IHRyYWNrUmVmOiBsIH0pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KEIsIG51bGwpKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudCh1ZSwgeyBjbGFzc05hbWU6IFwibGstcGFydGljaXBhbnQtbWV0YWRhdGEtaXRlbVwiIH0pKSkpKTtcbiAgfVxuKTtcbmZ1bmN0aW9uIENhKHQpIHtcbiAgY29uc3QgW2EsIG5dID0gZS51c2VTdGF0ZSh2b2lkIDApLCByID0gSyh0LnJvb20pO1xuICByZXR1cm4gZS51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHN3aXRjaCAocikge1xuICAgICAgY2FzZSBGLlJlY29ubmVjdGluZzpcbiAgICAgICAgbihcbiAgICAgICAgICAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGUuRnJhZ21lbnQsIG51bGwsIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoVSwgeyBjbGFzc05hbWU6IFwibGstc3Bpbm5lclwiIH0pLCBcIiBSZWNvbm5lY3RpbmdcIilcbiAgICAgICAgKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEYuQ29ubmVjdGluZzpcbiAgICAgICAgbihcbiAgICAgICAgICAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGUuRnJhZ21lbnQsIG51bGwsIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoVSwgeyBjbGFzc05hbWU6IFwibGstc3Bpbm5lclwiIH0pLCBcIiBDb25uZWN0aW5nXCIpXG4gICAgICAgICk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBGLkRpc2Nvbm5lY3RlZDpcbiAgICAgICAgbigvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGUuRnJhZ21lbnQsIG51bGwsIFwiRGlzY29ubmVjdGVkXCIpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBuKHZvaWQgMCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSwgW3JdKSwgYSA/IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoRHQsIHsgY2xhc3NOYW1lOiBcImxrLXRvYXN0LWNvbm5lY3Rpb24tc3RhdGVcIiB9LCBhKSA6IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoZS5GcmFnbWVudCwgbnVsbCk7XG59XG5jb25zdCBJYSA9IC8qIEBfX1BVUkVfXyAqLyBlLmZvcndhcmRSZWYoXG4gIGZ1bmN0aW9uKHsgZW50cnk6IGEsIGhpZGVOYW1lOiBuID0gITEsIGhpZGVUaW1lc3RhbXA6IHIgPSAhMSwgbWVzc2FnZUZvcm1hdHRlcjogYywgLi4ucyB9LCBpKSB7XG4gICAgdmFyIGYsIG0sIHA7XG4gICAgY29uc3QgbCA9IGUudXNlTWVtbygoKSA9PiBjID8gYyhhLm1lc3NhZ2UpIDogYS5tZXNzYWdlLCBbYS5tZXNzYWdlLCBjXSksIG8gPSAhIWEuZWRpdFRpbWVzdGFtcCwgdSA9IG5ldyBEYXRlKGEudGltZXN0YW1wKSwgZCA9IG5hdmlnYXRvciA/IG5hdmlnYXRvci5sYW5ndWFnZSA6IFwiZW4tVVNcIjtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgICAgIFwibGlcIixcbiAgICAgIHtcbiAgICAgICAgcmVmOiBpLFxuICAgICAgICBjbGFzc05hbWU6IFwibGstY2hhdC1lbnRyeVwiLFxuICAgICAgICB0aXRsZTogdS50b0xvY2FsZVRpbWVTdHJpbmcoZCwgeyB0aW1lU3R5bGU6IFwiZnVsbFwiIH0pLFxuICAgICAgICBcImRhdGEtbGstbWVzc2FnZS1vcmlnaW5cIjogKGYgPSBhLmZyb20pICE9IG51bGwgJiYgZi5pc0xvY2FsID8gXCJsb2NhbFwiIDogXCJyZW1vdGVcIixcbiAgICAgICAgLi4uc1xuICAgICAgfSxcbiAgICAgICghciB8fCAhbiB8fCBvKSAmJiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJsay1tZXRhLWRhdGFcIiB9LCAhbiAmJiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwic3Ryb25nXCIsIHsgY2xhc3NOYW1lOiBcImxrLXBhcnRpY2lwYW50LW5hbWVcIiB9LCAoKG0gPSBhLmZyb20pID09IG51bGwgPyB2b2lkIDAgOiBtLm5hbWUpID8/ICgocCA9IGEuZnJvbSkgPT0gbnVsbCA/IHZvaWQgMCA6IHAuaWRlbnRpdHkpKSwgKCFyIHx8IG8pICYmIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcImxrLXRpbWVzdGFtcFwiIH0sIG8gJiYgXCJlZGl0ZWQgXCIsIHUudG9Mb2NhbGVUaW1lU3RyaW5nKGQsIHsgdGltZVN0eWxlOiBcInNob3J0XCIgfSkpKSxcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcImxrLW1lc3NhZ2UtYm9keVwiIH0sIGwpXG4gICAgKTtcbiAgfVxuKTtcbmZ1bmN0aW9uIFBhKHQpIHtcbiAgcmV0dXJuIFFlKHQsIFhlKCkpLm1hcCgoYSwgbikgPT4ge1xuICAgIGlmICh0eXBlb2YgYSA9PSBcInN0cmluZ1wiKVxuICAgICAgcmV0dXJuIGE7XG4gICAge1xuICAgICAgY29uc3QgciA9IGEuY29udGVudC50b1N0cmluZygpLCBjID0gYS50eXBlID09PSBcInVybFwiID8gL15odHRwKHM/KTpcXC9cXC8vLnRlc3QocikgPyByIDogYGh0dHBzOi8vJHtyfWAgOiBgbWFpbHRvOiR7cn1gO1xuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJhXCIsIHsgY2xhc3NOYW1lOiBcImxrLWNoYXQtbGlua1wiLCBrZXk6IG4sIGhyZWY6IGMsIHRhcmdldDogXCJfYmxhbmtcIiwgcmVsOiBcIm5vcmVmZXJyZXJcIiB9LCByKTtcbiAgICB9XG4gIH0pO1xufVxuZXhwb3J0IHtcbiAgaXQgYXMgJCxcbiAgeWEgYXMgQSxcbiAgWXQgYXMgQixcbiAgY2EgYXMgQyxcbiAgbGEgYXMgRCxcbiAgSHQgYXMgRSxcbiAgdmEgYXMgRixcbiAgRWEgYXMgRyxcbiAgQnQgYXMgSCxcbiAgS2UgYXMgSSxcbiAgZXQgYXMgSixcbiAgRCBhcyBLLFxuICBrYSBhcyBMLFxuICBtYSBhcyBNLFxuICB0dCBhcyBOLFxuICBhdCBhcyBPLFxuICBqdCBhcyBQLFxuICBudCBhcyBRLFxuICBSYSBhcyBSLFxuICBvYSBhcyBTLFxuICBnYSBhcyBULFxuICBydCBhcyBVLFxuICBadCBhcyBWLFxuICBjdCBhcyBXLFxuICBsdCBhcyBYLFxuICBvdCBhcyBZLFxuICBzdCBhcyBaLFxuICBzZSBhcyBfLFxuICBJYSBhcyBhLFxuICBVIGFzIGEwLFxuICB1dCBhcyBhMSxcbiAgaHQgYXMgYixcbiAgJCBhcyBjLFxuICBzYSBhcyBkLFxuICBpYSBhcyBlLFxuICB1YSBhcyBmLFxuICBoYSBhcyBnLFxuICB3YSBhcyBoLFxuICBwYSBhcyBpLFxuICBDYSBhcyBqLFxuICBmZSBhcyBrLFxuICBTYSBhcyBsLFxuICBSIGFzIG0sXG4gIER0IGFzIG4sXG4gIFBhIGFzIG8sXG4gIG5hIGFzIHAsXG4gIHJhIGFzIHEsXG4gIGR0IGFzIHIsXG4gIGZhIGFzIHMsXG4gIHVlIGFzIHQsXG4gIHEgYXMgdSxcbiAgQiBhcyB2LFxuICBkYSBhcyB3LFxuICBkZSBhcyB4LFxuICBNYSBhcyB5LFxuICBiYSBhcyB6XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tcG9uZW50cy1CTzhDTC1lay5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0/node_modules/@livekit/components-react/dist/components-BO8CL-ek.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0/node_modules/@livekit/components-react/dist/contexts-DjicKJUz.mjs":
/*!***********************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0/node_modules/@livekit/components-react/dist/contexts-DjicKJUz.mjs ***!
  \***********************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $: () => (/* binding */ Ts),\n/* harmony export */   A: () => (/* binding */ Ho),\n/* harmony export */   B: () => (/* binding */ xo),\n/* harmony export */   C: () => (/* binding */ io),\n/* harmony export */   D: () => (/* binding */ fs),\n/* harmony export */   E: () => (/* binding */ Zo),\n/* harmony export */   F: () => (/* binding */ As),\n/* harmony export */   G: () => (/* binding */ $o),\n/* harmony export */   H: () => (/* binding */ es),\n/* harmony export */   I: () => (/* binding */ ns),\n/* harmony export */   J: () => (/* binding */ Go),\n/* harmony export */   K: () => (/* binding */ Ko),\n/* harmony export */   L: () => (/* binding */ To),\n/* harmony export */   M: () => (/* binding */ Vo),\n/* harmony export */   N: () => (/* binding */ ps),\n/* harmony export */   O: () => (/* binding */ hs),\n/* harmony export */   P: () => (/* binding */ vs),\n/* harmony export */   Q: () => (/* binding */ us),\n/* harmony export */   R: () => (/* binding */ $n),\n/* harmony export */   S: () => (/* binding */ is),\n/* harmony export */   T: () => (/* binding */ os),\n/* harmony export */   U: () => (/* binding */ Wi),\n/* harmony export */   V: () => (/* binding */ ys),\n/* harmony export */   W: () => (/* binding */ Wo),\n/* harmony export */   X: () => (/* binding */ Rt),\n/* harmony export */   Y: () => (/* binding */ zo),\n/* harmony export */   Z: () => (/* binding */ ds),\n/* harmony export */   _: () => (/* binding */ Cs),\n/* harmony export */   a: () => (/* binding */ Ps),\n/* harmony export */   a0: () => (/* binding */ Jo),\n/* harmony export */   a1: () => (/* binding */ j),\n/* harmony export */   a2: () => (/* binding */ ws),\n/* harmony export */   a3: () => (/* binding */ xs),\n/* harmony export */   a4: () => (/* binding */ Ss),\n/* harmony export */   a5: () => (/* binding */ jo),\n/* harmony export */   a6: () => (/* binding */ Fo),\n/* harmony export */   a7: () => (/* binding */ rs),\n/* harmony export */   a8: () => (/* binding */ qo),\n/* harmony export */   a9: () => (/* binding */ Rn),\n/* harmony export */   aa: () => (/* binding */ Dn),\n/* harmony export */   ab: () => (/* binding */ ls),\n/* harmony export */   ac: () => (/* binding */ ko),\n/* harmony export */   ad: () => (/* binding */ wr),\n/* harmony export */   ae: () => (/* binding */ Sr),\n/* harmony export */   af: () => (/* binding */ Nn),\n/* harmony export */   ag: () => (/* binding */ Mn),\n/* harmony export */   ah: () => (/* binding */ Ns),\n/* harmony export */   ai: () => (/* binding */ Es),\n/* harmony export */   aj: () => (/* binding */ Oo),\n/* harmony export */   ak: () => (/* binding */ Os),\n/* harmony export */   al: () => (/* binding */ Mo),\n/* harmony export */   am: () => (/* binding */ Do),\n/* harmony export */   an: () => (/* binding */ _o),\n/* harmony export */   ao: () => (/* binding */ Io),\n/* harmony export */   ap: () => (/* binding */ be),\n/* harmony export */   aq: () => (/* binding */ Uo),\n/* harmony export */   ar: () => (/* binding */ ks),\n/* harmony export */   as: () => (/* binding */ Po),\n/* harmony export */   at: () => (/* binding */ Lo),\n/* harmony export */   au: () => (/* binding */ Ro),\n/* harmony export */   av: () => (/* binding */ No),\n/* harmony export */   aw: () => (/* binding */ Is),\n/* harmony export */   ax: () => (/* binding */ Ls),\n/* harmony export */   b: () => (/* binding */ gs),\n/* harmony export */   c: () => (/* binding */ Ds),\n/* harmony export */   d: () => (/* binding */ cs),\n/* harmony export */   e: () => (/* binding */ Yo),\n/* harmony export */   f: () => (/* binding */ Ms),\n/* harmony export */   g: () => (/* binding */ ao),\n/* harmony export */   h: () => (/* binding */ as),\n/* harmony export */   i: () => (/* binding */ _s),\n/* harmony export */   j: () => (/* binding */ So),\n/* harmony export */   k: () => (/* binding */ ms),\n/* harmony export */   l: () => (/* binding */ L),\n/* harmony export */   m: () => (/* binding */ Ao),\n/* harmony export */   n: () => (/* binding */ Fi),\n/* harmony export */   o: () => (/* binding */ so),\n/* harmony export */   p: () => (/* binding */ $),\n/* harmony export */   q: () => (/* binding */ Xo),\n/* harmony export */   r: () => (/* binding */ to),\n/* harmony export */   s: () => (/* binding */ bs),\n/* harmony export */   t: () => (/* binding */ On),\n/* harmony export */   u: () => (/* binding */ Rs),\n/* harmony export */   v: () => (/* binding */ ts),\n/* harmony export */   w: () => (/* binding */ Eo),\n/* harmony export */   x: () => (/* binding */ Qo),\n/* harmony export */   y: () => (/* binding */ ss),\n/* harmony export */   z: () => (/* binding */ Bo)\n/* harmony export */ });\n/* harmony import */ var livekit_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! livekit-client */ \"(ssr)/./node_modules/.pnpm/livekit-client@2.5.5/node_modules/livekit-client/dist/livekit-client.esm.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/.pnpm/next@14.2.9_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\nconst Ke = Math.min, ue = Math.max, ke = Math.round, ee = (e) => ({\n  x: e,\n  y: e\n}), Wn = {\n  left: \"right\",\n  right: \"left\",\n  bottom: \"top\",\n  top: \"bottom\"\n}, Bn = {\n  start: \"end\",\n  end: \"start\"\n};\nfunction bt(e, t, n) {\n  return ue(e, Ke(t, n));\n}\nfunction Ne(e, t) {\n  return typeof e == \"function\" ? e(t) : e;\n}\nfunction oe(e) {\n  return e.split(\"-\")[0];\n}\nfunction $e(e) {\n  return e.split(\"-\")[1];\n}\nfunction jt(e) {\n  return e === \"x\" ? \"y\" : \"x\";\n}\nfunction Wt(e) {\n  return e === \"y\" ? \"height\" : \"width\";\n}\nfunction Ue(e) {\n  return [\"top\", \"bottom\"].includes(oe(e)) ? \"y\" : \"x\";\n}\nfunction Bt(e) {\n  return jt(Ue(e));\n}\nfunction Vn(e, t, n) {\n  n === void 0 && (n = !1);\n  const r = $e(e), i = Bt(e), o = Wt(i);\n  let s = i === \"x\" ? r === (n ? \"end\" : \"start\") ? \"right\" : \"left\" : r === \"start\" ? \"bottom\" : \"top\";\n  return t.reference[o] > t.floating[o] && (s = Oe(s)), [s, Oe(s)];\n}\nfunction Hn(e) {\n  const t = Oe(e);\n  return [Qe(e), t, Qe(t)];\n}\nfunction Qe(e) {\n  return e.replace(/start|end/g, (t) => Bn[t]);\n}\nfunction zn(e, t, n) {\n  const r = [\"left\", \"right\"], i = [\"right\", \"left\"], o = [\"top\", \"bottom\"], s = [\"bottom\", \"top\"];\n  switch (e) {\n    case \"top\":\n    case \"bottom\":\n      return n ? t ? i : r : t ? r : i;\n    case \"left\":\n    case \"right\":\n      return t ? o : s;\n    default:\n      return [];\n  }\n}\nfunction Yn(e, t, n, r) {\n  const i = $e(e);\n  let o = zn(oe(e), n === \"start\", r);\n  return i && (o = o.map((s) => s + \"-\" + i), t && (o = o.concat(o.map(Qe)))), o;\n}\nfunction Oe(e) {\n  return e.replace(/left|right|bottom|top/g, (t) => Wn[t]);\n}\nfunction Gn(e) {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    ...e\n  };\n}\nfunction Kn(e) {\n  return typeof e != \"number\" ? Gn(e) : {\n    top: e,\n    right: e,\n    bottom: e,\n    left: e\n  };\n}\nfunction Le(e) {\n  const {\n    x: t,\n    y: n,\n    width: r,\n    height: i\n  } = e;\n  return {\n    width: r,\n    height: i,\n    top: n,\n    left: t,\n    right: t + r,\n    bottom: n + i,\n    x: t,\n    y: n\n  };\n}\nfunction yt(e, t, n) {\n  let {\n    reference: r,\n    floating: i\n  } = e;\n  const o = Ue(t), s = Bt(t), a = Wt(s), c = oe(t), u = o === \"y\", l = r.x + r.width / 2 - i.width / 2, f = r.y + r.height / 2 - i.height / 2, h = r[a] / 2 - i[a] / 2;\n  let d;\n  switch (c) {\n    case \"top\":\n      d = {\n        x: l,\n        y: r.y - i.height\n      };\n      break;\n    case \"bottom\":\n      d = {\n        x: l,\n        y: r.y + r.height\n      };\n      break;\n    case \"right\":\n      d = {\n        x: r.x + r.width,\n        y: f\n      };\n      break;\n    case \"left\":\n      d = {\n        x: r.x - i.width,\n        y: f\n      };\n      break;\n    default:\n      d = {\n        x: r.x,\n        y: r.y\n      };\n  }\n  switch ($e(t)) {\n    case \"start\":\n      d[s] -= h * (n && u ? -1 : 1);\n      break;\n    case \"end\":\n      d[s] += h * (n && u ? -1 : 1);\n      break;\n  }\n  return d;\n}\nconst Qn = async (e, t, n) => {\n  const {\n    placement: r = \"bottom\",\n    strategy: i = \"absolute\",\n    middleware: o = [],\n    platform: s\n  } = n, a = o.filter(Boolean), c = await (s.isRTL == null ? void 0 : s.isRTL(t));\n  let u = await s.getElementRects({\n    reference: e,\n    floating: t,\n    strategy: i\n  }), {\n    x: l,\n    y: f\n  } = yt(u, r, c), h = r, d = {}, m = 0;\n  for (let p = 0; p < a.length; p++) {\n    const {\n      name: g,\n      fn: v\n    } = a[p], {\n      x: S,\n      y: k,\n      data: _,\n      reset: E\n    } = await v({\n      x: l,\n      y: f,\n      initialPlacement: r,\n      placement: h,\n      strategy: i,\n      middlewareData: d,\n      rects: u,\n      platform: s,\n      elements: {\n        reference: e,\n        floating: t\n      }\n    });\n    l = S ?? l, f = k ?? f, d = {\n      ...d,\n      [g]: {\n        ...d[g],\n        ..._\n      }\n    }, E && m <= 50 && (m++, typeof E == \"object\" && (E.placement && (h = E.placement), E.rects && (u = E.rects === !0 ? await s.getElementRects({\n      reference: e,\n      floating: t,\n      strategy: i\n    }) : E.rects), {\n      x: l,\n      y: f\n    } = yt(u, h, c)), p = -1);\n  }\n  return {\n    x: l,\n    y: f,\n    placement: h,\n    strategy: i,\n    middlewareData: d\n  };\n};\nasync function Vt(e, t) {\n  var n;\n  t === void 0 && (t = {});\n  const {\n    x: r,\n    y: i,\n    platform: o,\n    rects: s,\n    elements: a,\n    strategy: c\n  } = e, {\n    boundary: u = \"clippingAncestors\",\n    rootBoundary: l = \"viewport\",\n    elementContext: f = \"floating\",\n    altBoundary: h = !1,\n    padding: d = 0\n  } = Ne(t, e), m = Kn(d), g = a[h ? f === \"floating\" ? \"reference\" : \"floating\" : f], v = Le(await o.getClippingRect({\n    element: (n = await (o.isElement == null ? void 0 : o.isElement(g))) == null || n ? g : g.contextElement || await (o.getDocumentElement == null ? void 0 : o.getDocumentElement(a.floating)),\n    boundary: u,\n    rootBoundary: l,\n    strategy: c\n  })), S = f === \"floating\" ? {\n    ...s.floating,\n    x: r,\n    y: i\n  } : s.reference, k = await (o.getOffsetParent == null ? void 0 : o.getOffsetParent(a.floating)), _ = await (o.isElement == null ? void 0 : o.isElement(k)) ? await (o.getScale == null ? void 0 : o.getScale(k)) || {\n    x: 1,\n    y: 1\n  } : {\n    x: 1,\n    y: 1\n  }, E = Le(o.convertOffsetParentRelativeRectToViewportRelativeRect ? await o.convertOffsetParentRelativeRectToViewportRelativeRect({\n    elements: a,\n    rect: S,\n    offsetParent: k,\n    strategy: c\n  }) : S);\n  return {\n    top: (v.top - E.top + m.top) / _.y,\n    bottom: (E.bottom - v.bottom + m.bottom) / _.y,\n    left: (v.left - E.left + m.left) / _.x,\n    right: (E.right - v.right + m.right) / _.x\n  };\n}\nconst Jn = function(e) {\n  return e === void 0 && (e = {}), {\n    name: \"flip\",\n    options: e,\n    async fn(t) {\n      var n, r;\n      const {\n        placement: i,\n        middlewareData: o,\n        rects: s,\n        initialPlacement: a,\n        platform: c,\n        elements: u\n      } = t, {\n        mainAxis: l = !0,\n        crossAxis: f = !0,\n        fallbackPlacements: h,\n        fallbackStrategy: d = \"bestFit\",\n        fallbackAxisSideDirection: m = \"none\",\n        flipAlignment: p = !0,\n        ...g\n      } = Ne(e, t);\n      if ((n = o.arrow) != null && n.alignmentOffset)\n        return {};\n      const v = oe(i), S = oe(a) === a, k = await (c.isRTL == null ? void 0 : c.isRTL(u.floating)), _ = h || (S || !p ? [Oe(a)] : Hn(a));\n      !h && m !== \"none\" && _.push(...Yn(a, p, m, k));\n      const E = [a, ..._], re = await Vt(t, g), C = [];\n      let T = ((r = o.flip) == null ? void 0 : r.overflows) || [];\n      if (l && C.push(re[v]), f) {\n        const x = Vn(i, s, k);\n        C.push(re[x[0]], re[x[1]]);\n      }\n      if (T = [...T, {\n        placement: i,\n        overflows: C\n      }], !C.every((x) => x <= 0)) {\n        var I, N;\n        const x = (((I = o.flip) == null ? void 0 : I.index) || 0) + 1, ie = E[x];\n        if (ie)\n          return {\n            data: {\n              index: x,\n              overflows: T\n            },\n            reset: {\n              placement: ie\n            }\n          };\n        let q = (N = T.filter((X) => X.overflows[0] <= 0).sort((X, ce) => X.overflows[1] - ce.overflows[1])[0]) == null ? void 0 : N.placement;\n        if (!q)\n          switch (d) {\n            case \"bestFit\": {\n              var w;\n              const X = (w = T.map((ce) => [ce.placement, ce.overflows.filter((ge) => ge > 0).reduce((ge, Un) => ge + Un, 0)]).sort((ce, ge) => ce[1] - ge[1])[0]) == null ? void 0 : w[0];\n              X && (q = X);\n              break;\n            }\n            case \"initialPlacement\":\n              q = a;\n              break;\n          }\n        if (i !== q)\n          return {\n            reset: {\n              placement: q\n            }\n          };\n      }\n      return {};\n    }\n  };\n};\nasync function qn(e, t) {\n  const {\n    placement: n,\n    platform: r,\n    elements: i\n  } = e, o = await (r.isRTL == null ? void 0 : r.isRTL(i.floating)), s = oe(n), a = $e(n), c = Ue(n) === \"y\", u = [\"left\", \"top\"].includes(s) ? -1 : 1, l = o && c ? -1 : 1, f = Ne(t, e);\n  let {\n    mainAxis: h,\n    crossAxis: d,\n    alignmentAxis: m\n  } = typeof f == \"number\" ? {\n    mainAxis: f,\n    crossAxis: 0,\n    alignmentAxis: null\n  } : {\n    mainAxis: 0,\n    crossAxis: 0,\n    alignmentAxis: null,\n    ...f\n  };\n  return a && typeof m == \"number\" && (d = a === \"end\" ? m * -1 : m), c ? {\n    x: d * l,\n    y: h * u\n  } : {\n    x: h * u,\n    y: d * l\n  };\n}\nconst Xn = function(e) {\n  return e === void 0 && (e = 0), {\n    name: \"offset\",\n    options: e,\n    async fn(t) {\n      var n, r;\n      const {\n        x: i,\n        y: o,\n        placement: s,\n        middlewareData: a\n      } = t, c = await qn(t, e);\n      return s === ((n = a.offset) == null ? void 0 : n.placement) && (r = a.arrow) != null && r.alignmentOffset ? {} : {\n        x: i + c.x,\n        y: o + c.y,\n        data: {\n          ...c,\n          placement: s\n        }\n      };\n    }\n  };\n}, Zn = function(e) {\n  return e === void 0 && (e = {}), {\n    name: \"shift\",\n    options: e,\n    async fn(t) {\n      const {\n        x: n,\n        y: r,\n        placement: i\n      } = t, {\n        mainAxis: o = !0,\n        crossAxis: s = !1,\n        limiter: a = {\n          fn: (g) => {\n            let {\n              x: v,\n              y: S\n            } = g;\n            return {\n              x: v,\n              y: S\n            };\n          }\n        },\n        ...c\n      } = Ne(e, t), u = {\n        x: n,\n        y: r\n      }, l = await Vt(t, c), f = Ue(oe(i)), h = jt(f);\n      let d = u[h], m = u[f];\n      if (o) {\n        const g = h === \"y\" ? \"top\" : \"left\", v = h === \"y\" ? \"bottom\" : \"right\", S = d + l[g], k = d - l[v];\n        d = bt(S, d, k);\n      }\n      if (s) {\n        const g = f === \"y\" ? \"top\" : \"left\", v = f === \"y\" ? \"bottom\" : \"right\", S = m + l[g], k = m - l[v];\n        m = bt(S, m, k);\n      }\n      const p = a.fn({\n        ...t,\n        [h]: d,\n        [f]: m\n      });\n      return {\n        ...p,\n        data: {\n          x: p.x - n,\n          y: p.y - r\n        }\n      };\n    }\n  };\n};\nfunction Fe() {\n  return typeof window < \"u\";\n}\nfunction ve(e) {\n  return Ht(e) ? (e.nodeName || \"\").toLowerCase() : \"#document\";\n}\nfunction F(e) {\n  var t;\n  return (e == null || (t = e.ownerDocument) == null ? void 0 : t.defaultView) || window;\n}\nfunction Q(e) {\n  var t;\n  return (t = (Ht(e) ? e.ownerDocument : e.document) || window.document) == null ? void 0 : t.documentElement;\n}\nfunction Ht(e) {\n  return Fe() ? e instanceof Node || e instanceof F(e).Node : !1;\n}\nfunction H(e) {\n  return Fe() ? e instanceof Element || e instanceof F(e).Element : !1;\n}\nfunction G(e) {\n  return Fe() ? e instanceof HTMLElement || e instanceof F(e).HTMLElement : !1;\n}\nfunction wt(e) {\n  return !Fe() || typeof ShadowRoot > \"u\" ? !1 : e instanceof ShadowRoot || e instanceof F(e).ShadowRoot;\n}\nfunction Ee(e) {\n  const {\n    overflow: t,\n    overflowX: n,\n    overflowY: r,\n    display: i\n  } = z(e);\n  return /auto|scroll|overlay|hidden|clip/.test(t + r + n) && ![\"inline\", \"contents\"].includes(i);\n}\nfunction er(e) {\n  return [\"table\", \"td\", \"th\"].includes(ve(e));\n}\nfunction je(e) {\n  return [\":popover-open\", \":modal\"].some((t) => {\n    try {\n      return e.matches(t);\n    } catch {\n      return !1;\n    }\n  });\n}\nfunction st(e) {\n  const t = at(), n = H(e) ? z(e) : e;\n  return n.transform !== \"none\" || n.perspective !== \"none\" || (n.containerType ? n.containerType !== \"normal\" : !1) || !t && (n.backdropFilter ? n.backdropFilter !== \"none\" : !1) || !t && (n.filter ? n.filter !== \"none\" : !1) || [\"transform\", \"perspective\", \"filter\"].some((r) => (n.willChange || \"\").includes(r)) || [\"paint\", \"layout\", \"strict\", \"content\"].some((r) => (n.contain || \"\").includes(r));\n}\nfunction tr(e) {\n  let t = te(e);\n  for (; G(t) && !de(t); ) {\n    if (st(t))\n      return t;\n    if (je(t))\n      return null;\n    t = te(t);\n  }\n  return null;\n}\nfunction at() {\n  return typeof CSS > \"u\" || !CSS.supports ? !1 : CSS.supports(\"-webkit-backdrop-filter\", \"none\");\n}\nfunction de(e) {\n  return [\"html\", \"body\", \"#document\"].includes(ve(e));\n}\nfunction z(e) {\n  return F(e).getComputedStyle(e);\n}\nfunction We(e) {\n  return H(e) ? {\n    scrollLeft: e.scrollLeft,\n    scrollTop: e.scrollTop\n  } : {\n    scrollLeft: e.scrollX,\n    scrollTop: e.scrollY\n  };\n}\nfunction te(e) {\n  if (ve(e) === \"html\")\n    return e;\n  const t = (\n    // Step into the shadow DOM of the parent of a slotted node.\n    e.assignedSlot || // DOM Element detected.\n    e.parentNode || // ShadowRoot detected.\n    wt(e) && e.host || // Fallback.\n    Q(e)\n  );\n  return wt(t) ? t.host : t;\n}\nfunction zt(e) {\n  const t = te(e);\n  return de(t) ? e.ownerDocument ? e.ownerDocument.body : e.body : G(t) && Ee(t) ? t : zt(t);\n}\nfunction Je(e, t, n) {\n  var r;\n  t === void 0 && (t = []), n === void 0 && (n = !0);\n  const i = zt(e), o = i === ((r = e.ownerDocument) == null ? void 0 : r.body), s = F(i);\n  if (o) {\n    const a = qe(s);\n    return t.concat(s, s.visualViewport || [], Ee(i) ? i : [], a && n ? Je(a) : []);\n  }\n  return t.concat(i, Je(i, [], n));\n}\nfunction qe(e) {\n  return e.parent && Object.getPrototypeOf(e.parent) ? e.frameElement : null;\n}\nfunction Yt(e) {\n  const t = z(e);\n  let n = parseFloat(t.width) || 0, r = parseFloat(t.height) || 0;\n  const i = G(e), o = i ? e.offsetWidth : n, s = i ? e.offsetHeight : r, a = ke(n) !== o || ke(r) !== s;\n  return a && (n = o, r = s), {\n    width: n,\n    height: r,\n    $: a\n  };\n}\nfunction Gt(e) {\n  return H(e) ? e : e.contextElement;\n}\nfunction le(e) {\n  const t = Gt(e);\n  if (!G(t))\n    return ee(1);\n  const n = t.getBoundingClientRect(), {\n    width: r,\n    height: i,\n    $: o\n  } = Yt(t);\n  let s = (o ? ke(n.width) : n.width) / r, a = (o ? ke(n.height) : n.height) / i;\n  return (!s || !Number.isFinite(s)) && (s = 1), (!a || !Number.isFinite(a)) && (a = 1), {\n    x: s,\n    y: a\n  };\n}\nconst nr = /* @__PURE__ */ ee(0);\nfunction Kt(e) {\n  const t = F(e);\n  return !at() || !t.visualViewport ? nr : {\n    x: t.visualViewport.offsetLeft,\n    y: t.visualViewport.offsetTop\n  };\n}\nfunction rr(e, t, n) {\n  return t === void 0 && (t = !1), !n || t && n !== F(e) ? !1 : t;\n}\nfunction we(e, t, n, r) {\n  t === void 0 && (t = !1), n === void 0 && (n = !1);\n  const i = e.getBoundingClientRect(), o = Gt(e);\n  let s = ee(1);\n  t && (r ? H(r) && (s = le(r)) : s = le(e));\n  const a = rr(o, n, r) ? Kt(o) : ee(0);\n  let c = (i.left + a.x) / s.x, u = (i.top + a.y) / s.y, l = i.width / s.x, f = i.height / s.y;\n  if (o) {\n    const h = F(o), d = r && H(r) ? F(r) : r;\n    let m = h, p = qe(m);\n    for (; p && r && d !== m; ) {\n      const g = le(p), v = p.getBoundingClientRect(), S = z(p), k = v.left + (p.clientLeft + parseFloat(S.paddingLeft)) * g.x, _ = v.top + (p.clientTop + parseFloat(S.paddingTop)) * g.y;\n      c *= g.x, u *= g.y, l *= g.x, f *= g.y, c += k, u += _, m = F(p), p = qe(m);\n    }\n  }\n  return Le({\n    width: l,\n    height: f,\n    x: c,\n    y: u\n  });\n}\nfunction ir(e) {\n  let {\n    elements: t,\n    rect: n,\n    offsetParent: r,\n    strategy: i\n  } = e;\n  const o = i === \"fixed\", s = Q(r), a = t ? je(t.floating) : !1;\n  if (r === s || a && o)\n    return n;\n  let c = {\n    scrollLeft: 0,\n    scrollTop: 0\n  }, u = ee(1);\n  const l = ee(0), f = G(r);\n  if ((f || !f && !o) && ((ve(r) !== \"body\" || Ee(s)) && (c = We(r)), G(r))) {\n    const h = we(r);\n    u = le(r), l.x = h.x + r.clientLeft, l.y = h.y + r.clientTop;\n  }\n  return {\n    width: n.width * u.x,\n    height: n.height * u.y,\n    x: n.x * u.x - c.scrollLeft * u.x + l.x,\n    y: n.y * u.y - c.scrollTop * u.y + l.y\n  };\n}\nfunction or(e) {\n  return Array.from(e.getClientRects());\n}\nfunction Xe(e, t) {\n  const n = We(e).scrollLeft;\n  return t ? t.left + n : we(Q(e)).left + n;\n}\nfunction sr(e) {\n  const t = Q(e), n = We(e), r = e.ownerDocument.body, i = ue(t.scrollWidth, t.clientWidth, r.scrollWidth, r.clientWidth), o = ue(t.scrollHeight, t.clientHeight, r.scrollHeight, r.clientHeight);\n  let s = -n.scrollLeft + Xe(e);\n  const a = -n.scrollTop;\n  return z(r).direction === \"rtl\" && (s += ue(t.clientWidth, r.clientWidth) - i), {\n    width: i,\n    height: o,\n    x: s,\n    y: a\n  };\n}\nfunction ar(e, t) {\n  const n = F(e), r = Q(e), i = n.visualViewport;\n  let o = r.clientWidth, s = r.clientHeight, a = 0, c = 0;\n  if (i) {\n    o = i.width, s = i.height;\n    const u = at();\n    (!u || u && t === \"fixed\") && (a = i.offsetLeft, c = i.offsetTop);\n  }\n  return {\n    width: o,\n    height: s,\n    x: a,\n    y: c\n  };\n}\nfunction cr(e, t) {\n  const n = we(e, !0, t === \"fixed\"), r = n.top + e.clientTop, i = n.left + e.clientLeft, o = G(e) ? le(e) : ee(1), s = e.clientWidth * o.x, a = e.clientHeight * o.y, c = i * o.x, u = r * o.y;\n  return {\n    width: s,\n    height: a,\n    x: c,\n    y: u\n  };\n}\nfunction St(e, t, n) {\n  let r;\n  if (t === \"viewport\")\n    r = ar(e, n);\n  else if (t === \"document\")\n    r = sr(Q(e));\n  else if (H(t))\n    r = cr(t, n);\n  else {\n    const i = Kt(e);\n    r = {\n      ...t,\n      x: t.x - i.x,\n      y: t.y - i.y\n    };\n  }\n  return Le(r);\n}\nfunction Qt(e, t) {\n  const n = te(e);\n  return n === t || !H(n) || de(n) ? !1 : z(n).position === \"fixed\" || Qt(n, t);\n}\nfunction ur(e, t) {\n  const n = t.get(e);\n  if (n)\n    return n;\n  let r = Je(e, [], !1).filter((a) => H(a) && ve(a) !== \"body\"), i = null;\n  const o = z(e).position === \"fixed\";\n  let s = o ? te(e) : e;\n  for (; H(s) && !de(s); ) {\n    const a = z(s), c = st(s);\n    !c && a.position === \"fixed\" && (i = null), (o ? !c && !i : !c && a.position === \"static\" && !!i && [\"absolute\", \"fixed\"].includes(i.position) || Ee(s) && !c && Qt(e, s)) ? r = r.filter((l) => l !== s) : i = a, s = te(s);\n  }\n  return t.set(e, r), r;\n}\nfunction lr(e) {\n  let {\n    element: t,\n    boundary: n,\n    rootBoundary: r,\n    strategy: i\n  } = e;\n  const s = [...n === \"clippingAncestors\" ? je(t) ? [] : ur(t, this._c) : [].concat(n), r], a = s[0], c = s.reduce((u, l) => {\n    const f = St(t, l, i);\n    return u.top = ue(f.top, u.top), u.right = Ke(f.right, u.right), u.bottom = Ke(f.bottom, u.bottom), u.left = ue(f.left, u.left), u;\n  }, St(t, a, i));\n  return {\n    width: c.right - c.left,\n    height: c.bottom - c.top,\n    x: c.left,\n    y: c.top\n  };\n}\nfunction fr(e) {\n  const {\n    width: t,\n    height: n\n  } = Yt(e);\n  return {\n    width: t,\n    height: n\n  };\n}\nfunction dr(e, t, n) {\n  const r = G(t), i = Q(t), o = n === \"fixed\", s = we(e, !0, o, t);\n  let a = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  const c = ee(0);\n  if (r || !r && !o)\n    if ((ve(t) !== \"body\" || Ee(i)) && (a = We(t)), r) {\n      const d = we(t, !0, o, t);\n      c.x = d.x + t.clientLeft, c.y = d.y + t.clientTop;\n    } else i && (c.x = Xe(i));\n  let u = 0, l = 0;\n  if (i && !r && !o) {\n    const d = i.getBoundingClientRect();\n    l = d.top + a.scrollTop, u = d.left + a.scrollLeft - // RTL <body> scrollbar.\n    Xe(i, d);\n  }\n  const f = s.left + a.scrollLeft - c.x - u, h = s.top + a.scrollTop - c.y - l;\n  return {\n    x: f,\n    y: h,\n    width: s.width,\n    height: s.height\n  };\n}\nfunction He(e) {\n  return z(e).position === \"static\";\n}\nfunction xt(e, t) {\n  if (!G(e) || z(e).position === \"fixed\")\n    return null;\n  if (t)\n    return t(e);\n  let n = e.offsetParent;\n  return Q(e) === n && (n = n.ownerDocument.body), n;\n}\nfunction Jt(e, t) {\n  const n = F(e);\n  if (je(e))\n    return n;\n  if (!G(e)) {\n    let i = te(e);\n    for (; i && !de(i); ) {\n      if (H(i) && !He(i))\n        return i;\n      i = te(i);\n    }\n    return n;\n  }\n  let r = xt(e, t);\n  for (; r && er(r) && He(r); )\n    r = xt(r, t);\n  return r && de(r) && He(r) && !st(r) ? n : r || tr(e) || n;\n}\nconst pr = async function(e) {\n  const t = this.getOffsetParent || Jt, n = this.getDimensions, r = await n(e.floating);\n  return {\n    reference: dr(e.reference, await t(e.floating), e.strategy),\n    floating: {\n      x: 0,\n      y: 0,\n      width: r.width,\n      height: r.height\n    }\n  };\n};\nfunction hr(e) {\n  return z(e).direction === \"rtl\";\n}\nconst vr = {\n  convertOffsetParentRelativeRectToViewportRelativeRect: ir,\n  getDocumentElement: Q,\n  getClippingRect: lr,\n  getOffsetParent: Jt,\n  getElementRects: pr,\n  getClientRects: or,\n  getDimensions: fr,\n  getScale: le,\n  isElement: H,\n  isRTL: hr\n}, mr = Xn, gr = Zn, br = Jn, yr = (e, t, n) => {\n  const r = /* @__PURE__ */ new Map(), i = {\n    platform: vr,\n    ...n\n  }, o = {\n    ...i.platform,\n    _c: r\n  };\n  return Qn(e, t, {\n    ...i,\n    platform: o\n  });\n};\nvar wr = typeof globalThis < \"u\" ? globalThis : typeof window < \"u\" ? window : typeof global < \"u\" ? global : typeof self < \"u\" ? self : {};\nfunction Sr(e) {\n  return e && e.__esModule && Object.prototype.hasOwnProperty.call(e, \"default\") ? e.default : e;\n}\nvar qt = { exports: {} };\n(function(e) {\n  (function(t, n) {\n    e.exports ? e.exports = n() : t.log = n();\n  })(wr, function() {\n    var t = function() {\n    }, n = \"undefined\", r = typeof window !== n && typeof window.navigator !== n && /Trident\\/|MSIE /.test(window.navigator.userAgent), i = [\n      \"trace\",\n      \"debug\",\n      \"info\",\n      \"warn\",\n      \"error\"\n    ], o = {}, s = null;\n    function a(p, g) {\n      var v = p[g];\n      if (typeof v.bind == \"function\")\n        return v.bind(p);\n      try {\n        return Function.prototype.bind.call(v, p);\n      } catch {\n        return function() {\n          return Function.prototype.apply.apply(v, [p, arguments]);\n        };\n      }\n    }\n    function c() {\n      console.log && (console.log.apply ? console.log.apply(console, arguments) : Function.prototype.apply.apply(console.log, [console, arguments])), console.trace && console.trace();\n    }\n    function u(p) {\n      return p === \"debug\" && (p = \"log\"), typeof console === n ? !1 : p === \"trace\" && r ? c : console[p] !== void 0 ? a(console, p) : console.log !== void 0 ? a(console, \"log\") : t;\n    }\n    function l() {\n      for (var p = this.getLevel(), g = 0; g < i.length; g++) {\n        var v = i[g];\n        this[v] = g < p ? t : this.methodFactory(v, p, this.name);\n      }\n      if (this.log = this.debug, typeof console === n && p < this.levels.SILENT)\n        return \"No console available for logging\";\n    }\n    function f(p) {\n      return function() {\n        typeof console !== n && (l.call(this), this[p].apply(this, arguments));\n      };\n    }\n    function h(p, g, v) {\n      return u(p) || f.apply(this, arguments);\n    }\n    function d(p, g) {\n      var v = this, S, k, _, E = \"loglevel\";\n      typeof p == \"string\" ? E += \":\" + p : typeof p == \"symbol\" && (E = void 0);\n      function re(w) {\n        var x = (i[w] || \"silent\").toUpperCase();\n        if (!(typeof window === n || !E)) {\n          try {\n            window.localStorage[E] = x;\n            return;\n          } catch {\n          }\n          try {\n            window.document.cookie = encodeURIComponent(E) + \"=\" + x + \";\";\n          } catch {\n          }\n        }\n      }\n      function C() {\n        var w;\n        if (!(typeof window === n || !E)) {\n          try {\n            w = window.localStorage[E];\n          } catch {\n          }\n          if (typeof w === n)\n            try {\n              var x = window.document.cookie, ie = encodeURIComponent(E), q = x.indexOf(ie + \"=\");\n              q !== -1 && (w = /^([^;]+)/.exec(\n                x.slice(q + ie.length + 1)\n              )[1]);\n            } catch {\n            }\n          return v.levels[w] === void 0 && (w = void 0), w;\n        }\n      }\n      function T() {\n        if (!(typeof window === n || !E)) {\n          try {\n            window.localStorage.removeItem(E);\n          } catch {\n          }\n          try {\n            window.document.cookie = encodeURIComponent(E) + \"=; expires=Thu, 01 Jan 1970 00:00:00 UTC\";\n          } catch {\n          }\n        }\n      }\n      function I(w) {\n        var x = w;\n        if (typeof x == \"string\" && v.levels[x.toUpperCase()] !== void 0 && (x = v.levels[x.toUpperCase()]), typeof x == \"number\" && x >= 0 && x <= v.levels.SILENT)\n          return x;\n        throw new TypeError(\"log.setLevel() called with invalid level: \" + w);\n      }\n      v.name = p, v.levels = {\n        TRACE: 0,\n        DEBUG: 1,\n        INFO: 2,\n        WARN: 3,\n        ERROR: 4,\n        SILENT: 5\n      }, v.methodFactory = g || h, v.getLevel = function() {\n        return _ ?? k ?? S;\n      }, v.setLevel = function(w, x) {\n        return _ = I(w), x !== !1 && re(_), l.call(v);\n      }, v.setDefaultLevel = function(w) {\n        k = I(w), C() || v.setLevel(w, !1);\n      }, v.resetLevel = function() {\n        _ = null, T(), l.call(v);\n      }, v.enableAll = function(w) {\n        v.setLevel(v.levels.TRACE, w);\n      }, v.disableAll = function(w) {\n        v.setLevel(v.levels.SILENT, w);\n      }, v.rebuild = function() {\n        if (s !== v && (S = I(s.getLevel())), l.call(v), s === v)\n          for (var w in o)\n            o[w].rebuild();\n      }, S = I(\n        s ? s.getLevel() : \"WARN\"\n      );\n      var N = C();\n      N != null && (_ = I(N)), l.call(v);\n    }\n    s = new d(), s.getLogger = function(g) {\n      if (typeof g != \"symbol\" && typeof g != \"string\" || g === \"\")\n        throw new TypeError(\"You must supply a name when creating a logger.\");\n      var v = o[g];\n      return v || (v = o[g] = new d(\n        g,\n        s.methodFactory\n      )), v;\n    };\n    var m = typeof window !== n ? window.log : void 0;\n    return s.noConflict = function() {\n      return typeof window !== n && window.log === s && (window.log = m), s;\n    }, s.getLoggers = function() {\n      return o;\n    }, s.default = s, s;\n  });\n})(qt);\nvar xr = qt.exports;\nconst Er = /* @__PURE__ */ Sr(xr);\nvar Ze = function(e, t) {\n  return Ze = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, r) {\n    n.__proto__ = r;\n  } || function(n, r) {\n    for (var i in r) Object.prototype.hasOwnProperty.call(r, i) && (n[i] = r[i]);\n  }, Ze(e, t);\n};\nfunction J(e, t) {\n  if (typeof t != \"function\" && t !== null)\n    throw new TypeError(\"Class extends value \" + String(t) + \" is not a constructor or null\");\n  Ze(e, t);\n  function n() {\n    this.constructor = e;\n  }\n  e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());\n}\nfunction Tr(e, t, n, r) {\n  function i(o) {\n    return o instanceof n ? o : new n(function(s) {\n      s(o);\n    });\n  }\n  return new (n || (n = Promise))(function(o, s) {\n    function a(l) {\n      try {\n        u(r.next(l));\n      } catch (f) {\n        s(f);\n      }\n    }\n    function c(l) {\n      try {\n        u(r.throw(l));\n      } catch (f) {\n        s(f);\n      }\n    }\n    function u(l) {\n      l.done ? o(l.value) : i(l.value).then(a, c);\n    }\n    u((r = r.apply(e, t || [])).next());\n  });\n}\nfunction Xt(e, t) {\n  var n = { label: 0, sent: function() {\n    if (o[0] & 1) throw o[1];\n    return o[1];\n  }, trys: [], ops: [] }, r, i, o, s = Object.create((typeof Iterator == \"function\" ? Iterator : Object).prototype);\n  return s.next = a(0), s.throw = a(1), s.return = a(2), typeof Symbol == \"function\" && (s[Symbol.iterator] = function() {\n    return this;\n  }), s;\n  function a(u) {\n    return function(l) {\n      return c([u, l]);\n    };\n  }\n  function c(u) {\n    if (r) throw new TypeError(\"Generator is already executing.\");\n    for (; s && (s = 0, u[0] && (n = 0)), n; ) try {\n      if (r = 1, i && (o = u[0] & 2 ? i.return : u[0] ? i.throw || ((o = i.return) && o.call(i), 0) : i.next) && !(o = o.call(i, u[1])).done) return o;\n      switch (i = 0, o && (u = [u[0] & 2, o.value]), u[0]) {\n        case 0:\n        case 1:\n          o = u;\n          break;\n        case 4:\n          return n.label++, { value: u[1], done: !1 };\n        case 5:\n          n.label++, i = u[1], u = [0];\n          continue;\n        case 7:\n          u = n.ops.pop(), n.trys.pop();\n          continue;\n        default:\n          if (o = n.trys, !(o = o.length > 0 && o[o.length - 1]) && (u[0] === 6 || u[0] === 2)) {\n            n = 0;\n            continue;\n          }\n          if (u[0] === 3 && (!o || u[1] > o[0] && u[1] < o[3])) {\n            n.label = u[1];\n            break;\n          }\n          if (u[0] === 6 && n.label < o[1]) {\n            n.label = o[1], o = u;\n            break;\n          }\n          if (o && n.label < o[2]) {\n            n.label = o[2], n.ops.push(u);\n            break;\n          }\n          o[2] && n.ops.pop(), n.trys.pop();\n          continue;\n      }\n      u = t.call(e, n);\n    } catch (l) {\n      u = [6, l], i = 0;\n    } finally {\n      r = o = 0;\n    }\n    if (u[0] & 5) throw u[1];\n    return { value: u[0] ? u[1] : void 0, done: !0 };\n  }\n}\nfunction pe(e) {\n  var t = typeof Symbol == \"function\" && Symbol.iterator, n = t && e[t], r = 0;\n  if (n) return n.call(e);\n  if (e && typeof e.length == \"number\") return {\n    next: function() {\n      return e && r >= e.length && (e = void 0), { value: e && e[r++], done: !e };\n    }\n  };\n  throw new TypeError(t ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\nfunction he(e, t) {\n  var n = typeof Symbol == \"function\" && e[Symbol.iterator];\n  if (!n) return e;\n  var r = n.call(e), i, o = [], s;\n  try {\n    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);\n  } catch (a) {\n    s = { error: a };\n  } finally {\n    try {\n      i && !i.done && (n = r.return) && n.call(r);\n    } finally {\n      if (s) throw s.error;\n    }\n  }\n  return o;\n}\nfunction Se(e, t, n) {\n  if (n || arguments.length === 2) for (var r = 0, i = t.length, o; r < i; r++)\n    (o || !(r in t)) && (o || (o = Array.prototype.slice.call(t, 0, r)), o[r] = t[r]);\n  return e.concat(o || Array.prototype.slice.call(t));\n}\nfunction fe(e) {\n  return this instanceof fe ? (this.v = e, this) : new fe(e);\n}\nfunction Cr(e, t, n) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var r = n.apply(e, t || []), i, o = [];\n  return i = Object.create((typeof AsyncIterator == \"function\" ? AsyncIterator : Object).prototype), a(\"next\"), a(\"throw\"), a(\"return\", s), i[Symbol.asyncIterator] = function() {\n    return this;\n  }, i;\n  function s(d) {\n    return function(m) {\n      return Promise.resolve(m).then(d, f);\n    };\n  }\n  function a(d, m) {\n    r[d] && (i[d] = function(p) {\n      return new Promise(function(g, v) {\n        o.push([d, p, g, v]) > 1 || c(d, p);\n      });\n    }, m && (i[d] = m(i[d])));\n  }\n  function c(d, m) {\n    try {\n      u(r[d](m));\n    } catch (p) {\n      h(o[0][3], p);\n    }\n  }\n  function u(d) {\n    d.value instanceof fe ? Promise.resolve(d.value.v).then(l, f) : h(o[0][2], d);\n  }\n  function l(d) {\n    c(\"next\", d);\n  }\n  function f(d) {\n    c(\"throw\", d);\n  }\n  function h(d, m) {\n    d(m), o.shift(), o.length && c(o[0][0], o[0][1]);\n  }\n}\nfunction Pr(e) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var t = e[Symbol.asyncIterator], n;\n  return t ? t.call(e) : (e = typeof pe == \"function\" ? pe(e) : e[Symbol.iterator](), n = {}, r(\"next\"), r(\"throw\"), r(\"return\"), n[Symbol.asyncIterator] = function() {\n    return this;\n  }, n);\n  function r(o) {\n    n[o] = e[o] && function(s) {\n      return new Promise(function(a, c) {\n        s = e[o](s), i(a, c, s.done, s.value);\n      });\n    };\n  }\n  function i(o, s, a, c) {\n    Promise.resolve(c).then(function(u) {\n      o({ value: u, done: a });\n    }, s);\n  }\n}\nfunction P(e) {\n  return typeof e == \"function\";\n}\nfunction ct(e) {\n  var t = function(r) {\n    Error.call(r), r.stack = new Error().stack;\n  }, n = e(t);\n  return n.prototype = Object.create(Error.prototype), n.prototype.constructor = n, n;\n}\nvar ze = ct(function(e) {\n  return function(n) {\n    e(this), this.message = n ? n.length + ` errors occurred during unsubscription:\n` + n.map(function(r, i) {\n      return i + 1 + \") \" + r.toString();\n    }).join(`\n  `) : \"\", this.name = \"UnsubscriptionError\", this.errors = n;\n  };\n});\nfunction _e(e, t) {\n  if (e) {\n    var n = e.indexOf(t);\n    0 <= n && e.splice(n, 1);\n  }\n}\nvar Te = function() {\n  function e(t) {\n    this.initialTeardown = t, this.closed = !1, this._parentage = null, this._finalizers = null;\n  }\n  return e.prototype.unsubscribe = function() {\n    var t, n, r, i, o;\n    if (!this.closed) {\n      this.closed = !0;\n      var s = this._parentage;\n      if (s)\n        if (this._parentage = null, Array.isArray(s))\n          try {\n            for (var a = pe(s), c = a.next(); !c.done; c = a.next()) {\n              var u = c.value;\n              u.remove(this);\n            }\n          } catch (p) {\n            t = { error: p };\n          } finally {\n            try {\n              c && !c.done && (n = a.return) && n.call(a);\n            } finally {\n              if (t) throw t.error;\n            }\n          }\n        else\n          s.remove(this);\n      var l = this.initialTeardown;\n      if (P(l))\n        try {\n          l();\n        } catch (p) {\n          o = p instanceof ze ? p.errors : [p];\n        }\n      var f = this._finalizers;\n      if (f) {\n        this._finalizers = null;\n        try {\n          for (var h = pe(f), d = h.next(); !d.done; d = h.next()) {\n            var m = d.value;\n            try {\n              Et(m);\n            } catch (p) {\n              o = o ?? [], p instanceof ze ? o = Se(Se([], he(o)), he(p.errors)) : o.push(p);\n            }\n          }\n        } catch (p) {\n          r = { error: p };\n        } finally {\n          try {\n            d && !d.done && (i = h.return) && i.call(h);\n          } finally {\n            if (r) throw r.error;\n          }\n        }\n      }\n      if (o)\n        throw new ze(o);\n    }\n  }, e.prototype.add = function(t) {\n    var n;\n    if (t && t !== this)\n      if (this.closed)\n        Et(t);\n      else {\n        if (t instanceof e) {\n          if (t.closed || t._hasParent(this))\n            return;\n          t._addParent(this);\n        }\n        (this._finalizers = (n = this._finalizers) !== null && n !== void 0 ? n : []).push(t);\n      }\n  }, e.prototype._hasParent = function(t) {\n    var n = this._parentage;\n    return n === t || Array.isArray(n) && n.includes(t);\n  }, e.prototype._addParent = function(t) {\n    var n = this._parentage;\n    this._parentage = Array.isArray(n) ? (n.push(t), n) : n ? [n, t] : t;\n  }, e.prototype._removeParent = function(t) {\n    var n = this._parentage;\n    n === t ? this._parentage = null : Array.isArray(n) && _e(n, t);\n  }, e.prototype.remove = function(t) {\n    var n = this._finalizers;\n    n && _e(n, t), t instanceof e && t._removeParent(this);\n  }, e.EMPTY = function() {\n    var t = new e();\n    return t.closed = !0, t;\n  }(), e;\n}(), Zt = Te.EMPTY;\nfunction en(e) {\n  return e instanceof Te || e && \"closed\" in e && P(e.remove) && P(e.add) && P(e.unsubscribe);\n}\nfunction Et(e) {\n  P(e) ? e() : e.unsubscribe();\n}\nvar tn = {\n  onUnhandledError: null,\n  onStoppedNotification: null,\n  Promise: void 0,\n  useDeprecatedSynchronousErrorHandling: !1,\n  useDeprecatedNextContext: !1\n}, nn = {\n  setTimeout: function(e, t) {\n    for (var n = [], r = 2; r < arguments.length; r++)\n      n[r - 2] = arguments[r];\n    return setTimeout.apply(void 0, Se([e, t], he(n)));\n  },\n  clearTimeout: function(e) {\n    var t = nn.delegate;\n    return ((t == null ? void 0 : t.clearTimeout) || clearTimeout)(e);\n  },\n  delegate: void 0\n};\nfunction rn(e) {\n  nn.setTimeout(function() {\n    throw e;\n  });\n}\nfunction Ie() {\n}\nfunction Ae(e) {\n  e();\n}\nvar ut = function(e) {\n  J(t, e);\n  function t(n) {\n    var r = e.call(this) || this;\n    return r.isStopped = !1, n ? (r.destination = n, en(n) && n.add(r)) : r.destination = Lr, r;\n  }\n  return t.create = function(n, r, i) {\n    return new et(n, r, i);\n  }, t.prototype.next = function(n) {\n    this.isStopped || this._next(n);\n  }, t.prototype.error = function(n) {\n    this.isStopped || (this.isStopped = !0, this._error(n));\n  }, t.prototype.complete = function() {\n    this.isStopped || (this.isStopped = !0, this._complete());\n  }, t.prototype.unsubscribe = function() {\n    this.closed || (this.isStopped = !0, e.prototype.unsubscribe.call(this), this.destination = null);\n  }, t.prototype._next = function(n) {\n    this.destination.next(n);\n  }, t.prototype._error = function(n) {\n    try {\n      this.destination.error(n);\n    } finally {\n      this.unsubscribe();\n    }\n  }, t.prototype._complete = function() {\n    try {\n      this.destination.complete();\n    } finally {\n      this.unsubscribe();\n    }\n  }, t;\n}(Te), Ar = Function.prototype.bind;\nfunction Ye(e, t) {\n  return Ar.call(e, t);\n}\nvar kr = function() {\n  function e(t) {\n    this.partialObserver = t;\n  }\n  return e.prototype.next = function(t) {\n    var n = this.partialObserver;\n    if (n.next)\n      try {\n        n.next(t);\n      } catch (r) {\n        Ce(r);\n      }\n  }, e.prototype.error = function(t) {\n    var n = this.partialObserver;\n    if (n.error)\n      try {\n        n.error(t);\n      } catch (r) {\n        Ce(r);\n      }\n    else\n      Ce(t);\n  }, e.prototype.complete = function() {\n    var t = this.partialObserver;\n    if (t.complete)\n      try {\n        t.complete();\n      } catch (n) {\n        Ce(n);\n      }\n  }, e;\n}(), et = function(e) {\n  J(t, e);\n  function t(n, r, i) {\n    var o = e.call(this) || this, s;\n    if (P(n) || !n)\n      s = {\n        next: n ?? void 0,\n        error: r ?? void 0,\n        complete: i ?? void 0\n      };\n    else {\n      var a;\n      o && tn.useDeprecatedNextContext ? (a = Object.create(n), a.unsubscribe = function() {\n        return o.unsubscribe();\n      }, s = {\n        next: n.next && Ye(n.next, a),\n        error: n.error && Ye(n.error, a),\n        complete: n.complete && Ye(n.complete, a)\n      }) : s = n;\n    }\n    return o.destination = new kr(s), o;\n  }\n  return t;\n}(ut);\nfunction Ce(e) {\n  rn(e);\n}\nfunction Or(e) {\n  throw e;\n}\nvar Lr = {\n  closed: !0,\n  next: Ie,\n  error: Or,\n  complete: Ie\n}, lt = function() {\n  return typeof Symbol == \"function\" && Symbol.observable || \"@@observable\";\n}();\nfunction ft(e) {\n  return e;\n}\nfunction _r(e) {\n  return e.length === 0 ? ft : e.length === 1 ? e[0] : function(n) {\n    return e.reduce(function(r, i) {\n      return i(r);\n    }, n);\n  };\n}\nvar O = function() {\n  function e(t) {\n    t && (this._subscribe = t);\n  }\n  return e.prototype.lift = function(t) {\n    var n = new e();\n    return n.source = this, n.operator = t, n;\n  }, e.prototype.subscribe = function(t, n, r) {\n    var i = this, o = Dr(t) ? t : new et(t, n, r);\n    return Ae(function() {\n      var s = i, a = s.operator, c = s.source;\n      o.add(a ? a.call(o, c) : c ? i._subscribe(o) : i._trySubscribe(o));\n    }), o;\n  }, e.prototype._trySubscribe = function(t) {\n    try {\n      return this._subscribe(t);\n    } catch (n) {\n      t.error(n);\n    }\n  }, e.prototype.forEach = function(t, n) {\n    var r = this;\n    return n = Tt(n), new n(function(i, o) {\n      var s = new et({\n        next: function(a) {\n          try {\n            t(a);\n          } catch (c) {\n            o(c), s.unsubscribe();\n          }\n        },\n        error: o,\n        complete: i\n      });\n      r.subscribe(s);\n    });\n  }, e.prototype._subscribe = function(t) {\n    var n;\n    return (n = this.source) === null || n === void 0 ? void 0 : n.subscribe(t);\n  }, e.prototype[lt] = function() {\n    return this;\n  }, e.prototype.pipe = function() {\n    for (var t = [], n = 0; n < arguments.length; n++)\n      t[n] = arguments[n];\n    return _r(t)(this);\n  }, e.prototype.toPromise = function(t) {\n    var n = this;\n    return t = Tt(t), new t(function(r, i) {\n      var o;\n      n.subscribe(function(s) {\n        return o = s;\n      }, function(s) {\n        return i(s);\n      }, function() {\n        return r(o);\n      });\n    });\n  }, e.create = function(t) {\n    return new e(t);\n  }, e;\n}();\nfunction Tt(e) {\n  var t;\n  return (t = e ?? tn.Promise) !== null && t !== void 0 ? t : Promise;\n}\nfunction Ir(e) {\n  return e && P(e.next) && P(e.error) && P(e.complete);\n}\nfunction Dr(e) {\n  return e && e instanceof ut || Ir(e) && en(e);\n}\nfunction Mr(e) {\n  return P(e == null ? void 0 : e.lift);\n}\nfunction V(e) {\n  return function(t) {\n    if (Mr(t))\n      return t.lift(function(n) {\n        try {\n          return e(n, this);\n        } catch (r) {\n          this.error(r);\n        }\n      });\n    throw new TypeError(\"Unable to lift unknown Observable type\");\n  };\n}\nfunction W(e, t, n, r, i) {\n  return new Rr(e, t, n, r, i);\n}\nvar Rr = function(e) {\n  J(t, e);\n  function t(n, r, i, o, s, a) {\n    var c = e.call(this, n) || this;\n    return c.onFinalize = s, c.shouldUnsubscribe = a, c._next = r ? function(u) {\n      try {\n        r(u);\n      } catch (l) {\n        n.error(l);\n      }\n    } : e.prototype._next, c._error = o ? function(u) {\n      try {\n        o(u);\n      } catch (l) {\n        n.error(l);\n      } finally {\n        this.unsubscribe();\n      }\n    } : e.prototype._error, c._complete = i ? function() {\n      try {\n        i();\n      } catch (u) {\n        n.error(u);\n      } finally {\n        this.unsubscribe();\n      }\n    } : e.prototype._complete, c;\n  }\n  return t.prototype.unsubscribe = function() {\n    var n;\n    if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {\n      var r = this.closed;\n      e.prototype.unsubscribe.call(this), !r && ((n = this.onFinalize) === null || n === void 0 || n.call(this));\n    }\n  }, t;\n}(ut), Nr = ct(function(e) {\n  return function() {\n    e(this), this.name = \"ObjectUnsubscribedError\", this.message = \"object unsubscribed\";\n  };\n}), ne = function(e) {\n  J(t, e);\n  function t() {\n    var n = e.call(this) || this;\n    return n.closed = !1, n.currentObservers = null, n.observers = [], n.isStopped = !1, n.hasError = !1, n.thrownError = null, n;\n  }\n  return t.prototype.lift = function(n) {\n    var r = new Ct(this, this);\n    return r.operator = n, r;\n  }, t.prototype._throwIfClosed = function() {\n    if (this.closed)\n      throw new Nr();\n  }, t.prototype.next = function(n) {\n    var r = this;\n    Ae(function() {\n      var i, o;\n      if (r._throwIfClosed(), !r.isStopped) {\n        r.currentObservers || (r.currentObservers = Array.from(r.observers));\n        try {\n          for (var s = pe(r.currentObservers), a = s.next(); !a.done; a = s.next()) {\n            var c = a.value;\n            c.next(n);\n          }\n        } catch (u) {\n          i = { error: u };\n        } finally {\n          try {\n            a && !a.done && (o = s.return) && o.call(s);\n          } finally {\n            if (i) throw i.error;\n          }\n        }\n      }\n    });\n  }, t.prototype.error = function(n) {\n    var r = this;\n    Ae(function() {\n      if (r._throwIfClosed(), !r.isStopped) {\n        r.hasError = r.isStopped = !0, r.thrownError = n;\n        for (var i = r.observers; i.length; )\n          i.shift().error(n);\n      }\n    });\n  }, t.prototype.complete = function() {\n    var n = this;\n    Ae(function() {\n      if (n._throwIfClosed(), !n.isStopped) {\n        n.isStopped = !0;\n        for (var r = n.observers; r.length; )\n          r.shift().complete();\n      }\n    });\n  }, t.prototype.unsubscribe = function() {\n    this.isStopped = this.closed = !0, this.observers = this.currentObservers = null;\n  }, Object.defineProperty(t.prototype, \"observed\", {\n    get: function() {\n      var n;\n      return ((n = this.observers) === null || n === void 0 ? void 0 : n.length) > 0;\n    },\n    enumerable: !1,\n    configurable: !0\n  }), t.prototype._trySubscribe = function(n) {\n    return this._throwIfClosed(), e.prototype._trySubscribe.call(this, n);\n  }, t.prototype._subscribe = function(n) {\n    return this._throwIfClosed(), this._checkFinalizedStatuses(n), this._innerSubscribe(n);\n  }, t.prototype._innerSubscribe = function(n) {\n    var r = this, i = this, o = i.hasError, s = i.isStopped, a = i.observers;\n    return o || s ? Zt : (this.currentObservers = null, a.push(n), new Te(function() {\n      r.currentObservers = null, _e(a, n);\n    }));\n  }, t.prototype._checkFinalizedStatuses = function(n) {\n    var r = this, i = r.hasError, o = r.thrownError, s = r.isStopped;\n    i ? n.error(o) : s && n.complete();\n  }, t.prototype.asObservable = function() {\n    var n = new O();\n    return n.source = this, n;\n  }, t.create = function(n, r) {\n    return new Ct(n, r);\n  }, t;\n}(O), Ct = function(e) {\n  J(t, e);\n  function t(n, r) {\n    var i = e.call(this) || this;\n    return i.destination = n, i.source = r, i;\n  }\n  return t.prototype.next = function(n) {\n    var r, i;\n    (i = (r = this.destination) === null || r === void 0 ? void 0 : r.next) === null || i === void 0 || i.call(r, n);\n  }, t.prototype.error = function(n) {\n    var r, i;\n    (i = (r = this.destination) === null || r === void 0 ? void 0 : r.error) === null || i === void 0 || i.call(r, n);\n  }, t.prototype.complete = function() {\n    var n, r;\n    (r = (n = this.destination) === null || n === void 0 ? void 0 : n.complete) === null || r === void 0 || r.call(n);\n  }, t.prototype._subscribe = function(n) {\n    var r, i;\n    return (i = (r = this.source) === null || r === void 0 ? void 0 : r.subscribe(n)) !== null && i !== void 0 ? i : Zt;\n  }, t;\n}(ne), on = function(e) {\n  J(t, e);\n  function t(n) {\n    var r = e.call(this) || this;\n    return r._value = n, r;\n  }\n  return Object.defineProperty(t.prototype, \"value\", {\n    get: function() {\n      return this.getValue();\n    },\n    enumerable: !1,\n    configurable: !0\n  }), t.prototype._subscribe = function(n) {\n    var r = e.prototype._subscribe.call(this, n);\n    return !r.closed && n.next(this._value), r;\n  }, t.prototype.getValue = function() {\n    var n = this, r = n.hasError, i = n.thrownError, o = n._value;\n    if (r)\n      throw i;\n    return this._throwIfClosed(), o;\n  }, t.prototype.next = function(n) {\n    e.prototype.next.call(this, this._value = n);\n  }, t;\n}(ne), $r = {\n  now: function() {\n    return Date.now();\n  },\n  delegate: void 0\n}, Ur = function(e) {\n  J(t, e);\n  function t(n, r) {\n    return e.call(this) || this;\n  }\n  return t.prototype.schedule = function(n, r) {\n    return this;\n  }, t;\n}(Te), Pt = {\n  setInterval: function(e, t) {\n    for (var n = [], r = 2; r < arguments.length; r++)\n      n[r - 2] = arguments[r];\n    return setInterval.apply(void 0, Se([e, t], he(n)));\n  },\n  clearInterval: function(e) {\n    return clearInterval(e);\n  },\n  delegate: void 0\n}, Fr = function(e) {\n  J(t, e);\n  function t(n, r) {\n    var i = e.call(this, n, r) || this;\n    return i.scheduler = n, i.work = r, i.pending = !1, i;\n  }\n  return t.prototype.schedule = function(n, r) {\n    var i;\n    if (r === void 0 && (r = 0), this.closed)\n      return this;\n    this.state = n;\n    var o = this.id, s = this.scheduler;\n    return o != null && (this.id = this.recycleAsyncId(s, o, r)), this.pending = !0, this.delay = r, this.id = (i = this.id) !== null && i !== void 0 ? i : this.requestAsyncId(s, this.id, r), this;\n  }, t.prototype.requestAsyncId = function(n, r, i) {\n    return i === void 0 && (i = 0), Pt.setInterval(n.flush.bind(n, this), i);\n  }, t.prototype.recycleAsyncId = function(n, r, i) {\n    if (i === void 0 && (i = 0), i != null && this.delay === i && this.pending === !1)\n      return r;\n    r != null && Pt.clearInterval(r);\n  }, t.prototype.execute = function(n, r) {\n    if (this.closed)\n      return new Error(\"executing a cancelled action\");\n    this.pending = !1;\n    var i = this._execute(n, r);\n    if (i)\n      return i;\n    this.pending === !1 && this.id != null && (this.id = this.recycleAsyncId(this.scheduler, this.id, null));\n  }, t.prototype._execute = function(n, r) {\n    var i = !1, o;\n    try {\n      this.work(n);\n    } catch (s) {\n      i = !0, o = s || new Error(\"Scheduled action threw falsy error\");\n    }\n    if (i)\n      return this.unsubscribe(), o;\n  }, t.prototype.unsubscribe = function() {\n    if (!this.closed) {\n      var n = this, r = n.id, i = n.scheduler, o = i.actions;\n      this.work = this.state = this.scheduler = null, this.pending = !1, _e(o, this), r != null && (this.id = this.recycleAsyncId(i, r, null)), this.delay = null, e.prototype.unsubscribe.call(this);\n    }\n  }, t;\n}(Ur), At = function() {\n  function e(t, n) {\n    n === void 0 && (n = e.now), this.schedulerActionCtor = t, this.now = n;\n  }\n  return e.prototype.schedule = function(t, n, r) {\n    return n === void 0 && (n = 0), new this.schedulerActionCtor(this, t).schedule(r, n);\n  }, e.now = $r.now, e;\n}(), jr = function(e) {\n  J(t, e);\n  function t(n, r) {\n    r === void 0 && (r = At.now);\n    var i = e.call(this, n, r) || this;\n    return i.actions = [], i._active = !1, i;\n  }\n  return t.prototype.flush = function(n) {\n    var r = this.actions;\n    if (this._active) {\n      r.push(n);\n      return;\n    }\n    var i;\n    this._active = !0;\n    do\n      if (i = n.execute(n.state, n.delay))\n        break;\n    while (n = r.shift());\n    if (this._active = !1, i) {\n      for (; n = r.shift(); )\n        n.unsubscribe();\n      throw i;\n    }\n  }, t;\n}(At), Wr = new jr(Fr), Br = new O(function(e) {\n  return e.complete();\n});\nfunction Vr(e) {\n  return e && P(e.schedule);\n}\nfunction sn(e) {\n  return e[e.length - 1];\n}\nfunction Be(e) {\n  return Vr(sn(e)) ? e.pop() : void 0;\n}\nfunction Hr(e, t) {\n  return typeof sn(e) == \"number\" ? e.pop() : t;\n}\nvar dt = function(e) {\n  return e && typeof e.length == \"number\" && typeof e != \"function\";\n};\nfunction an(e) {\n  return P(e == null ? void 0 : e.then);\n}\nfunction cn(e) {\n  return P(e[lt]);\n}\nfunction un(e) {\n  return Symbol.asyncIterator && P(e == null ? void 0 : e[Symbol.asyncIterator]);\n}\nfunction ln(e) {\n  return new TypeError(\"You provided \" + (e !== null && typeof e == \"object\" ? \"an invalid object\" : \"'\" + e + \"'\") + \" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.\");\n}\nfunction zr() {\n  return typeof Symbol != \"function\" || !Symbol.iterator ? \"@@iterator\" : Symbol.iterator;\n}\nvar fn = zr();\nfunction dn(e) {\n  return P(e == null ? void 0 : e[fn]);\n}\nfunction pn(e) {\n  return Cr(this, arguments, function() {\n    var n, r, i, o;\n    return Xt(this, function(s) {\n      switch (s.label) {\n        case 0:\n          n = e.getReader(), s.label = 1;\n        case 1:\n          s.trys.push([1, , 9, 10]), s.label = 2;\n        case 2:\n          return [4, fe(n.read())];\n        case 3:\n          return r = s.sent(), i = r.value, o = r.done, o ? [4, fe(void 0)] : [3, 5];\n        case 4:\n          return [2, s.sent()];\n        case 5:\n          return [4, fe(i)];\n        case 6:\n          return [4, s.sent()];\n        case 7:\n          return s.sent(), [3, 2];\n        case 8:\n          return [3, 10];\n        case 9:\n          return n.releaseLock(), [7];\n        case 10:\n          return [2];\n      }\n    });\n  });\n}\nfunction hn(e) {\n  return P(e == null ? void 0 : e.getReader);\n}\nfunction Y(e) {\n  if (e instanceof O)\n    return e;\n  if (e != null) {\n    if (cn(e))\n      return Yr(e);\n    if (dt(e))\n      return Gr(e);\n    if (an(e))\n      return Kr(e);\n    if (un(e))\n      return vn(e);\n    if (dn(e))\n      return Qr(e);\n    if (hn(e))\n      return Jr(e);\n  }\n  throw ln(e);\n}\nfunction Yr(e) {\n  return new O(function(t) {\n    var n = e[lt]();\n    if (P(n.subscribe))\n      return n.subscribe(t);\n    throw new TypeError(\"Provided object does not correctly implement Symbol.observable\");\n  });\n}\nfunction Gr(e) {\n  return new O(function(t) {\n    for (var n = 0; n < e.length && !t.closed; n++)\n      t.next(e[n]);\n    t.complete();\n  });\n}\nfunction Kr(e) {\n  return new O(function(t) {\n    e.then(function(n) {\n      t.closed || (t.next(n), t.complete());\n    }, function(n) {\n      return t.error(n);\n    }).then(null, rn);\n  });\n}\nfunction Qr(e) {\n  return new O(function(t) {\n    var n, r;\n    try {\n      for (var i = pe(e), o = i.next(); !o.done; o = i.next()) {\n        var s = o.value;\n        if (t.next(s), t.closed)\n          return;\n      }\n    } catch (a) {\n      n = { error: a };\n    } finally {\n      try {\n        o && !o.done && (r = i.return) && r.call(i);\n      } finally {\n        if (n) throw n.error;\n      }\n    }\n    t.complete();\n  });\n}\nfunction vn(e) {\n  return new O(function(t) {\n    qr(e, t).catch(function(n) {\n      return t.error(n);\n    });\n  });\n}\nfunction Jr(e) {\n  return vn(pn(e));\n}\nfunction qr(e, t) {\n  var n, r, i, o;\n  return Tr(this, void 0, void 0, function() {\n    var s, a;\n    return Xt(this, function(c) {\n      switch (c.label) {\n        case 0:\n          c.trys.push([0, 5, 6, 11]), n = Pr(e), c.label = 1;\n        case 1:\n          return [4, n.next()];\n        case 2:\n          if (r = c.sent(), !!r.done) return [3, 4];\n          if (s = r.value, t.next(s), t.closed)\n            return [2];\n          c.label = 3;\n        case 3:\n          return [3, 1];\n        case 4:\n          return [3, 11];\n        case 5:\n          return a = c.sent(), i = { error: a }, [3, 11];\n        case 6:\n          return c.trys.push([6, , 9, 10]), r && !r.done && (o = n.return) ? [4, o.call(n)] : [3, 8];\n        case 7:\n          c.sent(), c.label = 8;\n        case 8:\n          return [3, 10];\n        case 9:\n          if (i) throw i.error;\n          return [7];\n        case 10:\n          return [7];\n        case 11:\n          return t.complete(), [2];\n      }\n    });\n  });\n}\nfunction Z(e, t, n, r, i) {\n  r === void 0 && (r = 0), i === void 0 && (i = !1);\n  var o = t.schedule(function() {\n    n(), i ? e.add(this.schedule(null, r)) : this.unsubscribe();\n  }, r);\n  if (e.add(o), !i)\n    return o;\n}\nfunction mn(e, t) {\n  return t === void 0 && (t = 0), V(function(n, r) {\n    n.subscribe(W(r, function(i) {\n      return Z(r, e, function() {\n        return r.next(i);\n      }, t);\n    }, function() {\n      return Z(r, e, function() {\n        return r.complete();\n      }, t);\n    }, function(i) {\n      return Z(r, e, function() {\n        return r.error(i);\n      }, t);\n    }));\n  });\n}\nfunction gn(e, t) {\n  return t === void 0 && (t = 0), V(function(n, r) {\n    r.add(e.schedule(function() {\n      return n.subscribe(r);\n    }, t));\n  });\n}\nfunction Xr(e, t) {\n  return Y(e).pipe(gn(t), mn(t));\n}\nfunction Zr(e, t) {\n  return Y(e).pipe(gn(t), mn(t));\n}\nfunction ei(e, t) {\n  return new O(function(n) {\n    var r = 0;\n    return t.schedule(function() {\n      r === e.length ? n.complete() : (n.next(e[r++]), n.closed || this.schedule());\n    });\n  });\n}\nfunction ti(e, t) {\n  return new O(function(n) {\n    var r;\n    return Z(n, t, function() {\n      r = e[fn](), Z(n, t, function() {\n        var i, o, s;\n        try {\n          i = r.next(), o = i.value, s = i.done;\n        } catch (a) {\n          n.error(a);\n          return;\n        }\n        s ? n.complete() : n.next(o);\n      }, 0, !0);\n    }), function() {\n      return P(r == null ? void 0 : r.return) && r.return();\n    };\n  });\n}\nfunction bn(e, t) {\n  if (!e)\n    throw new Error(\"Iterable cannot be null\");\n  return new O(function(n) {\n    Z(n, t, function() {\n      var r = e[Symbol.asyncIterator]();\n      Z(n, t, function() {\n        r.next().then(function(i) {\n          i.done ? n.complete() : n.next(i.value);\n        });\n      }, 0, !0);\n    });\n  });\n}\nfunction ni(e, t) {\n  return bn(pn(e), t);\n}\nfunction ri(e, t) {\n  if (e != null) {\n    if (cn(e))\n      return Xr(e, t);\n    if (dt(e))\n      return ei(e, t);\n    if (an(e))\n      return Zr(e, t);\n    if (un(e))\n      return bn(e, t);\n    if (dn(e))\n      return ti(e, t);\n    if (hn(e))\n      return ni(e, t);\n  }\n  throw ln(e);\n}\nfunction pt(e, t) {\n  return t ? ri(e, t) : Y(e);\n}\nfunction kt() {\n  for (var e = [], t = 0; t < arguments.length; t++)\n    e[t] = arguments[t];\n  var n = Be(e);\n  return pt(e, n);\n}\nfunction ii(e) {\n  return e instanceof Date && !isNaN(e);\n}\nvar oi = ct(function(e) {\n  return function(n) {\n    n === void 0 && (n = null), e(this), this.message = \"Timeout has occurred\", this.name = \"TimeoutError\", this.info = n;\n  };\n});\nfunction si(e, t) {\n  var n = ii(e) ? { first: e } : typeof e == \"number\" ? { each: e } : e, r = n.first, i = n.each, o = n.with, s = o === void 0 ? ai : o, a = n.scheduler, c = a === void 0 ? Wr : a, u = n.meta, l = u === void 0 ? null : u;\n  if (r == null && i == null)\n    throw new TypeError(\"No timeout provided.\");\n  return V(function(f, h) {\n    var d, m, p = null, g = 0, v = function(S) {\n      m = Z(h, c, function() {\n        try {\n          d.unsubscribe(), Y(s({\n            meta: l,\n            lastValue: p,\n            seen: g\n          })).subscribe(h);\n        } catch (k) {\n          h.error(k);\n        }\n      }, S);\n    };\n    d = f.subscribe(W(h, function(S) {\n      m == null || m.unsubscribe(), g++, h.next(p = S), i > 0 && v(i);\n    }, void 0, void 0, function() {\n      m != null && m.closed || m == null || m.unsubscribe(), p = null;\n    })), !g && v(r != null ? typeof r == \"number\" ? r : +r - c.now() : i);\n  });\n}\nfunction ai(e) {\n  throw new oi(e);\n}\nfunction A(e, t) {\n  return V(function(n, r) {\n    var i = 0;\n    n.subscribe(W(r, function(o) {\n      r.next(e.call(t, o, i++));\n    }));\n  });\n}\nvar ci = Array.isArray;\nfunction ui(e, t) {\n  return ci(t) ? e.apply(void 0, Se([], he(t))) : e(t);\n}\nfunction li(e) {\n  return A(function(t) {\n    return ui(e, t);\n  });\n}\nfunction fi(e, t, n, r, i, o, s, a) {\n  var c = [], u = 0, l = 0, f = !1, h = function() {\n    f && !c.length && !u && t.complete();\n  }, d = function(p) {\n    return u < r ? m(p) : c.push(p);\n  }, m = function(p) {\n    u++;\n    var g = !1;\n    Y(n(p, l++)).subscribe(W(t, function(v) {\n      t.next(v);\n    }, function() {\n      g = !0;\n    }, void 0, function() {\n      if (g)\n        try {\n          u--;\n          for (var v = function() {\n            var S = c.shift();\n            s || m(S);\n          }; c.length && u < r; )\n            v();\n          h();\n        } catch (S) {\n          t.error(S);\n        }\n    }));\n  };\n  return e.subscribe(W(t, d, function() {\n    f = !0, h();\n  })), function() {\n  };\n}\nfunction ht(e, t, n) {\n  return n === void 0 && (n = 1 / 0), P(t) ? ht(function(r, i) {\n    return A(function(o, s) {\n      return t(r, o, i, s);\n    })(Y(e(r, i)));\n  }, n) : (typeof t == \"number\" && (n = t), V(function(r, i) {\n    return fi(r, i, e, n);\n  }));\n}\nfunction yn(e) {\n  return e === void 0 && (e = 1 / 0), ht(ft, e);\n}\nfunction di() {\n  return yn(1);\n}\nfunction De() {\n  for (var e = [], t = 0; t < arguments.length; t++)\n    e[t] = arguments[t];\n  return di()(pt(e, Be(e)));\n}\nvar pi = [\"addListener\", \"removeListener\"], hi = [\"addEventListener\", \"removeEventListener\"], vi = [\"on\", \"off\"];\nfunction tt(e, t, n, r) {\n  if (P(n) && (r = n, n = void 0), r)\n    return tt(e, t, n).pipe(li(r));\n  var i = he(bi(e) ? hi.map(function(a) {\n    return function(c) {\n      return e[a](t, c, n);\n    };\n  }) : mi(e) ? pi.map(Ot(e, t)) : gi(e) ? vi.map(Ot(e, t)) : [], 2), o = i[0], s = i[1];\n  if (!o && dt(e))\n    return ht(function(a) {\n      return tt(a, t, n);\n    })(Y(e));\n  if (!o)\n    throw new TypeError(\"Invalid event target\");\n  return new O(function(a) {\n    var c = function() {\n      for (var u = [], l = 0; l < arguments.length; l++)\n        u[l] = arguments[l];\n      return a.next(1 < u.length ? u : u[0]);\n    };\n    return o(c), function() {\n      return s(c);\n    };\n  });\n}\nfunction Ot(e, t) {\n  return function(n) {\n    return function(r) {\n      return e[n](t, r);\n    };\n  };\n}\nfunction mi(e) {\n  return P(e.addListener) && P(e.removeListener);\n}\nfunction gi(e) {\n  return P(e.on) && P(e.off);\n}\nfunction bi(e) {\n  return P(e.addEventListener) && P(e.removeEventListener);\n}\nfunction yi() {\n  for (var e = [], t = 0; t < arguments.length; t++)\n    e[t] = arguments[t];\n  var n = Be(e), r = Hr(e, 1 / 0), i = e;\n  return i.length ? i.length === 1 ? Y(i[0]) : yn(r)(pt(i, n)) : Br;\n}\nfunction vt(e, t) {\n  return V(function(n, r) {\n    var i = 0;\n    n.subscribe(W(r, function(o) {\n      return e.call(t, o, i++) && r.next(o);\n    }));\n  });\n}\nfunction wi(e, t, n, r, i) {\n  return function(o, s) {\n    var a = n, c = t, u = 0;\n    o.subscribe(W(s, function(l) {\n      var f = u++;\n      c = a ? e(c, l, f) : (a = !0, l), s.next(c);\n    }, i));\n  };\n}\nfunction Si(e, t) {\n  return t === void 0 && (t = ft), e = e ?? xi, V(function(n, r) {\n    var i, o = !0;\n    n.subscribe(W(r, function(s) {\n      var a = t(s);\n      (o || !e(i, a)) && (o = !1, i = a, r.next(s));\n    }));\n  });\n}\nfunction xi(e, t) {\n  return e === t;\n}\nfunction Ei(e) {\n  return V(function(t, n) {\n    try {\n      t.subscribe(n);\n    } finally {\n      n.add(e);\n    }\n  });\n}\nfunction Ti(e, t) {\n  return V(wi(e, t, arguments.length >= 2, !0));\n}\nfunction Ci(e) {\n  return V(function(t, n) {\n    var r = !1, i = W(n, function() {\n      i == null || i.unsubscribe(), r = !0;\n    }, Ie);\n    Y(e).subscribe(i), t.subscribe(W(n, function(o) {\n      return r && n.next(o);\n    }));\n  });\n}\nfunction M() {\n  for (var e = [], t = 0; t < arguments.length; t++)\n    e[t] = arguments[t];\n  var n = Be(e);\n  return V(function(r, i) {\n    (n ? De(e, r, n) : De(e, r)).subscribe(i);\n  });\n}\nfunction wn(e, t) {\n  return V(function(n, r) {\n    var i = null, o = 0, s = !1, a = function() {\n      return s && !i && r.complete();\n    };\n    n.subscribe(W(r, function(c) {\n      i == null || i.unsubscribe();\n      var u = 0, l = o++;\n      Y(e(c, l)).subscribe(i = W(r, function(f) {\n        return r.next(t ? t(c, f, l, u++) : f);\n      }, function() {\n        i = null, a();\n      }));\n    }, function() {\n      s = !0, a();\n    }));\n  });\n}\nfunction Lt(e) {\n  return V(function(t, n) {\n    Y(e).subscribe(W(n, function() {\n      return n.complete();\n    }, Ie)), !n.closed && t.subscribe(n);\n  });\n}\nvar Pi = Object.defineProperty, Ai = Object.defineProperties, ki = Object.getOwnPropertyDescriptors, _t = Object.getOwnPropertySymbols, Oi = Object.prototype.hasOwnProperty, Li = Object.prototype.propertyIsEnumerable, It = (e, t, n) => t in e ? Pi(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, K = (e, t) => {\n  for (var n in t || (t = {}))\n    Oi.call(t, n) && It(e, n, t[n]);\n  if (_t)\n    for (var n of _t(t))\n      Li.call(t, n) && It(e, n, t[n]);\n  return e;\n}, ye = (e, t) => Ai(e, ki(t)), B = (e, t, n) => new Promise((r, i) => {\n  var o = (c) => {\n    try {\n      a(n.next(c));\n    } catch (u) {\n      i(u);\n    }\n  }, s = (c) => {\n    try {\n      a(n.throw(c));\n    } catch (u) {\n      i(u);\n    }\n  }, a = (c) => c.done ? r(c.value) : Promise.resolve(c.value).then(o, s);\n  a((n = n.apply(e, t)).next());\n}), Sn = \"lk\";\nfunction j(e) {\n  return typeof e > \"u\" ? !1 : _i(e) || Ii(e);\n}\nfunction _i(e) {\n  var t;\n  return e ? e.hasOwnProperty(\"participant\") && e.hasOwnProperty(\"source\") && e.hasOwnProperty(\"track\") && typeof ((t = e.publication) == null ? void 0 : t.track) < \"u\" : !1;\n}\nfunction Ii(e) {\n  return e ? e.hasOwnProperty(\"participant\") && e.hasOwnProperty(\"source\") && e.hasOwnProperty(\"publication\") && typeof e.publication < \"u\" : !1;\n}\nfunction xe(e) {\n  return e ? e.hasOwnProperty(\"participant\") && e.hasOwnProperty(\"source\") && typeof e.publication > \"u\" : !1;\n}\nfunction $(e) {\n  if (typeof e == \"string\" || typeof e == \"number\")\n    return `${e}`;\n  if (xe(e))\n    return `${e.participant.identity}_${e.source}_placeholder`;\n  if (j(e))\n    return `${e.participant.identity}_${e.publication.source}_${e.publication.trackSid}`;\n  throw new Error(`Can't generate a id for the given track reference: ${e}`);\n}\nfunction Po(e, t) {\n  return e === void 0 || t === void 0 ? !1 : j(e) && j(t) ? e.publication.trackSid === t.publication.trackSid : $(e) === $(t);\n}\nfunction Ao(e, t) {\n  return typeof t > \"u\" ? !1 : j(e) ? t.some(\n    (n) => n.participant.identity === e.participant.identity && j(n) && n.publication.trackSid === e.publication.trackSid\n  ) : xe(e) ? t.some(\n    (n) => n.participant.identity === e.participant.identity && xe(n) && n.source === e.source\n  ) : !1;\n}\nfunction Di(e, t) {\n  return xe(e) && j(t) && t.participant.identity === e.participant.identity && t.source === e.source;\n}\nfunction ko(e) {\n  return e instanceof livekit_client__WEBPACK_IMPORTED_MODULE_0__.LocalParticipant;\n}\nfunction Oo() {\n  const e = document.createElement(\"p\");\n  e.style.width = \"100%\", e.style.height = \"200px\";\n  const t = document.createElement(\"div\");\n  t.style.position = \"absolute\", t.style.top = \"0px\", t.style.left = \"0px\", t.style.visibility = \"hidden\", t.style.width = \"200px\", t.style.height = \"150px\", t.style.overflow = \"hidden\", t.appendChild(e), document.body.appendChild(t);\n  const n = e.offsetWidth;\n  t.style.overflow = \"scroll\";\n  let r = e.offsetWidth;\n  return n === r && (r = t.clientWidth), document.body.removeChild(t), n - r;\n}\nfunction Lo() {\n  return typeof document < \"u\";\n}\nfunction Mi(e) {\n  e = K({}, e);\n  const t = \"(?:(?:[a-z]+:)?//)?\", n = \"(?:\\\\S+(?::\\\\S*)?@)?\", r = new RegExp(\n    \"(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)(?:\\\\.(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)){3}\",\n    \"g\"\n  ).source, u = `(?:${t}|www\\\\.)${n}(?:localhost|${r}|(?:(?:[a-z\\\\u00a1-\\\\uffff0-9][-_]*)*[a-z\\\\u00a1-\\\\uffff0-9]+)(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,}))\\\\.?)(?::\\\\d{2,5})?(?:[/?#][^\\\\s\"]*)?`;\n  return e.exact ? new RegExp(`(?:^${u}$)`, \"i\") : new RegExp(u, \"ig\");\n}\nvar Dt = \"[^\\\\.\\\\s@:](?:[^\\\\s@:]*[^\\\\s@:\\\\.])?@[^\\\\.\\\\s@]+(?:\\\\.[^\\\\.\\\\s@]+)*\";\nfunction Ri({ exact: e } = {}) {\n  return e ? new RegExp(`^${Dt}$`) : new RegExp(Dt, \"g\");\n}\nfunction _o(e, t) {\n  return B(this, null, function* () {\n    const { x: n, y: r } = yield yr(e, t, {\n      placement: \"top\",\n      middleware: [mr(6), br(), gr({ padding: 5 })]\n    });\n    return { x: n, y: r };\n  });\n}\nfunction Io(e, t) {\n  return !e.contains(t.target);\n}\nvar Do = () => ({\n  email: Ri(),\n  url: Mi({})\n});\nfunction Mo(e, t) {\n  const n = Object.entries(t).map(\n    ([o, s], a) => Array.from(e.matchAll(s)).map(({ index: c, 0: u }) => ({\n      type: o,\n      weight: a,\n      content: u,\n      index: c ?? 0\n    }))\n  ).flat().sort((o, s) => {\n    const a = o.index - s.index;\n    return a !== 0 ? a : o.weight - s.weight;\n  }).filter(({ index: o }, s, a) => {\n    if (s === 0) return !0;\n    const c = a[s - 1];\n    return c.index + c.content.length <= o;\n  }), r = [];\n  let i = 0;\n  for (const { type: o, content: s, index: a } of n)\n    a > i && r.push(e.substring(i, a)), r.push({ type: o, content: s }), i = a + s.length;\n  return e.length > i && r.push(e.substring(i)), r;\n}\nvar Ni = [\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.RoomMetadataChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ActiveSpeakersChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionQualityChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantPermissionsChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantMetadataChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantNameChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantAttributesChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackMuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackUnmuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackUnpublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackStreamStateChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscriptionFailed,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscriptionPermissionChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscriptionStatusChanged\n], xn = [\n  ...Ni,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackUnpublished\n], $i = [\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnpublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackMuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnmuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackStreamStateChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscribed,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnsubscribed,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionPermissionChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionFailed,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackUnpublished\n], Ui = [\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ConnectionQualityChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.IsSpeakingChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantMetadataChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantPermissionsChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackMuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnmuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnpublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackStreamStateChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionFailed,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionPermissionChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionStatusChanged\n], En = [\n  ...Ui,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackUnpublished\n], L = Er.getLogger(\"lk-components-js\");\nL.setDefaultLevel(\"WARN\");\nfunction Ro(e, t = {}) {\n  var n;\n  L.setLevel(e), (0,livekit_client__WEBPACK_IMPORTED_MODULE_0__.setLogLevel)((n = t.liveKitClientLogLevel) != null ? n : e);\n}\nfunction No(e, t = {}) {\n  var n;\n  const r = L.methodFactory;\n  L.methodFactory = (i, o, s) => {\n    const a = r(i, o, s), c = livekit_client__WEBPACK_IMPORTED_MODULE_0__.LogLevel[i], u = c >= o && c < livekit_client__WEBPACK_IMPORTED_MODULE_0__.LogLevel.silent;\n    return (l, f) => {\n      f ? a(l, f) : a(l), u && e(c, l, f);\n    };\n  }, L.setLevel(L.getLevel()), (0,livekit_client__WEBPACK_IMPORTED_MODULE_0__.setLogExtension)((n = t.liveKitClientLogExtension) != null ? n : e);\n}\nvar $o = [\n  {\n    columns: 1,\n    rows: 1\n  },\n  {\n    columns: 1,\n    rows: 2,\n    orientation: \"portrait\"\n  },\n  {\n    columns: 2,\n    rows: 1,\n    orientation: \"landscape\"\n  },\n  {\n    columns: 2,\n    rows: 2,\n    minWidth: 560\n  },\n  {\n    columns: 3,\n    rows: 3,\n    minWidth: 700\n  },\n  {\n    columns: 4,\n    rows: 4,\n    minWidth: 960\n  },\n  {\n    columns: 5,\n    rows: 5,\n    minWidth: 1100\n  }\n];\nfunction Fi(e, t, n, r) {\n  if (e.length < 1)\n    throw new Error(\"At least one grid layout definition must be provided.\");\n  const i = ji(e);\n  if (n <= 0 || r <= 0)\n    return i[0];\n  let o = 0;\n  const s = n / r > 1 ? \"landscape\" : \"portrait\";\n  let a = i.find((c, u, l) => {\n    o = u;\n    const f = l.findIndex((h, d) => {\n      const m = !h.orientation || h.orientation === s, p = d > u, g = h.maxTiles === c.maxTiles;\n      return p && g && m;\n    }) !== -1;\n    return c.maxTiles >= t && !f;\n  });\n  if (a === void 0)\n    if (a = i[i.length - 1], a)\n      L.warn(\n        `No layout found for: participantCount: ${t}, width/height: ${n}/${r} fallback to biggest available layout (${a}).`\n      );\n    else\n      throw new Error(\"No layout or fallback layout found.\");\n  if ((n < a.minWidth || r < a.minHeight) && o > 0) {\n    const c = i[o - 1];\n    a = Fi(\n      i.slice(0, o),\n      c.maxTiles,\n      n,\n      r\n    );\n  }\n  return a;\n}\nfunction ji(e) {\n  return [...e].map((t) => {\n    var n, r;\n    return {\n      name: `${t.columns}x${t.rows}`,\n      columns: t.columns,\n      rows: t.rows,\n      maxTiles: t.columns * t.rows,\n      minWidth: (n = t.minWidth) != null ? n : 0,\n      minHeight: (r = t.minHeight) != null ? r : 0,\n      orientation: t.orientation\n    };\n  }).sort((t, n) => t.maxTiles !== n.maxTiles ? t.maxTiles - n.maxTiles : t.minWidth !== 0 || n.minWidth !== 0 ? t.minWidth - n.minWidth : t.minHeight !== 0 || n.minHeight !== 0 ? t.minHeight - n.minHeight : 0);\n}\nfunction Uo() {\n  return typeof navigator < \"u\" && navigator.mediaDevices && !!navigator.mediaDevices.getDisplayMedia;\n}\nfunction Fo(e, t) {\n  var n;\n  return ye(K({}, e), {\n    receivedAtMediaTimestamp: (n = t.rtpTimestamp) != null ? n : 0,\n    receivedAt: t.timestamp\n  });\n}\nfunction jo(e, t, n) {\n  return [...e, ...t].reduceRight((r, i) => (r.find((o) => o.id === i.id) || r.unshift(i), r), []).slice(0 - n);\n}\nvar Tn = [], Cn = {\n  showChat: !1,\n  unreadMessages: 0,\n  showSettings: !1\n};\nfunction Wi(e) {\n  return typeof e == \"object\";\n}\nfunction Wo(e) {\n  return Array.isArray(e) && e.filter(Wi).length > 0;\n}\nfunction Pn(e, t) {\n  return t.audioLevel - e.audioLevel;\n}\nfunction An(e, t) {\n  return e.isSpeaking === t.isSpeaking ? 0 : e.isSpeaking ? -1 : 1;\n}\nfunction kn(e, t) {\n  var n, r, i, o;\n  return e.lastSpokeAt !== void 0 || t.lastSpokeAt !== void 0 ? ((r = (n = t.lastSpokeAt) == null ? void 0 : n.getTime()) != null ? r : 0) - ((o = (i = e.lastSpokeAt) == null ? void 0 : i.getTime()) != null ? o : 0) : 0;\n}\nfunction Me(e, t) {\n  var n, r, i, o;\n  return ((r = (n = e.joinedAt) == null ? void 0 : n.getTime()) != null ? r : 0) - ((o = (i = t.joinedAt) == null ? void 0 : i.getTime()) != null ? o : 0);\n}\nfunction Bi(e, t) {\n  return j(e) ? j(t) ? 0 : -1 : j(t) ? 1 : 0;\n}\nfunction Vi(e, t) {\n  const n = e.participant.isCameraEnabled, r = t.participant.isCameraEnabled;\n  return n !== r ? n ? -1 : 1 : 0;\n}\nfunction Bo(e) {\n  const t = [], n = [], r = [], i = [];\n  e.forEach((a) => {\n    a.participant.isLocal && a.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera ? t.push(a) : a.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare ? n.push(a) : a.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera ? r.push(a) : i.push(a);\n  });\n  const o = Hi(n), s = zi(r);\n  return [...t, ...o, ...s, ...i];\n}\nfunction Hi(e) {\n  const t = [], n = [];\n  return e.forEach((i) => {\n    i.participant.isLocal ? t.push(i) : n.push(i);\n  }), t.sort((i, o) => Me(i.participant, o.participant)), n.sort((i, o) => Me(i.participant, o.participant)), [...n, ...t];\n}\nfunction zi(e) {\n  const t = [], n = [];\n  return e.forEach((r) => {\n    r.participant.isLocal ? t.push(r) : n.push(r);\n  }), n.sort((r, i) => r.participant.isSpeaking && i.participant.isSpeaking ? Pn(r.participant, i.participant) : r.participant.isSpeaking !== i.participant.isSpeaking ? An(r.participant, i.participant) : r.participant.lastSpokeAt !== i.participant.lastSpokeAt ? kn(r.participant, i.participant) : j(r) !== j(i) ? Bi(r, i) : r.participant.isCameraEnabled !== i.participant.isCameraEnabled ? Vi(r, i) : Me(r.participant, i.participant)), [...t, ...n];\n}\nfunction Vo(e) {\n  const t = [...e];\n  t.sort((r, i) => {\n    if (r.isSpeaking && i.isSpeaking)\n      return Pn(r, i);\n    if (r.isSpeaking !== i.isSpeaking)\n      return An(r, i);\n    if (r.lastSpokeAt !== i.lastSpokeAt)\n      return kn(r, i);\n    const o = r.videoTrackPublications.size > 0, s = i.videoTrackPublications.size > 0;\n    return o !== s ? o ? -1 : 1 : Me(r, i);\n  });\n  const n = t.find((r) => r instanceof livekit_client__WEBPACK_IMPORTED_MODULE_0__.LocalParticipant);\n  if (n) {\n    const r = t.indexOf(n);\n    r >= 0 && (t.splice(r, 1), t.length > 0 ? t.splice(0, 0, n) : t.push(n));\n  }\n  return t;\n}\nfunction Yi(e, t) {\n  return e.reduce(\n    (n, r, i) => i % t === 0 ? [...n, [r]] : [...n.slice(0, -1), [...n.slice(-1)[0], r]],\n    []\n  );\n}\nfunction Mt(e, t) {\n  const n = Math.max(e.length, t.length);\n  return new Array(n).fill([]).map((r, i) => [e[i], t[i]]);\n}\nfunction Re(e, t, n) {\n  return e.filter((r) => !t.map((i) => n(i)).includes(n(r)));\n}\nfunction nt(e) {\n  return e.map((t) => typeof t == \"string\" || typeof t == \"number\" ? `${t}` : $(t));\n}\nfunction Gi(e, t) {\n  return {\n    dropped: Re(e, t, $),\n    added: Re(t, e, $)\n  };\n}\nfunction Ki(e) {\n  return e.added.length !== 0 || e.dropped.length !== 0;\n}\nfunction rt(e, t) {\n  const n = t.findIndex(\n    (r) => $(r) === $(e)\n  );\n  if (n === -1)\n    throw new Error(\n      `Element not part of the array: ${$(\n        e\n      )} not in ${nt(t)}`\n    );\n  return n;\n}\nfunction Qi(e, t, n) {\n  const r = rt(e, n), i = rt(t, n);\n  return n.splice(r, 1, t), n.splice(i, 1, e), n;\n}\nfunction Ji(e, t) {\n  const n = rt(e, t);\n  return t.splice(n, 1), t;\n}\nfunction qi(e, t) {\n  return [...t, e];\n}\nfunction Ge(e, t) {\n  return Yi(e, t);\n}\nfunction Ho(e, t, n) {\n  let r = Xi(e, t);\n  if (r.length < t.length) {\n    const s = Re(t, r, $);\n    r = [...r, ...s];\n  }\n  const i = Ge(r, n), o = Ge(t, n);\n  if (Mt(i, o).forEach(([s, a], c) => {\n    if (s && a) {\n      const u = Ge(r, n)[c], l = Gi(u, a);\n      Ki(l) && (L.debug(\n        `Detected visual changes on page: ${c}, current: ${nt(\n          s\n        )}, next: ${nt(a)}`,\n        { changes: l }\n      ), l.added.length === l.dropped.length && Mt(l.added, l.dropped).forEach(([f, h]) => {\n        if (f && h)\n          r = Qi(f, h, r);\n        else\n          throw new Error(\n            `For a swap action we need a addition and a removal one is missing: ${f}, ${h}`\n          );\n      }), l.added.length === 0 && l.dropped.length > 0 && l.dropped.forEach((f) => {\n        r = Ji(f, r);\n      }), l.added.length > 0 && l.dropped.length === 0 && l.added.forEach((f) => {\n        r = qi(f, r);\n      }));\n    }\n  }), r.length > t.length) {\n    const s = Re(r, t, $);\n    r = r.filter(\n      (a) => !s.map($).includes($(a))\n    );\n  }\n  return r;\n}\nfunction Xi(e, t) {\n  return e.map((n) => {\n    const r = t.find(\n      (i) => (\n        // If the IDs match or ..\n        $(n) === $(i) || // ... if the current item is a placeholder and the new item is the track reference can replace it.\n        typeof n != \"number\" && xe(n) && j(i) && Di(n, i)\n      )\n    );\n    return r ?? n;\n  });\n}\nfunction U(e) {\n  return `${Sn}-${e}`;\n}\nfunction zo(e) {\n  const t = Rt(e), n = On(e.participant).pipe(\n    A(() => Rt(e)),\n    M(t)\n  );\n  return { className: U(\n    e.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera || e.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare ? \"participant-media-video\" : \"participant-media-audio\"\n  ), trackObserver: n };\n}\nfunction Rt(e) {\n  if (j(e))\n    return e.publication;\n  {\n    const { source: t, name: n, participant: r } = e;\n    if (t && n)\n      return r.getTrackPublications().find((i) => i.source === t && i.trackName === n);\n    if (n)\n      return r.getTrackPublicationByName(n);\n    if (t)\n      return r.getTrackPublication(t);\n    throw new Error(\"At least one of source and name needs to be defined\");\n  }\n}\nfunction se(e, ...t) {\n  return new O((r) => {\n    const i = () => {\n      r.next(e);\n    };\n    return t.forEach((s) => {\n      e.on(s, i);\n    }), () => {\n      t.forEach((s) => {\n        e.off(s, i);\n      });\n    };\n  }).pipe(M(e));\n}\nfunction ae(e, t) {\n  return new O((r) => {\n    const i = (...s) => {\n      r.next(s);\n    };\n    return e.on(t, i), () => {\n      e.off(t, i);\n    };\n  });\n}\nfunction Yo(e) {\n  return ae(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged).pipe(\n    A(([t]) => t),\n    M(e.state)\n  );\n}\nfunction Go(e) {\n  return se(\n    e,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.RoomMetadataChanged,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged\n  ).pipe(\n    A((n) => ({ name: n.name, metadata: n.metadata }))\n  );\n}\nfunction Ko(e) {\n  return ae(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ActiveSpeakersChanged).pipe(\n    A(([t]) => t)\n  );\n}\nfunction Qo(e, t, n = !0) {\n  var r;\n  const i = () => B(this, null, function* () {\n    try {\n      const a = yield livekit_client__WEBPACK_IMPORTED_MODULE_0__.Room.getLocalDevices(e, n);\n      o.next(a);\n    } catch (a) {\n      t == null || t(a);\n    }\n  }), o = new ne(), s = o.pipe(\n    Ei(() => {\n      var a;\n      (a = navigator == null ? void 0 : navigator.mediaDevices) == null || a.removeEventListener(\"devicechange\", i);\n    })\n  );\n  if (typeof window < \"u\") {\n    if (!window.isSecureContext)\n      throw new Error(\n        \"Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices\"\n      );\n    (r = navigator == null ? void 0 : navigator.mediaDevices) == null || r.addEventListener(\"devicechange\", i);\n  }\n  return De(\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.Room.getLocalDevices(e, n).catch((a) => (t == null || t(a), [])),\n    s\n  );\n}\nfunction Zi(e) {\n  return ae(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.DataReceived);\n}\nfunction eo(e) {\n  return ae(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ChatMessage);\n}\nfunction to(e) {\n  return se(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.AudioPlaybackStatusChanged).pipe(\n    A((n) => ({ canPlayAudio: n.canPlaybackAudio }))\n  );\n}\nfunction no(e) {\n  return se(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.VideoPlaybackStatusChanged).pipe(\n    A((n) => ({ canPlayVideo: n.canPlaybackVideo }))\n  );\n}\nfunction ro(e, t) {\n  return ae(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ActiveDeviceChanged).pipe(\n    vt(([n]) => n === t),\n    A(([n, r]) => (L.debug(\"activeDeviceObservable | RoomEvent.ActiveDeviceChanged\", { kind: n, deviceId: r }), r)),\n    M(e.getActiveDevice(t))\n  );\n}\nfunction Jo(e, t) {\n  return ae(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantEncryptionStatusChanged).pipe(\n    vt(\n      ([, n]) => (t == null ? void 0 : t.identity) === (n == null ? void 0 : n.identity) || !n && (t == null ? void 0 : t.identity) === e.localParticipant.identity\n    ),\n    A(([n]) => n),\n    M(\n      t instanceof livekit_client__WEBPACK_IMPORTED_MODULE_0__.LocalParticipant ? t.isE2EEEnabled : !!(t != null && t.isEncrypted)\n    )\n  );\n}\nfunction qo(e) {\n  return ae(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.RecordingStatusChanged).pipe(\n    A(([t]) => t),\n    M(e.isRecording)\n  );\n}\nfunction me(e, ...t) {\n  return new O((r) => {\n    const i = () => {\n      r.next(e);\n    };\n    return t.forEach((s) => {\n      e.on(s, i);\n    }), () => {\n      t.forEach((s) => {\n        e.off(s, i);\n      });\n    };\n  }).pipe(M(e));\n}\nfunction On(e) {\n  return me(\n    e,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackMuted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnmuted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantPermissionsChanged,\n    // ParticipantEvent.IsSpeakingChanged,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackPublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnpublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackPublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackUnpublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.MediaDevicesError,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionStatusChanged\n    // ParticipantEvent.ConnectionQualityChanged,\n  ).pipe(\n    A((n) => {\n      const { isMicrophoneEnabled: r, isCameraEnabled: i, isScreenShareEnabled: o } = n, s = n.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone), a = n.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera);\n      return {\n        isCameraEnabled: i,\n        isMicrophoneEnabled: r,\n        isScreenShareEnabled: o,\n        cameraTrack: a,\n        microphoneTrack: s,\n        participant: n\n      };\n    })\n  );\n}\nfunction io(e) {\n  return e ? me(\n    e,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantMetadataChanged,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantNameChanged\n  ).pipe(\n    A(({ name: n, identity: r, metadata: i }) => ({\n      name: n,\n      identity: r,\n      metadata: i\n    })),\n    M({\n      name: e.name,\n      identity: e.identity,\n      metadata: e.metadata\n    })\n  ) : void 0;\n}\nfunction oo(e) {\n  return Ve(\n    e,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ConnectionQualityChanged\n  ).pipe(\n    A(([n]) => n),\n    M(e.connectionQuality)\n  );\n}\nfunction Ve(e, t) {\n  return new O((r) => {\n    const i = (...s) => {\n      r.next(s);\n    };\n    return e.on(t, i), () => {\n      e.off(t, i);\n    };\n  });\n}\nfunction so(e) {\n  var t, n, r, i;\n  return me(\n    e.participant,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackMuted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnmuted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscribed,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnsubscribed,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackPublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackUnpublished\n  ).pipe(\n    A((o) => {\n      var s, a;\n      const c = (s = e.publication) != null ? s : o.getTrackPublication(e.source);\n      return (a = c == null ? void 0 : c.isMuted) != null ? a : !0;\n    }),\n    M(\n      (i = (r = (t = e.publication) == null ? void 0 : t.isMuted) != null ? r : (n = e.participant.getTrackPublication(e.source)) == null ? void 0 : n.isMuted) != null ? i : !0\n    )\n  );\n}\nfunction Xo(e) {\n  return Ve(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.IsSpeakingChanged).pipe(\n    A(([t]) => t)\n  );\n}\nfunction Zo(e, t = {}) {\n  var n;\n  let r;\n  const i = new O((c) => (r = c, () => a.unsubscribe())).pipe(M(Array.from(e.remoteParticipants.values()))), o = (n = t.additionalRoomEvents) != null ? n : xn, s = Array.from(\n    /* @__PURE__ */ new Set([\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged,\n      ...o\n    ])\n  ), a = se(e, ...s).subscribe(\n    (c) => r == null ? void 0 : r.next(Array.from(c.remoteParticipants.values()))\n  );\n  return e.remoteParticipants.size > 0 && (r == null || r.next(Array.from(e.remoteParticipants.values()))), i;\n}\nfunction es(e, t, n = {}) {\n  var r;\n  const i = (r = n.additionalEvents) != null ? r : En;\n  return se(\n    e,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged\n  ).pipe(\n    wn((s) => {\n      const a = s.getParticipantByIdentity(t);\n      return a ? me(a, ...i) : new O((c) => c.next(void 0));\n    }),\n    M(e.getParticipantByIdentity(t))\n  );\n}\nfunction ts(e) {\n  return Ve(\n    e,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantPermissionsChanged\n  ).pipe(\n    A(() => e.permissions),\n    M(e.permissions)\n  );\n}\nfunction ns(e, { kind: t, identity: n }, r = {}) {\n  var i;\n  const o = (i = r.additionalEvents) != null ? i : En, s = (c) => {\n    let u = !0;\n    return t && (u = u && c.kind === t), n && (u = u && c.identity === n), u;\n  };\n  return se(\n    e,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged\n  ).pipe(\n    wn((c) => {\n      const u = Array.from(c.remoteParticipants.values()).find(\n        (l) => s(l)\n      );\n      return u ? me(u, ...o) : new O((l) => l.next(void 0));\n    }),\n    M(Array.from(e.remoteParticipants.values()).find((c) => s(c)))\n  );\n}\nfunction rs(e) {\n  return typeof e > \"u\" ? new O() : Ve(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.AttributesChanged).pipe(\n    A(([t]) => ({\n      changed: t,\n      attributes: e.attributes\n    })),\n    M({ changed: e.attributes, attributes: e.attributes })\n  );\n}\nfunction is(e, t, n, r, i) {\n  const { localParticipant: o } = t, s = (f, h) => {\n    let d = !1;\n    switch (f) {\n      case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera:\n        d = h.isCameraEnabled;\n        break;\n      case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone:\n        d = h.isMicrophoneEnabled;\n        break;\n      case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare:\n        d = h.isScreenShareEnabled;\n        break;\n    }\n    return d;\n  }, a = On(o).pipe(\n    A((f) => s(e, f.participant)),\n    M(s(e, o))\n  ), c = new ne(), u = (f, h) => B(this, null, function* () {\n    try {\n      switch (h ?? (h = n), c.next(!0), e) {\n        case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera:\n          return yield o.setCameraEnabled(\n            f ?? !o.isCameraEnabled,\n            h,\n            r\n          ), o.isCameraEnabled;\n        case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone:\n          return yield o.setMicrophoneEnabled(\n            f ?? !o.isMicrophoneEnabled,\n            h,\n            r\n          ), o.isMicrophoneEnabled;\n        case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare:\n          return yield o.setScreenShareEnabled(\n            f ?? !o.isScreenShareEnabled,\n            h,\n            r\n          ), o.isScreenShareEnabled;\n        default:\n          throw new TypeError(\"Tried to toggle unsupported source\");\n      }\n    } catch (d) {\n      if (i && d instanceof Error) {\n        i == null || i(d);\n        return;\n      } else\n        throw d;\n    } finally {\n      c.next(!1);\n    }\n  });\n  return {\n    className: U(\"button\"),\n    toggle: u,\n    enabledObserver: a,\n    pendingObserver: c.asObservable()\n  };\n}\nfunction os() {\n  let e = !1;\n  const t = new ne(), n = new ne(), r = (o) => B(this, null, function* () {\n    n.next(!0), e = o ?? !e, t.next(e), n.next(!1);\n  });\n  return {\n    className: U(\"button\"),\n    toggle: r,\n    enabledObserver: t.asObservable(),\n    pendingObserver: n.asObservable()\n  };\n}\nfunction ss(e, t, n) {\n  const r = new on(void 0), i = t ? ro(t, e) : r.asObservable(), o = (a, ...c) => B(this, [a, ...c], function* (u, l = {}) {\n    var f, h, d;\n    if (t) {\n      L.debug(`Switching active device of kind \"${e}\" with id ${u}.`), yield t.switchActiveDevice(e, u, l.exact);\n      const m = (f = t.getActiveDevice(e)) != null ? f : u;\n      m !== u && u !== \"default\" && L.info(\n        `We tried to select the device with id (${u}), but the browser decided to select the device with id (${m}) instead.`\n      );\n      let p;\n      e === \"audioinput\" ? p = (h = t.localParticipant.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone)) == null ? void 0 : h.track : e === \"videoinput\" && (p = (d = t.localParticipant.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera)) == null ? void 0 : d.track);\n      const g = u === \"default\" && !p || u === \"default\" && (p == null ? void 0 : p.mediaStreamTrack.label.startsWith(\"Default\"));\n      r.next(g ? u : m);\n    } else if (n) {\n      yield n.setDeviceId(l.exact ? { exact: u } : u);\n      const m = yield n.getDeviceId();\n      r.next(\n        u === \"default\" && n.mediaStreamTrack.label.startsWith(\"Default\") ? u : m\n      );\n    } else r.value !== u && (L.warn(\n      \"device switch skipped, please provide either a room or a local track to switch on. \"\n    ), r.next(u));\n  });\n  return {\n    className: U(\"media-device-select\"),\n    activeDeviceObservable: i,\n    setActiveMediaDevice: o\n  };\n}\nfunction as(e) {\n  const t = (r) => {\n    e.disconnect(r);\n  };\n  return { className: U(\"disconnect-button\"), disconnect: t };\n}\nfunction cs(e) {\n  const t = U(\"connection-quality\"), n = oo(e);\n  return { className: t, connectionQualityObserver: n };\n}\nfunction us(e) {\n  let t = \"track-muted-indicator-camera\";\n  switch (e.source) {\n    case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera:\n      t = \"track-muted-indicator-camera\";\n      break;\n    case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone:\n      t = \"track-muted-indicator-microphone\";\n      break;\n  }\n  const n = U(t), r = so(e);\n  return { className: n, mediaMutedObserver: r };\n}\nfunction ls(e) {\n  return { className: \"lk-participant-name\", infoObserver: io(e) };\n}\nfunction fs() {\n  return {\n    className: U(\"participant-tile\")\n  };\n}\nvar Nt = {\n  CHAT: \"lk-chat-topic\",\n  CHAT_UPDATE: \"lk-chat-update-topic\"\n};\nfunction it(e, t) {\n  return B(this, arguments, function* (n, r, i = {}) {\n    const { reliable: o, destinationIdentities: s, topic: a } = i;\n    yield n.publishData(r, {\n      destinationIdentities: s,\n      topic: a,\n      reliable: o\n    });\n  });\n}\nfunction ao(e, t, n) {\n  const r = Array.isArray(t) ? t : [t], i = Zi(e).pipe(\n    vt(\n      ([, , , c]) => t === void 0 || c !== void 0 && r.includes(c)\n    ),\n    A(([c, u, , l]) => {\n      const f = {\n        payload: c,\n        topic: l,\n        from: u\n      };\n      return n == null || n(f), f;\n    })\n  );\n  let o;\n  const s = new O((c) => {\n    o = c;\n  });\n  return { messageObservable: i, isSendingObservable: s, send: (c, ...u) => B(this, [c, ...u], function* (l, f = {}) {\n    o.next(!0);\n    try {\n      yield it(e.localParticipant, l, K({ topic: r[0] }, f));\n    } finally {\n      o.next(!1);\n    }\n  }) };\n}\nfunction co(e) {\n  return { chatObservable: eo(e), send: (i) => B(this, null, function* () {\n    return yield e.localParticipant.sendChatMessage(i);\n  }), edit: (i, o) => B(this, null, function* () {\n    return yield e.localParticipant.editChatMessage(i, o);\n  }) };\n}\nvar uo = new TextEncoder(), lo = new TextDecoder(), Pe = /* @__PURE__ */ new Map(), fo = (e) => uo.encode(JSON.stringify(e)), po = (e) => JSON.parse(lo.decode(e));\nfunction ds(e, t) {\n  var n, r;\n  const i = new ne(), { messageDecoder: o, messageEncoder: s, channelTopic: a, updateChannelTopic: c } = t ?? {}, u = a ?? Nt.CHAT, l = c ?? Nt.CHAT_UPDATE;\n  let f = !1;\n  Pe.has(e) || (f = !0);\n  const h = (n = Pe.get(e)) != null ? n : /* @__PURE__ */ new Map(), d = (r = h.get(u)) != null ? r : new ne();\n  if (h.set(u, d), Pe.set(e, h), f) {\n    const { messageObservable: C } = ao(e, [u, l]);\n    C.pipe(Lt(i)).subscribe(d);\n  }\n  const { chatObservable: m, send: p } = co(e), g = o ?? po, v = yi(\n    d.pipe(\n      A((C) => {\n        const T = g(C.payload), I = ye(K({}, T), { from: C.from });\n        if (!ho(I))\n          return I;\n      })\n    ),\n    m.pipe(\n      A(([C, T]) => ye(K({}, C), { from: T }))\n    )\n  ).pipe(\n    Ti((C, T) => {\n      var I;\n      if (!T)\n        return C;\n      if (\"id\" in T && C.find((N) => {\n        var w, x;\n        return ((w = N.from) == null ? void 0 : w.identity) === ((x = T.from) == null ? void 0 : x.identity) && N.id === T.id;\n      })) {\n        const N = C.findIndex((w) => w.id === T.id);\n        if (N > -1) {\n          const w = C[N];\n          C[N] = ye(K({}, T), {\n            timestamp: w.timestamp,\n            editTimestamp: (I = T.editTimestamp) != null ? I : T.timestamp\n          });\n        }\n        return [...C];\n      }\n      return [...C, T];\n    }, []),\n    Lt(i)\n  ), S = new on(!1), k = s ?? fo, _ = (C) => B(this, null, function* () {\n    S.next(!0);\n    try {\n      const T = yield p(C), I = k(ye(K({}, T), { ignore: !0 }));\n      return yield it(e.localParticipant, I, {\n        reliable: !0,\n        topic: u\n      }), T;\n    } finally {\n      S.next(!1);\n    }\n  }), E = (C, T) => B(this, null, function* () {\n    const I = Date.now(), N = typeof T == \"string\" ? { id: T, message: \"\", timestamp: I } : T;\n    S.next(!0);\n    try {\n      const w = yield e.localParticipant.editChatMessage(C, N), x = k(w);\n      return yield it(e.localParticipant, x, {\n        topic: l,\n        reliable: !0\n      }), w;\n    } finally {\n      S.next(!1);\n    }\n  });\n  function re() {\n    i.next(), i.complete(), Pe.delete(e);\n  }\n  return e.once(livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.Disconnected, re), {\n    messageObservable: v,\n    isSendingObservable: S,\n    send: _,\n    update: E\n  };\n}\nfunction ho(e) {\n  return e.ignore == !0;\n}\nfunction ps() {\n  const e = (n) => B(this, null, function* () {\n    L.info(\"Start Audio for room: \", n), yield n.startAudio();\n  });\n  return { className: U(\"start-audio-button\"), roomAudioPlaybackAllowedObservable: to, handleStartAudioPlayback: e };\n}\nfunction hs() {\n  const e = (n) => B(this, null, function* () {\n    L.info(\"Start Video for room: \", n), yield n.startVideo();\n  });\n  return { className: U(\"start-audio-button\"), roomVideoPlaybackAllowedObservable: no, handleStartVideoPlayback: e };\n}\nfunction vs() {\n  return { className: [U(\"button\"), U(\"chat-toggle\")].join(\" \") };\n}\nfunction ms() {\n  return { className: [U(\"button\"), U(\"focus-toggle-button\")].join(\" \") };\n}\nfunction gs() {\n  return { className: \"lk-clear-pin-button lk-button\" };\n}\nfunction bs() {\n  return { className: \"lk-room-container\" };\n}\nfunction $t(e, t, n = !0) {\n  const i = [e.localParticipant, ...Array.from(e.remoteParticipants.values())], o = [];\n  return i.forEach((s) => {\n    t.forEach((a) => {\n      const c = Array.from(\n        s.trackPublications.values()\n      ).filter(\n        (u) => u.source === a && // either return all or only the ones that are subscribed\n        (!n || u.track)\n      ).map((u) => ({\n        participant: s,\n        publication: u,\n        source: u.source\n      }));\n      o.push(...c);\n    });\n  }), { trackReferences: o, participants: i };\n}\nfunction Ut(e, t, n = !1) {\n  const { sources: r, kind: i, name: o } = t;\n  return Array.from(e.trackPublications.values()).filter(\n    (a) => (!r || r.includes(a.source)) && (!i || a.kind === i) && (!o || a.trackName === o) && // either return all or only the ones that are subscribed\n    (!n || a.track)\n  ).map((a) => ({\n    participant: e,\n    publication: a,\n    source: a.source\n  }));\n}\nfunction ys(e, t, n) {\n  var r, i;\n  const o = (r = n.additionalRoomEvents) != null ? r : xn, s = (i = n.onlySubscribed) != null ? i : !0, a = Array.from(\n    (/* @__PURE__ */ new Set([\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackPublished,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackUnpublished,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackPublished,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackUnpublished,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscriptionStatusChanged,\n      ...o\n    ])).values()\n  );\n  return se(e, ...a).pipe(\n    A((u) => {\n      const l = $t(u, t, s);\n      return L.debug(`TrackReference[] was updated. (length ${l.trackReferences.length})`, l), l;\n    }),\n    M($t(e, t, s))\n  );\n}\nfunction ws(e, t) {\n  return me(e, ...$i).pipe(\n    A((r) => {\n      const i = Ut(r, t);\n      return L.debug(`TrackReference[] was updated. (length ${i.length})`, i), i;\n    }),\n    M(Ut(e, t))\n  );\n}\nfunction Ln(e, t) {\n  return new O((r) => {\n    const i = (...s) => {\n      r.next(s);\n    };\n    return e.on(t, i), () => {\n      e.off(t, i);\n    };\n  });\n}\nfunction Ss(e) {\n  return Ln(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.TrackEvent.TranscriptionReceived);\n}\nfunction xs(e) {\n  return Ln(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.TrackEvent.TimeSyncUpdate).pipe(\n    A(([t]) => t)\n  );\n}\nfunction Es(e, t = 1e3) {\n  if (e === null) return kt(!1);\n  const n = tt(e, \"mousemove\", { passive: !0 }).pipe(A(() => !0)), r = n.pipe(\n    si({\n      each: t,\n      with: () => De(kt(!1), r.pipe(Ci(n)))\n    }),\n    Si()\n  );\n  return r;\n}\nfunction vo(e, t) {\n  if (typeof localStorage > \"u\") {\n    L.error(\"Local storage is not available.\");\n    return;\n  }\n  try {\n    if (t) {\n      const n = Object.fromEntries(\n        Object.entries(t).filter(([, r]) => r !== \"\")\n      );\n      localStorage.setItem(e, JSON.stringify(n));\n    }\n  } catch (n) {\n    L.error(`Error setting item to local storage: ${n}`);\n  }\n}\nfunction mo(e) {\n  if (typeof localStorage > \"u\") {\n    L.error(\"Local storage is not available.\");\n    return;\n  }\n  try {\n    const t = localStorage.getItem(e);\n    if (!t) {\n      L.warn(`Item with key ${e} does not exist in local storage.`);\n      return;\n    }\n    return JSON.parse(t);\n  } catch (t) {\n    L.error(`Error getting item from local storage: ${t}`);\n    return;\n  }\n}\nfunction go(e) {\n  return {\n    load: () => mo(e),\n    save: (t) => vo(e, t)\n  };\n}\nvar bo = `${Sn}-user-choices`, be = {\n  videoEnabled: !0,\n  audioEnabled: !0,\n  videoDeviceId: \"\",\n  audioDeviceId: \"\",\n  username: \"\"\n}, { load: yo, save: wo } = go(bo);\nfunction Ts(e, t = !1) {\n  t !== !0 && wo(e);\n}\nfunction Cs(e, t = !1) {\n  var n, r, i, o, s;\n  const a = {\n    videoEnabled: (n = e == null ? void 0 : e.videoEnabled) != null ? n : be.videoEnabled,\n    audioEnabled: (r = e == null ? void 0 : e.audioEnabled) != null ? r : be.audioEnabled,\n    videoDeviceId: (i = e == null ? void 0 : e.videoDeviceId) != null ? i : be.videoDeviceId,\n    audioDeviceId: (o = e == null ? void 0 : e.audioDeviceId) != null ? o : be.audioDeviceId,\n    username: (s = e == null ? void 0 : e.username) != null ? s : be.username\n  };\n  if (t)\n    return a;\n  {\n    const c = yo();\n    return K(K({}, a), c ?? {});\n  }\n}\nfunction _n(e, t) {\n  if (t.msg === \"show_chat\")\n    return { ...e, showChat: !0, unreadMessages: 0 };\n  if (t.msg === \"hide_chat\")\n    return { ...e, showChat: !1 };\n  if (t.msg === \"toggle_chat\") {\n    const n = { ...e, showChat: !e.showChat };\n    return n.showChat === !0 && (n.unreadMessages = 0), n;\n  } else return t.msg === \"unread_msg\" ? { ...e, unreadMessages: t.count } : t.msg === \"toggle_settings\" ? { ...e, showSettings: !e.showSettings } : { ...e };\n}\nfunction In(e, t) {\n  return t.msg === \"set_pin\" ? [t.trackReference] : t.msg === \"clear_pin\" ? [] : { ...e };\n}\nconst Dn = react__WEBPACK_IMPORTED_MODULE_1__.createContext(void 0);\nfunction Ps() {\n  const e = react__WEBPACK_IMPORTED_MODULE_1__.useContext(Dn);\n  if (!e)\n    throw Error(\"Tried to access LayoutContext context outside a LayoutContextProvider provider.\");\n  return e;\n}\nfunction As(e) {\n  const t = So();\n  if (e ?? (e = t), !e)\n    throw Error(\"Tried to access LayoutContext context outside a LayoutContextProvider provider.\");\n  return e;\n}\nfunction ks() {\n  const [e, t] = react__WEBPACK_IMPORTED_MODULE_1__.useReducer(In, Tn), [n, r] = react__WEBPACK_IMPORTED_MODULE_1__.useReducer(_n, Cn);\n  return {\n    pin: { dispatch: t, state: e },\n    widget: { dispatch: r, state: n }\n  };\n}\nfunction Os(e) {\n  const [t, n] = react__WEBPACK_IMPORTED_MODULE_1__.useReducer(In, Tn), [r, i] = react__WEBPACK_IMPORTED_MODULE_1__.useReducer(_n, Cn);\n  return e ?? {\n    pin: { dispatch: n, state: t },\n    widget: { dispatch: i, state: r }\n  };\n}\nfunction So() {\n  return react__WEBPACK_IMPORTED_MODULE_1__.useContext(Dn);\n}\nconst Mn = react__WEBPACK_IMPORTED_MODULE_1__.createContext(\n  void 0\n);\nfunction Ls() {\n  const e = react__WEBPACK_IMPORTED_MODULE_1__.useContext(Mn);\n  if (!e)\n    throw Error(\"tried to access track context outside of track context provider\");\n  return e;\n}\nfunction Rn() {\n  return react__WEBPACK_IMPORTED_MODULE_1__.useContext(Mn);\n}\nfunction _s(e) {\n  const t = Rn(), n = e ?? t;\n  if (!n)\n    throw new Error(\n      \"No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly\"\n    );\n  return n;\n}\nconst Nn = react__WEBPACK_IMPORTED_MODULE_1__.createContext(void 0);\nfunction Is() {\n  const e = react__WEBPACK_IMPORTED_MODULE_1__.useContext(Nn);\n  if (!e)\n    throw Error(\"tried to access participant context outside of participant context provider\");\n  return e;\n}\nfunction xo() {\n  return react__WEBPACK_IMPORTED_MODULE_1__.useContext(Nn);\n}\nfunction Ds(e) {\n  const t = xo(), n = Rn(), r = e ?? t ?? (n == null ? void 0 : n.participant);\n  if (!r)\n    throw new Error(\n      \"No participant provided, make sure you are inside a participant context or pass the participant explicitly\"\n    );\n  return r;\n}\nconst $n = react__WEBPACK_IMPORTED_MODULE_1__.createContext(void 0);\nfunction Ms() {\n  const e = react__WEBPACK_IMPORTED_MODULE_1__.useContext($n);\n  if (!e)\n    throw Error(\"tried to access room context outside of livekit room component\");\n  return e;\n}\nfunction Eo() {\n  return react__WEBPACK_IMPORTED_MODULE_1__.useContext($n);\n}\nfunction Rs(e) {\n  const t = Eo(), n = e ?? t;\n  if (!n)\n    throw new Error(\n      \"No room provided, make sure you are inside a Room context or pass the room explicitly\"\n    );\n  return n;\n}\nconst To = react__WEBPACK_IMPORTED_MODULE_1__.createContext(void 0);\nfunction Ns(e) {\n  const t = react__WEBPACK_IMPORTED_MODULE_1__.useContext(To);\n  if (e === !0) {\n    if (t)\n      return t;\n    throw Error(\"tried to access feature context, but none is present\");\n  }\n  return t;\n}\n\n//# sourceMappingURL=contexts-DjicKJUz.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxpdmVraXQrY29tcG9uZW50cy1yZWFjdEAyX2VkZmZiMGQ3YjM1ZjdkZTlhY2VjNjY3ZWVlZjE2NGMwL25vZGVfbW9kdWxlcy9AbGl2ZWtpdC9jb21wb25lbnRzLXJlYWN0L2Rpc3QvY29udGV4dHMtRGppY0tKVXoubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFtTTtBQUN4SztBQUMzQjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsSUFBSSw0QkFBNEI7QUFDaEMsa0JBQWtCLGNBQWM7QUFDaEM7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1Isc0hBQXNIO0FBQ3RIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsZ0JBQWdCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxtQkFBbUI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxnQkFBZ0I7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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Q1I7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNILDRCQUE0QixzQkFBc0I7QUFDbEQ7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxTQUFTO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixnQkFBZ0I7QUFDaEIsVUFBVTtBQUNWO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLFVBQVU7QUFDNUM7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsVUFBVTtBQUM1QztBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBLDRCQUE0QixzQkFBc0I7QUFDbEQ7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsZUFBZTtBQUM1QjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUFZLDZDQUFZO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDZDQUFZO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsZ0RBQWU7QUFDMUI7QUFDQSxZQUFZLDZDQUFZO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDZDQUFZO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsZ0RBQWU7QUFDMUI7QUFDQSxZQUFZLDZDQUFZO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDZDQUFZO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsZ0RBQWU7QUFDMUI7QUFDQSxZQUFZLDZDQUFZO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBMEZFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92b2ljZS1hc3Npc3RhbnQyLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0BsaXZla2l0K2NvbXBvbmVudHMtcmVhY3RAMl9lZGZmYjBkN2IzNWY3ZGU5YWNlYzY2N2VlZWYxNjRjMC9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1yZWFjdC9kaXN0L2NvbnRleHRzLURqaWNLSlV6Lm1qcz84ZTc1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvb21FdmVudCBhcyBiLCBQYXJ0aWNpcGFudEV2ZW50IGFzIHksIHNldExvZ0xldmVsIGFzIEZuLCBMb2dMZXZlbCBhcyBtdCwgc2V0TG9nRXh0ZW5zaW9uIGFzIGpuLCBMb2NhbFBhcnRpY2lwYW50IGFzIG90LCBUcmFjayBhcyBSLCBSb29tIGFzIGd0LCBUcmFja0V2ZW50IGFzIEZ0IH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5pbXBvcnQgKiBhcyBEIGZyb20gXCJyZWFjdFwiO1xuY29uc3QgS2UgPSBNYXRoLm1pbiwgdWUgPSBNYXRoLm1heCwga2UgPSBNYXRoLnJvdW5kLCBlZSA9IChlKSA9PiAoe1xuICB4OiBlLFxuICB5OiBlXG59KSwgV24gPSB7XG4gIGxlZnQ6IFwicmlnaHRcIixcbiAgcmlnaHQ6IFwibGVmdFwiLFxuICBib3R0b206IFwidG9wXCIsXG4gIHRvcDogXCJib3R0b21cIlxufSwgQm4gPSB7XG4gIHN0YXJ0OiBcImVuZFwiLFxuICBlbmQ6IFwic3RhcnRcIlxufTtcbmZ1bmN0aW9uIGJ0KGUsIHQsIG4pIHtcbiAgcmV0dXJuIHVlKGUsIEtlKHQsIG4pKTtcbn1cbmZ1bmN0aW9uIE5lKGUsIHQpIHtcbiAgcmV0dXJuIHR5cGVvZiBlID09IFwiZnVuY3Rpb25cIiA/IGUodCkgOiBlO1xufVxuZnVuY3Rpb24gb2UoZSkge1xuICByZXR1cm4gZS5zcGxpdChcIi1cIilbMF07XG59XG5mdW5jdGlvbiAkZShlKSB7XG4gIHJldHVybiBlLnNwbGl0KFwiLVwiKVsxXTtcbn1cbmZ1bmN0aW9uIGp0KGUpIHtcbiAgcmV0dXJuIGUgPT09IFwieFwiID8gXCJ5XCIgOiBcInhcIjtcbn1cbmZ1bmN0aW9uIFd0KGUpIHtcbiAgcmV0dXJuIGUgPT09IFwieVwiID8gXCJoZWlnaHRcIiA6IFwid2lkdGhcIjtcbn1cbmZ1bmN0aW9uIFVlKGUpIHtcbiAgcmV0dXJuIFtcInRvcFwiLCBcImJvdHRvbVwiXS5pbmNsdWRlcyhvZShlKSkgPyBcInlcIiA6IFwieFwiO1xufVxuZnVuY3Rpb24gQnQoZSkge1xuICByZXR1cm4ganQoVWUoZSkpO1xufVxuZnVuY3Rpb24gVm4oZSwgdCwgbikge1xuICBuID09PSB2b2lkIDAgJiYgKG4gPSAhMSk7XG4gIGNvbnN0IHIgPSAkZShlKSwgaSA9IEJ0KGUpLCBvID0gV3QoaSk7XG4gIGxldCBzID0gaSA9PT0gXCJ4XCIgPyByID09PSAobiA/IFwiZW5kXCIgOiBcInN0YXJ0XCIpID8gXCJyaWdodFwiIDogXCJsZWZ0XCIgOiByID09PSBcInN0YXJ0XCIgPyBcImJvdHRvbVwiIDogXCJ0b3BcIjtcbiAgcmV0dXJuIHQucmVmZXJlbmNlW29dID4gdC5mbG9hdGluZ1tvXSAmJiAocyA9IE9lKHMpKSwgW3MsIE9lKHMpXTtcbn1cbmZ1bmN0aW9uIEhuKGUpIHtcbiAgY29uc3QgdCA9IE9lKGUpO1xuICByZXR1cm4gW1FlKGUpLCB0LCBRZSh0KV07XG59XG5mdW5jdGlvbiBRZShlKSB7XG4gIHJldHVybiBlLnJlcGxhY2UoL3N0YXJ0fGVuZC9nLCAodCkgPT4gQm5bdF0pO1xufVxuZnVuY3Rpb24gem4oZSwgdCwgbikge1xuICBjb25zdCByID0gW1wibGVmdFwiLCBcInJpZ2h0XCJdLCBpID0gW1wicmlnaHRcIiwgXCJsZWZ0XCJdLCBvID0gW1widG9wXCIsIFwiYm90dG9tXCJdLCBzID0gW1wiYm90dG9tXCIsIFwidG9wXCJdO1xuICBzd2l0Y2ggKGUpIHtcbiAgICBjYXNlIFwidG9wXCI6XG4gICAgY2FzZSBcImJvdHRvbVwiOlxuICAgICAgcmV0dXJuIG4gPyB0ID8gaSA6IHIgOiB0ID8gciA6IGk7XG4gICAgY2FzZSBcImxlZnRcIjpcbiAgICBjYXNlIFwicmlnaHRcIjpcbiAgICAgIHJldHVybiB0ID8gbyA6IHM7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBbXTtcbiAgfVxufVxuZnVuY3Rpb24gWW4oZSwgdCwgbiwgcikge1xuICBjb25zdCBpID0gJGUoZSk7XG4gIGxldCBvID0gem4ob2UoZSksIG4gPT09IFwic3RhcnRcIiwgcik7XG4gIHJldHVybiBpICYmIChvID0gby5tYXAoKHMpID0+IHMgKyBcIi1cIiArIGkpLCB0ICYmIChvID0gby5jb25jYXQoby5tYXAoUWUpKSkpLCBvO1xufVxuZnVuY3Rpb24gT2UoZSkge1xuICByZXR1cm4gZS5yZXBsYWNlKC9sZWZ0fHJpZ2h0fGJvdHRvbXx0b3AvZywgKHQpID0+IFduW3RdKTtcbn1cbmZ1bmN0aW9uIEduKGUpIHtcbiAgcmV0dXJuIHtcbiAgICB0b3A6IDAsXG4gICAgcmlnaHQ6IDAsXG4gICAgYm90dG9tOiAwLFxuICAgIGxlZnQ6IDAsXG4gICAgLi4uZVxuICB9O1xufVxuZnVuY3Rpb24gS24oZSkge1xuICByZXR1cm4gdHlwZW9mIGUgIT0gXCJudW1iZXJcIiA/IEduKGUpIDoge1xuICAgIHRvcDogZSxcbiAgICByaWdodDogZSxcbiAgICBib3R0b206IGUsXG4gICAgbGVmdDogZVxuICB9O1xufVxuZnVuY3Rpb24gTGUoZSkge1xuICBjb25zdCB7XG4gICAgeDogdCxcbiAgICB5OiBuLFxuICAgIHdpZHRoOiByLFxuICAgIGhlaWdodDogaVxuICB9ID0gZTtcbiAgcmV0dXJuIHtcbiAgICB3aWR0aDogcixcbiAgICBoZWlnaHQ6IGksXG4gICAgdG9wOiBuLFxuICAgIGxlZnQ6IHQsXG4gICAgcmlnaHQ6IHQgKyByLFxuICAgIGJvdHRvbTogbiArIGksXG4gICAgeDogdCxcbiAgICB5OiBuXG4gIH07XG59XG5mdW5jdGlvbiB5dChlLCB0LCBuKSB7XG4gIGxldCB7XG4gICAgcmVmZXJlbmNlOiByLFxuICAgIGZsb2F0aW5nOiBpXG4gIH0gPSBlO1xuICBjb25zdCBvID0gVWUodCksIHMgPSBCdCh0KSwgYSA9IFd0KHMpLCBjID0gb2UodCksIHUgPSBvID09PSBcInlcIiwgbCA9IHIueCArIHIud2lkdGggLyAyIC0gaS53aWR0aCAvIDIsIGYgPSByLnkgKyByLmhlaWdodCAvIDIgLSBpLmhlaWdodCAvIDIsIGggPSByW2FdIC8gMiAtIGlbYV0gLyAyO1xuICBsZXQgZDtcbiAgc3dpdGNoIChjKSB7XG4gICAgY2FzZSBcInRvcFwiOlxuICAgICAgZCA9IHtcbiAgICAgICAgeDogbCxcbiAgICAgICAgeTogci55IC0gaS5oZWlnaHRcbiAgICAgIH07XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiYm90dG9tXCI6XG4gICAgICBkID0ge1xuICAgICAgICB4OiBsLFxuICAgICAgICB5OiByLnkgKyByLmhlaWdodFxuICAgICAgfTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJyaWdodFwiOlxuICAgICAgZCA9IHtcbiAgICAgICAgeDogci54ICsgci53aWR0aCxcbiAgICAgICAgeTogZlxuICAgICAgfTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJsZWZ0XCI6XG4gICAgICBkID0ge1xuICAgICAgICB4OiByLnggLSBpLndpZHRoLFxuICAgICAgICB5OiBmXG4gICAgICB9O1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIGQgPSB7XG4gICAgICAgIHg6IHIueCxcbiAgICAgICAgeTogci55XG4gICAgICB9O1xuICB9XG4gIHN3aXRjaCAoJGUodCkpIHtcbiAgICBjYXNlIFwic3RhcnRcIjpcbiAgICAgIGRbc10gLT0gaCAqIChuICYmIHUgPyAtMSA6IDEpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcImVuZFwiOlxuICAgICAgZFtzXSArPSBoICogKG4gJiYgdSA/IC0xIDogMSk7XG4gICAgICBicmVhaztcbiAgfVxuICByZXR1cm4gZDtcbn1cbmNvbnN0IFFuID0gYXN5bmMgKGUsIHQsIG4pID0+IHtcbiAgY29uc3Qge1xuICAgIHBsYWNlbWVudDogciA9IFwiYm90dG9tXCIsXG4gICAgc3RyYXRlZ3k6IGkgPSBcImFic29sdXRlXCIsXG4gICAgbWlkZGxld2FyZTogbyA9IFtdLFxuICAgIHBsYXRmb3JtOiBzXG4gIH0gPSBuLCBhID0gby5maWx0ZXIoQm9vbGVhbiksIGMgPSBhd2FpdCAocy5pc1JUTCA9PSBudWxsID8gdm9pZCAwIDogcy5pc1JUTCh0KSk7XG4gIGxldCB1ID0gYXdhaXQgcy5nZXRFbGVtZW50UmVjdHMoe1xuICAgIHJlZmVyZW5jZTogZSxcbiAgICBmbG9hdGluZzogdCxcbiAgICBzdHJhdGVneTogaVxuICB9KSwge1xuICAgIHg6IGwsXG4gICAgeTogZlxuICB9ID0geXQodSwgciwgYyksIGggPSByLCBkID0ge30sIG0gPSAwO1xuICBmb3IgKGxldCBwID0gMDsgcCA8IGEubGVuZ3RoOyBwKyspIHtcbiAgICBjb25zdCB7XG4gICAgICBuYW1lOiBnLFxuICAgICAgZm46IHZcbiAgICB9ID0gYVtwXSwge1xuICAgICAgeDogUyxcbiAgICAgIHk6IGssXG4gICAgICBkYXRhOiBfLFxuICAgICAgcmVzZXQ6IEVcbiAgICB9ID0gYXdhaXQgdih7XG4gICAgICB4OiBsLFxuICAgICAgeTogZixcbiAgICAgIGluaXRpYWxQbGFjZW1lbnQ6IHIsXG4gICAgICBwbGFjZW1lbnQ6IGgsXG4gICAgICBzdHJhdGVneTogaSxcbiAgICAgIG1pZGRsZXdhcmVEYXRhOiBkLFxuICAgICAgcmVjdHM6IHUsXG4gICAgICBwbGF0Zm9ybTogcyxcbiAgICAgIGVsZW1lbnRzOiB7XG4gICAgICAgIHJlZmVyZW5jZTogZSxcbiAgICAgICAgZmxvYXRpbmc6IHRcbiAgICAgIH1cbiAgICB9KTtcbiAgICBsID0gUyA/PyBsLCBmID0gayA/PyBmLCBkID0ge1xuICAgICAgLi4uZCxcbiAgICAgIFtnXToge1xuICAgICAgICAuLi5kW2ddLFxuICAgICAgICAuLi5fXG4gICAgICB9XG4gICAgfSwgRSAmJiBtIDw9IDUwICYmIChtKyssIHR5cGVvZiBFID09IFwib2JqZWN0XCIgJiYgKEUucGxhY2VtZW50ICYmIChoID0gRS5wbGFjZW1lbnQpLCBFLnJlY3RzICYmICh1ID0gRS5yZWN0cyA9PT0gITAgPyBhd2FpdCBzLmdldEVsZW1lbnRSZWN0cyh7XG4gICAgICByZWZlcmVuY2U6IGUsXG4gICAgICBmbG9hdGluZzogdCxcbiAgICAgIHN0cmF0ZWd5OiBpXG4gICAgfSkgOiBFLnJlY3RzKSwge1xuICAgICAgeDogbCxcbiAgICAgIHk6IGZcbiAgICB9ID0geXQodSwgaCwgYykpLCBwID0gLTEpO1xuICB9XG4gIHJldHVybiB7XG4gICAgeDogbCxcbiAgICB5OiBmLFxuICAgIHBsYWNlbWVudDogaCxcbiAgICBzdHJhdGVneTogaSxcbiAgICBtaWRkbGV3YXJlRGF0YTogZFxuICB9O1xufTtcbmFzeW5jIGZ1bmN0aW9uIFZ0KGUsIHQpIHtcbiAgdmFyIG47XG4gIHQgPT09IHZvaWQgMCAmJiAodCA9IHt9KTtcbiAgY29uc3Qge1xuICAgIHg6IHIsXG4gICAgeTogaSxcbiAgICBwbGF0Zm9ybTogbyxcbiAgICByZWN0czogcyxcbiAgICBlbGVtZW50czogYSxcbiAgICBzdHJhdGVneTogY1xuICB9ID0gZSwge1xuICAgIGJvdW5kYXJ5OiB1ID0gXCJjbGlwcGluZ0FuY2VzdG9yc1wiLFxuICAgIHJvb3RCb3VuZGFyeTogbCA9IFwidmlld3BvcnRcIixcbiAgICBlbGVtZW50Q29udGV4dDogZiA9IFwiZmxvYXRpbmdcIixcbiAgICBhbHRCb3VuZGFyeTogaCA9ICExLFxuICAgIHBhZGRpbmc6IGQgPSAwXG4gIH0gPSBOZSh0LCBlKSwgbSA9IEtuKGQpLCBnID0gYVtoID8gZiA9PT0gXCJmbG9hdGluZ1wiID8gXCJyZWZlcmVuY2VcIiA6IFwiZmxvYXRpbmdcIiA6IGZdLCB2ID0gTGUoYXdhaXQgby5nZXRDbGlwcGluZ1JlY3Qoe1xuICAgIGVsZW1lbnQ6IChuID0gYXdhaXQgKG8uaXNFbGVtZW50ID09IG51bGwgPyB2b2lkIDAgOiBvLmlzRWxlbWVudChnKSkpID09IG51bGwgfHwgbiA/IGcgOiBnLmNvbnRleHRFbGVtZW50IHx8IGF3YWl0IChvLmdldERvY3VtZW50RWxlbWVudCA9PSBudWxsID8gdm9pZCAwIDogby5nZXREb2N1bWVudEVsZW1lbnQoYS5mbG9hdGluZykpLFxuICAgIGJvdW5kYXJ5OiB1LFxuICAgIHJvb3RCb3VuZGFyeTogbCxcbiAgICBzdHJhdGVneTogY1xuICB9KSksIFMgPSBmID09PSBcImZsb2F0aW5nXCIgPyB7XG4gICAgLi4ucy5mbG9hdGluZyxcbiAgICB4OiByLFxuICAgIHk6IGlcbiAgfSA6IHMucmVmZXJlbmNlLCBrID0gYXdhaXQgKG8uZ2V0T2Zmc2V0UGFyZW50ID09IG51bGwgPyB2b2lkIDAgOiBvLmdldE9mZnNldFBhcmVudChhLmZsb2F0aW5nKSksIF8gPSBhd2FpdCAoby5pc0VsZW1lbnQgPT0gbnVsbCA/IHZvaWQgMCA6IG8uaXNFbGVtZW50KGspKSA/IGF3YWl0IChvLmdldFNjYWxlID09IG51bGwgPyB2b2lkIDAgOiBvLmdldFNjYWxlKGspKSB8fCB7XG4gICAgeDogMSxcbiAgICB5OiAxXG4gIH0gOiB7XG4gICAgeDogMSxcbiAgICB5OiAxXG4gIH0sIEUgPSBMZShvLmNvbnZlcnRPZmZzZXRQYXJlbnRSZWxhdGl2ZVJlY3RUb1ZpZXdwb3J0UmVsYXRpdmVSZWN0ID8gYXdhaXQgby5jb252ZXJ0T2Zmc2V0UGFyZW50UmVsYXRpdmVSZWN0VG9WaWV3cG9ydFJlbGF0aXZlUmVjdCh7XG4gICAgZWxlbWVudHM6IGEsXG4gICAgcmVjdDogUyxcbiAgICBvZmZzZXRQYXJlbnQ6IGssXG4gICAgc3RyYXRlZ3k6IGNcbiAgfSkgOiBTKTtcbiAgcmV0dXJuIHtcbiAgICB0b3A6ICh2LnRvcCAtIEUudG9wICsgbS50b3ApIC8gXy55LFxuICAgIGJvdHRvbTogKEUuYm90dG9tIC0gdi5ib3R0b20gKyBtLmJvdHRvbSkgLyBfLnksXG4gICAgbGVmdDogKHYubGVmdCAtIEUubGVmdCArIG0ubGVmdCkgLyBfLngsXG4gICAgcmlnaHQ6IChFLnJpZ2h0IC0gdi5yaWdodCArIG0ucmlnaHQpIC8gXy54XG4gIH07XG59XG5jb25zdCBKbiA9IGZ1bmN0aW9uKGUpIHtcbiAgcmV0dXJuIGUgPT09IHZvaWQgMCAmJiAoZSA9IHt9KSwge1xuICAgIG5hbWU6IFwiZmxpcFwiLFxuICAgIG9wdGlvbnM6IGUsXG4gICAgYXN5bmMgZm4odCkge1xuICAgICAgdmFyIG4sIHI7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHBsYWNlbWVudDogaSxcbiAgICAgICAgbWlkZGxld2FyZURhdGE6IG8sXG4gICAgICAgIHJlY3RzOiBzLFxuICAgICAgICBpbml0aWFsUGxhY2VtZW50OiBhLFxuICAgICAgICBwbGF0Zm9ybTogYyxcbiAgICAgICAgZWxlbWVudHM6IHVcbiAgICAgIH0gPSB0LCB7XG4gICAgICAgIG1haW5BeGlzOiBsID0gITAsXG4gICAgICAgIGNyb3NzQXhpczogZiA9ICEwLFxuICAgICAgICBmYWxsYmFja1BsYWNlbWVudHM6IGgsXG4gICAgICAgIGZhbGxiYWNrU3RyYXRlZ3k6IGQgPSBcImJlc3RGaXRcIixcbiAgICAgICAgZmFsbGJhY2tBeGlzU2lkZURpcmVjdGlvbjogbSA9IFwibm9uZVwiLFxuICAgICAgICBmbGlwQWxpZ25tZW50OiBwID0gITAsXG4gICAgICAgIC4uLmdcbiAgICAgIH0gPSBOZShlLCB0KTtcbiAgICAgIGlmICgobiA9IG8uYXJyb3cpICE9IG51bGwgJiYgbi5hbGlnbm1lbnRPZmZzZXQpXG4gICAgICAgIHJldHVybiB7fTtcbiAgICAgIGNvbnN0IHYgPSBvZShpKSwgUyA9IG9lKGEpID09PSBhLCBrID0gYXdhaXQgKGMuaXNSVEwgPT0gbnVsbCA/IHZvaWQgMCA6IGMuaXNSVEwodS5mbG9hdGluZykpLCBfID0gaCB8fCAoUyB8fCAhcCA/IFtPZShhKV0gOiBIbihhKSk7XG4gICAgICAhaCAmJiBtICE9PSBcIm5vbmVcIiAmJiBfLnB1c2goLi4uWW4oYSwgcCwgbSwgaykpO1xuICAgICAgY29uc3QgRSA9IFthLCAuLi5fXSwgcmUgPSBhd2FpdCBWdCh0LCBnKSwgQyA9IFtdO1xuICAgICAgbGV0IFQgPSAoKHIgPSBvLmZsaXApID09IG51bGwgPyB2b2lkIDAgOiByLm92ZXJmbG93cykgfHwgW107XG4gICAgICBpZiAobCAmJiBDLnB1c2gocmVbdl0pLCBmKSB7XG4gICAgICAgIGNvbnN0IHggPSBWbihpLCBzLCBrKTtcbiAgICAgICAgQy5wdXNoKHJlW3hbMF1dLCByZVt4WzFdXSk7XG4gICAgICB9XG4gICAgICBpZiAoVCA9IFsuLi5ULCB7XG4gICAgICAgIHBsYWNlbWVudDogaSxcbiAgICAgICAgb3ZlcmZsb3dzOiBDXG4gICAgICB9XSwgIUMuZXZlcnkoKHgpID0+IHggPD0gMCkpIHtcbiAgICAgICAgdmFyIEksIE47XG4gICAgICAgIGNvbnN0IHggPSAoKChJID0gby5mbGlwKSA9PSBudWxsID8gdm9pZCAwIDogSS5pbmRleCkgfHwgMCkgKyAxLCBpZSA9IEVbeF07XG4gICAgICAgIGlmIChpZSlcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBpbmRleDogeCxcbiAgICAgICAgICAgICAgb3ZlcmZsb3dzOiBUXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVzZXQ6IHtcbiAgICAgICAgICAgICAgcGxhY2VtZW50OiBpZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgIGxldCBxID0gKE4gPSBULmZpbHRlcigoWCkgPT4gWC5vdmVyZmxvd3NbMF0gPD0gMCkuc29ydCgoWCwgY2UpID0+IFgub3ZlcmZsb3dzWzFdIC0gY2Uub3ZlcmZsb3dzWzFdKVswXSkgPT0gbnVsbCA/IHZvaWQgMCA6IE4ucGxhY2VtZW50O1xuICAgICAgICBpZiAoIXEpXG4gICAgICAgICAgc3dpdGNoIChkKSB7XG4gICAgICAgICAgICBjYXNlIFwiYmVzdEZpdFwiOiB7XG4gICAgICAgICAgICAgIHZhciB3O1xuICAgICAgICAgICAgICBjb25zdCBYID0gKHcgPSBULm1hcCgoY2UpID0+IFtjZS5wbGFjZW1lbnQsIGNlLm92ZXJmbG93cy5maWx0ZXIoKGdlKSA9PiBnZSA+IDApLnJlZHVjZSgoZ2UsIFVuKSA9PiBnZSArIFVuLCAwKV0pLnNvcnQoKGNlLCBnZSkgPT4gY2VbMV0gLSBnZVsxXSlbMF0pID09IG51bGwgPyB2b2lkIDAgOiB3WzBdO1xuICAgICAgICAgICAgICBYICYmIChxID0gWCk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcImluaXRpYWxQbGFjZW1lbnRcIjpcbiAgICAgICAgICAgICAgcSA9IGE7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgaWYgKGkgIT09IHEpXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc2V0OiB7XG4gICAgICAgICAgICAgIHBsYWNlbWVudDogcVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4ge307XG4gICAgfVxuICB9O1xufTtcbmFzeW5jIGZ1bmN0aW9uIHFuKGUsIHQpIHtcbiAgY29uc3Qge1xuICAgIHBsYWNlbWVudDogbixcbiAgICBwbGF0Zm9ybTogcixcbiAgICBlbGVtZW50czogaVxuICB9ID0gZSwgbyA9IGF3YWl0IChyLmlzUlRMID09IG51bGwgPyB2b2lkIDAgOiByLmlzUlRMKGkuZmxvYXRpbmcpKSwgcyA9IG9lKG4pLCBhID0gJGUobiksIGMgPSBVZShuKSA9PT0gXCJ5XCIsIHUgPSBbXCJsZWZ0XCIsIFwidG9wXCJdLmluY2x1ZGVzKHMpID8gLTEgOiAxLCBsID0gbyAmJiBjID8gLTEgOiAxLCBmID0gTmUodCwgZSk7XG4gIGxldCB7XG4gICAgbWFpbkF4aXM6IGgsXG4gICAgY3Jvc3NBeGlzOiBkLFxuICAgIGFsaWdubWVudEF4aXM6IG1cbiAgfSA9IHR5cGVvZiBmID09IFwibnVtYmVyXCIgPyB7XG4gICAgbWFpbkF4aXM6IGYsXG4gICAgY3Jvc3NBeGlzOiAwLFxuICAgIGFsaWdubWVudEF4aXM6IG51bGxcbiAgfSA6IHtcbiAgICBtYWluQXhpczogMCxcbiAgICBjcm9zc0F4aXM6IDAsXG4gICAgYWxpZ25tZW50QXhpczogbnVsbCxcbiAgICAuLi5mXG4gIH07XG4gIHJldHVybiBhICYmIHR5cGVvZiBtID09IFwibnVtYmVyXCIgJiYgKGQgPSBhID09PSBcImVuZFwiID8gbSAqIC0xIDogbSksIGMgPyB7XG4gICAgeDogZCAqIGwsXG4gICAgeTogaCAqIHVcbiAgfSA6IHtcbiAgICB4OiBoICogdSxcbiAgICB5OiBkICogbFxuICB9O1xufVxuY29uc3QgWG4gPSBmdW5jdGlvbihlKSB7XG4gIHJldHVybiBlID09PSB2b2lkIDAgJiYgKGUgPSAwKSwge1xuICAgIG5hbWU6IFwib2Zmc2V0XCIsXG4gICAgb3B0aW9uczogZSxcbiAgICBhc3luYyBmbih0KSB7XG4gICAgICB2YXIgbiwgcjtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgeDogaSxcbiAgICAgICAgeTogbyxcbiAgICAgICAgcGxhY2VtZW50OiBzLFxuICAgICAgICBtaWRkbGV3YXJlRGF0YTogYVxuICAgICAgfSA9IHQsIGMgPSBhd2FpdCBxbih0LCBlKTtcbiAgICAgIHJldHVybiBzID09PSAoKG4gPSBhLm9mZnNldCkgPT0gbnVsbCA/IHZvaWQgMCA6IG4ucGxhY2VtZW50KSAmJiAociA9IGEuYXJyb3cpICE9IG51bGwgJiYgci5hbGlnbm1lbnRPZmZzZXQgPyB7fSA6IHtcbiAgICAgICAgeDogaSArIGMueCxcbiAgICAgICAgeTogbyArIGMueSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIC4uLmMsXG4gICAgICAgICAgcGxhY2VtZW50OiBzXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9O1xufSwgWm4gPSBmdW5jdGlvbihlKSB7XG4gIHJldHVybiBlID09PSB2b2lkIDAgJiYgKGUgPSB7fSksIHtcbiAgICBuYW1lOiBcInNoaWZ0XCIsXG4gICAgb3B0aW9uczogZSxcbiAgICBhc3luYyBmbih0KSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHg6IG4sXG4gICAgICAgIHk6IHIsXG4gICAgICAgIHBsYWNlbWVudDogaVxuICAgICAgfSA9IHQsIHtcbiAgICAgICAgbWFpbkF4aXM6IG8gPSAhMCxcbiAgICAgICAgY3Jvc3NBeGlzOiBzID0gITEsXG4gICAgICAgIGxpbWl0ZXI6IGEgPSB7XG4gICAgICAgICAgZm46IChnKSA9PiB7XG4gICAgICAgICAgICBsZXQge1xuICAgICAgICAgICAgICB4OiB2LFxuICAgICAgICAgICAgICB5OiBTXG4gICAgICAgICAgICB9ID0gZztcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHg6IHYsXG4gICAgICAgICAgICAgIHk6IFNcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAuLi5jXG4gICAgICB9ID0gTmUoZSwgdCksIHUgPSB7XG4gICAgICAgIHg6IG4sXG4gICAgICAgIHk6IHJcbiAgICAgIH0sIGwgPSBhd2FpdCBWdCh0LCBjKSwgZiA9IFVlKG9lKGkpKSwgaCA9IGp0KGYpO1xuICAgICAgbGV0IGQgPSB1W2hdLCBtID0gdVtmXTtcbiAgICAgIGlmIChvKSB7XG4gICAgICAgIGNvbnN0IGcgPSBoID09PSBcInlcIiA/IFwidG9wXCIgOiBcImxlZnRcIiwgdiA9IGggPT09IFwieVwiID8gXCJib3R0b21cIiA6IFwicmlnaHRcIiwgUyA9IGQgKyBsW2ddLCBrID0gZCAtIGxbdl07XG4gICAgICAgIGQgPSBidChTLCBkLCBrKTtcbiAgICAgIH1cbiAgICAgIGlmIChzKSB7XG4gICAgICAgIGNvbnN0IGcgPSBmID09PSBcInlcIiA/IFwidG9wXCIgOiBcImxlZnRcIiwgdiA9IGYgPT09IFwieVwiID8gXCJib3R0b21cIiA6IFwicmlnaHRcIiwgUyA9IG0gKyBsW2ddLCBrID0gbSAtIGxbdl07XG4gICAgICAgIG0gPSBidChTLCBtLCBrKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHAgPSBhLmZuKHtcbiAgICAgICAgLi4udCxcbiAgICAgICAgW2hdOiBkLFxuICAgICAgICBbZl06IG1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4ucCxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHg6IHAueCAtIG4sXG4gICAgICAgICAgeTogcC55IC0gclxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn07XG5mdW5jdGlvbiBGZSgpIHtcbiAgcmV0dXJuIHR5cGVvZiB3aW5kb3cgPCBcInVcIjtcbn1cbmZ1bmN0aW9uIHZlKGUpIHtcbiAgcmV0dXJuIEh0KGUpID8gKGUubm9kZU5hbWUgfHwgXCJcIikudG9Mb3dlckNhc2UoKSA6IFwiI2RvY3VtZW50XCI7XG59XG5mdW5jdGlvbiBGKGUpIHtcbiAgdmFyIHQ7XG4gIHJldHVybiAoZSA9PSBudWxsIHx8ICh0ID0gZS5vd25lckRvY3VtZW50KSA9PSBudWxsID8gdm9pZCAwIDogdC5kZWZhdWx0VmlldykgfHwgd2luZG93O1xufVxuZnVuY3Rpb24gUShlKSB7XG4gIHZhciB0O1xuICByZXR1cm4gKHQgPSAoSHQoZSkgPyBlLm93bmVyRG9jdW1lbnQgOiBlLmRvY3VtZW50KSB8fCB3aW5kb3cuZG9jdW1lbnQpID09IG51bGwgPyB2b2lkIDAgOiB0LmRvY3VtZW50RWxlbWVudDtcbn1cbmZ1bmN0aW9uIEh0KGUpIHtcbiAgcmV0dXJuIEZlKCkgPyBlIGluc3RhbmNlb2YgTm9kZSB8fCBlIGluc3RhbmNlb2YgRihlKS5Ob2RlIDogITE7XG59XG5mdW5jdGlvbiBIKGUpIHtcbiAgcmV0dXJuIEZlKCkgPyBlIGluc3RhbmNlb2YgRWxlbWVudCB8fCBlIGluc3RhbmNlb2YgRihlKS5FbGVtZW50IDogITE7XG59XG5mdW5jdGlvbiBHKGUpIHtcbiAgcmV0dXJuIEZlKCkgPyBlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgfHwgZSBpbnN0YW5jZW9mIEYoZSkuSFRNTEVsZW1lbnQgOiAhMTtcbn1cbmZ1bmN0aW9uIHd0KGUpIHtcbiAgcmV0dXJuICFGZSgpIHx8IHR5cGVvZiBTaGFkb3dSb290ID4gXCJ1XCIgPyAhMSA6IGUgaW5zdGFuY2VvZiBTaGFkb3dSb290IHx8IGUgaW5zdGFuY2VvZiBGKGUpLlNoYWRvd1Jvb3Q7XG59XG5mdW5jdGlvbiBFZShlKSB7XG4gIGNvbnN0IHtcbiAgICBvdmVyZmxvdzogdCxcbiAgICBvdmVyZmxvd1g6IG4sXG4gICAgb3ZlcmZsb3dZOiByLFxuICAgIGRpc3BsYXk6IGlcbiAgfSA9IHooZSk7XG4gIHJldHVybiAvYXV0b3xzY3JvbGx8b3ZlcmxheXxoaWRkZW58Y2xpcC8udGVzdCh0ICsgciArIG4pICYmICFbXCJpbmxpbmVcIiwgXCJjb250ZW50c1wiXS5pbmNsdWRlcyhpKTtcbn1cbmZ1bmN0aW9uIGVyKGUpIHtcbiAgcmV0dXJuIFtcInRhYmxlXCIsIFwidGRcIiwgXCJ0aFwiXS5pbmNsdWRlcyh2ZShlKSk7XG59XG5mdW5jdGlvbiBqZShlKSB7XG4gIHJldHVybiBbXCI6cG9wb3Zlci1vcGVuXCIsIFwiOm1vZGFsXCJdLnNvbWUoKHQpID0+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGUubWF0Y2hlcyh0KTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gc3QoZSkge1xuICBjb25zdCB0ID0gYXQoKSwgbiA9IEgoZSkgPyB6KGUpIDogZTtcbiAgcmV0dXJuIG4udHJhbnNmb3JtICE9PSBcIm5vbmVcIiB8fCBuLnBlcnNwZWN0aXZlICE9PSBcIm5vbmVcIiB8fCAobi5jb250YWluZXJUeXBlID8gbi5jb250YWluZXJUeXBlICE9PSBcIm5vcm1hbFwiIDogITEpIHx8ICF0ICYmIChuLmJhY2tkcm9wRmlsdGVyID8gbi5iYWNrZHJvcEZpbHRlciAhPT0gXCJub25lXCIgOiAhMSkgfHwgIXQgJiYgKG4uZmlsdGVyID8gbi5maWx0ZXIgIT09IFwibm9uZVwiIDogITEpIHx8IFtcInRyYW5zZm9ybVwiLCBcInBlcnNwZWN0aXZlXCIsIFwiZmlsdGVyXCJdLnNvbWUoKHIpID0+IChuLndpbGxDaGFuZ2UgfHwgXCJcIikuaW5jbHVkZXMocikpIHx8IFtcInBhaW50XCIsIFwibGF5b3V0XCIsIFwic3RyaWN0XCIsIFwiY29udGVudFwiXS5zb21lKChyKSA9PiAobi5jb250YWluIHx8IFwiXCIpLmluY2x1ZGVzKHIpKTtcbn1cbmZ1bmN0aW9uIHRyKGUpIHtcbiAgbGV0IHQgPSB0ZShlKTtcbiAgZm9yICg7IEcodCkgJiYgIWRlKHQpOyApIHtcbiAgICBpZiAoc3QodCkpXG4gICAgICByZXR1cm4gdDtcbiAgICBpZiAoamUodCkpXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB0ID0gdGUodCk7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBhdCgpIHtcbiAgcmV0dXJuIHR5cGVvZiBDU1MgPiBcInVcIiB8fCAhQ1NTLnN1cHBvcnRzID8gITEgOiBDU1Muc3VwcG9ydHMoXCItd2Via2l0LWJhY2tkcm9wLWZpbHRlclwiLCBcIm5vbmVcIik7XG59XG5mdW5jdGlvbiBkZShlKSB7XG4gIHJldHVybiBbXCJodG1sXCIsIFwiYm9keVwiLCBcIiNkb2N1bWVudFwiXS5pbmNsdWRlcyh2ZShlKSk7XG59XG5mdW5jdGlvbiB6KGUpIHtcbiAgcmV0dXJuIEYoZSkuZ2V0Q29tcHV0ZWRTdHlsZShlKTtcbn1cbmZ1bmN0aW9uIFdlKGUpIHtcbiAgcmV0dXJuIEgoZSkgPyB7XG4gICAgc2Nyb2xsTGVmdDogZS5zY3JvbGxMZWZ0LFxuICAgIHNjcm9sbFRvcDogZS5zY3JvbGxUb3BcbiAgfSA6IHtcbiAgICBzY3JvbGxMZWZ0OiBlLnNjcm9sbFgsXG4gICAgc2Nyb2xsVG9wOiBlLnNjcm9sbFlcbiAgfTtcbn1cbmZ1bmN0aW9uIHRlKGUpIHtcbiAgaWYgKHZlKGUpID09PSBcImh0bWxcIilcbiAgICByZXR1cm4gZTtcbiAgY29uc3QgdCA9IChcbiAgICAvLyBTdGVwIGludG8gdGhlIHNoYWRvdyBET00gb2YgdGhlIHBhcmVudCBvZiBhIHNsb3R0ZWQgbm9kZS5cbiAgICBlLmFzc2lnbmVkU2xvdCB8fCAvLyBET00gRWxlbWVudCBkZXRlY3RlZC5cbiAgICBlLnBhcmVudE5vZGUgfHwgLy8gU2hhZG93Um9vdCBkZXRlY3RlZC5cbiAgICB3dChlKSAmJiBlLmhvc3QgfHwgLy8gRmFsbGJhY2suXG4gICAgUShlKVxuICApO1xuICByZXR1cm4gd3QodCkgPyB0Lmhvc3QgOiB0O1xufVxuZnVuY3Rpb24genQoZSkge1xuICBjb25zdCB0ID0gdGUoZSk7XG4gIHJldHVybiBkZSh0KSA/IGUub3duZXJEb2N1bWVudCA/IGUub3duZXJEb2N1bWVudC5ib2R5IDogZS5ib2R5IDogRyh0KSAmJiBFZSh0KSA/IHQgOiB6dCh0KTtcbn1cbmZ1bmN0aW9uIEplKGUsIHQsIG4pIHtcbiAgdmFyIHI7XG4gIHQgPT09IHZvaWQgMCAmJiAodCA9IFtdKSwgbiA9PT0gdm9pZCAwICYmIChuID0gITApO1xuICBjb25zdCBpID0genQoZSksIG8gPSBpID09PSAoKHIgPSBlLm93bmVyRG9jdW1lbnQpID09IG51bGwgPyB2b2lkIDAgOiByLmJvZHkpLCBzID0gRihpKTtcbiAgaWYgKG8pIHtcbiAgICBjb25zdCBhID0gcWUocyk7XG4gICAgcmV0dXJuIHQuY29uY2F0KHMsIHMudmlzdWFsVmlld3BvcnQgfHwgW10sIEVlKGkpID8gaSA6IFtdLCBhICYmIG4gPyBKZShhKSA6IFtdKTtcbiAgfVxuICByZXR1cm4gdC5jb25jYXQoaSwgSmUoaSwgW10sIG4pKTtcbn1cbmZ1bmN0aW9uIHFlKGUpIHtcbiAgcmV0dXJuIGUucGFyZW50ICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnBhcmVudCkgPyBlLmZyYW1lRWxlbWVudCA6IG51bGw7XG59XG5mdW5jdGlvbiBZdChlKSB7XG4gIGNvbnN0IHQgPSB6KGUpO1xuICBsZXQgbiA9IHBhcnNlRmxvYXQodC53aWR0aCkgfHwgMCwgciA9IHBhcnNlRmxvYXQodC5oZWlnaHQpIHx8IDA7XG4gIGNvbnN0IGkgPSBHKGUpLCBvID0gaSA/IGUub2Zmc2V0V2lkdGggOiBuLCBzID0gaSA/IGUub2Zmc2V0SGVpZ2h0IDogciwgYSA9IGtlKG4pICE9PSBvIHx8IGtlKHIpICE9PSBzO1xuICByZXR1cm4gYSAmJiAobiA9IG8sIHIgPSBzKSwge1xuICAgIHdpZHRoOiBuLFxuICAgIGhlaWdodDogcixcbiAgICAkOiBhXG4gIH07XG59XG5mdW5jdGlvbiBHdChlKSB7XG4gIHJldHVybiBIKGUpID8gZSA6IGUuY29udGV4dEVsZW1lbnQ7XG59XG5mdW5jdGlvbiBsZShlKSB7XG4gIGNvbnN0IHQgPSBHdChlKTtcbiAgaWYgKCFHKHQpKVxuICAgIHJldHVybiBlZSgxKTtcbiAgY29uc3QgbiA9IHQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIHtcbiAgICB3aWR0aDogcixcbiAgICBoZWlnaHQ6IGksXG4gICAgJDogb1xuICB9ID0gWXQodCk7XG4gIGxldCBzID0gKG8gPyBrZShuLndpZHRoKSA6IG4ud2lkdGgpIC8gciwgYSA9IChvID8ga2Uobi5oZWlnaHQpIDogbi5oZWlnaHQpIC8gaTtcbiAgcmV0dXJuICghcyB8fCAhTnVtYmVyLmlzRmluaXRlKHMpKSAmJiAocyA9IDEpLCAoIWEgfHwgIU51bWJlci5pc0Zpbml0ZShhKSkgJiYgKGEgPSAxKSwge1xuICAgIHg6IHMsXG4gICAgeTogYVxuICB9O1xufVxuY29uc3QgbnIgPSAvKiBAX19QVVJFX18gKi8gZWUoMCk7XG5mdW5jdGlvbiBLdChlKSB7XG4gIGNvbnN0IHQgPSBGKGUpO1xuICByZXR1cm4gIWF0KCkgfHwgIXQudmlzdWFsVmlld3BvcnQgPyBuciA6IHtcbiAgICB4OiB0LnZpc3VhbFZpZXdwb3J0Lm9mZnNldExlZnQsXG4gICAgeTogdC52aXN1YWxWaWV3cG9ydC5vZmZzZXRUb3BcbiAgfTtcbn1cbmZ1bmN0aW9uIHJyKGUsIHQsIG4pIHtcbiAgcmV0dXJuIHQgPT09IHZvaWQgMCAmJiAodCA9ICExKSwgIW4gfHwgdCAmJiBuICE9PSBGKGUpID8gITEgOiB0O1xufVxuZnVuY3Rpb24gd2UoZSwgdCwgbiwgcikge1xuICB0ID09PSB2b2lkIDAgJiYgKHQgPSAhMSksIG4gPT09IHZvaWQgMCAmJiAobiA9ICExKTtcbiAgY29uc3QgaSA9IGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIG8gPSBHdChlKTtcbiAgbGV0IHMgPSBlZSgxKTtcbiAgdCAmJiAociA/IEgocikgJiYgKHMgPSBsZShyKSkgOiBzID0gbGUoZSkpO1xuICBjb25zdCBhID0gcnIobywgbiwgcikgPyBLdChvKSA6IGVlKDApO1xuICBsZXQgYyA9IChpLmxlZnQgKyBhLngpIC8gcy54LCB1ID0gKGkudG9wICsgYS55KSAvIHMueSwgbCA9IGkud2lkdGggLyBzLngsIGYgPSBpLmhlaWdodCAvIHMueTtcbiAgaWYgKG8pIHtcbiAgICBjb25zdCBoID0gRihvKSwgZCA9IHIgJiYgSChyKSA/IEYocikgOiByO1xuICAgIGxldCBtID0gaCwgcCA9IHFlKG0pO1xuICAgIGZvciAoOyBwICYmIHIgJiYgZCAhPT0gbTsgKSB7XG4gICAgICBjb25zdCBnID0gbGUocCksIHYgPSBwLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBTID0geihwKSwgayA9IHYubGVmdCArIChwLmNsaWVudExlZnQgKyBwYXJzZUZsb2F0KFMucGFkZGluZ0xlZnQpKSAqIGcueCwgXyA9IHYudG9wICsgKHAuY2xpZW50VG9wICsgcGFyc2VGbG9hdChTLnBhZGRpbmdUb3ApKSAqIGcueTtcbiAgICAgIGMgKj0gZy54LCB1ICo9IGcueSwgbCAqPSBnLngsIGYgKj0gZy55LCBjICs9IGssIHUgKz0gXywgbSA9IEYocCksIHAgPSBxZShtKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIExlKHtcbiAgICB3aWR0aDogbCxcbiAgICBoZWlnaHQ6IGYsXG4gICAgeDogYyxcbiAgICB5OiB1XG4gIH0pO1xufVxuZnVuY3Rpb24gaXIoZSkge1xuICBsZXQge1xuICAgIGVsZW1lbnRzOiB0LFxuICAgIHJlY3Q6IG4sXG4gICAgb2Zmc2V0UGFyZW50OiByLFxuICAgIHN0cmF0ZWd5OiBpXG4gIH0gPSBlO1xuICBjb25zdCBvID0gaSA9PT0gXCJmaXhlZFwiLCBzID0gUShyKSwgYSA9IHQgPyBqZSh0LmZsb2F0aW5nKSA6ICExO1xuICBpZiAociA9PT0gcyB8fCBhICYmIG8pXG4gICAgcmV0dXJuIG47XG4gIGxldCBjID0ge1xuICAgIHNjcm9sbExlZnQ6IDAsXG4gICAgc2Nyb2xsVG9wOiAwXG4gIH0sIHUgPSBlZSgxKTtcbiAgY29uc3QgbCA9IGVlKDApLCBmID0gRyhyKTtcbiAgaWYgKChmIHx8ICFmICYmICFvKSAmJiAoKHZlKHIpICE9PSBcImJvZHlcIiB8fCBFZShzKSkgJiYgKGMgPSBXZShyKSksIEcocikpKSB7XG4gICAgY29uc3QgaCA9IHdlKHIpO1xuICAgIHUgPSBsZShyKSwgbC54ID0gaC54ICsgci5jbGllbnRMZWZ0LCBsLnkgPSBoLnkgKyByLmNsaWVudFRvcDtcbiAgfVxuICByZXR1cm4ge1xuICAgIHdpZHRoOiBuLndpZHRoICogdS54LFxuICAgIGhlaWdodDogbi5oZWlnaHQgKiB1LnksXG4gICAgeDogbi54ICogdS54IC0gYy5zY3JvbGxMZWZ0ICogdS54ICsgbC54LFxuICAgIHk6IG4ueSAqIHUueSAtIGMuc2Nyb2xsVG9wICogdS55ICsgbC55XG4gIH07XG59XG5mdW5jdGlvbiBvcihlKSB7XG4gIHJldHVybiBBcnJheS5mcm9tKGUuZ2V0Q2xpZW50UmVjdHMoKSk7XG59XG5mdW5jdGlvbiBYZShlLCB0KSB7XG4gIGNvbnN0IG4gPSBXZShlKS5zY3JvbGxMZWZ0O1xuICByZXR1cm4gdCA/IHQubGVmdCArIG4gOiB3ZShRKGUpKS5sZWZ0ICsgbjtcbn1cbmZ1bmN0aW9uIHNyKGUpIHtcbiAgY29uc3QgdCA9IFEoZSksIG4gPSBXZShlKSwgciA9IGUub3duZXJEb2N1bWVudC5ib2R5LCBpID0gdWUodC5zY3JvbGxXaWR0aCwgdC5jbGllbnRXaWR0aCwgci5zY3JvbGxXaWR0aCwgci5jbGllbnRXaWR0aCksIG8gPSB1ZSh0LnNjcm9sbEhlaWdodCwgdC5jbGllbnRIZWlnaHQsIHIuc2Nyb2xsSGVpZ2h0LCByLmNsaWVudEhlaWdodCk7XG4gIGxldCBzID0gLW4uc2Nyb2xsTGVmdCArIFhlKGUpO1xuICBjb25zdCBhID0gLW4uc2Nyb2xsVG9wO1xuICByZXR1cm4geihyKS5kaXJlY3Rpb24gPT09IFwicnRsXCIgJiYgKHMgKz0gdWUodC5jbGllbnRXaWR0aCwgci5jbGllbnRXaWR0aCkgLSBpKSwge1xuICAgIHdpZHRoOiBpLFxuICAgIGhlaWdodDogbyxcbiAgICB4OiBzLFxuICAgIHk6IGFcbiAgfTtcbn1cbmZ1bmN0aW9uIGFyKGUsIHQpIHtcbiAgY29uc3QgbiA9IEYoZSksIHIgPSBRKGUpLCBpID0gbi52aXN1YWxWaWV3cG9ydDtcbiAgbGV0IG8gPSByLmNsaWVudFdpZHRoLCBzID0gci5jbGllbnRIZWlnaHQsIGEgPSAwLCBjID0gMDtcbiAgaWYgKGkpIHtcbiAgICBvID0gaS53aWR0aCwgcyA9IGkuaGVpZ2h0O1xuICAgIGNvbnN0IHUgPSBhdCgpO1xuICAgICghdSB8fCB1ICYmIHQgPT09IFwiZml4ZWRcIikgJiYgKGEgPSBpLm9mZnNldExlZnQsIGMgPSBpLm9mZnNldFRvcCk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICB3aWR0aDogbyxcbiAgICBoZWlnaHQ6IHMsXG4gICAgeDogYSxcbiAgICB5OiBjXG4gIH07XG59XG5mdW5jdGlvbiBjcihlLCB0KSB7XG4gIGNvbnN0IG4gPSB3ZShlLCAhMCwgdCA9PT0gXCJmaXhlZFwiKSwgciA9IG4udG9wICsgZS5jbGllbnRUb3AsIGkgPSBuLmxlZnQgKyBlLmNsaWVudExlZnQsIG8gPSBHKGUpID8gbGUoZSkgOiBlZSgxKSwgcyA9IGUuY2xpZW50V2lkdGggKiBvLngsIGEgPSBlLmNsaWVudEhlaWdodCAqIG8ueSwgYyA9IGkgKiBvLngsIHUgPSByICogby55O1xuICByZXR1cm4ge1xuICAgIHdpZHRoOiBzLFxuICAgIGhlaWdodDogYSxcbiAgICB4OiBjLFxuICAgIHk6IHVcbiAgfTtcbn1cbmZ1bmN0aW9uIFN0KGUsIHQsIG4pIHtcbiAgbGV0IHI7XG4gIGlmICh0ID09PSBcInZpZXdwb3J0XCIpXG4gICAgciA9IGFyKGUsIG4pO1xuICBlbHNlIGlmICh0ID09PSBcImRvY3VtZW50XCIpXG4gICAgciA9IHNyKFEoZSkpO1xuICBlbHNlIGlmIChIKHQpKVxuICAgIHIgPSBjcih0LCBuKTtcbiAgZWxzZSB7XG4gICAgY29uc3QgaSA9IEt0KGUpO1xuICAgIHIgPSB7XG4gICAgICAuLi50LFxuICAgICAgeDogdC54IC0gaS54LFxuICAgICAgeTogdC55IC0gaS55XG4gICAgfTtcbiAgfVxuICByZXR1cm4gTGUocik7XG59XG5mdW5jdGlvbiBRdChlLCB0KSB7XG4gIGNvbnN0IG4gPSB0ZShlKTtcbiAgcmV0dXJuIG4gPT09IHQgfHwgIUgobikgfHwgZGUobikgPyAhMSA6IHoobikucG9zaXRpb24gPT09IFwiZml4ZWRcIiB8fCBRdChuLCB0KTtcbn1cbmZ1bmN0aW9uIHVyKGUsIHQpIHtcbiAgY29uc3QgbiA9IHQuZ2V0KGUpO1xuICBpZiAobilcbiAgICByZXR1cm4gbjtcbiAgbGV0IHIgPSBKZShlLCBbXSwgITEpLmZpbHRlcigoYSkgPT4gSChhKSAmJiB2ZShhKSAhPT0gXCJib2R5XCIpLCBpID0gbnVsbDtcbiAgY29uc3QgbyA9IHooZSkucG9zaXRpb24gPT09IFwiZml4ZWRcIjtcbiAgbGV0IHMgPSBvID8gdGUoZSkgOiBlO1xuICBmb3IgKDsgSChzKSAmJiAhZGUocyk7ICkge1xuICAgIGNvbnN0IGEgPSB6KHMpLCBjID0gc3Qocyk7XG4gICAgIWMgJiYgYS5wb3NpdGlvbiA9PT0gXCJmaXhlZFwiICYmIChpID0gbnVsbCksIChvID8gIWMgJiYgIWkgOiAhYyAmJiBhLnBvc2l0aW9uID09PSBcInN0YXRpY1wiICYmICEhaSAmJiBbXCJhYnNvbHV0ZVwiLCBcImZpeGVkXCJdLmluY2x1ZGVzKGkucG9zaXRpb24pIHx8IEVlKHMpICYmICFjICYmIFF0KGUsIHMpKSA/IHIgPSByLmZpbHRlcigobCkgPT4gbCAhPT0gcykgOiBpID0gYSwgcyA9IHRlKHMpO1xuICB9XG4gIHJldHVybiB0LnNldChlLCByKSwgcjtcbn1cbmZ1bmN0aW9uIGxyKGUpIHtcbiAgbGV0IHtcbiAgICBlbGVtZW50OiB0LFxuICAgIGJvdW5kYXJ5OiBuLFxuICAgIHJvb3RCb3VuZGFyeTogcixcbiAgICBzdHJhdGVneTogaVxuICB9ID0gZTtcbiAgY29uc3QgcyA9IFsuLi5uID09PSBcImNsaXBwaW5nQW5jZXN0b3JzXCIgPyBqZSh0KSA/IFtdIDogdXIodCwgdGhpcy5fYykgOiBbXS5jb25jYXQobiksIHJdLCBhID0gc1swXSwgYyA9IHMucmVkdWNlKCh1LCBsKSA9PiB7XG4gICAgY29uc3QgZiA9IFN0KHQsIGwsIGkpO1xuICAgIHJldHVybiB1LnRvcCA9IHVlKGYudG9wLCB1LnRvcCksIHUucmlnaHQgPSBLZShmLnJpZ2h0LCB1LnJpZ2h0KSwgdS5ib3R0b20gPSBLZShmLmJvdHRvbSwgdS5ib3R0b20pLCB1LmxlZnQgPSB1ZShmLmxlZnQsIHUubGVmdCksIHU7XG4gIH0sIFN0KHQsIGEsIGkpKTtcbiAgcmV0dXJuIHtcbiAgICB3aWR0aDogYy5yaWdodCAtIGMubGVmdCxcbiAgICBoZWlnaHQ6IGMuYm90dG9tIC0gYy50b3AsXG4gICAgeDogYy5sZWZ0LFxuICAgIHk6IGMudG9wXG4gIH07XG59XG5mdW5jdGlvbiBmcihlKSB7XG4gIGNvbnN0IHtcbiAgICB3aWR0aDogdCxcbiAgICBoZWlnaHQ6IG5cbiAgfSA9IFl0KGUpO1xuICByZXR1cm4ge1xuICAgIHdpZHRoOiB0LFxuICAgIGhlaWdodDogblxuICB9O1xufVxuZnVuY3Rpb24gZHIoZSwgdCwgbikge1xuICBjb25zdCByID0gRyh0KSwgaSA9IFEodCksIG8gPSBuID09PSBcImZpeGVkXCIsIHMgPSB3ZShlLCAhMCwgbywgdCk7XG4gIGxldCBhID0ge1xuICAgIHNjcm9sbExlZnQ6IDAsXG4gICAgc2Nyb2xsVG9wOiAwXG4gIH07XG4gIGNvbnN0IGMgPSBlZSgwKTtcbiAgaWYgKHIgfHwgIXIgJiYgIW8pXG4gICAgaWYgKCh2ZSh0KSAhPT0gXCJib2R5XCIgfHwgRWUoaSkpICYmIChhID0gV2UodCkpLCByKSB7XG4gICAgICBjb25zdCBkID0gd2UodCwgITAsIG8sIHQpO1xuICAgICAgYy54ID0gZC54ICsgdC5jbGllbnRMZWZ0LCBjLnkgPSBkLnkgKyB0LmNsaWVudFRvcDtcbiAgICB9IGVsc2UgaSAmJiAoYy54ID0gWGUoaSkpO1xuICBsZXQgdSA9IDAsIGwgPSAwO1xuICBpZiAoaSAmJiAhciAmJiAhbykge1xuICAgIGNvbnN0IGQgPSBpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGwgPSBkLnRvcCArIGEuc2Nyb2xsVG9wLCB1ID0gZC5sZWZ0ICsgYS5zY3JvbGxMZWZ0IC0gLy8gUlRMIDxib2R5PiBzY3JvbGxiYXIuXG4gICAgWGUoaSwgZCk7XG4gIH1cbiAgY29uc3QgZiA9IHMubGVmdCArIGEuc2Nyb2xsTGVmdCAtIGMueCAtIHUsIGggPSBzLnRvcCArIGEuc2Nyb2xsVG9wIC0gYy55IC0gbDtcbiAgcmV0dXJuIHtcbiAgICB4OiBmLFxuICAgIHk6IGgsXG4gICAgd2lkdGg6IHMud2lkdGgsXG4gICAgaGVpZ2h0OiBzLmhlaWdodFxuICB9O1xufVxuZnVuY3Rpb24gSGUoZSkge1xuICByZXR1cm4geihlKS5wb3NpdGlvbiA9PT0gXCJzdGF0aWNcIjtcbn1cbmZ1bmN0aW9uIHh0KGUsIHQpIHtcbiAgaWYgKCFHKGUpIHx8IHooZSkucG9zaXRpb24gPT09IFwiZml4ZWRcIilcbiAgICByZXR1cm4gbnVsbDtcbiAgaWYgKHQpXG4gICAgcmV0dXJuIHQoZSk7XG4gIGxldCBuID0gZS5vZmZzZXRQYXJlbnQ7XG4gIHJldHVybiBRKGUpID09PSBuICYmIChuID0gbi5vd25lckRvY3VtZW50LmJvZHkpLCBuO1xufVxuZnVuY3Rpb24gSnQoZSwgdCkge1xuICBjb25zdCBuID0gRihlKTtcbiAgaWYgKGplKGUpKVxuICAgIHJldHVybiBuO1xuICBpZiAoIUcoZSkpIHtcbiAgICBsZXQgaSA9IHRlKGUpO1xuICAgIGZvciAoOyBpICYmICFkZShpKTsgKSB7XG4gICAgICBpZiAoSChpKSAmJiAhSGUoaSkpXG4gICAgICAgIHJldHVybiBpO1xuICAgICAgaSA9IHRlKGkpO1xuICAgIH1cbiAgICByZXR1cm4gbjtcbiAgfVxuICBsZXQgciA9IHh0KGUsIHQpO1xuICBmb3IgKDsgciAmJiBlcihyKSAmJiBIZShyKTsgKVxuICAgIHIgPSB4dChyLCB0KTtcbiAgcmV0dXJuIHIgJiYgZGUocikgJiYgSGUocikgJiYgIXN0KHIpID8gbiA6IHIgfHwgdHIoZSkgfHwgbjtcbn1cbmNvbnN0IHByID0gYXN5bmMgZnVuY3Rpb24oZSkge1xuICBjb25zdCB0ID0gdGhpcy5nZXRPZmZzZXRQYXJlbnQgfHwgSnQsIG4gPSB0aGlzLmdldERpbWVuc2lvbnMsIHIgPSBhd2FpdCBuKGUuZmxvYXRpbmcpO1xuICByZXR1cm4ge1xuICAgIHJlZmVyZW5jZTogZHIoZS5yZWZlcmVuY2UsIGF3YWl0IHQoZS5mbG9hdGluZyksIGUuc3RyYXRlZ3kpLFxuICAgIGZsb2F0aW5nOiB7XG4gICAgICB4OiAwLFxuICAgICAgeTogMCxcbiAgICAgIHdpZHRoOiByLndpZHRoLFxuICAgICAgaGVpZ2h0OiByLmhlaWdodFxuICAgIH1cbiAgfTtcbn07XG5mdW5jdGlvbiBocihlKSB7XG4gIHJldHVybiB6KGUpLmRpcmVjdGlvbiA9PT0gXCJydGxcIjtcbn1cbmNvbnN0IHZyID0ge1xuICBjb252ZXJ0T2Zmc2V0UGFyZW50UmVsYXRpdmVSZWN0VG9WaWV3cG9ydFJlbGF0aXZlUmVjdDogaXIsXG4gIGdldERvY3VtZW50RWxlbWVudDogUSxcbiAgZ2V0Q2xpcHBpbmdSZWN0OiBscixcbiAgZ2V0T2Zmc2V0UGFyZW50OiBKdCxcbiAgZ2V0RWxlbWVudFJlY3RzOiBwcixcbiAgZ2V0Q2xpZW50UmVjdHM6IG9yLFxuICBnZXREaW1lbnNpb25zOiBmcixcbiAgZ2V0U2NhbGU6IGxlLFxuICBpc0VsZW1lbnQ6IEgsXG4gIGlzUlRMOiBoclxufSwgbXIgPSBYbiwgZ3IgPSBabiwgYnIgPSBKbiwgeXIgPSAoZSwgdCwgbikgPT4ge1xuICBjb25zdCByID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSwgaSA9IHtcbiAgICBwbGF0Zm9ybTogdnIsXG4gICAgLi4ublxuICB9LCBvID0ge1xuICAgIC4uLmkucGxhdGZvcm0sXG4gICAgX2M6IHJcbiAgfTtcbiAgcmV0dXJuIFFuKGUsIHQsIHtcbiAgICAuLi5pLFxuICAgIHBsYXRmb3JtOiBvXG4gIH0pO1xufTtcbnZhciB3ciA9IHR5cGVvZiBnbG9iYWxUaGlzIDwgXCJ1XCIgPyBnbG9iYWxUaGlzIDogdHlwZW9mIHdpbmRvdyA8IFwidVwiID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCA8IFwidVwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgPCBcInVcIiA/IHNlbGYgOiB7fTtcbmZ1bmN0aW9uIFNyKGUpIHtcbiAgcmV0dXJuIGUgJiYgZS5fX2VzTW9kdWxlICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCBcImRlZmF1bHRcIikgPyBlLmRlZmF1bHQgOiBlO1xufVxudmFyIHF0ID0geyBleHBvcnRzOiB7fSB9O1xuKGZ1bmN0aW9uKGUpIHtcbiAgKGZ1bmN0aW9uKHQsIG4pIHtcbiAgICBlLmV4cG9ydHMgPyBlLmV4cG9ydHMgPSBuKCkgOiB0LmxvZyA9IG4oKTtcbiAgfSkod3IsIGZ1bmN0aW9uKCkge1xuICAgIHZhciB0ID0gZnVuY3Rpb24oKSB7XG4gICAgfSwgbiA9IFwidW5kZWZpbmVkXCIsIHIgPSB0eXBlb2Ygd2luZG93ICE9PSBuICYmIHR5cGVvZiB3aW5kb3cubmF2aWdhdG9yICE9PSBuICYmIC9UcmlkZW50XFwvfE1TSUUgLy50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KSwgaSA9IFtcbiAgICAgIFwidHJhY2VcIixcbiAgICAgIFwiZGVidWdcIixcbiAgICAgIFwiaW5mb1wiLFxuICAgICAgXCJ3YXJuXCIsXG4gICAgICBcImVycm9yXCJcbiAgICBdLCBvID0ge30sIHMgPSBudWxsO1xuICAgIGZ1bmN0aW9uIGEocCwgZykge1xuICAgICAgdmFyIHYgPSBwW2ddO1xuICAgICAgaWYgKHR5cGVvZiB2LmJpbmQgPT0gXCJmdW5jdGlvblwiKVxuICAgICAgICByZXR1cm4gdi5iaW5kKHApO1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwodiwgcCk7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuYXBwbHkodiwgW3AsIGFyZ3VtZW50c10pO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBjKCkge1xuICAgICAgY29uc29sZS5sb2cgJiYgKGNvbnNvbGUubG9nLmFwcGx5ID8gY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKSA6IEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5hcHBseShjb25zb2xlLmxvZywgW2NvbnNvbGUsIGFyZ3VtZW50c10pKSwgY29uc29sZS50cmFjZSAmJiBjb25zb2xlLnRyYWNlKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHUocCkge1xuICAgICAgcmV0dXJuIHAgPT09IFwiZGVidWdcIiAmJiAocCA9IFwibG9nXCIpLCB0eXBlb2YgY29uc29sZSA9PT0gbiA/ICExIDogcCA9PT0gXCJ0cmFjZVwiICYmIHIgPyBjIDogY29uc29sZVtwXSAhPT0gdm9pZCAwID8gYShjb25zb2xlLCBwKSA6IGNvbnNvbGUubG9nICE9PSB2b2lkIDAgPyBhKGNvbnNvbGUsIFwibG9nXCIpIDogdDtcbiAgICB9XG4gICAgZnVuY3Rpb24gbCgpIHtcbiAgICAgIGZvciAodmFyIHAgPSB0aGlzLmdldExldmVsKCksIGcgPSAwOyBnIDwgaS5sZW5ndGg7IGcrKykge1xuICAgICAgICB2YXIgdiA9IGlbZ107XG4gICAgICAgIHRoaXNbdl0gPSBnIDwgcCA/IHQgOiB0aGlzLm1ldGhvZEZhY3RvcnkodiwgcCwgdGhpcy5uYW1lKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmxvZyA9IHRoaXMuZGVidWcsIHR5cGVvZiBjb25zb2xlID09PSBuICYmIHAgPCB0aGlzLmxldmVscy5TSUxFTlQpXG4gICAgICAgIHJldHVybiBcIk5vIGNvbnNvbGUgYXZhaWxhYmxlIGZvciBsb2dnaW5nXCI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGYocCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICB0eXBlb2YgY29uc29sZSAhPT0gbiAmJiAobC5jYWxsKHRoaXMpLCB0aGlzW3BdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaChwLCBnLCB2KSB7XG4gICAgICByZXR1cm4gdShwKSB8fCBmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGQocCwgZykge1xuICAgICAgdmFyIHYgPSB0aGlzLCBTLCBrLCBfLCBFID0gXCJsb2dsZXZlbFwiO1xuICAgICAgdHlwZW9mIHAgPT0gXCJzdHJpbmdcIiA/IEUgKz0gXCI6XCIgKyBwIDogdHlwZW9mIHAgPT0gXCJzeW1ib2xcIiAmJiAoRSA9IHZvaWQgMCk7XG4gICAgICBmdW5jdGlvbiByZSh3KSB7XG4gICAgICAgIHZhciB4ID0gKGlbd10gfHwgXCJzaWxlbnRcIikudG9VcHBlckNhc2UoKTtcbiAgICAgICAgaWYgKCEodHlwZW9mIHdpbmRvdyA9PT0gbiB8fCAhRSkpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZVtFXSA9IHg7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB3aW5kb3cuZG9jdW1lbnQuY29va2llID0gZW5jb2RlVVJJQ29tcG9uZW50KEUpICsgXCI9XCIgKyB4ICsgXCI7XCI7XG4gICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBDKCkge1xuICAgICAgICB2YXIgdztcbiAgICAgICAgaWYgKCEodHlwZW9mIHdpbmRvdyA9PT0gbiB8fCAhRSkpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdyA9IHdpbmRvdy5sb2NhbFN0b3JhZ2VbRV07XG4gICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0eXBlb2YgdyA9PT0gbilcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHZhciB4ID0gd2luZG93LmRvY3VtZW50LmNvb2tpZSwgaWUgPSBlbmNvZGVVUklDb21wb25lbnQoRSksIHEgPSB4LmluZGV4T2YoaWUgKyBcIj1cIik7XG4gICAgICAgICAgICAgIHEgIT09IC0xICYmICh3ID0gL14oW147XSspLy5leGVjKFxuICAgICAgICAgICAgICAgIHguc2xpY2UocSArIGllLmxlbmd0aCArIDEpXG4gICAgICAgICAgICAgIClbMV0pO1xuICAgICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHYubGV2ZWxzW3ddID09PSB2b2lkIDAgJiYgKHcgPSB2b2lkIDApLCB3O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBUKCkge1xuICAgICAgICBpZiAoISh0eXBlb2Ygd2luZG93ID09PSBuIHx8ICFFKSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oRSk7XG4gICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB3aW5kb3cuZG9jdW1lbnQuY29va2llID0gZW5jb2RlVVJJQ29tcG9uZW50KEUpICsgXCI9OyBleHBpcmVzPVRodSwgMDEgSmFuIDE5NzAgMDA6MDA6MDAgVVRDXCI7XG4gICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBJKHcpIHtcbiAgICAgICAgdmFyIHggPSB3O1xuICAgICAgICBpZiAodHlwZW9mIHggPT0gXCJzdHJpbmdcIiAmJiB2LmxldmVsc1t4LnRvVXBwZXJDYXNlKCldICE9PSB2b2lkIDAgJiYgKHggPSB2LmxldmVsc1t4LnRvVXBwZXJDYXNlKCldKSwgdHlwZW9mIHggPT0gXCJudW1iZXJcIiAmJiB4ID49IDAgJiYgeCA8PSB2LmxldmVscy5TSUxFTlQpXG4gICAgICAgICAgcmV0dXJuIHg7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJsb2cuc2V0TGV2ZWwoKSBjYWxsZWQgd2l0aCBpbnZhbGlkIGxldmVsOiBcIiArIHcpO1xuICAgICAgfVxuICAgICAgdi5uYW1lID0gcCwgdi5sZXZlbHMgPSB7XG4gICAgICAgIFRSQUNFOiAwLFxuICAgICAgICBERUJVRzogMSxcbiAgICAgICAgSU5GTzogMixcbiAgICAgICAgV0FSTjogMyxcbiAgICAgICAgRVJST1I6IDQsXG4gICAgICAgIFNJTEVOVDogNVxuICAgICAgfSwgdi5tZXRob2RGYWN0b3J5ID0gZyB8fCBoLCB2LmdldExldmVsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBfID8/IGsgPz8gUztcbiAgICAgIH0sIHYuc2V0TGV2ZWwgPSBmdW5jdGlvbih3LCB4KSB7XG4gICAgICAgIHJldHVybiBfID0gSSh3KSwgeCAhPT0gITEgJiYgcmUoXyksIGwuY2FsbCh2KTtcbiAgICAgIH0sIHYuc2V0RGVmYXVsdExldmVsID0gZnVuY3Rpb24odykge1xuICAgICAgICBrID0gSSh3KSwgQygpIHx8IHYuc2V0TGV2ZWwodywgITEpO1xuICAgICAgfSwgdi5yZXNldExldmVsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIF8gPSBudWxsLCBUKCksIGwuY2FsbCh2KTtcbiAgICAgIH0sIHYuZW5hYmxlQWxsID0gZnVuY3Rpb24odykge1xuICAgICAgICB2LnNldExldmVsKHYubGV2ZWxzLlRSQUNFLCB3KTtcbiAgICAgIH0sIHYuZGlzYWJsZUFsbCA9IGZ1bmN0aW9uKHcpIHtcbiAgICAgICAgdi5zZXRMZXZlbCh2LmxldmVscy5TSUxFTlQsIHcpO1xuICAgICAgfSwgdi5yZWJ1aWxkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChzICE9PSB2ICYmIChTID0gSShzLmdldExldmVsKCkpKSwgbC5jYWxsKHYpLCBzID09PSB2KVxuICAgICAgICAgIGZvciAodmFyIHcgaW4gbylcbiAgICAgICAgICAgIG9bd10ucmVidWlsZCgpO1xuICAgICAgfSwgUyA9IEkoXG4gICAgICAgIHMgPyBzLmdldExldmVsKCkgOiBcIldBUk5cIlxuICAgICAgKTtcbiAgICAgIHZhciBOID0gQygpO1xuICAgICAgTiAhPSBudWxsICYmIChfID0gSShOKSksIGwuY2FsbCh2KTtcbiAgICB9XG4gICAgcyA9IG5ldyBkKCksIHMuZ2V0TG9nZ2VyID0gZnVuY3Rpb24oZykge1xuICAgICAgaWYgKHR5cGVvZiBnICE9IFwic3ltYm9sXCIgJiYgdHlwZW9mIGcgIT0gXCJzdHJpbmdcIiB8fCBnID09PSBcIlwiKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiWW91IG11c3Qgc3VwcGx5IGEgbmFtZSB3aGVuIGNyZWF0aW5nIGEgbG9nZ2VyLlwiKTtcbiAgICAgIHZhciB2ID0gb1tnXTtcbiAgICAgIHJldHVybiB2IHx8ICh2ID0gb1tnXSA9IG5ldyBkKFxuICAgICAgICBnLFxuICAgICAgICBzLm1ldGhvZEZhY3RvcnlcbiAgICAgICkpLCB2O1xuICAgIH07XG4gICAgdmFyIG0gPSB0eXBlb2Ygd2luZG93ICE9PSBuID8gd2luZG93LmxvZyA6IHZvaWQgMDtcbiAgICByZXR1cm4gcy5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHdpbmRvdyAhPT0gbiAmJiB3aW5kb3cubG9nID09PSBzICYmICh3aW5kb3cubG9nID0gbSksIHM7XG4gICAgfSwgcy5nZXRMb2dnZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbztcbiAgICB9LCBzLmRlZmF1bHQgPSBzLCBzO1xuICB9KTtcbn0pKHF0KTtcbnZhciB4ciA9IHF0LmV4cG9ydHM7XG5jb25zdCBFciA9IC8qIEBfX1BVUkVfXyAqLyBTcih4cik7XG52YXIgWmUgPSBmdW5jdGlvbihlLCB0KSB7XG4gIHJldHVybiBaZSA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uKG4sIHIpIHtcbiAgICBuLl9fcHJvdG9fXyA9IHI7XG4gIH0gfHwgZnVuY3Rpb24obiwgcikge1xuICAgIGZvciAodmFyIGkgaW4gcikgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHIsIGkpICYmIChuW2ldID0gcltpXSk7XG4gIH0sIFplKGUsIHQpO1xufTtcbmZ1bmN0aW9uIEooZSwgdCkge1xuICBpZiAodHlwZW9mIHQgIT0gXCJmdW5jdGlvblwiICYmIHQgIT09IG51bGwpXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcodCkgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICBaZShlLCB0KTtcbiAgZnVuY3Rpb24gbigpIHtcbiAgICB0aGlzLmNvbnN0cnVjdG9yID0gZTtcbiAgfVxuICBlLnByb3RvdHlwZSA9IHQgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKHQpIDogKG4ucHJvdG90eXBlID0gdC5wcm90b3R5cGUsIG5ldyBuKCkpO1xufVxuZnVuY3Rpb24gVHIoZSwgdCwgbiwgcikge1xuICBmdW5jdGlvbiBpKG8pIHtcbiAgICByZXR1cm4gbyBpbnN0YW5jZW9mIG4gPyBvIDogbmV3IG4oZnVuY3Rpb24ocykge1xuICAgICAgcyhvKTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gbmV3IChuIHx8IChuID0gUHJvbWlzZSkpKGZ1bmN0aW9uKG8sIHMpIHtcbiAgICBmdW5jdGlvbiBhKGwpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHUoci5uZXh0KGwpKTtcbiAgICAgIH0gY2F0Y2ggKGYpIHtcbiAgICAgICAgcyhmKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gYyhsKSB7XG4gICAgICB0cnkge1xuICAgICAgICB1KHIudGhyb3cobCkpO1xuICAgICAgfSBjYXRjaCAoZikge1xuICAgICAgICBzKGYpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiB1KGwpIHtcbiAgICAgIGwuZG9uZSA/IG8obC52YWx1ZSkgOiBpKGwudmFsdWUpLnRoZW4oYSwgYyk7XG4gICAgfVxuICAgIHUoKHIgPSByLmFwcGx5KGUsIHQgfHwgW10pKS5uZXh0KCkpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIFh0KGUsIHQpIHtcbiAgdmFyIG4gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHtcbiAgICBpZiAob1swXSAmIDEpIHRocm93IG9bMV07XG4gICAgcmV0dXJuIG9bMV07XG4gIH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIHIsIGksIG8sIHMgPSBPYmplY3QuY3JlYXRlKCh0eXBlb2YgSXRlcmF0b3IgPT0gXCJmdW5jdGlvblwiID8gSXRlcmF0b3IgOiBPYmplY3QpLnByb3RvdHlwZSk7XG4gIHJldHVybiBzLm5leHQgPSBhKDApLCBzLnRocm93ID0gYSgxKSwgcy5yZXR1cm4gPSBhKDIpLCB0eXBlb2YgU3ltYm9sID09IFwiZnVuY3Rpb25cIiAmJiAoc1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0pLCBzO1xuICBmdW5jdGlvbiBhKHUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obCkge1xuICAgICAgcmV0dXJuIGMoW3UsIGxdKTtcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIGModSkge1xuICAgIGlmIChyKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICBmb3IgKDsgcyAmJiAocyA9IDAsIHVbMF0gJiYgKG4gPSAwKSksIG47ICkgdHJ5IHtcbiAgICAgIGlmIChyID0gMSwgaSAmJiAobyA9IHVbMF0gJiAyID8gaS5yZXR1cm4gOiB1WzBdID8gaS50aHJvdyB8fCAoKG8gPSBpLnJldHVybikgJiYgby5jYWxsKGkpLCAwKSA6IGkubmV4dCkgJiYgIShvID0gby5jYWxsKGksIHVbMV0pKS5kb25lKSByZXR1cm4gbztcbiAgICAgIHN3aXRjaCAoaSA9IDAsIG8gJiYgKHUgPSBbdVswXSAmIDIsIG8udmFsdWVdKSwgdVswXSkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBvID0gdTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHJldHVybiBuLmxhYmVsKyssIHsgdmFsdWU6IHVbMV0sIGRvbmU6ICExIH07XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICBuLmxhYmVsKyssIGkgPSB1WzFdLCB1ID0gWzBdO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgdSA9IG4ub3BzLnBvcCgpLCBuLnRyeXMucG9wKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgaWYgKG8gPSBuLnRyeXMsICEobyA9IG8ubGVuZ3RoID4gMCAmJiBvW28ubGVuZ3RoIC0gMV0pICYmICh1WzBdID09PSA2IHx8IHVbMF0gPT09IDIpKSB7XG4gICAgICAgICAgICBuID0gMDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodVswXSA9PT0gMyAmJiAoIW8gfHwgdVsxXSA+IG9bMF0gJiYgdVsxXSA8IG9bM10pKSB7XG4gICAgICAgICAgICBuLmxhYmVsID0gdVsxXTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodVswXSA9PT0gNiAmJiBuLmxhYmVsIDwgb1sxXSkge1xuICAgICAgICAgICAgbi5sYWJlbCA9IG9bMV0sIG8gPSB1O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChvICYmIG4ubGFiZWwgPCBvWzJdKSB7XG4gICAgICAgICAgICBuLmxhYmVsID0gb1syXSwgbi5vcHMucHVzaCh1KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBvWzJdICYmIG4ub3BzLnBvcCgpLCBuLnRyeXMucG9wKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB1ID0gdC5jYWxsKGUsIG4pO1xuICAgIH0gY2F0Y2ggKGwpIHtcbiAgICAgIHUgPSBbNiwgbF0sIGkgPSAwO1xuICAgIH0gZmluYWxseSB7XG4gICAgICByID0gbyA9IDA7XG4gICAgfVxuICAgIGlmICh1WzBdICYgNSkgdGhyb3cgdVsxXTtcbiAgICByZXR1cm4geyB2YWx1ZTogdVswXSA/IHVbMV0gOiB2b2lkIDAsIGRvbmU6ICEwIH07XG4gIH1cbn1cbmZ1bmN0aW9uIHBlKGUpIHtcbiAgdmFyIHQgPSB0eXBlb2YgU3ltYm9sID09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG4gPSB0ICYmIGVbdF0sIHIgPSAwO1xuICBpZiAobikgcmV0dXJuIG4uY2FsbChlKTtcbiAgaWYgKGUgJiYgdHlwZW9mIGUubGVuZ3RoID09IFwibnVtYmVyXCIpIHJldHVybiB7XG4gICAgbmV4dDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZSAmJiByID49IGUubGVuZ3RoICYmIChlID0gdm9pZCAwKSwgeyB2YWx1ZTogZSAmJiBlW3IrK10sIGRvbmU6ICFlIH07XG4gICAgfVxuICB9O1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKHQgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XG59XG5mdW5jdGlvbiBoZShlLCB0KSB7XG4gIHZhciBuID0gdHlwZW9mIFN5bWJvbCA9PSBcImZ1bmN0aW9uXCIgJiYgZVtTeW1ib2wuaXRlcmF0b3JdO1xuICBpZiAoIW4pIHJldHVybiBlO1xuICB2YXIgciA9IG4uY2FsbChlKSwgaSwgbyA9IFtdLCBzO1xuICB0cnkge1xuICAgIGZvciAoOyAodCA9PT0gdm9pZCAwIHx8IHQtLSA+IDApICYmICEoaSA9IHIubmV4dCgpKS5kb25lOyApIG8ucHVzaChpLnZhbHVlKTtcbiAgfSBjYXRjaCAoYSkge1xuICAgIHMgPSB7IGVycm9yOiBhIH07XG4gIH0gZmluYWxseSB7XG4gICAgdHJ5IHtcbiAgICAgIGkgJiYgIWkuZG9uZSAmJiAobiA9IHIucmV0dXJuKSAmJiBuLmNhbGwocik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmIChzKSB0aHJvdyBzLmVycm9yO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbztcbn1cbmZ1bmN0aW9uIFNlKGUsIHQsIG4pIHtcbiAgaWYgKG4gfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgciA9IDAsIGkgPSB0Lmxlbmd0aCwgbzsgciA8IGk7IHIrKylcbiAgICAobyB8fCAhKHIgaW4gdCkpICYmIChvIHx8IChvID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodCwgMCwgcikpLCBvW3JdID0gdFtyXSk7XG4gIHJldHVybiBlLmNvbmNhdChvIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQpKTtcbn1cbmZ1bmN0aW9uIGZlKGUpIHtcbiAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBmZSA/ICh0aGlzLnYgPSBlLCB0aGlzKSA6IG5ldyBmZShlKTtcbn1cbmZ1bmN0aW9uIENyKGUsIHQsIG4pIHtcbiAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcbiAgdmFyIHIgPSBuLmFwcGx5KGUsIHQgfHwgW10pLCBpLCBvID0gW107XG4gIHJldHVybiBpID0gT2JqZWN0LmNyZWF0ZSgodHlwZW9mIEFzeW5jSXRlcmF0b3IgPT0gXCJmdW5jdGlvblwiID8gQXN5bmNJdGVyYXRvciA6IE9iamVjdCkucHJvdG90eXBlKSwgYShcIm5leHRcIiksIGEoXCJ0aHJvd1wiKSwgYShcInJldHVyblwiLCBzKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSwgaTtcbiAgZnVuY3Rpb24gcyhkKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG0pIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobSkudGhlbihkLCBmKTtcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIGEoZCwgbSkge1xuICAgIHJbZF0gJiYgKGlbZF0gPSBmdW5jdGlvbihwKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oZywgdikge1xuICAgICAgICBvLnB1c2goW2QsIHAsIGcsIHZdKSA+IDEgfHwgYyhkLCBwKTtcbiAgICAgIH0pO1xuICAgIH0sIG0gJiYgKGlbZF0gPSBtKGlbZF0pKSk7XG4gIH1cbiAgZnVuY3Rpb24gYyhkLCBtKSB7XG4gICAgdHJ5IHtcbiAgICAgIHUocltkXShtKSk7XG4gICAgfSBjYXRjaCAocCkge1xuICAgICAgaChvWzBdWzNdLCBwKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gdShkKSB7XG4gICAgZC52YWx1ZSBpbnN0YW5jZW9mIGZlID8gUHJvbWlzZS5yZXNvbHZlKGQudmFsdWUudikudGhlbihsLCBmKSA6IGgob1swXVsyXSwgZCk7XG4gIH1cbiAgZnVuY3Rpb24gbChkKSB7XG4gICAgYyhcIm5leHRcIiwgZCk7XG4gIH1cbiAgZnVuY3Rpb24gZihkKSB7XG4gICAgYyhcInRocm93XCIsIGQpO1xuICB9XG4gIGZ1bmN0aW9uIGgoZCwgbSkge1xuICAgIGQobSksIG8uc2hpZnQoKSwgby5sZW5ndGggJiYgYyhvWzBdWzBdLCBvWzBdWzFdKTtcbiAgfVxufVxuZnVuY3Rpb24gUHIoZSkge1xuICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xuICB2YXIgdCA9IGVbU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBuO1xuICByZXR1cm4gdCA/IHQuY2FsbChlKSA6IChlID0gdHlwZW9mIHBlID09IFwiZnVuY3Rpb25cIiA/IHBlKGUpIDogZVtTeW1ib2wuaXRlcmF0b3JdKCksIG4gPSB7fSwgcihcIm5leHRcIiksIHIoXCJ0aHJvd1wiKSwgcihcInJldHVyblwiKSwgbltTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSwgbik7XG4gIGZ1bmN0aW9uIHIobykge1xuICAgIG5bb10gPSBlW29dICYmIGZ1bmN0aW9uKHMpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihhLCBjKSB7XG4gICAgICAgIHMgPSBlW29dKHMpLCBpKGEsIGMsIHMuZG9uZSwgcy52YWx1ZSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIGkobywgcywgYSwgYykge1xuICAgIFByb21pc2UucmVzb2x2ZShjKS50aGVuKGZ1bmN0aW9uKHUpIHtcbiAgICAgIG8oeyB2YWx1ZTogdSwgZG9uZTogYSB9KTtcbiAgICB9LCBzKTtcbiAgfVxufVxuZnVuY3Rpb24gUChlKSB7XG4gIHJldHVybiB0eXBlb2YgZSA9PSBcImZ1bmN0aW9uXCI7XG59XG5mdW5jdGlvbiBjdChlKSB7XG4gIHZhciB0ID0gZnVuY3Rpb24ocikge1xuICAgIEVycm9yLmNhbGwociksIHIuc3RhY2sgPSBuZXcgRXJyb3IoKS5zdGFjaztcbiAgfSwgbiA9IGUodCk7XG4gIHJldHVybiBuLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKSwgbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBuLCBuO1xufVxudmFyIHplID0gY3QoZnVuY3Rpb24oZSkge1xuICByZXR1cm4gZnVuY3Rpb24obikge1xuICAgIGUodGhpcyksIHRoaXMubWVzc2FnZSA9IG4gPyBuLmxlbmd0aCArIGAgZXJyb3JzIG9jY3VycmVkIGR1cmluZyB1bnN1YnNjcmlwdGlvbjpcbmAgKyBuLm1hcChmdW5jdGlvbihyLCBpKSB7XG4gICAgICByZXR1cm4gaSArIDEgKyBcIikgXCIgKyByLnRvU3RyaW5nKCk7XG4gICAgfSkuam9pbihgXG4gIGApIDogXCJcIiwgdGhpcy5uYW1lID0gXCJVbnN1YnNjcmlwdGlvbkVycm9yXCIsIHRoaXMuZXJyb3JzID0gbjtcbiAgfTtcbn0pO1xuZnVuY3Rpb24gX2UoZSwgdCkge1xuICBpZiAoZSkge1xuICAgIHZhciBuID0gZS5pbmRleE9mKHQpO1xuICAgIDAgPD0gbiAmJiBlLnNwbGljZShuLCAxKTtcbiAgfVxufVxudmFyIFRlID0gZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIGUodCkge1xuICAgIHRoaXMuaW5pdGlhbFRlYXJkb3duID0gdCwgdGhpcy5jbG9zZWQgPSAhMSwgdGhpcy5fcGFyZW50YWdlID0gbnVsbCwgdGhpcy5fZmluYWxpemVycyA9IG51bGw7XG4gIH1cbiAgcmV0dXJuIGUucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHQsIG4sIHIsIGksIG87XG4gICAgaWYgKCF0aGlzLmNsb3NlZCkge1xuICAgICAgdGhpcy5jbG9zZWQgPSAhMDtcbiAgICAgIHZhciBzID0gdGhpcy5fcGFyZW50YWdlO1xuICAgICAgaWYgKHMpXG4gICAgICAgIGlmICh0aGlzLl9wYXJlbnRhZ2UgPSBudWxsLCBBcnJheS5pc0FycmF5KHMpKVxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgKHZhciBhID0gcGUocyksIGMgPSBhLm5leHQoKTsgIWMuZG9uZTsgYyA9IGEubmV4dCgpKSB7XG4gICAgICAgICAgICAgIHZhciB1ID0gYy52YWx1ZTtcbiAgICAgICAgICAgICAgdS5yZW1vdmUodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAocCkge1xuICAgICAgICAgICAgdCA9IHsgZXJyb3I6IHAgfTtcbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgYyAmJiAhYy5kb25lICYmIChuID0gYS5yZXR1cm4pICYmIG4uY2FsbChhKTtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgIGlmICh0KSB0aHJvdyB0LmVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgIHMucmVtb3ZlKHRoaXMpO1xuICAgICAgdmFyIGwgPSB0aGlzLmluaXRpYWxUZWFyZG93bjtcbiAgICAgIGlmIChQKGwpKVxuICAgICAgICB0cnkge1xuICAgICAgICAgIGwoKTtcbiAgICAgICAgfSBjYXRjaCAocCkge1xuICAgICAgICAgIG8gPSBwIGluc3RhbmNlb2YgemUgPyBwLmVycm9ycyA6IFtwXTtcbiAgICAgICAgfVxuICAgICAgdmFyIGYgPSB0aGlzLl9maW5hbGl6ZXJzO1xuICAgICAgaWYgKGYpIHtcbiAgICAgICAgdGhpcy5fZmluYWxpemVycyA9IG51bGw7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZm9yICh2YXIgaCA9IHBlKGYpLCBkID0gaC5uZXh0KCk7ICFkLmRvbmU7IGQgPSBoLm5leHQoKSkge1xuICAgICAgICAgICAgdmFyIG0gPSBkLnZhbHVlO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgRXQobSk7XG4gICAgICAgICAgICB9IGNhdGNoIChwKSB7XG4gICAgICAgICAgICAgIG8gPSBvID8/IFtdLCBwIGluc3RhbmNlb2YgemUgPyBvID0gU2UoU2UoW10sIGhlKG8pKSwgaGUocC5lcnJvcnMpKSA6IG8ucHVzaChwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKHApIHtcbiAgICAgICAgICByID0geyBlcnJvcjogcCB9O1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBkICYmICFkLmRvbmUgJiYgKGkgPSBoLnJldHVybikgJiYgaS5jYWxsKGgpO1xuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBpZiAocikgdGhyb3cgci5lcnJvcjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChvKVxuICAgICAgICB0aHJvdyBuZXcgemUobyk7XG4gICAgfVxuICB9LCBlLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbih0KSB7XG4gICAgdmFyIG47XG4gICAgaWYgKHQgJiYgdCAhPT0gdGhpcylcbiAgICAgIGlmICh0aGlzLmNsb3NlZClcbiAgICAgICAgRXQodCk7XG4gICAgICBlbHNlIHtcbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBlKSB7XG4gICAgICAgICAgaWYgKHQuY2xvc2VkIHx8IHQuX2hhc1BhcmVudCh0aGlzKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB0Ll9hZGRQYXJlbnQodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgKHRoaXMuX2ZpbmFsaXplcnMgPSAobiA9IHRoaXMuX2ZpbmFsaXplcnMpICE9PSBudWxsICYmIG4gIT09IHZvaWQgMCA/IG4gOiBbXSkucHVzaCh0KTtcbiAgICAgIH1cbiAgfSwgZS5wcm90b3R5cGUuX2hhc1BhcmVudCA9IGZ1bmN0aW9uKHQpIHtcbiAgICB2YXIgbiA9IHRoaXMuX3BhcmVudGFnZTtcbiAgICByZXR1cm4gbiA9PT0gdCB8fCBBcnJheS5pc0FycmF5KG4pICYmIG4uaW5jbHVkZXModCk7XG4gIH0sIGUucHJvdG90eXBlLl9hZGRQYXJlbnQgPSBmdW5jdGlvbih0KSB7XG4gICAgdmFyIG4gPSB0aGlzLl9wYXJlbnRhZ2U7XG4gICAgdGhpcy5fcGFyZW50YWdlID0gQXJyYXkuaXNBcnJheShuKSA/IChuLnB1c2godCksIG4pIDogbiA/IFtuLCB0XSA6IHQ7XG4gIH0sIGUucHJvdG90eXBlLl9yZW1vdmVQYXJlbnQgPSBmdW5jdGlvbih0KSB7XG4gICAgdmFyIG4gPSB0aGlzLl9wYXJlbnRhZ2U7XG4gICAgbiA9PT0gdCA/IHRoaXMuX3BhcmVudGFnZSA9IG51bGwgOiBBcnJheS5pc0FycmF5KG4pICYmIF9lKG4sIHQpO1xuICB9LCBlLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbih0KSB7XG4gICAgdmFyIG4gPSB0aGlzLl9maW5hbGl6ZXJzO1xuICAgIG4gJiYgX2UobiwgdCksIHQgaW5zdGFuY2VvZiBlICYmIHQuX3JlbW92ZVBhcmVudCh0aGlzKTtcbiAgfSwgZS5FTVBUWSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0ID0gbmV3IGUoKTtcbiAgICByZXR1cm4gdC5jbG9zZWQgPSAhMCwgdDtcbiAgfSgpLCBlO1xufSgpLCBadCA9IFRlLkVNUFRZO1xuZnVuY3Rpb24gZW4oZSkge1xuICByZXR1cm4gZSBpbnN0YW5jZW9mIFRlIHx8IGUgJiYgXCJjbG9zZWRcIiBpbiBlICYmIFAoZS5yZW1vdmUpICYmIFAoZS5hZGQpICYmIFAoZS51bnN1YnNjcmliZSk7XG59XG5mdW5jdGlvbiBFdChlKSB7XG4gIFAoZSkgPyBlKCkgOiBlLnVuc3Vic2NyaWJlKCk7XG59XG52YXIgdG4gPSB7XG4gIG9uVW5oYW5kbGVkRXJyb3I6IG51bGwsXG4gIG9uU3RvcHBlZE5vdGlmaWNhdGlvbjogbnVsbCxcbiAgUHJvbWlzZTogdm9pZCAwLFxuICB1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nOiAhMSxcbiAgdXNlRGVwcmVjYXRlZE5leHRDb250ZXh0OiAhMVxufSwgbm4gPSB7XG4gIHNldFRpbWVvdXQ6IGZ1bmN0aW9uKGUsIHQpIHtcbiAgICBmb3IgKHZhciBuID0gW10sIHIgPSAyOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKVxuICAgICAgbltyIC0gMl0gPSBhcmd1bWVudHNbcl07XG4gICAgcmV0dXJuIHNldFRpbWVvdXQuYXBwbHkodm9pZCAwLCBTZShbZSwgdF0sIGhlKG4pKSk7XG4gIH0sXG4gIGNsZWFyVGltZW91dDogZnVuY3Rpb24oZSkge1xuICAgIHZhciB0ID0gbm4uZGVsZWdhdGU7XG4gICAgcmV0dXJuICgodCA9PSBudWxsID8gdm9pZCAwIDogdC5jbGVhclRpbWVvdXQpIHx8IGNsZWFyVGltZW91dCkoZSk7XG4gIH0sXG4gIGRlbGVnYXRlOiB2b2lkIDBcbn07XG5mdW5jdGlvbiBybihlKSB7XG4gIG5uLnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgdGhyb3cgZTtcbiAgfSk7XG59XG5mdW5jdGlvbiBJZSgpIHtcbn1cbmZ1bmN0aW9uIEFlKGUpIHtcbiAgZSgpO1xufVxudmFyIHV0ID0gZnVuY3Rpb24oZSkge1xuICBKKHQsIGUpO1xuICBmdW5jdGlvbiB0KG4pIHtcbiAgICB2YXIgciA9IGUuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgIHJldHVybiByLmlzU3RvcHBlZCA9ICExLCBuID8gKHIuZGVzdGluYXRpb24gPSBuLCBlbihuKSAmJiBuLmFkZChyKSkgOiByLmRlc3RpbmF0aW9uID0gTHIsIHI7XG4gIH1cbiAgcmV0dXJuIHQuY3JlYXRlID0gZnVuY3Rpb24obiwgciwgaSkge1xuICAgIHJldHVybiBuZXcgZXQobiwgciwgaSk7XG4gIH0sIHQucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbihuKSB7XG4gICAgdGhpcy5pc1N0b3BwZWQgfHwgdGhpcy5fbmV4dChuKTtcbiAgfSwgdC5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbihuKSB7XG4gICAgdGhpcy5pc1N0b3BwZWQgfHwgKHRoaXMuaXNTdG9wcGVkID0gITAsIHRoaXMuX2Vycm9yKG4pKTtcbiAgfSwgdC5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmlzU3RvcHBlZCB8fCAodGhpcy5pc1N0b3BwZWQgPSAhMCwgdGhpcy5fY29tcGxldGUoKSk7XG4gIH0sIHQucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5jbG9zZWQgfHwgKHRoaXMuaXNTdG9wcGVkID0gITAsIGUucHJvdG90eXBlLnVuc3Vic2NyaWJlLmNhbGwodGhpcyksIHRoaXMuZGVzdGluYXRpb24gPSBudWxsKTtcbiAgfSwgdC5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbihuKSB7XG4gICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KG4pO1xuICB9LCB0LnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbihuKSB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3Iobik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICB9XG4gIH0sIHQucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICB9XG4gIH0sIHQ7XG59KFRlKSwgQXIgPSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZDtcbmZ1bmN0aW9uIFllKGUsIHQpIHtcbiAgcmV0dXJuIEFyLmNhbGwoZSwgdCk7XG59XG52YXIga3IgPSBmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gZSh0KSB7XG4gICAgdGhpcy5wYXJ0aWFsT2JzZXJ2ZXIgPSB0O1xuICB9XG4gIHJldHVybiBlLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24odCkge1xuICAgIHZhciBuID0gdGhpcy5wYXJ0aWFsT2JzZXJ2ZXI7XG4gICAgaWYgKG4ubmV4dClcbiAgICAgIHRyeSB7XG4gICAgICAgIG4ubmV4dCh0KTtcbiAgICAgIH0gY2F0Y2ggKHIpIHtcbiAgICAgICAgQ2Uocik7XG4gICAgICB9XG4gIH0sIGUucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24odCkge1xuICAgIHZhciBuID0gdGhpcy5wYXJ0aWFsT2JzZXJ2ZXI7XG4gICAgaWYgKG4uZXJyb3IpXG4gICAgICB0cnkge1xuICAgICAgICBuLmVycm9yKHQpO1xuICAgICAgfSBjYXRjaCAocikge1xuICAgICAgICBDZShyKTtcbiAgICAgIH1cbiAgICBlbHNlXG4gICAgICBDZSh0KTtcbiAgfSwgZS5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdCA9IHRoaXMucGFydGlhbE9ic2VydmVyO1xuICAgIGlmICh0LmNvbXBsZXRlKVxuICAgICAgdHJ5IHtcbiAgICAgICAgdC5jb21wbGV0ZSgpO1xuICAgICAgfSBjYXRjaCAobikge1xuICAgICAgICBDZShuKTtcbiAgICAgIH1cbiAgfSwgZTtcbn0oKSwgZXQgPSBmdW5jdGlvbihlKSB7XG4gIEoodCwgZSk7XG4gIGZ1bmN0aW9uIHQobiwgciwgaSkge1xuICAgIHZhciBvID0gZS5jYWxsKHRoaXMpIHx8IHRoaXMsIHM7XG4gICAgaWYgKFAobikgfHwgIW4pXG4gICAgICBzID0ge1xuICAgICAgICBuZXh0OiBuID8/IHZvaWQgMCxcbiAgICAgICAgZXJyb3I6IHIgPz8gdm9pZCAwLFxuICAgICAgICBjb21wbGV0ZTogaSA/PyB2b2lkIDBcbiAgICAgIH07XG4gICAgZWxzZSB7XG4gICAgICB2YXIgYTtcbiAgICAgIG8gJiYgdG4udXNlRGVwcmVjYXRlZE5leHRDb250ZXh0ID8gKGEgPSBPYmplY3QuY3JlYXRlKG4pLCBhLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBvLnVuc3Vic2NyaWJlKCk7XG4gICAgICB9LCBzID0ge1xuICAgICAgICBuZXh0OiBuLm5leHQgJiYgWWUobi5uZXh0LCBhKSxcbiAgICAgICAgZXJyb3I6IG4uZXJyb3IgJiYgWWUobi5lcnJvciwgYSksXG4gICAgICAgIGNvbXBsZXRlOiBuLmNvbXBsZXRlICYmIFllKG4uY29tcGxldGUsIGEpXG4gICAgICB9KSA6IHMgPSBuO1xuICAgIH1cbiAgICByZXR1cm4gby5kZXN0aW5hdGlvbiA9IG5ldyBrcihzKSwgbztcbiAgfVxuICByZXR1cm4gdDtcbn0odXQpO1xuZnVuY3Rpb24gQ2UoZSkge1xuICBybihlKTtcbn1cbmZ1bmN0aW9uIE9yKGUpIHtcbiAgdGhyb3cgZTtcbn1cbnZhciBMciA9IHtcbiAgY2xvc2VkOiAhMCxcbiAgbmV4dDogSWUsXG4gIGVycm9yOiBPcixcbiAgY29tcGxldGU6IEllXG59LCBsdCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdHlwZW9mIFN5bWJvbCA9PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLm9ic2VydmFibGUgfHwgXCJAQG9ic2VydmFibGVcIjtcbn0oKTtcbmZ1bmN0aW9uIGZ0KGUpIHtcbiAgcmV0dXJuIGU7XG59XG5mdW5jdGlvbiBfcihlKSB7XG4gIHJldHVybiBlLmxlbmd0aCA9PT0gMCA/IGZ0IDogZS5sZW5ndGggPT09IDEgPyBlWzBdIDogZnVuY3Rpb24obikge1xuICAgIHJldHVybiBlLnJlZHVjZShmdW5jdGlvbihyLCBpKSB7XG4gICAgICByZXR1cm4gaShyKTtcbiAgICB9LCBuKTtcbiAgfTtcbn1cbnZhciBPID0gZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIGUodCkge1xuICAgIHQgJiYgKHRoaXMuX3N1YnNjcmliZSA9IHQpO1xuICB9XG4gIHJldHVybiBlLnByb3RvdHlwZS5saWZ0ID0gZnVuY3Rpb24odCkge1xuICAgIHZhciBuID0gbmV3IGUoKTtcbiAgICByZXR1cm4gbi5zb3VyY2UgPSB0aGlzLCBuLm9wZXJhdG9yID0gdCwgbjtcbiAgfSwgZS5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24odCwgbiwgcikge1xuICAgIHZhciBpID0gdGhpcywgbyA9IERyKHQpID8gdCA6IG5ldyBldCh0LCBuLCByKTtcbiAgICByZXR1cm4gQWUoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcyA9IGksIGEgPSBzLm9wZXJhdG9yLCBjID0gcy5zb3VyY2U7XG4gICAgICBvLmFkZChhID8gYS5jYWxsKG8sIGMpIDogYyA/IGkuX3N1YnNjcmliZShvKSA6IGkuX3RyeVN1YnNjcmliZShvKSk7XG4gICAgfSksIG87XG4gIH0sIGUucHJvdG90eXBlLl90cnlTdWJzY3JpYmUgPSBmdW5jdGlvbih0KSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB0aGlzLl9zdWJzY3JpYmUodCk7XG4gICAgfSBjYXRjaCAobikge1xuICAgICAgdC5lcnJvcihuKTtcbiAgICB9XG4gIH0sIGUucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbih0LCBuKSB7XG4gICAgdmFyIHIgPSB0aGlzO1xuICAgIHJldHVybiBuID0gVHQobiksIG5ldyBuKGZ1bmN0aW9uKGksIG8pIHtcbiAgICAgIHZhciBzID0gbmV3IGV0KHtcbiAgICAgICAgbmV4dDogZnVuY3Rpb24oYSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0KGEpO1xuICAgICAgICAgIH0gY2F0Y2ggKGMpIHtcbiAgICAgICAgICAgIG8oYyksIHMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBvLFxuICAgICAgICBjb21wbGV0ZTogaVxuICAgICAgfSk7XG4gICAgICByLnN1YnNjcmliZShzKTtcbiAgICB9KTtcbiAgfSwgZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uKHQpIHtcbiAgICB2YXIgbjtcbiAgICByZXR1cm4gKG4gPSB0aGlzLnNvdXJjZSkgPT09IG51bGwgfHwgbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogbi5zdWJzY3JpYmUodCk7XG4gIH0sIGUucHJvdG90eXBlW2x0XSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9LCBlLnByb3RvdHlwZS5waXBlID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yICh2YXIgdCA9IFtdLCBuID0gMDsgbiA8IGFyZ3VtZW50cy5sZW5ndGg7IG4rKylcbiAgICAgIHRbbl0gPSBhcmd1bWVudHNbbl07XG4gICAgcmV0dXJuIF9yKHQpKHRoaXMpO1xuICB9LCBlLnByb3RvdHlwZS50b1Byb21pc2UgPSBmdW5jdGlvbih0KSB7XG4gICAgdmFyIG4gPSB0aGlzO1xuICAgIHJldHVybiB0ID0gVHQodCksIG5ldyB0KGZ1bmN0aW9uKHIsIGkpIHtcbiAgICAgIHZhciBvO1xuICAgICAgbi5zdWJzY3JpYmUoZnVuY3Rpb24ocykge1xuICAgICAgICByZXR1cm4gbyA9IHM7XG4gICAgICB9LCBmdW5jdGlvbihzKSB7XG4gICAgICAgIHJldHVybiBpKHMpO1xuICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiByKG8pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sIGUuY3JlYXRlID0gZnVuY3Rpb24odCkge1xuICAgIHJldHVybiBuZXcgZSh0KTtcbiAgfSwgZTtcbn0oKTtcbmZ1bmN0aW9uIFR0KGUpIHtcbiAgdmFyIHQ7XG4gIHJldHVybiAodCA9IGUgPz8gdG4uUHJvbWlzZSkgIT09IG51bGwgJiYgdCAhPT0gdm9pZCAwID8gdCA6IFByb21pc2U7XG59XG5mdW5jdGlvbiBJcihlKSB7XG4gIHJldHVybiBlICYmIFAoZS5uZXh0KSAmJiBQKGUuZXJyb3IpICYmIFAoZS5jb21wbGV0ZSk7XG59XG5mdW5jdGlvbiBEcihlKSB7XG4gIHJldHVybiBlICYmIGUgaW5zdGFuY2VvZiB1dCB8fCBJcihlKSAmJiBlbihlKTtcbn1cbmZ1bmN0aW9uIE1yKGUpIHtcbiAgcmV0dXJuIFAoZSA9PSBudWxsID8gdm9pZCAwIDogZS5saWZ0KTtcbn1cbmZ1bmN0aW9uIFYoZSkge1xuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIGlmIChNcih0KSlcbiAgICAgIHJldHVybiB0LmxpZnQoZnVuY3Rpb24obikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiBlKG4sIHRoaXMpO1xuICAgICAgICB9IGNhdGNoIChyKSB7XG4gICAgICAgICAgdGhpcy5lcnJvcihyKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVuYWJsZSB0byBsaWZ0IHVua25vd24gT2JzZXJ2YWJsZSB0eXBlXCIpO1xuICB9O1xufVxuZnVuY3Rpb24gVyhlLCB0LCBuLCByLCBpKSB7XG4gIHJldHVybiBuZXcgUnIoZSwgdCwgbiwgciwgaSk7XG59XG52YXIgUnIgPSBmdW5jdGlvbihlKSB7XG4gIEoodCwgZSk7XG4gIGZ1bmN0aW9uIHQobiwgciwgaSwgbywgcywgYSkge1xuICAgIHZhciBjID0gZS5jYWxsKHRoaXMsIG4pIHx8IHRoaXM7XG4gICAgcmV0dXJuIGMub25GaW5hbGl6ZSA9IHMsIGMuc2hvdWxkVW5zdWJzY3JpYmUgPSBhLCBjLl9uZXh0ID0gciA/IGZ1bmN0aW9uKHUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHIodSk7XG4gICAgICB9IGNhdGNoIChsKSB7XG4gICAgICAgIG4uZXJyb3IobCk7XG4gICAgICB9XG4gICAgfSA6IGUucHJvdG90eXBlLl9uZXh0LCBjLl9lcnJvciA9IG8gPyBmdW5jdGlvbih1KSB7XG4gICAgICB0cnkge1xuICAgICAgICBvKHUpO1xuICAgICAgfSBjYXRjaCAobCkge1xuICAgICAgICBuLmVycm9yKGwpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgfVxuICAgIH0gOiBlLnByb3RvdHlwZS5fZXJyb3IsIGMuX2NvbXBsZXRlID0gaSA/IGZ1bmN0aW9uKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaSgpO1xuICAgICAgfSBjYXRjaCAodSkge1xuICAgICAgICBuLmVycm9yKHUpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgfVxuICAgIH0gOiBlLnByb3RvdHlwZS5fY29tcGxldGUsIGM7XG4gIH1cbiAgcmV0dXJuIHQucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG47XG4gICAgaWYgKCF0aGlzLnNob3VsZFVuc3Vic2NyaWJlIHx8IHRoaXMuc2hvdWxkVW5zdWJzY3JpYmUoKSkge1xuICAgICAgdmFyIHIgPSB0aGlzLmNsb3NlZDtcbiAgICAgIGUucHJvdG90eXBlLnVuc3Vic2NyaWJlLmNhbGwodGhpcyksICFyICYmICgobiA9IHRoaXMub25GaW5hbGl6ZSkgPT09IG51bGwgfHwgbiA9PT0gdm9pZCAwIHx8IG4uY2FsbCh0aGlzKSk7XG4gICAgfVxuICB9LCB0O1xufSh1dCksIE5yID0gY3QoZnVuY3Rpb24oZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgZSh0aGlzKSwgdGhpcy5uYW1lID0gXCJPYmplY3RVbnN1YnNjcmliZWRFcnJvclwiLCB0aGlzLm1lc3NhZ2UgPSBcIm9iamVjdCB1bnN1YnNjcmliZWRcIjtcbiAgfTtcbn0pLCBuZSA9IGZ1bmN0aW9uKGUpIHtcbiAgSih0LCBlKTtcbiAgZnVuY3Rpb24gdCgpIHtcbiAgICB2YXIgbiA9IGUuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgIHJldHVybiBuLmNsb3NlZCA9ICExLCBuLmN1cnJlbnRPYnNlcnZlcnMgPSBudWxsLCBuLm9ic2VydmVycyA9IFtdLCBuLmlzU3RvcHBlZCA9ICExLCBuLmhhc0Vycm9yID0gITEsIG4udGhyb3duRXJyb3IgPSBudWxsLCBuO1xuICB9XG4gIHJldHVybiB0LnByb3RvdHlwZS5saWZ0ID0gZnVuY3Rpb24obikge1xuICAgIHZhciByID0gbmV3IEN0KHRoaXMsIHRoaXMpO1xuICAgIHJldHVybiByLm9wZXJhdG9yID0gbiwgcjtcbiAgfSwgdC5wcm90b3R5cGUuX3Rocm93SWZDbG9zZWQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5jbG9zZWQpXG4gICAgICB0aHJvdyBuZXcgTnIoKTtcbiAgfSwgdC5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uKG4pIHtcbiAgICB2YXIgciA9IHRoaXM7XG4gICAgQWUoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaSwgbztcbiAgICAgIGlmIChyLl90aHJvd0lmQ2xvc2VkKCksICFyLmlzU3RvcHBlZCkge1xuICAgICAgICByLmN1cnJlbnRPYnNlcnZlcnMgfHwgKHIuY3VycmVudE9ic2VydmVycyA9IEFycmF5LmZyb20oci5vYnNlcnZlcnMpKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBmb3IgKHZhciBzID0gcGUoci5jdXJyZW50T2JzZXJ2ZXJzKSwgYSA9IHMubmV4dCgpOyAhYS5kb25lOyBhID0gcy5uZXh0KCkpIHtcbiAgICAgICAgICAgIHZhciBjID0gYS52YWx1ZTtcbiAgICAgICAgICAgIGMubmV4dChuKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKHUpIHtcbiAgICAgICAgICBpID0geyBlcnJvcjogdSB9O1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhICYmICFhLmRvbmUgJiYgKG8gPSBzLnJldHVybikgJiYgby5jYWxsKHMpO1xuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBpZiAoaSkgdGhyb3cgaS5lcnJvcjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgdC5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbihuKSB7XG4gICAgdmFyIHIgPSB0aGlzO1xuICAgIEFlKGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHIuX3Rocm93SWZDbG9zZWQoKSwgIXIuaXNTdG9wcGVkKSB7XG4gICAgICAgIHIuaGFzRXJyb3IgPSByLmlzU3RvcHBlZCA9ICEwLCByLnRocm93bkVycm9yID0gbjtcbiAgICAgICAgZm9yICh2YXIgaSA9IHIub2JzZXJ2ZXJzOyBpLmxlbmd0aDsgKVxuICAgICAgICAgIGkuc2hpZnQoKS5lcnJvcihuKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgdC5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbiA9IHRoaXM7XG4gICAgQWUoZnVuY3Rpb24oKSB7XG4gICAgICBpZiAobi5fdGhyb3dJZkNsb3NlZCgpLCAhbi5pc1N0b3BwZWQpIHtcbiAgICAgICAgbi5pc1N0b3BwZWQgPSAhMDtcbiAgICAgICAgZm9yICh2YXIgciA9IG4ub2JzZXJ2ZXJzOyByLmxlbmd0aDsgKVxuICAgICAgICAgIHIuc2hpZnQoKS5jb21wbGV0ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LCB0LnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuaXNTdG9wcGVkID0gdGhpcy5jbG9zZWQgPSAhMCwgdGhpcy5vYnNlcnZlcnMgPSB0aGlzLmN1cnJlbnRPYnNlcnZlcnMgPSBudWxsO1xuICB9LCBPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIFwib2JzZXJ2ZWRcIiwge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbjtcbiAgICAgIHJldHVybiAoKG4gPSB0aGlzLm9ic2VydmVycykgPT09IG51bGwgfHwgbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogbi5sZW5ndGgpID4gMDtcbiAgICB9LFxuICAgIGVudW1lcmFibGU6ICExLFxuICAgIGNvbmZpZ3VyYWJsZTogITBcbiAgfSksIHQucHJvdG90eXBlLl90cnlTdWJzY3JpYmUgPSBmdW5jdGlvbihuKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Rocm93SWZDbG9zZWQoKSwgZS5wcm90b3R5cGUuX3RyeVN1YnNjcmliZS5jYWxsKHRoaXMsIG4pO1xuICB9LCB0LnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24obikge1xuICAgIHJldHVybiB0aGlzLl90aHJvd0lmQ2xvc2VkKCksIHRoaXMuX2NoZWNrRmluYWxpemVkU3RhdHVzZXMobiksIHRoaXMuX2lubmVyU3Vic2NyaWJlKG4pO1xuICB9LCB0LnByb3RvdHlwZS5faW5uZXJTdWJzY3JpYmUgPSBmdW5jdGlvbihuKSB7XG4gICAgdmFyIHIgPSB0aGlzLCBpID0gdGhpcywgbyA9IGkuaGFzRXJyb3IsIHMgPSBpLmlzU3RvcHBlZCwgYSA9IGkub2JzZXJ2ZXJzO1xuICAgIHJldHVybiBvIHx8IHMgPyBadCA6ICh0aGlzLmN1cnJlbnRPYnNlcnZlcnMgPSBudWxsLCBhLnB1c2gobiksIG5ldyBUZShmdW5jdGlvbigpIHtcbiAgICAgIHIuY3VycmVudE9ic2VydmVycyA9IG51bGwsIF9lKGEsIG4pO1xuICAgIH0pKTtcbiAgfSwgdC5wcm90b3R5cGUuX2NoZWNrRmluYWxpemVkU3RhdHVzZXMgPSBmdW5jdGlvbihuKSB7XG4gICAgdmFyIHIgPSB0aGlzLCBpID0gci5oYXNFcnJvciwgbyA9IHIudGhyb3duRXJyb3IsIHMgPSByLmlzU3RvcHBlZDtcbiAgICBpID8gbi5lcnJvcihvKSA6IHMgJiYgbi5jb21wbGV0ZSgpO1xuICB9LCB0LnByb3RvdHlwZS5hc09ic2VydmFibGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbiA9IG5ldyBPKCk7XG4gICAgcmV0dXJuIG4uc291cmNlID0gdGhpcywgbjtcbiAgfSwgdC5jcmVhdGUgPSBmdW5jdGlvbihuLCByKSB7XG4gICAgcmV0dXJuIG5ldyBDdChuLCByKTtcbiAgfSwgdDtcbn0oTyksIEN0ID0gZnVuY3Rpb24oZSkge1xuICBKKHQsIGUpO1xuICBmdW5jdGlvbiB0KG4sIHIpIHtcbiAgICB2YXIgaSA9IGUuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgIHJldHVybiBpLmRlc3RpbmF0aW9uID0gbiwgaS5zb3VyY2UgPSByLCBpO1xuICB9XG4gIHJldHVybiB0LnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24obikge1xuICAgIHZhciByLCBpO1xuICAgIChpID0gKHIgPSB0aGlzLmRlc3RpbmF0aW9uKSA9PT0gbnVsbCB8fCByID09PSB2b2lkIDAgPyB2b2lkIDAgOiByLm5leHQpID09PSBudWxsIHx8IGkgPT09IHZvaWQgMCB8fCBpLmNhbGwociwgbik7XG4gIH0sIHQucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24obikge1xuICAgIHZhciByLCBpO1xuICAgIChpID0gKHIgPSB0aGlzLmRlc3RpbmF0aW9uKSA9PT0gbnVsbCB8fCByID09PSB2b2lkIDAgPyB2b2lkIDAgOiByLmVycm9yKSA9PT0gbnVsbCB8fCBpID09PSB2b2lkIDAgfHwgaS5jYWxsKHIsIG4pO1xuICB9LCB0LnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuLCByO1xuICAgIChyID0gKG4gPSB0aGlzLmRlc3RpbmF0aW9uKSA9PT0gbnVsbCB8fCBuID09PSB2b2lkIDAgPyB2b2lkIDAgOiBuLmNvbXBsZXRlKSA9PT0gbnVsbCB8fCByID09PSB2b2lkIDAgfHwgci5jYWxsKG4pO1xuICB9LCB0LnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24obikge1xuICAgIHZhciByLCBpO1xuICAgIHJldHVybiAoaSA9IChyID0gdGhpcy5zb3VyY2UpID09PSBudWxsIHx8IHIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHIuc3Vic2NyaWJlKG4pKSAhPT0gbnVsbCAmJiBpICE9PSB2b2lkIDAgPyBpIDogWnQ7XG4gIH0sIHQ7XG59KG5lKSwgb24gPSBmdW5jdGlvbihlKSB7XG4gIEoodCwgZSk7XG4gIGZ1bmN0aW9uIHQobikge1xuICAgIHZhciByID0gZS5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgcmV0dXJuIHIuX3ZhbHVlID0gbiwgcjtcbiAgfVxuICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCBcInZhbHVlXCIsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0VmFsdWUoKTtcbiAgICB9LFxuICAgIGVudW1lcmFibGU6ICExLFxuICAgIGNvbmZpZ3VyYWJsZTogITBcbiAgfSksIHQucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbihuKSB7XG4gICAgdmFyIHIgPSBlLnByb3RvdHlwZS5fc3Vic2NyaWJlLmNhbGwodGhpcywgbik7XG4gICAgcmV0dXJuICFyLmNsb3NlZCAmJiBuLm5leHQodGhpcy5fdmFsdWUpLCByO1xuICB9LCB0LnByb3RvdHlwZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuID0gdGhpcywgciA9IG4uaGFzRXJyb3IsIGkgPSBuLnRocm93bkVycm9yLCBvID0gbi5fdmFsdWU7XG4gICAgaWYgKHIpXG4gICAgICB0aHJvdyBpO1xuICAgIHJldHVybiB0aGlzLl90aHJvd0lmQ2xvc2VkKCksIG87XG4gIH0sIHQucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbihuKSB7XG4gICAgZS5wcm90b3R5cGUubmV4dC5jYWxsKHRoaXMsIHRoaXMuX3ZhbHVlID0gbik7XG4gIH0sIHQ7XG59KG5lKSwgJHIgPSB7XG4gIG5vdzogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIERhdGUubm93KCk7XG4gIH0sXG4gIGRlbGVnYXRlOiB2b2lkIDBcbn0sIFVyID0gZnVuY3Rpb24oZSkge1xuICBKKHQsIGUpO1xuICBmdW5jdGlvbiB0KG4sIHIpIHtcbiAgICByZXR1cm4gZS5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gIH1cbiAgcmV0dXJuIHQucHJvdG90eXBlLnNjaGVkdWxlID0gZnVuY3Rpb24obiwgcikge1xuICAgIHJldHVybiB0aGlzO1xuICB9LCB0O1xufShUZSksIFB0ID0ge1xuICBzZXRJbnRlcnZhbDogZnVuY3Rpb24oZSwgdCkge1xuICAgIGZvciAodmFyIG4gPSBbXSwgciA9IDI7IHIgPCBhcmd1bWVudHMubGVuZ3RoOyByKyspXG4gICAgICBuW3IgLSAyXSA9IGFyZ3VtZW50c1tyXTtcbiAgICByZXR1cm4gc2V0SW50ZXJ2YWwuYXBwbHkodm9pZCAwLCBTZShbZSwgdF0sIGhlKG4pKSk7XG4gIH0sXG4gIGNsZWFySW50ZXJ2YWw6IGZ1bmN0aW9uKGUpIHtcbiAgICByZXR1cm4gY2xlYXJJbnRlcnZhbChlKTtcbiAgfSxcbiAgZGVsZWdhdGU6IHZvaWQgMFxufSwgRnIgPSBmdW5jdGlvbihlKSB7XG4gIEoodCwgZSk7XG4gIGZ1bmN0aW9uIHQobiwgcikge1xuICAgIHZhciBpID0gZS5jYWxsKHRoaXMsIG4sIHIpIHx8IHRoaXM7XG4gICAgcmV0dXJuIGkuc2NoZWR1bGVyID0gbiwgaS53b3JrID0gciwgaS5wZW5kaW5nID0gITEsIGk7XG4gIH1cbiAgcmV0dXJuIHQucHJvdG90eXBlLnNjaGVkdWxlID0gZnVuY3Rpb24obiwgcikge1xuICAgIHZhciBpO1xuICAgIGlmIChyID09PSB2b2lkIDAgJiYgKHIgPSAwKSwgdGhpcy5jbG9zZWQpXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB0aGlzLnN0YXRlID0gbjtcbiAgICB2YXIgbyA9IHRoaXMuaWQsIHMgPSB0aGlzLnNjaGVkdWxlcjtcbiAgICByZXR1cm4gbyAhPSBudWxsICYmICh0aGlzLmlkID0gdGhpcy5yZWN5Y2xlQXN5bmNJZChzLCBvLCByKSksIHRoaXMucGVuZGluZyA9ICEwLCB0aGlzLmRlbGF5ID0gciwgdGhpcy5pZCA9IChpID0gdGhpcy5pZCkgIT09IG51bGwgJiYgaSAhPT0gdm9pZCAwID8gaSA6IHRoaXMucmVxdWVzdEFzeW5jSWQocywgdGhpcy5pZCwgciksIHRoaXM7XG4gIH0sIHQucHJvdG90eXBlLnJlcXVlc3RBc3luY0lkID0gZnVuY3Rpb24obiwgciwgaSkge1xuICAgIHJldHVybiBpID09PSB2b2lkIDAgJiYgKGkgPSAwKSwgUHQuc2V0SW50ZXJ2YWwobi5mbHVzaC5iaW5kKG4sIHRoaXMpLCBpKTtcbiAgfSwgdC5wcm90b3R5cGUucmVjeWNsZUFzeW5jSWQgPSBmdW5jdGlvbihuLCByLCBpKSB7XG4gICAgaWYgKGkgPT09IHZvaWQgMCAmJiAoaSA9IDApLCBpICE9IG51bGwgJiYgdGhpcy5kZWxheSA9PT0gaSAmJiB0aGlzLnBlbmRpbmcgPT09ICExKVxuICAgICAgcmV0dXJuIHI7XG4gICAgciAhPSBudWxsICYmIFB0LmNsZWFySW50ZXJ2YWwocik7XG4gIH0sIHQucHJvdG90eXBlLmV4ZWN1dGUgPSBmdW5jdGlvbihuLCByKSB7XG4gICAgaWYgKHRoaXMuY2xvc2VkKVxuICAgICAgcmV0dXJuIG5ldyBFcnJvcihcImV4ZWN1dGluZyBhIGNhbmNlbGxlZCBhY3Rpb25cIik7XG4gICAgdGhpcy5wZW5kaW5nID0gITE7XG4gICAgdmFyIGkgPSB0aGlzLl9leGVjdXRlKG4sIHIpO1xuICAgIGlmIChpKVxuICAgICAgcmV0dXJuIGk7XG4gICAgdGhpcy5wZW5kaW5nID09PSAhMSAmJiB0aGlzLmlkICE9IG51bGwgJiYgKHRoaXMuaWQgPSB0aGlzLnJlY3ljbGVBc3luY0lkKHRoaXMuc2NoZWR1bGVyLCB0aGlzLmlkLCBudWxsKSk7XG4gIH0sIHQucHJvdG90eXBlLl9leGVjdXRlID0gZnVuY3Rpb24obiwgcikge1xuICAgIHZhciBpID0gITEsIG87XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMud29yayhuKTtcbiAgICB9IGNhdGNoIChzKSB7XG4gICAgICBpID0gITAsIG8gPSBzIHx8IG5ldyBFcnJvcihcIlNjaGVkdWxlZCBhY3Rpb24gdGhyZXcgZmFsc3kgZXJyb3JcIik7XG4gICAgfVxuICAgIGlmIChpKVxuICAgICAgcmV0dXJuIHRoaXMudW5zdWJzY3JpYmUoKSwgbztcbiAgfSwgdC5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuY2xvc2VkKSB7XG4gICAgICB2YXIgbiA9IHRoaXMsIHIgPSBuLmlkLCBpID0gbi5zY2hlZHVsZXIsIG8gPSBpLmFjdGlvbnM7XG4gICAgICB0aGlzLndvcmsgPSB0aGlzLnN0YXRlID0gdGhpcy5zY2hlZHVsZXIgPSBudWxsLCB0aGlzLnBlbmRpbmcgPSAhMSwgX2UobywgdGhpcyksIHIgIT0gbnVsbCAmJiAodGhpcy5pZCA9IHRoaXMucmVjeWNsZUFzeW5jSWQoaSwgciwgbnVsbCkpLCB0aGlzLmRlbGF5ID0gbnVsbCwgZS5wcm90b3R5cGUudW5zdWJzY3JpYmUuY2FsbCh0aGlzKTtcbiAgICB9XG4gIH0sIHQ7XG59KFVyKSwgQXQgPSBmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gZSh0LCBuKSB7XG4gICAgbiA9PT0gdm9pZCAwICYmIChuID0gZS5ub3cpLCB0aGlzLnNjaGVkdWxlckFjdGlvbkN0b3IgPSB0LCB0aGlzLm5vdyA9IG47XG4gIH1cbiAgcmV0dXJuIGUucHJvdG90eXBlLnNjaGVkdWxlID0gZnVuY3Rpb24odCwgbiwgcikge1xuICAgIHJldHVybiBuID09PSB2b2lkIDAgJiYgKG4gPSAwKSwgbmV3IHRoaXMuc2NoZWR1bGVyQWN0aW9uQ3Rvcih0aGlzLCB0KS5zY2hlZHVsZShyLCBuKTtcbiAgfSwgZS5ub3cgPSAkci5ub3csIGU7XG59KCksIGpyID0gZnVuY3Rpb24oZSkge1xuICBKKHQsIGUpO1xuICBmdW5jdGlvbiB0KG4sIHIpIHtcbiAgICByID09PSB2b2lkIDAgJiYgKHIgPSBBdC5ub3cpO1xuICAgIHZhciBpID0gZS5jYWxsKHRoaXMsIG4sIHIpIHx8IHRoaXM7XG4gICAgcmV0dXJuIGkuYWN0aW9ucyA9IFtdLCBpLl9hY3RpdmUgPSAhMSwgaTtcbiAgfVxuICByZXR1cm4gdC5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbihuKSB7XG4gICAgdmFyIHIgPSB0aGlzLmFjdGlvbnM7XG4gICAgaWYgKHRoaXMuX2FjdGl2ZSkge1xuICAgICAgci5wdXNoKG4pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgaTtcbiAgICB0aGlzLl9hY3RpdmUgPSAhMDtcbiAgICBkb1xuICAgICAgaWYgKGkgPSBuLmV4ZWN1dGUobi5zdGF0ZSwgbi5kZWxheSkpXG4gICAgICAgIGJyZWFrO1xuICAgIHdoaWxlIChuID0gci5zaGlmdCgpKTtcbiAgICBpZiAodGhpcy5fYWN0aXZlID0gITEsIGkpIHtcbiAgICAgIGZvciAoOyBuID0gci5zaGlmdCgpOyApXG4gICAgICAgIG4udW5zdWJzY3JpYmUoKTtcbiAgICAgIHRocm93IGk7XG4gICAgfVxuICB9LCB0O1xufShBdCksIFdyID0gbmV3IGpyKEZyKSwgQnIgPSBuZXcgTyhmdW5jdGlvbihlKSB7XG4gIHJldHVybiBlLmNvbXBsZXRlKCk7XG59KTtcbmZ1bmN0aW9uIFZyKGUpIHtcbiAgcmV0dXJuIGUgJiYgUChlLnNjaGVkdWxlKTtcbn1cbmZ1bmN0aW9uIHNuKGUpIHtcbiAgcmV0dXJuIGVbZS5sZW5ndGggLSAxXTtcbn1cbmZ1bmN0aW9uIEJlKGUpIHtcbiAgcmV0dXJuIFZyKHNuKGUpKSA/IGUucG9wKCkgOiB2b2lkIDA7XG59XG5mdW5jdGlvbiBIcihlLCB0KSB7XG4gIHJldHVybiB0eXBlb2Ygc24oZSkgPT0gXCJudW1iZXJcIiA/IGUucG9wKCkgOiB0O1xufVxudmFyIGR0ID0gZnVuY3Rpb24oZSkge1xuICByZXR1cm4gZSAmJiB0eXBlb2YgZS5sZW5ndGggPT0gXCJudW1iZXJcIiAmJiB0eXBlb2YgZSAhPSBcImZ1bmN0aW9uXCI7XG59O1xuZnVuY3Rpb24gYW4oZSkge1xuICByZXR1cm4gUChlID09IG51bGwgPyB2b2lkIDAgOiBlLnRoZW4pO1xufVxuZnVuY3Rpb24gY24oZSkge1xuICByZXR1cm4gUChlW2x0XSk7XG59XG5mdW5jdGlvbiB1bihlKSB7XG4gIHJldHVybiBTeW1ib2wuYXN5bmNJdGVyYXRvciAmJiBQKGUgPT0gbnVsbCA/IHZvaWQgMCA6IGVbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKTtcbn1cbmZ1bmN0aW9uIGxuKGUpIHtcbiAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoXCJZb3UgcHJvdmlkZWQgXCIgKyAoZSAhPT0gbnVsbCAmJiB0eXBlb2YgZSA9PSBcIm9iamVjdFwiID8gXCJhbiBpbnZhbGlkIG9iamVjdFwiIDogXCInXCIgKyBlICsgXCInXCIpICsgXCIgd2hlcmUgYSBzdHJlYW0gd2FzIGV4cGVjdGVkLiBZb3UgY2FuIHByb3ZpZGUgYW4gT2JzZXJ2YWJsZSwgUHJvbWlzZSwgUmVhZGFibGVTdHJlYW0sIEFycmF5LCBBc3luY0l0ZXJhYmxlLCBvciBJdGVyYWJsZS5cIik7XG59XG5mdW5jdGlvbiB6cigpIHtcbiAgcmV0dXJuIHR5cGVvZiBTeW1ib2wgIT0gXCJmdW5jdGlvblwiIHx8ICFTeW1ib2wuaXRlcmF0b3IgPyBcIkBAaXRlcmF0b3JcIiA6IFN5bWJvbC5pdGVyYXRvcjtcbn1cbnZhciBmbiA9IHpyKCk7XG5mdW5jdGlvbiBkbihlKSB7XG4gIHJldHVybiBQKGUgPT0gbnVsbCA/IHZvaWQgMCA6IGVbZm5dKTtcbn1cbmZ1bmN0aW9uIHBuKGUpIHtcbiAgcmV0dXJuIENyKHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oKSB7XG4gICAgdmFyIG4sIHIsIGksIG87XG4gICAgcmV0dXJuIFh0KHRoaXMsIGZ1bmN0aW9uKHMpIHtcbiAgICAgIHN3aXRjaCAocy5sYWJlbCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgbiA9IGUuZ2V0UmVhZGVyKCksIHMubGFiZWwgPSAxO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgcy50cnlzLnB1c2goWzEsICwgOSwgMTBdKSwgcy5sYWJlbCA9IDI7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICByZXR1cm4gWzQsIGZlKG4ucmVhZCgpKV07XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICByZXR1cm4gciA9IHMuc2VudCgpLCBpID0gci52YWx1ZSwgbyA9IHIuZG9uZSwgbyA/IFs0LCBmZSh2b2lkIDApXSA6IFszLCA1XTtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHJldHVybiBbMiwgcy5zZW50KCldO1xuICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgcmV0dXJuIFs0LCBmZShpKV07XG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICByZXR1cm4gWzQsIHMuc2VudCgpXTtcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgIHJldHVybiBzLnNlbnQoKSwgWzMsIDJdO1xuICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgcmV0dXJuIFszLCAxMF07XG4gICAgICAgIGNhc2UgOTpcbiAgICAgICAgICByZXR1cm4gbi5yZWxlYXNlTG9jaygpLCBbN107XG4gICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgcmV0dXJuIFsyXTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG5mdW5jdGlvbiBobihlKSB7XG4gIHJldHVybiBQKGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUuZ2V0UmVhZGVyKTtcbn1cbmZ1bmN0aW9uIFkoZSkge1xuICBpZiAoZSBpbnN0YW5jZW9mIE8pXG4gICAgcmV0dXJuIGU7XG4gIGlmIChlICE9IG51bGwpIHtcbiAgICBpZiAoY24oZSkpXG4gICAgICByZXR1cm4gWXIoZSk7XG4gICAgaWYgKGR0KGUpKVxuICAgICAgcmV0dXJuIEdyKGUpO1xuICAgIGlmIChhbihlKSlcbiAgICAgIHJldHVybiBLcihlKTtcbiAgICBpZiAodW4oZSkpXG4gICAgICByZXR1cm4gdm4oZSk7XG4gICAgaWYgKGRuKGUpKVxuICAgICAgcmV0dXJuIFFyKGUpO1xuICAgIGlmIChobihlKSlcbiAgICAgIHJldHVybiBKcihlKTtcbiAgfVxuICB0aHJvdyBsbihlKTtcbn1cbmZ1bmN0aW9uIFlyKGUpIHtcbiAgcmV0dXJuIG5ldyBPKGZ1bmN0aW9uKHQpIHtcbiAgICB2YXIgbiA9IGVbbHRdKCk7XG4gICAgaWYgKFAobi5zdWJzY3JpYmUpKVxuICAgICAgcmV0dXJuIG4uc3Vic2NyaWJlKHQpO1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcm92aWRlZCBvYmplY3QgZG9lcyBub3QgY29ycmVjdGx5IGltcGxlbWVudCBTeW1ib2wub2JzZXJ2YWJsZVwiKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBHcihlKSB7XG4gIHJldHVybiBuZXcgTyhmdW5jdGlvbih0KSB7XG4gICAgZm9yICh2YXIgbiA9IDA7IG4gPCBlLmxlbmd0aCAmJiAhdC5jbG9zZWQ7IG4rKylcbiAgICAgIHQubmV4dChlW25dKTtcbiAgICB0LmNvbXBsZXRlKCk7XG4gIH0pO1xufVxuZnVuY3Rpb24gS3IoZSkge1xuICByZXR1cm4gbmV3IE8oZnVuY3Rpb24odCkge1xuICAgIGUudGhlbihmdW5jdGlvbihuKSB7XG4gICAgICB0LmNsb3NlZCB8fCAodC5uZXh0KG4pLCB0LmNvbXBsZXRlKCkpO1xuICAgIH0sIGZ1bmN0aW9uKG4pIHtcbiAgICAgIHJldHVybiB0LmVycm9yKG4pO1xuICAgIH0pLnRoZW4obnVsbCwgcm4pO1xuICB9KTtcbn1cbmZ1bmN0aW9uIFFyKGUpIHtcbiAgcmV0dXJuIG5ldyBPKGZ1bmN0aW9uKHQpIHtcbiAgICB2YXIgbiwgcjtcbiAgICB0cnkge1xuICAgICAgZm9yICh2YXIgaSA9IHBlKGUpLCBvID0gaS5uZXh0KCk7ICFvLmRvbmU7IG8gPSBpLm5leHQoKSkge1xuICAgICAgICB2YXIgcyA9IG8udmFsdWU7XG4gICAgICAgIGlmICh0Lm5leHQocyksIHQuY2xvc2VkKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChhKSB7XG4gICAgICBuID0geyBlcnJvcjogYSB9O1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0cnkge1xuICAgICAgICBvICYmICFvLmRvbmUgJiYgKHIgPSBpLnJldHVybikgJiYgci5jYWxsKGkpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgaWYgKG4pIHRocm93IG4uZXJyb3I7XG4gICAgICB9XG4gICAgfVxuICAgIHQuY29tcGxldGUoKTtcbiAgfSk7XG59XG5mdW5jdGlvbiB2bihlKSB7XG4gIHJldHVybiBuZXcgTyhmdW5jdGlvbih0KSB7XG4gICAgcXIoZSwgdCkuY2F0Y2goZnVuY3Rpb24obikge1xuICAgICAgcmV0dXJuIHQuZXJyb3Iobik7XG4gICAgfSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gSnIoZSkge1xuICByZXR1cm4gdm4ocG4oZSkpO1xufVxuZnVuY3Rpb24gcXIoZSwgdCkge1xuICB2YXIgbiwgciwgaSwgbztcbiAgcmV0dXJuIFRyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbigpIHtcbiAgICB2YXIgcywgYTtcbiAgICByZXR1cm4gWHQodGhpcywgZnVuY3Rpb24oYykge1xuICAgICAgc3dpdGNoIChjLmxhYmVsKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICBjLnRyeXMucHVzaChbMCwgNSwgNiwgMTFdKSwgbiA9IFByKGUpLCBjLmxhYmVsID0gMTtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIHJldHVybiBbNCwgbi5uZXh0KCldO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgaWYgKHIgPSBjLnNlbnQoKSwgISFyLmRvbmUpIHJldHVybiBbMywgNF07XG4gICAgICAgICAgaWYgKHMgPSByLnZhbHVlLCB0Lm5leHQocyksIHQuY2xvc2VkKVxuICAgICAgICAgICAgcmV0dXJuIFsyXTtcbiAgICAgICAgICBjLmxhYmVsID0gMztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHJldHVybiBbMywgMV07XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICByZXR1cm4gWzMsIDExXTtcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgIHJldHVybiBhID0gYy5zZW50KCksIGkgPSB7IGVycm9yOiBhIH0sIFszLCAxMV07XG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICByZXR1cm4gYy50cnlzLnB1c2goWzYsICwgOSwgMTBdKSwgciAmJiAhci5kb25lICYmIChvID0gbi5yZXR1cm4pID8gWzQsIG8uY2FsbChuKV0gOiBbMywgOF07XG4gICAgICAgIGNhc2UgNzpcbiAgICAgICAgICBjLnNlbnQoKSwgYy5sYWJlbCA9IDg7XG4gICAgICAgIGNhc2UgODpcbiAgICAgICAgICByZXR1cm4gWzMsIDEwXTtcbiAgICAgICAgY2FzZSA5OlxuICAgICAgICAgIGlmIChpKSB0aHJvdyBpLmVycm9yO1xuICAgICAgICAgIHJldHVybiBbN107XG4gICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgcmV0dXJuIFs3XTtcbiAgICAgICAgY2FzZSAxMTpcbiAgICAgICAgICByZXR1cm4gdC5jb21wbGV0ZSgpLCBbMl07XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gWihlLCB0LCBuLCByLCBpKSB7XG4gIHIgPT09IHZvaWQgMCAmJiAociA9IDApLCBpID09PSB2b2lkIDAgJiYgKGkgPSAhMSk7XG4gIHZhciBvID0gdC5zY2hlZHVsZShmdW5jdGlvbigpIHtcbiAgICBuKCksIGkgPyBlLmFkZCh0aGlzLnNjaGVkdWxlKG51bGwsIHIpKSA6IHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgfSwgcik7XG4gIGlmIChlLmFkZChvKSwgIWkpXG4gICAgcmV0dXJuIG87XG59XG5mdW5jdGlvbiBtbihlLCB0KSB7XG4gIHJldHVybiB0ID09PSB2b2lkIDAgJiYgKHQgPSAwKSwgVihmdW5jdGlvbihuLCByKSB7XG4gICAgbi5zdWJzY3JpYmUoVyhyLCBmdW5jdGlvbihpKSB7XG4gICAgICByZXR1cm4gWihyLCBlLCBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHIubmV4dChpKTtcbiAgICAgIH0sIHQpO1xuICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFoociwgZSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiByLmNvbXBsZXRlKCk7XG4gICAgICB9LCB0KTtcbiAgICB9LCBmdW5jdGlvbihpKSB7XG4gICAgICByZXR1cm4gWihyLCBlLCBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHIuZXJyb3IoaSk7XG4gICAgICB9LCB0KTtcbiAgICB9KSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gZ24oZSwgdCkge1xuICByZXR1cm4gdCA9PT0gdm9pZCAwICYmICh0ID0gMCksIFYoZnVuY3Rpb24obiwgcikge1xuICAgIHIuYWRkKGUuc2NoZWR1bGUoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbi5zdWJzY3JpYmUocik7XG4gICAgfSwgdCkpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIFhyKGUsIHQpIHtcbiAgcmV0dXJuIFkoZSkucGlwZShnbih0KSwgbW4odCkpO1xufVxuZnVuY3Rpb24gWnIoZSwgdCkge1xuICByZXR1cm4gWShlKS5waXBlKGduKHQpLCBtbih0KSk7XG59XG5mdW5jdGlvbiBlaShlLCB0KSB7XG4gIHJldHVybiBuZXcgTyhmdW5jdGlvbihuKSB7XG4gICAgdmFyIHIgPSAwO1xuICAgIHJldHVybiB0LnNjaGVkdWxlKGZ1bmN0aW9uKCkge1xuICAgICAgciA9PT0gZS5sZW5ndGggPyBuLmNvbXBsZXRlKCkgOiAobi5uZXh0KGVbcisrXSksIG4uY2xvc2VkIHx8IHRoaXMuc2NoZWR1bGUoKSk7XG4gICAgfSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gdGkoZSwgdCkge1xuICByZXR1cm4gbmV3IE8oZnVuY3Rpb24obikge1xuICAgIHZhciByO1xuICAgIHJldHVybiBaKG4sIHQsIGZ1bmN0aW9uKCkge1xuICAgICAgciA9IGVbZm5dKCksIFoobiwgdCwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpLCBvLCBzO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGkgPSByLm5leHQoKSwgbyA9IGkudmFsdWUsIHMgPSBpLmRvbmU7XG4gICAgICAgIH0gY2F0Y2ggKGEpIHtcbiAgICAgICAgICBuLmVycm9yKGEpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzID8gbi5jb21wbGV0ZSgpIDogbi5uZXh0KG8pO1xuICAgICAgfSwgMCwgITApO1xuICAgIH0pLCBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBQKHIgPT0gbnVsbCA/IHZvaWQgMCA6IHIucmV0dXJuKSAmJiByLnJldHVybigpO1xuICAgIH07XG4gIH0pO1xufVxuZnVuY3Rpb24gYm4oZSwgdCkge1xuICBpZiAoIWUpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSXRlcmFibGUgY2Fubm90IGJlIG51bGxcIik7XG4gIHJldHVybiBuZXcgTyhmdW5jdGlvbihuKSB7XG4gICAgWihuLCB0LCBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByID0gZVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKTtcbiAgICAgIFoobiwgdCwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHIubmV4dCgpLnRoZW4oZnVuY3Rpb24oaSkge1xuICAgICAgICAgIGkuZG9uZSA/IG4uY29tcGxldGUoKSA6IG4ubmV4dChpLnZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgICB9LCAwLCAhMCk7XG4gICAgfSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gbmkoZSwgdCkge1xuICByZXR1cm4gYm4ocG4oZSksIHQpO1xufVxuZnVuY3Rpb24gcmkoZSwgdCkge1xuICBpZiAoZSAhPSBudWxsKSB7XG4gICAgaWYgKGNuKGUpKVxuICAgICAgcmV0dXJuIFhyKGUsIHQpO1xuICAgIGlmIChkdChlKSlcbiAgICAgIHJldHVybiBlaShlLCB0KTtcbiAgICBpZiAoYW4oZSkpXG4gICAgICByZXR1cm4gWnIoZSwgdCk7XG4gICAgaWYgKHVuKGUpKVxuICAgICAgcmV0dXJuIGJuKGUsIHQpO1xuICAgIGlmIChkbihlKSlcbiAgICAgIHJldHVybiB0aShlLCB0KTtcbiAgICBpZiAoaG4oZSkpXG4gICAgICByZXR1cm4gbmkoZSwgdCk7XG4gIH1cbiAgdGhyb3cgbG4oZSk7XG59XG5mdW5jdGlvbiBwdChlLCB0KSB7XG4gIHJldHVybiB0ID8gcmkoZSwgdCkgOiBZKGUpO1xufVxuZnVuY3Rpb24ga3QoKSB7XG4gIGZvciAodmFyIGUgPSBbXSwgdCA9IDA7IHQgPCBhcmd1bWVudHMubGVuZ3RoOyB0KyspXG4gICAgZVt0XSA9IGFyZ3VtZW50c1t0XTtcbiAgdmFyIG4gPSBCZShlKTtcbiAgcmV0dXJuIHB0KGUsIG4pO1xufVxuZnVuY3Rpb24gaWkoZSkge1xuICByZXR1cm4gZSBpbnN0YW5jZW9mIERhdGUgJiYgIWlzTmFOKGUpO1xufVxudmFyIG9pID0gY3QoZnVuY3Rpb24oZSkge1xuICByZXR1cm4gZnVuY3Rpb24obikge1xuICAgIG4gPT09IHZvaWQgMCAmJiAobiA9IG51bGwpLCBlKHRoaXMpLCB0aGlzLm1lc3NhZ2UgPSBcIlRpbWVvdXQgaGFzIG9jY3VycmVkXCIsIHRoaXMubmFtZSA9IFwiVGltZW91dEVycm9yXCIsIHRoaXMuaW5mbyA9IG47XG4gIH07XG59KTtcbmZ1bmN0aW9uIHNpKGUsIHQpIHtcbiAgdmFyIG4gPSBpaShlKSA/IHsgZmlyc3Q6IGUgfSA6IHR5cGVvZiBlID09IFwibnVtYmVyXCIgPyB7IGVhY2g6IGUgfSA6IGUsIHIgPSBuLmZpcnN0LCBpID0gbi5lYWNoLCBvID0gbi53aXRoLCBzID0gbyA9PT0gdm9pZCAwID8gYWkgOiBvLCBhID0gbi5zY2hlZHVsZXIsIGMgPSBhID09PSB2b2lkIDAgPyBXciA6IGEsIHUgPSBuLm1ldGEsIGwgPSB1ID09PSB2b2lkIDAgPyBudWxsIDogdTtcbiAgaWYgKHIgPT0gbnVsbCAmJiBpID09IG51bGwpXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk5vIHRpbWVvdXQgcHJvdmlkZWQuXCIpO1xuICByZXR1cm4gVihmdW5jdGlvbihmLCBoKSB7XG4gICAgdmFyIGQsIG0sIHAgPSBudWxsLCBnID0gMCwgdiA9IGZ1bmN0aW9uKFMpIHtcbiAgICAgIG0gPSBaKGgsIGMsIGZ1bmN0aW9uKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGQudW5zdWJzY3JpYmUoKSwgWShzKHtcbiAgICAgICAgICAgIG1ldGE6IGwsXG4gICAgICAgICAgICBsYXN0VmFsdWU6IHAsXG4gICAgICAgICAgICBzZWVuOiBnXG4gICAgICAgICAgfSkpLnN1YnNjcmliZShoKTtcbiAgICAgICAgfSBjYXRjaCAoaykge1xuICAgICAgICAgIGguZXJyb3Ioayk7XG4gICAgICAgIH1cbiAgICAgIH0sIFMpO1xuICAgIH07XG4gICAgZCA9IGYuc3Vic2NyaWJlKFcoaCwgZnVuY3Rpb24oUykge1xuICAgICAgbSA9PSBudWxsIHx8IG0udW5zdWJzY3JpYmUoKSwgZysrLCBoLm5leHQocCA9IFMpLCBpID4gMCAmJiB2KGkpO1xuICAgIH0sIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbigpIHtcbiAgICAgIG0gIT0gbnVsbCAmJiBtLmNsb3NlZCB8fCBtID09IG51bGwgfHwgbS51bnN1YnNjcmliZSgpLCBwID0gbnVsbDtcbiAgICB9KSksICFnICYmIHYociAhPSBudWxsID8gdHlwZW9mIHIgPT0gXCJudW1iZXJcIiA/IHIgOiArciAtIGMubm93KCkgOiBpKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBhaShlKSB7XG4gIHRocm93IG5ldyBvaShlKTtcbn1cbmZ1bmN0aW9uIEEoZSwgdCkge1xuICByZXR1cm4gVihmdW5jdGlvbihuLCByKSB7XG4gICAgdmFyIGkgPSAwO1xuICAgIG4uc3Vic2NyaWJlKFcociwgZnVuY3Rpb24obykge1xuICAgICAgci5uZXh0KGUuY2FsbCh0LCBvLCBpKyspKTtcbiAgICB9KSk7XG4gIH0pO1xufVxudmFyIGNpID0gQXJyYXkuaXNBcnJheTtcbmZ1bmN0aW9uIHVpKGUsIHQpIHtcbiAgcmV0dXJuIGNpKHQpID8gZS5hcHBseSh2b2lkIDAsIFNlKFtdLCBoZSh0KSkpIDogZSh0KTtcbn1cbmZ1bmN0aW9uIGxpKGUpIHtcbiAgcmV0dXJuIEEoZnVuY3Rpb24odCkge1xuICAgIHJldHVybiB1aShlLCB0KTtcbiAgfSk7XG59XG5mdW5jdGlvbiBmaShlLCB0LCBuLCByLCBpLCBvLCBzLCBhKSB7XG4gIHZhciBjID0gW10sIHUgPSAwLCBsID0gMCwgZiA9ICExLCBoID0gZnVuY3Rpb24oKSB7XG4gICAgZiAmJiAhYy5sZW5ndGggJiYgIXUgJiYgdC5jb21wbGV0ZSgpO1xuICB9LCBkID0gZnVuY3Rpb24ocCkge1xuICAgIHJldHVybiB1IDwgciA/IG0ocCkgOiBjLnB1c2gocCk7XG4gIH0sIG0gPSBmdW5jdGlvbihwKSB7XG4gICAgdSsrO1xuICAgIHZhciBnID0gITE7XG4gICAgWShuKHAsIGwrKykpLnN1YnNjcmliZShXKHQsIGZ1bmN0aW9uKHYpIHtcbiAgICAgIHQubmV4dCh2KTtcbiAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgIGcgPSAhMDtcbiAgICB9LCB2b2lkIDAsIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGcpXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdS0tO1xuICAgICAgICAgIGZvciAodmFyIHYgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBTID0gYy5zaGlmdCgpO1xuICAgICAgICAgICAgcyB8fCBtKFMpO1xuICAgICAgICAgIH07IGMubGVuZ3RoICYmIHUgPCByOyApXG4gICAgICAgICAgICB2KCk7XG4gICAgICAgICAgaCgpO1xuICAgICAgICB9IGNhdGNoIChTKSB7XG4gICAgICAgICAgdC5lcnJvcihTKTtcbiAgICAgICAgfVxuICAgIH0pKTtcbiAgfTtcbiAgcmV0dXJuIGUuc3Vic2NyaWJlKFcodCwgZCwgZnVuY3Rpb24oKSB7XG4gICAgZiA9ICEwLCBoKCk7XG4gIH0pKSwgZnVuY3Rpb24oKSB7XG4gIH07XG59XG5mdW5jdGlvbiBodChlLCB0LCBuKSB7XG4gIHJldHVybiBuID09PSB2b2lkIDAgJiYgKG4gPSAxIC8gMCksIFAodCkgPyBodChmdW5jdGlvbihyLCBpKSB7XG4gICAgcmV0dXJuIEEoZnVuY3Rpb24obywgcykge1xuICAgICAgcmV0dXJuIHQociwgbywgaSwgcyk7XG4gICAgfSkoWShlKHIsIGkpKSk7XG4gIH0sIG4pIDogKHR5cGVvZiB0ID09IFwibnVtYmVyXCIgJiYgKG4gPSB0KSwgVihmdW5jdGlvbihyLCBpKSB7XG4gICAgcmV0dXJuIGZpKHIsIGksIGUsIG4pO1xuICB9KSk7XG59XG5mdW5jdGlvbiB5bihlKSB7XG4gIHJldHVybiBlID09PSB2b2lkIDAgJiYgKGUgPSAxIC8gMCksIGh0KGZ0LCBlKTtcbn1cbmZ1bmN0aW9uIGRpKCkge1xuICByZXR1cm4geW4oMSk7XG59XG5mdW5jdGlvbiBEZSgpIHtcbiAgZm9yICh2YXIgZSA9IFtdLCB0ID0gMDsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKylcbiAgICBlW3RdID0gYXJndW1lbnRzW3RdO1xuICByZXR1cm4gZGkoKShwdChlLCBCZShlKSkpO1xufVxudmFyIHBpID0gW1wiYWRkTGlzdGVuZXJcIiwgXCJyZW1vdmVMaXN0ZW5lclwiXSwgaGkgPSBbXCJhZGRFdmVudExpc3RlbmVyXCIsIFwicmVtb3ZlRXZlbnRMaXN0ZW5lclwiXSwgdmkgPSBbXCJvblwiLCBcIm9mZlwiXTtcbmZ1bmN0aW9uIHR0KGUsIHQsIG4sIHIpIHtcbiAgaWYgKFAobikgJiYgKHIgPSBuLCBuID0gdm9pZCAwKSwgcilcbiAgICByZXR1cm4gdHQoZSwgdCwgbikucGlwZShsaShyKSk7XG4gIHZhciBpID0gaGUoYmkoZSkgPyBoaS5tYXAoZnVuY3Rpb24oYSkge1xuICAgIHJldHVybiBmdW5jdGlvbihjKSB7XG4gICAgICByZXR1cm4gZVthXSh0LCBjLCBuKTtcbiAgICB9O1xuICB9KSA6IG1pKGUpID8gcGkubWFwKE90KGUsIHQpKSA6IGdpKGUpID8gdmkubWFwKE90KGUsIHQpKSA6IFtdLCAyKSwgbyA9IGlbMF0sIHMgPSBpWzFdO1xuICBpZiAoIW8gJiYgZHQoZSkpXG4gICAgcmV0dXJuIGh0KGZ1bmN0aW9uKGEpIHtcbiAgICAgIHJldHVybiB0dChhLCB0LCBuKTtcbiAgICB9KShZKGUpKTtcbiAgaWYgKCFvKVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGV2ZW50IHRhcmdldFwiKTtcbiAgcmV0dXJuIG5ldyBPKGZ1bmN0aW9uKGEpIHtcbiAgICB2YXIgYyA9IGZ1bmN0aW9uKCkge1xuICAgICAgZm9yICh2YXIgdSA9IFtdLCBsID0gMDsgbCA8IGFyZ3VtZW50cy5sZW5ndGg7IGwrKylcbiAgICAgICAgdVtsXSA9IGFyZ3VtZW50c1tsXTtcbiAgICAgIHJldHVybiBhLm5leHQoMSA8IHUubGVuZ3RoID8gdSA6IHVbMF0pO1xuICAgIH07XG4gICAgcmV0dXJuIG8oYyksIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHMoYyk7XG4gICAgfTtcbiAgfSk7XG59XG5mdW5jdGlvbiBPdChlLCB0KSB7XG4gIHJldHVybiBmdW5jdGlvbihuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHIpIHtcbiAgICAgIHJldHVybiBlW25dKHQsIHIpO1xuICAgIH07XG4gIH07XG59XG5mdW5jdGlvbiBtaShlKSB7XG4gIHJldHVybiBQKGUuYWRkTGlzdGVuZXIpICYmIFAoZS5yZW1vdmVMaXN0ZW5lcik7XG59XG5mdW5jdGlvbiBnaShlKSB7XG4gIHJldHVybiBQKGUub24pICYmIFAoZS5vZmYpO1xufVxuZnVuY3Rpb24gYmkoZSkge1xuICByZXR1cm4gUChlLmFkZEV2ZW50TGlzdGVuZXIpICYmIFAoZS5yZW1vdmVFdmVudExpc3RlbmVyKTtcbn1cbmZ1bmN0aW9uIHlpKCkge1xuICBmb3IgKHZhciBlID0gW10sIHQgPSAwOyB0IDwgYXJndW1lbnRzLmxlbmd0aDsgdCsrKVxuICAgIGVbdF0gPSBhcmd1bWVudHNbdF07XG4gIHZhciBuID0gQmUoZSksIHIgPSBIcihlLCAxIC8gMCksIGkgPSBlO1xuICByZXR1cm4gaS5sZW5ndGggPyBpLmxlbmd0aCA9PT0gMSA/IFkoaVswXSkgOiB5bihyKShwdChpLCBuKSkgOiBCcjtcbn1cbmZ1bmN0aW9uIHZ0KGUsIHQpIHtcbiAgcmV0dXJuIFYoZnVuY3Rpb24obiwgcikge1xuICAgIHZhciBpID0gMDtcbiAgICBuLnN1YnNjcmliZShXKHIsIGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiBlLmNhbGwodCwgbywgaSsrKSAmJiByLm5leHQobyk7XG4gICAgfSkpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHdpKGUsIHQsIG4sIHIsIGkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKG8sIHMpIHtcbiAgICB2YXIgYSA9IG4sIGMgPSB0LCB1ID0gMDtcbiAgICBvLnN1YnNjcmliZShXKHMsIGZ1bmN0aW9uKGwpIHtcbiAgICAgIHZhciBmID0gdSsrO1xuICAgICAgYyA9IGEgPyBlKGMsIGwsIGYpIDogKGEgPSAhMCwgbCksIHMubmV4dChjKTtcbiAgICB9LCBpKSk7XG4gIH07XG59XG5mdW5jdGlvbiBTaShlLCB0KSB7XG4gIHJldHVybiB0ID09PSB2b2lkIDAgJiYgKHQgPSBmdCksIGUgPSBlID8/IHhpLCBWKGZ1bmN0aW9uKG4sIHIpIHtcbiAgICB2YXIgaSwgbyA9ICEwO1xuICAgIG4uc3Vic2NyaWJlKFcociwgZnVuY3Rpb24ocykge1xuICAgICAgdmFyIGEgPSB0KHMpO1xuICAgICAgKG8gfHwgIWUoaSwgYSkpICYmIChvID0gITEsIGkgPSBhLCByLm5leHQocykpO1xuICAgIH0pKTtcbiAgfSk7XG59XG5mdW5jdGlvbiB4aShlLCB0KSB7XG4gIHJldHVybiBlID09PSB0O1xufVxuZnVuY3Rpb24gRWkoZSkge1xuICByZXR1cm4gVihmdW5jdGlvbih0LCBuKSB7XG4gICAgdHJ5IHtcbiAgICAgIHQuc3Vic2NyaWJlKG4pO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBuLmFkZChlKTtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gVGkoZSwgdCkge1xuICByZXR1cm4gVih3aShlLCB0LCBhcmd1bWVudHMubGVuZ3RoID49IDIsICEwKSk7XG59XG5mdW5jdGlvbiBDaShlKSB7XG4gIHJldHVybiBWKGZ1bmN0aW9uKHQsIG4pIHtcbiAgICB2YXIgciA9ICExLCBpID0gVyhuLCBmdW5jdGlvbigpIHtcbiAgICAgIGkgPT0gbnVsbCB8fCBpLnVuc3Vic2NyaWJlKCksIHIgPSAhMDtcbiAgICB9LCBJZSk7XG4gICAgWShlKS5zdWJzY3JpYmUoaSksIHQuc3Vic2NyaWJlKFcobiwgZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuIHIgJiYgbi5uZXh0KG8pO1xuICAgIH0pKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBNKCkge1xuICBmb3IgKHZhciBlID0gW10sIHQgPSAwOyB0IDwgYXJndW1lbnRzLmxlbmd0aDsgdCsrKVxuICAgIGVbdF0gPSBhcmd1bWVudHNbdF07XG4gIHZhciBuID0gQmUoZSk7XG4gIHJldHVybiBWKGZ1bmN0aW9uKHIsIGkpIHtcbiAgICAobiA/IERlKGUsIHIsIG4pIDogRGUoZSwgcikpLnN1YnNjcmliZShpKTtcbiAgfSk7XG59XG5mdW5jdGlvbiB3bihlLCB0KSB7XG4gIHJldHVybiBWKGZ1bmN0aW9uKG4sIHIpIHtcbiAgICB2YXIgaSA9IG51bGwsIG8gPSAwLCBzID0gITEsIGEgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBzICYmICFpICYmIHIuY29tcGxldGUoKTtcbiAgICB9O1xuICAgIG4uc3Vic2NyaWJlKFcociwgZnVuY3Rpb24oYykge1xuICAgICAgaSA9PSBudWxsIHx8IGkudW5zdWJzY3JpYmUoKTtcbiAgICAgIHZhciB1ID0gMCwgbCA9IG8rKztcbiAgICAgIFkoZShjLCBsKSkuc3Vic2NyaWJlKGkgPSBXKHIsIGZ1bmN0aW9uKGYpIHtcbiAgICAgICAgcmV0dXJuIHIubmV4dCh0ID8gdChjLCBmLCBsLCB1KyspIDogZik7XG4gICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgaSA9IG51bGwsIGEoKTtcbiAgICAgIH0pKTtcbiAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgIHMgPSAhMCwgYSgpO1xuICAgIH0pKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBMdChlKSB7XG4gIHJldHVybiBWKGZ1bmN0aW9uKHQsIG4pIHtcbiAgICBZKGUpLnN1YnNjcmliZShXKG4sIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG4uY29tcGxldGUoKTtcbiAgICB9LCBJZSkpLCAhbi5jbG9zZWQgJiYgdC5zdWJzY3JpYmUobik7XG4gIH0pO1xufVxudmFyIFBpID0gT2JqZWN0LmRlZmluZVByb3BlcnR5LCBBaSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzLCBraSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzLCBfdCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsIE9pID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSwgTGkgPSBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLCBJdCA9IChlLCB0LCBuKSA9PiB0IGluIGUgPyBQaShlLCB0LCB7IGVudW1lcmFibGU6ICEwLCBjb25maWd1cmFibGU6ICEwLCB3cml0YWJsZTogITAsIHZhbHVlOiBuIH0pIDogZVt0XSA9IG4sIEsgPSAoZSwgdCkgPT4ge1xuICBmb3IgKHZhciBuIGluIHQgfHwgKHQgPSB7fSkpXG4gICAgT2kuY2FsbCh0LCBuKSAmJiBJdChlLCBuLCB0W25dKTtcbiAgaWYgKF90KVxuICAgIGZvciAodmFyIG4gb2YgX3QodCkpXG4gICAgICBMaS5jYWxsKHQsIG4pICYmIEl0KGUsIG4sIHRbbl0pO1xuICByZXR1cm4gZTtcbn0sIHllID0gKGUsIHQpID0+IEFpKGUsIGtpKHQpKSwgQiA9IChlLCB0LCBuKSA9PiBuZXcgUHJvbWlzZSgociwgaSkgPT4ge1xuICB2YXIgbyA9IChjKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGEobi5uZXh0KGMpKTtcbiAgICB9IGNhdGNoICh1KSB7XG4gICAgICBpKHUpO1xuICAgIH1cbiAgfSwgcyA9IChjKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGEobi50aHJvdyhjKSk7XG4gICAgfSBjYXRjaCAodSkge1xuICAgICAgaSh1KTtcbiAgICB9XG4gIH0sIGEgPSAoYykgPT4gYy5kb25lID8gcihjLnZhbHVlKSA6IFByb21pc2UucmVzb2x2ZShjLnZhbHVlKS50aGVuKG8sIHMpO1xuICBhKChuID0gbi5hcHBseShlLCB0KSkubmV4dCgpKTtcbn0pLCBTbiA9IFwibGtcIjtcbmZ1bmN0aW9uIGooZSkge1xuICByZXR1cm4gdHlwZW9mIGUgPiBcInVcIiA/ICExIDogX2koZSkgfHwgSWkoZSk7XG59XG5mdW5jdGlvbiBfaShlKSB7XG4gIHZhciB0O1xuICByZXR1cm4gZSA/IGUuaGFzT3duUHJvcGVydHkoXCJwYXJ0aWNpcGFudFwiKSAmJiBlLmhhc093blByb3BlcnR5KFwic291cmNlXCIpICYmIGUuaGFzT3duUHJvcGVydHkoXCJ0cmFja1wiKSAmJiB0eXBlb2YgKCh0ID0gZS5wdWJsaWNhdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IHQudHJhY2spIDwgXCJ1XCIgOiAhMTtcbn1cbmZ1bmN0aW9uIElpKGUpIHtcbiAgcmV0dXJuIGUgPyBlLmhhc093blByb3BlcnR5KFwicGFydGljaXBhbnRcIikgJiYgZS5oYXNPd25Qcm9wZXJ0eShcInNvdXJjZVwiKSAmJiBlLmhhc093blByb3BlcnR5KFwicHVibGljYXRpb25cIikgJiYgdHlwZW9mIGUucHVibGljYXRpb24gPCBcInVcIiA6ICExO1xufVxuZnVuY3Rpb24geGUoZSkge1xuICByZXR1cm4gZSA/IGUuaGFzT3duUHJvcGVydHkoXCJwYXJ0aWNpcGFudFwiKSAmJiBlLmhhc093blByb3BlcnR5KFwic291cmNlXCIpICYmIHR5cGVvZiBlLnB1YmxpY2F0aW9uID4gXCJ1XCIgOiAhMTtcbn1cbmZ1bmN0aW9uICQoZSkge1xuICBpZiAodHlwZW9mIGUgPT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgZSA9PSBcIm51bWJlclwiKVxuICAgIHJldHVybiBgJHtlfWA7XG4gIGlmICh4ZShlKSlcbiAgICByZXR1cm4gYCR7ZS5wYXJ0aWNpcGFudC5pZGVudGl0eX1fJHtlLnNvdXJjZX1fcGxhY2Vob2xkZXJgO1xuICBpZiAoaihlKSlcbiAgICByZXR1cm4gYCR7ZS5wYXJ0aWNpcGFudC5pZGVudGl0eX1fJHtlLnB1YmxpY2F0aW9uLnNvdXJjZX1fJHtlLnB1YmxpY2F0aW9uLnRyYWNrU2lkfWA7XG4gIHRocm93IG5ldyBFcnJvcihgQ2FuJ3QgZ2VuZXJhdGUgYSBpZCBmb3IgdGhlIGdpdmVuIHRyYWNrIHJlZmVyZW5jZTogJHtlfWApO1xufVxuZnVuY3Rpb24gUG8oZSwgdCkge1xuICByZXR1cm4gZSA9PT0gdm9pZCAwIHx8IHQgPT09IHZvaWQgMCA/ICExIDogaihlKSAmJiBqKHQpID8gZS5wdWJsaWNhdGlvbi50cmFja1NpZCA9PT0gdC5wdWJsaWNhdGlvbi50cmFja1NpZCA6ICQoZSkgPT09ICQodCk7XG59XG5mdW5jdGlvbiBBbyhlLCB0KSB7XG4gIHJldHVybiB0eXBlb2YgdCA+IFwidVwiID8gITEgOiBqKGUpID8gdC5zb21lKFxuICAgIChuKSA9PiBuLnBhcnRpY2lwYW50LmlkZW50aXR5ID09PSBlLnBhcnRpY2lwYW50LmlkZW50aXR5ICYmIGoobikgJiYgbi5wdWJsaWNhdGlvbi50cmFja1NpZCA9PT0gZS5wdWJsaWNhdGlvbi50cmFja1NpZFxuICApIDogeGUoZSkgPyB0LnNvbWUoXG4gICAgKG4pID0+IG4ucGFydGljaXBhbnQuaWRlbnRpdHkgPT09IGUucGFydGljaXBhbnQuaWRlbnRpdHkgJiYgeGUobikgJiYgbi5zb3VyY2UgPT09IGUuc291cmNlXG4gICkgOiAhMTtcbn1cbmZ1bmN0aW9uIERpKGUsIHQpIHtcbiAgcmV0dXJuIHhlKGUpICYmIGoodCkgJiYgdC5wYXJ0aWNpcGFudC5pZGVudGl0eSA9PT0gZS5wYXJ0aWNpcGFudC5pZGVudGl0eSAmJiB0LnNvdXJjZSA9PT0gZS5zb3VyY2U7XG59XG5mdW5jdGlvbiBrbyhlKSB7XG4gIHJldHVybiBlIGluc3RhbmNlb2Ygb3Q7XG59XG5mdW5jdGlvbiBPbygpIHtcbiAgY29uc3QgZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICBlLnN0eWxlLndpZHRoID0gXCIxMDAlXCIsIGUuc3R5bGUuaGVpZ2h0ID0gXCIyMDBweFwiO1xuICBjb25zdCB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgdC5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIiwgdC5zdHlsZS50b3AgPSBcIjBweFwiLCB0LnN0eWxlLmxlZnQgPSBcIjBweFwiLCB0LnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiLCB0LnN0eWxlLndpZHRoID0gXCIyMDBweFwiLCB0LnN0eWxlLmhlaWdodCA9IFwiMTUwcHhcIiwgdC5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCIsIHQuYXBwZW5kQ2hpbGQoZSksIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodCk7XG4gIGNvbnN0IG4gPSBlLm9mZnNldFdpZHRoO1xuICB0LnN0eWxlLm92ZXJmbG93ID0gXCJzY3JvbGxcIjtcbiAgbGV0IHIgPSBlLm9mZnNldFdpZHRoO1xuICByZXR1cm4gbiA9PT0gciAmJiAociA9IHQuY2xpZW50V2lkdGgpLCBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHQpLCBuIC0gcjtcbn1cbmZ1bmN0aW9uIExvKCkge1xuICByZXR1cm4gdHlwZW9mIGRvY3VtZW50IDwgXCJ1XCI7XG59XG5mdW5jdGlvbiBNaShlKSB7XG4gIGUgPSBLKHt9LCBlKTtcbiAgY29uc3QgdCA9IFwiKD86KD86W2Etel0rOik/Ly8pP1wiLCBuID0gXCIoPzpcXFxcUysoPzo6XFxcXFMqKT9AKT9cIiwgciA9IG5ldyBSZWdFeHAoXG4gICAgXCIoPzoyNVswLTVdfDJbMC00XVxcXFxkfDFcXFxcZFxcXFxkfFsxLTldXFxcXGR8XFxcXGQpKD86XFxcXC4oPzoyNVswLTVdfDJbMC00XVxcXFxkfDFcXFxcZFxcXFxkfFsxLTldXFxcXGR8XFxcXGQpKXszfVwiLFxuICAgIFwiZ1wiXG4gICkuc291cmNlLCB1ID0gYCg/OiR7dH18d3d3XFxcXC4pJHtufSg/OmxvY2FsaG9zdHwke3J9fCg/Oig/OlthLXpcXFxcdTAwYTEtXFxcXHVmZmZmMC05XVstX10qKSpbYS16XFxcXHUwMGExLVxcXFx1ZmZmZjAtOV0rKSg/OlxcXFwuKD86W2EtelxcXFx1MDBhMS1cXFxcdWZmZmYwLTldLSopKlthLXpcXFxcdTAwYTEtXFxcXHVmZmZmMC05XSspKig/OlxcXFwuKD86W2EtelxcXFx1MDBhMS1cXFxcdWZmZmZdezIsfSkpXFxcXC4/KSg/OjpcXFxcZHsyLDV9KT8oPzpbLz8jXVteXFxcXHNcIl0qKT9gO1xuICByZXR1cm4gZS5leGFjdCA/IG5ldyBSZWdFeHAoYCg/Ol4ke3V9JClgLCBcImlcIikgOiBuZXcgUmVnRXhwKHUsIFwiaWdcIik7XG59XG52YXIgRHQgPSBcIlteXFxcXC5cXFxcc0A6XSg/OlteXFxcXHNAOl0qW15cXFxcc0A6XFxcXC5dKT9AW15cXFxcLlxcXFxzQF0rKD86XFxcXC5bXlxcXFwuXFxcXHNAXSspKlwiO1xuZnVuY3Rpb24gUmkoeyBleGFjdDogZSB9ID0ge30pIHtcbiAgcmV0dXJuIGUgPyBuZXcgUmVnRXhwKGBeJHtEdH0kYCkgOiBuZXcgUmVnRXhwKER0LCBcImdcIik7XG59XG5mdW5jdGlvbiBfbyhlLCB0KSB7XG4gIHJldHVybiBCKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgY29uc3QgeyB4OiBuLCB5OiByIH0gPSB5aWVsZCB5cihlLCB0LCB7XG4gICAgICBwbGFjZW1lbnQ6IFwidG9wXCIsXG4gICAgICBtaWRkbGV3YXJlOiBbbXIoNiksIGJyKCksIGdyKHsgcGFkZGluZzogNSB9KV1cbiAgICB9KTtcbiAgICByZXR1cm4geyB4OiBuLCB5OiByIH07XG4gIH0pO1xufVxuZnVuY3Rpb24gSW8oZSwgdCkge1xuICByZXR1cm4gIWUuY29udGFpbnModC50YXJnZXQpO1xufVxudmFyIERvID0gKCkgPT4gKHtcbiAgZW1haWw6IFJpKCksXG4gIHVybDogTWkoe30pXG59KTtcbmZ1bmN0aW9uIE1vKGUsIHQpIHtcbiAgY29uc3QgbiA9IE9iamVjdC5lbnRyaWVzKHQpLm1hcChcbiAgICAoW28sIHNdLCBhKSA9PiBBcnJheS5mcm9tKGUubWF0Y2hBbGwocykpLm1hcCgoeyBpbmRleDogYywgMDogdSB9KSA9PiAoe1xuICAgICAgdHlwZTogbyxcbiAgICAgIHdlaWdodDogYSxcbiAgICAgIGNvbnRlbnQ6IHUsXG4gICAgICBpbmRleDogYyA/PyAwXG4gICAgfSkpXG4gICkuZmxhdCgpLnNvcnQoKG8sIHMpID0+IHtcbiAgICBjb25zdCBhID0gby5pbmRleCAtIHMuaW5kZXg7XG4gICAgcmV0dXJuIGEgIT09IDAgPyBhIDogby53ZWlnaHQgLSBzLndlaWdodDtcbiAgfSkuZmlsdGVyKCh7IGluZGV4OiBvIH0sIHMsIGEpID0+IHtcbiAgICBpZiAocyA9PT0gMCkgcmV0dXJuICEwO1xuICAgIGNvbnN0IGMgPSBhW3MgLSAxXTtcbiAgICByZXR1cm4gYy5pbmRleCArIGMuY29udGVudC5sZW5ndGggPD0gbztcbiAgfSksIHIgPSBbXTtcbiAgbGV0IGkgPSAwO1xuICBmb3IgKGNvbnN0IHsgdHlwZTogbywgY29udGVudDogcywgaW5kZXg6IGEgfSBvZiBuKVxuICAgIGEgPiBpICYmIHIucHVzaChlLnN1YnN0cmluZyhpLCBhKSksIHIucHVzaCh7IHR5cGU6IG8sIGNvbnRlbnQ6IHMgfSksIGkgPSBhICsgcy5sZW5ndGg7XG4gIHJldHVybiBlLmxlbmd0aCA+IGkgJiYgci5wdXNoKGUuc3Vic3RyaW5nKGkpKSwgcjtcbn1cbnZhciBOaSA9IFtcbiAgYi5Db25uZWN0aW9uU3RhdGVDaGFuZ2VkLFxuICBiLlJvb21NZXRhZGF0YUNoYW5nZWQsXG4gIGIuQWN0aXZlU3BlYWtlcnNDaGFuZ2VkLFxuICBiLkNvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZCxcbiAgYi5QYXJ0aWNpcGFudENvbm5lY3RlZCxcbiAgYi5QYXJ0aWNpcGFudERpc2Nvbm5lY3RlZCxcbiAgYi5QYXJ0aWNpcGFudFBlcm1pc3Npb25zQ2hhbmdlZCxcbiAgYi5QYXJ0aWNpcGFudE1ldGFkYXRhQ2hhbmdlZCxcbiAgYi5QYXJ0aWNpcGFudE5hbWVDaGFuZ2VkLFxuICBiLlBhcnRpY2lwYW50QXR0cmlidXRlc0NoYW5nZWQsXG4gIGIuVHJhY2tNdXRlZCxcbiAgYi5UcmFja1VubXV0ZWQsXG4gIGIuVHJhY2tQdWJsaXNoZWQsXG4gIGIuVHJhY2tVbnB1Ymxpc2hlZCxcbiAgYi5UcmFja1N0cmVhbVN0YXRlQ2hhbmdlZCxcbiAgYi5UcmFja1N1YnNjcmlwdGlvbkZhaWxlZCxcbiAgYi5UcmFja1N1YnNjcmlwdGlvblBlcm1pc3Npb25DaGFuZ2VkLFxuICBiLlRyYWNrU3Vic2NyaXB0aW9uU3RhdHVzQ2hhbmdlZFxuXSwgeG4gPSBbXG4gIC4uLk5pLFxuICBiLkxvY2FsVHJhY2tQdWJsaXNoZWQsXG4gIGIuTG9jYWxUcmFja1VucHVibGlzaGVkXG5dLCAkaSA9IFtcbiAgeS5UcmFja1B1Ymxpc2hlZCxcbiAgeS5UcmFja1VucHVibGlzaGVkLFxuICB5LlRyYWNrTXV0ZWQsXG4gIHkuVHJhY2tVbm11dGVkLFxuICB5LlRyYWNrU3RyZWFtU3RhdGVDaGFuZ2VkLFxuICB5LlRyYWNrU3Vic2NyaWJlZCxcbiAgeS5UcmFja1Vuc3Vic2NyaWJlZCxcbiAgeS5UcmFja1N1YnNjcmlwdGlvblBlcm1pc3Npb25DaGFuZ2VkLFxuICB5LlRyYWNrU3Vic2NyaXB0aW9uRmFpbGVkLFxuICB5LkxvY2FsVHJhY2tQdWJsaXNoZWQsXG4gIHkuTG9jYWxUcmFja1VucHVibGlzaGVkXG5dLCBVaSA9IFtcbiAgeS5Db25uZWN0aW9uUXVhbGl0eUNoYW5nZWQsXG4gIHkuSXNTcGVha2luZ0NoYW5nZWQsXG4gIHkuUGFydGljaXBhbnRNZXRhZGF0YUNoYW5nZWQsXG4gIHkuUGFydGljaXBhbnRQZXJtaXNzaW9uc0NoYW5nZWQsXG4gIHkuVHJhY2tNdXRlZCxcbiAgeS5UcmFja1VubXV0ZWQsXG4gIHkuVHJhY2tQdWJsaXNoZWQsXG4gIHkuVHJhY2tVbnB1Ymxpc2hlZCxcbiAgeS5UcmFja1N0cmVhbVN0YXRlQ2hhbmdlZCxcbiAgeS5UcmFja1N1YnNjcmlwdGlvbkZhaWxlZCxcbiAgeS5UcmFja1N1YnNjcmlwdGlvblBlcm1pc3Npb25DaGFuZ2VkLFxuICB5LlRyYWNrU3Vic2NyaXB0aW9uU3RhdHVzQ2hhbmdlZFxuXSwgRW4gPSBbXG4gIC4uLlVpLFxuICB5LkxvY2FsVHJhY2tQdWJsaXNoZWQsXG4gIHkuTG9jYWxUcmFja1VucHVibGlzaGVkXG5dLCBMID0gRXIuZ2V0TG9nZ2VyKFwibGstY29tcG9uZW50cy1qc1wiKTtcbkwuc2V0RGVmYXVsdExldmVsKFwiV0FSTlwiKTtcbmZ1bmN0aW9uIFJvKGUsIHQgPSB7fSkge1xuICB2YXIgbjtcbiAgTC5zZXRMZXZlbChlKSwgRm4oKG4gPSB0LmxpdmVLaXRDbGllbnRMb2dMZXZlbCkgIT0gbnVsbCA/IG4gOiBlKTtcbn1cbmZ1bmN0aW9uIE5vKGUsIHQgPSB7fSkge1xuICB2YXIgbjtcbiAgY29uc3QgciA9IEwubWV0aG9kRmFjdG9yeTtcbiAgTC5tZXRob2RGYWN0b3J5ID0gKGksIG8sIHMpID0+IHtcbiAgICBjb25zdCBhID0gcihpLCBvLCBzKSwgYyA9IG10W2ldLCB1ID0gYyA+PSBvICYmIGMgPCBtdC5zaWxlbnQ7XG4gICAgcmV0dXJuIChsLCBmKSA9PiB7XG4gICAgICBmID8gYShsLCBmKSA6IGEobCksIHUgJiYgZShjLCBsLCBmKTtcbiAgICB9O1xuICB9LCBMLnNldExldmVsKEwuZ2V0TGV2ZWwoKSksIGpuKChuID0gdC5saXZlS2l0Q2xpZW50TG9nRXh0ZW5zaW9uKSAhPSBudWxsID8gbiA6IGUpO1xufVxudmFyICRvID0gW1xuICB7XG4gICAgY29sdW1uczogMSxcbiAgICByb3dzOiAxXG4gIH0sXG4gIHtcbiAgICBjb2x1bW5zOiAxLFxuICAgIHJvd3M6IDIsXG4gICAgb3JpZW50YXRpb246IFwicG9ydHJhaXRcIlxuICB9LFxuICB7XG4gICAgY29sdW1uczogMixcbiAgICByb3dzOiAxLFxuICAgIG9yaWVudGF0aW9uOiBcImxhbmRzY2FwZVwiXG4gIH0sXG4gIHtcbiAgICBjb2x1bW5zOiAyLFxuICAgIHJvd3M6IDIsXG4gICAgbWluV2lkdGg6IDU2MFxuICB9LFxuICB7XG4gICAgY29sdW1uczogMyxcbiAgICByb3dzOiAzLFxuICAgIG1pbldpZHRoOiA3MDBcbiAgfSxcbiAge1xuICAgIGNvbHVtbnM6IDQsXG4gICAgcm93czogNCxcbiAgICBtaW5XaWR0aDogOTYwXG4gIH0sXG4gIHtcbiAgICBjb2x1bW5zOiA1LFxuICAgIHJvd3M6IDUsXG4gICAgbWluV2lkdGg6IDExMDBcbiAgfVxuXTtcbmZ1bmN0aW9uIEZpKGUsIHQsIG4sIHIpIHtcbiAgaWYgKGUubGVuZ3RoIDwgMSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJBdCBsZWFzdCBvbmUgZ3JpZCBsYXlvdXQgZGVmaW5pdGlvbiBtdXN0IGJlIHByb3ZpZGVkLlwiKTtcbiAgY29uc3QgaSA9IGppKGUpO1xuICBpZiAobiA8PSAwIHx8IHIgPD0gMClcbiAgICByZXR1cm4gaVswXTtcbiAgbGV0IG8gPSAwO1xuICBjb25zdCBzID0gbiAvIHIgPiAxID8gXCJsYW5kc2NhcGVcIiA6IFwicG9ydHJhaXRcIjtcbiAgbGV0IGEgPSBpLmZpbmQoKGMsIHUsIGwpID0+IHtcbiAgICBvID0gdTtcbiAgICBjb25zdCBmID0gbC5maW5kSW5kZXgoKGgsIGQpID0+IHtcbiAgICAgIGNvbnN0IG0gPSAhaC5vcmllbnRhdGlvbiB8fCBoLm9yaWVudGF0aW9uID09PSBzLCBwID0gZCA+IHUsIGcgPSBoLm1heFRpbGVzID09PSBjLm1heFRpbGVzO1xuICAgICAgcmV0dXJuIHAgJiYgZyAmJiBtO1xuICAgIH0pICE9PSAtMTtcbiAgICByZXR1cm4gYy5tYXhUaWxlcyA+PSB0ICYmICFmO1xuICB9KTtcbiAgaWYgKGEgPT09IHZvaWQgMClcbiAgICBpZiAoYSA9IGlbaS5sZW5ndGggLSAxXSwgYSlcbiAgICAgIEwud2FybihcbiAgICAgICAgYE5vIGxheW91dCBmb3VuZCBmb3I6IHBhcnRpY2lwYW50Q291bnQ6ICR7dH0sIHdpZHRoL2hlaWdodDogJHtufS8ke3J9IGZhbGxiYWNrIHRvIGJpZ2dlc3QgYXZhaWxhYmxlIGxheW91dCAoJHthfSkuYFxuICAgICAgKTtcbiAgICBlbHNlXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBsYXlvdXQgb3IgZmFsbGJhY2sgbGF5b3V0IGZvdW5kLlwiKTtcbiAgaWYgKChuIDwgYS5taW5XaWR0aCB8fCByIDwgYS5taW5IZWlnaHQpICYmIG8gPiAwKSB7XG4gICAgY29uc3QgYyA9IGlbbyAtIDFdO1xuICAgIGEgPSBGaShcbiAgICAgIGkuc2xpY2UoMCwgbyksXG4gICAgICBjLm1heFRpbGVzLFxuICAgICAgbixcbiAgICAgIHJcbiAgICApO1xuICB9XG4gIHJldHVybiBhO1xufVxuZnVuY3Rpb24gamkoZSkge1xuICByZXR1cm4gWy4uLmVdLm1hcCgodCkgPT4ge1xuICAgIHZhciBuLCByO1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBgJHt0LmNvbHVtbnN9eCR7dC5yb3dzfWAsXG4gICAgICBjb2x1bW5zOiB0LmNvbHVtbnMsXG4gICAgICByb3dzOiB0LnJvd3MsXG4gICAgICBtYXhUaWxlczogdC5jb2x1bW5zICogdC5yb3dzLFxuICAgICAgbWluV2lkdGg6IChuID0gdC5taW5XaWR0aCkgIT0gbnVsbCA/IG4gOiAwLFxuICAgICAgbWluSGVpZ2h0OiAociA9IHQubWluSGVpZ2h0KSAhPSBudWxsID8gciA6IDAsXG4gICAgICBvcmllbnRhdGlvbjogdC5vcmllbnRhdGlvblxuICAgIH07XG4gIH0pLnNvcnQoKHQsIG4pID0+IHQubWF4VGlsZXMgIT09IG4ubWF4VGlsZXMgPyB0Lm1heFRpbGVzIC0gbi5tYXhUaWxlcyA6IHQubWluV2lkdGggIT09IDAgfHwgbi5taW5XaWR0aCAhPT0gMCA/IHQubWluV2lkdGggLSBuLm1pbldpZHRoIDogdC5taW5IZWlnaHQgIT09IDAgfHwgbi5taW5IZWlnaHQgIT09IDAgPyB0Lm1pbkhlaWdodCAtIG4ubWluSGVpZ2h0IDogMCk7XG59XG5mdW5jdGlvbiBVbygpIHtcbiAgcmV0dXJuIHR5cGVvZiBuYXZpZ2F0b3IgPCBcInVcIiAmJiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzICYmICEhbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXREaXNwbGF5TWVkaWE7XG59XG5mdW5jdGlvbiBGbyhlLCB0KSB7XG4gIHZhciBuO1xuICByZXR1cm4geWUoSyh7fSwgZSksIHtcbiAgICByZWNlaXZlZEF0TWVkaWFUaW1lc3RhbXA6IChuID0gdC5ydHBUaW1lc3RhbXApICE9IG51bGwgPyBuIDogMCxcbiAgICByZWNlaXZlZEF0OiB0LnRpbWVzdGFtcFxuICB9KTtcbn1cbmZ1bmN0aW9uIGpvKGUsIHQsIG4pIHtcbiAgcmV0dXJuIFsuLi5lLCAuLi50XS5yZWR1Y2VSaWdodCgociwgaSkgPT4gKHIuZmluZCgobykgPT4gby5pZCA9PT0gaS5pZCkgfHwgci51bnNoaWZ0KGkpLCByKSwgW10pLnNsaWNlKDAgLSBuKTtcbn1cbnZhciBUbiA9IFtdLCBDbiA9IHtcbiAgc2hvd0NoYXQ6ICExLFxuICB1bnJlYWRNZXNzYWdlczogMCxcbiAgc2hvd1NldHRpbmdzOiAhMVxufTtcbmZ1bmN0aW9uIFdpKGUpIHtcbiAgcmV0dXJuIHR5cGVvZiBlID09IFwib2JqZWN0XCI7XG59XG5mdW5jdGlvbiBXbyhlKSB7XG4gIHJldHVybiBBcnJheS5pc0FycmF5KGUpICYmIGUuZmlsdGVyKFdpKS5sZW5ndGggPiAwO1xufVxuZnVuY3Rpb24gUG4oZSwgdCkge1xuICByZXR1cm4gdC5hdWRpb0xldmVsIC0gZS5hdWRpb0xldmVsO1xufVxuZnVuY3Rpb24gQW4oZSwgdCkge1xuICByZXR1cm4gZS5pc1NwZWFraW5nID09PSB0LmlzU3BlYWtpbmcgPyAwIDogZS5pc1NwZWFraW5nID8gLTEgOiAxO1xufVxuZnVuY3Rpb24ga24oZSwgdCkge1xuICB2YXIgbiwgciwgaSwgbztcbiAgcmV0dXJuIGUubGFzdFNwb2tlQXQgIT09IHZvaWQgMCB8fCB0Lmxhc3RTcG9rZUF0ICE9PSB2b2lkIDAgPyAoKHIgPSAobiA9IHQubGFzdFNwb2tlQXQpID09IG51bGwgPyB2b2lkIDAgOiBuLmdldFRpbWUoKSkgIT0gbnVsbCA/IHIgOiAwKSAtICgobyA9IChpID0gZS5sYXN0U3Bva2VBdCkgPT0gbnVsbCA/IHZvaWQgMCA6IGkuZ2V0VGltZSgpKSAhPSBudWxsID8gbyA6IDApIDogMDtcbn1cbmZ1bmN0aW9uIE1lKGUsIHQpIHtcbiAgdmFyIG4sIHIsIGksIG87XG4gIHJldHVybiAoKHIgPSAobiA9IGUuam9pbmVkQXQpID09IG51bGwgPyB2b2lkIDAgOiBuLmdldFRpbWUoKSkgIT0gbnVsbCA/IHIgOiAwKSAtICgobyA9IChpID0gdC5qb2luZWRBdCkgPT0gbnVsbCA/IHZvaWQgMCA6IGkuZ2V0VGltZSgpKSAhPSBudWxsID8gbyA6IDApO1xufVxuZnVuY3Rpb24gQmkoZSwgdCkge1xuICByZXR1cm4gaihlKSA/IGoodCkgPyAwIDogLTEgOiBqKHQpID8gMSA6IDA7XG59XG5mdW5jdGlvbiBWaShlLCB0KSB7XG4gIGNvbnN0IG4gPSBlLnBhcnRpY2lwYW50LmlzQ2FtZXJhRW5hYmxlZCwgciA9IHQucGFydGljaXBhbnQuaXNDYW1lcmFFbmFibGVkO1xuICByZXR1cm4gbiAhPT0gciA/IG4gPyAtMSA6IDEgOiAwO1xufVxuZnVuY3Rpb24gQm8oZSkge1xuICBjb25zdCB0ID0gW10sIG4gPSBbXSwgciA9IFtdLCBpID0gW107XG4gIGUuZm9yRWFjaCgoYSkgPT4ge1xuICAgIGEucGFydGljaXBhbnQuaXNMb2NhbCAmJiBhLnNvdXJjZSA9PT0gUi5Tb3VyY2UuQ2FtZXJhID8gdC5wdXNoKGEpIDogYS5zb3VyY2UgPT09IFIuU291cmNlLlNjcmVlblNoYXJlID8gbi5wdXNoKGEpIDogYS5zb3VyY2UgPT09IFIuU291cmNlLkNhbWVyYSA/IHIucHVzaChhKSA6IGkucHVzaChhKTtcbiAgfSk7XG4gIGNvbnN0IG8gPSBIaShuKSwgcyA9IHppKHIpO1xuICByZXR1cm4gWy4uLnQsIC4uLm8sIC4uLnMsIC4uLmldO1xufVxuZnVuY3Rpb24gSGkoZSkge1xuICBjb25zdCB0ID0gW10sIG4gPSBbXTtcbiAgcmV0dXJuIGUuZm9yRWFjaCgoaSkgPT4ge1xuICAgIGkucGFydGljaXBhbnQuaXNMb2NhbCA/IHQucHVzaChpKSA6IG4ucHVzaChpKTtcbiAgfSksIHQuc29ydCgoaSwgbykgPT4gTWUoaS5wYXJ0aWNpcGFudCwgby5wYXJ0aWNpcGFudCkpLCBuLnNvcnQoKGksIG8pID0+IE1lKGkucGFydGljaXBhbnQsIG8ucGFydGljaXBhbnQpKSwgWy4uLm4sIC4uLnRdO1xufVxuZnVuY3Rpb24gemkoZSkge1xuICBjb25zdCB0ID0gW10sIG4gPSBbXTtcbiAgcmV0dXJuIGUuZm9yRWFjaCgocikgPT4ge1xuICAgIHIucGFydGljaXBhbnQuaXNMb2NhbCA/IHQucHVzaChyKSA6IG4ucHVzaChyKTtcbiAgfSksIG4uc29ydCgociwgaSkgPT4gci5wYXJ0aWNpcGFudC5pc1NwZWFraW5nICYmIGkucGFydGljaXBhbnQuaXNTcGVha2luZyA/IFBuKHIucGFydGljaXBhbnQsIGkucGFydGljaXBhbnQpIDogci5wYXJ0aWNpcGFudC5pc1NwZWFraW5nICE9PSBpLnBhcnRpY2lwYW50LmlzU3BlYWtpbmcgPyBBbihyLnBhcnRpY2lwYW50LCBpLnBhcnRpY2lwYW50KSA6IHIucGFydGljaXBhbnQubGFzdFNwb2tlQXQgIT09IGkucGFydGljaXBhbnQubGFzdFNwb2tlQXQgPyBrbihyLnBhcnRpY2lwYW50LCBpLnBhcnRpY2lwYW50KSA6IGoocikgIT09IGooaSkgPyBCaShyLCBpKSA6IHIucGFydGljaXBhbnQuaXNDYW1lcmFFbmFibGVkICE9PSBpLnBhcnRpY2lwYW50LmlzQ2FtZXJhRW5hYmxlZCA/IFZpKHIsIGkpIDogTWUoci5wYXJ0aWNpcGFudCwgaS5wYXJ0aWNpcGFudCkpLCBbLi4udCwgLi4ubl07XG59XG5mdW5jdGlvbiBWbyhlKSB7XG4gIGNvbnN0IHQgPSBbLi4uZV07XG4gIHQuc29ydCgociwgaSkgPT4ge1xuICAgIGlmIChyLmlzU3BlYWtpbmcgJiYgaS5pc1NwZWFraW5nKVxuICAgICAgcmV0dXJuIFBuKHIsIGkpO1xuICAgIGlmIChyLmlzU3BlYWtpbmcgIT09IGkuaXNTcGVha2luZylcbiAgICAgIHJldHVybiBBbihyLCBpKTtcbiAgICBpZiAoci5sYXN0U3Bva2VBdCAhPT0gaS5sYXN0U3Bva2VBdClcbiAgICAgIHJldHVybiBrbihyLCBpKTtcbiAgICBjb25zdCBvID0gci52aWRlb1RyYWNrUHVibGljYXRpb25zLnNpemUgPiAwLCBzID0gaS52aWRlb1RyYWNrUHVibGljYXRpb25zLnNpemUgPiAwO1xuICAgIHJldHVybiBvICE9PSBzID8gbyA/IC0xIDogMSA6IE1lKHIsIGkpO1xuICB9KTtcbiAgY29uc3QgbiA9IHQuZmluZCgocikgPT4gciBpbnN0YW5jZW9mIG90KTtcbiAgaWYgKG4pIHtcbiAgICBjb25zdCByID0gdC5pbmRleE9mKG4pO1xuICAgIHIgPj0gMCAmJiAodC5zcGxpY2UociwgMSksIHQubGVuZ3RoID4gMCA/IHQuc3BsaWNlKDAsIDAsIG4pIDogdC5wdXNoKG4pKTtcbiAgfVxuICByZXR1cm4gdDtcbn1cbmZ1bmN0aW9uIFlpKGUsIHQpIHtcbiAgcmV0dXJuIGUucmVkdWNlKFxuICAgIChuLCByLCBpKSA9PiBpICUgdCA9PT0gMCA/IFsuLi5uLCBbcl1dIDogWy4uLm4uc2xpY2UoMCwgLTEpLCBbLi4ubi5zbGljZSgtMSlbMF0sIHJdXSxcbiAgICBbXVxuICApO1xufVxuZnVuY3Rpb24gTXQoZSwgdCkge1xuICBjb25zdCBuID0gTWF0aC5tYXgoZS5sZW5ndGgsIHQubGVuZ3RoKTtcbiAgcmV0dXJuIG5ldyBBcnJheShuKS5maWxsKFtdKS5tYXAoKHIsIGkpID0+IFtlW2ldLCB0W2ldXSk7XG59XG5mdW5jdGlvbiBSZShlLCB0LCBuKSB7XG4gIHJldHVybiBlLmZpbHRlcigocikgPT4gIXQubWFwKChpKSA9PiBuKGkpKS5pbmNsdWRlcyhuKHIpKSk7XG59XG5mdW5jdGlvbiBudChlKSB7XG4gIHJldHVybiBlLm1hcCgodCkgPT4gdHlwZW9mIHQgPT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgdCA9PSBcIm51bWJlclwiID8gYCR7dH1gIDogJCh0KSk7XG59XG5mdW5jdGlvbiBHaShlLCB0KSB7XG4gIHJldHVybiB7XG4gICAgZHJvcHBlZDogUmUoZSwgdCwgJCksXG4gICAgYWRkZWQ6IFJlKHQsIGUsICQpXG4gIH07XG59XG5mdW5jdGlvbiBLaShlKSB7XG4gIHJldHVybiBlLmFkZGVkLmxlbmd0aCAhPT0gMCB8fCBlLmRyb3BwZWQubGVuZ3RoICE9PSAwO1xufVxuZnVuY3Rpb24gcnQoZSwgdCkge1xuICBjb25zdCBuID0gdC5maW5kSW5kZXgoXG4gICAgKHIpID0+ICQocikgPT09ICQoZSlcbiAgKTtcbiAgaWYgKG4gPT09IC0xKVxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBFbGVtZW50IG5vdCBwYXJ0IG9mIHRoZSBhcnJheTogJHskKFxuICAgICAgICBlXG4gICAgICApfSBub3QgaW4gJHtudCh0KX1gXG4gICAgKTtcbiAgcmV0dXJuIG47XG59XG5mdW5jdGlvbiBRaShlLCB0LCBuKSB7XG4gIGNvbnN0IHIgPSBydChlLCBuKSwgaSA9IHJ0KHQsIG4pO1xuICByZXR1cm4gbi5zcGxpY2UociwgMSwgdCksIG4uc3BsaWNlKGksIDEsIGUpLCBuO1xufVxuZnVuY3Rpb24gSmkoZSwgdCkge1xuICBjb25zdCBuID0gcnQoZSwgdCk7XG4gIHJldHVybiB0LnNwbGljZShuLCAxKSwgdDtcbn1cbmZ1bmN0aW9uIHFpKGUsIHQpIHtcbiAgcmV0dXJuIFsuLi50LCBlXTtcbn1cbmZ1bmN0aW9uIEdlKGUsIHQpIHtcbiAgcmV0dXJuIFlpKGUsIHQpO1xufVxuZnVuY3Rpb24gSG8oZSwgdCwgbikge1xuICBsZXQgciA9IFhpKGUsIHQpO1xuICBpZiAoci5sZW5ndGggPCB0Lmxlbmd0aCkge1xuICAgIGNvbnN0IHMgPSBSZSh0LCByLCAkKTtcbiAgICByID0gWy4uLnIsIC4uLnNdO1xuICB9XG4gIGNvbnN0IGkgPSBHZShyLCBuKSwgbyA9IEdlKHQsIG4pO1xuICBpZiAoTXQoaSwgbykuZm9yRWFjaCgoW3MsIGFdLCBjKSA9PiB7XG4gICAgaWYgKHMgJiYgYSkge1xuICAgICAgY29uc3QgdSA9IEdlKHIsIG4pW2NdLCBsID0gR2kodSwgYSk7XG4gICAgICBLaShsKSAmJiAoTC5kZWJ1ZyhcbiAgICAgICAgYERldGVjdGVkIHZpc3VhbCBjaGFuZ2VzIG9uIHBhZ2U6ICR7Y30sIGN1cnJlbnQ6ICR7bnQoXG4gICAgICAgICAgc1xuICAgICAgICApfSwgbmV4dDogJHtudChhKX1gLFxuICAgICAgICB7IGNoYW5nZXM6IGwgfVxuICAgICAgKSwgbC5hZGRlZC5sZW5ndGggPT09IGwuZHJvcHBlZC5sZW5ndGggJiYgTXQobC5hZGRlZCwgbC5kcm9wcGVkKS5mb3JFYWNoKChbZiwgaF0pID0+IHtcbiAgICAgICAgaWYgKGYgJiYgaClcbiAgICAgICAgICByID0gUWkoZiwgaCwgcik7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBgRm9yIGEgc3dhcCBhY3Rpb24gd2UgbmVlZCBhIGFkZGl0aW9uIGFuZCBhIHJlbW92YWwgb25lIGlzIG1pc3Npbmc6ICR7Zn0sICR7aH1gXG4gICAgICAgICAgKTtcbiAgICAgIH0pLCBsLmFkZGVkLmxlbmd0aCA9PT0gMCAmJiBsLmRyb3BwZWQubGVuZ3RoID4gMCAmJiBsLmRyb3BwZWQuZm9yRWFjaCgoZikgPT4ge1xuICAgICAgICByID0gSmkoZiwgcik7XG4gICAgICB9KSwgbC5hZGRlZC5sZW5ndGggPiAwICYmIGwuZHJvcHBlZC5sZW5ndGggPT09IDAgJiYgbC5hZGRlZC5mb3JFYWNoKChmKSA9PiB7XG4gICAgICAgIHIgPSBxaShmLCByKTtcbiAgICAgIH0pKTtcbiAgICB9XG4gIH0pLCByLmxlbmd0aCA+IHQubGVuZ3RoKSB7XG4gICAgY29uc3QgcyA9IFJlKHIsIHQsICQpO1xuICAgIHIgPSByLmZpbHRlcihcbiAgICAgIChhKSA9PiAhcy5tYXAoJCkuaW5jbHVkZXMoJChhKSlcbiAgICApO1xuICB9XG4gIHJldHVybiByO1xufVxuZnVuY3Rpb24gWGkoZSwgdCkge1xuICByZXR1cm4gZS5tYXAoKG4pID0+IHtcbiAgICBjb25zdCByID0gdC5maW5kKFxuICAgICAgKGkpID0+IChcbiAgICAgICAgLy8gSWYgdGhlIElEcyBtYXRjaCBvciAuLlxuICAgICAgICAkKG4pID09PSAkKGkpIHx8IC8vIC4uLiBpZiB0aGUgY3VycmVudCBpdGVtIGlzIGEgcGxhY2Vob2xkZXIgYW5kIHRoZSBuZXcgaXRlbSBpcyB0aGUgdHJhY2sgcmVmZXJlbmNlIGNhbiByZXBsYWNlIGl0LlxuICAgICAgICB0eXBlb2YgbiAhPSBcIm51bWJlclwiICYmIHhlKG4pICYmIGooaSkgJiYgRGkobiwgaSlcbiAgICAgIClcbiAgICApO1xuICAgIHJldHVybiByID8/IG47XG4gIH0pO1xufVxuZnVuY3Rpb24gVShlKSB7XG4gIHJldHVybiBgJHtTbn0tJHtlfWA7XG59XG5mdW5jdGlvbiB6byhlKSB7XG4gIGNvbnN0IHQgPSBSdChlKSwgbiA9IE9uKGUucGFydGljaXBhbnQpLnBpcGUoXG4gICAgQSgoKSA9PiBSdChlKSksXG4gICAgTSh0KVxuICApO1xuICByZXR1cm4geyBjbGFzc05hbWU6IFUoXG4gICAgZS5zb3VyY2UgPT09IFIuU291cmNlLkNhbWVyYSB8fCBlLnNvdXJjZSA9PT0gUi5Tb3VyY2UuU2NyZWVuU2hhcmUgPyBcInBhcnRpY2lwYW50LW1lZGlhLXZpZGVvXCIgOiBcInBhcnRpY2lwYW50LW1lZGlhLWF1ZGlvXCJcbiAgKSwgdHJhY2tPYnNlcnZlcjogbiB9O1xufVxuZnVuY3Rpb24gUnQoZSkge1xuICBpZiAoaihlKSlcbiAgICByZXR1cm4gZS5wdWJsaWNhdGlvbjtcbiAge1xuICAgIGNvbnN0IHsgc291cmNlOiB0LCBuYW1lOiBuLCBwYXJ0aWNpcGFudDogciB9ID0gZTtcbiAgICBpZiAodCAmJiBuKVxuICAgICAgcmV0dXJuIHIuZ2V0VHJhY2tQdWJsaWNhdGlvbnMoKS5maW5kKChpKSA9PiBpLnNvdXJjZSA9PT0gdCAmJiBpLnRyYWNrTmFtZSA9PT0gbik7XG4gICAgaWYgKG4pXG4gICAgICByZXR1cm4gci5nZXRUcmFja1B1YmxpY2F0aW9uQnlOYW1lKG4pO1xuICAgIGlmICh0KVxuICAgICAgcmV0dXJuIHIuZ2V0VHJhY2tQdWJsaWNhdGlvbih0KTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJBdCBsZWFzdCBvbmUgb2Ygc291cmNlIGFuZCBuYW1lIG5lZWRzIHRvIGJlIGRlZmluZWRcIik7XG4gIH1cbn1cbmZ1bmN0aW9uIHNlKGUsIC4uLnQpIHtcbiAgcmV0dXJuIG5ldyBPKChyKSA9PiB7XG4gICAgY29uc3QgaSA9ICgpID0+IHtcbiAgICAgIHIubmV4dChlKTtcbiAgICB9O1xuICAgIHJldHVybiB0LmZvckVhY2goKHMpID0+IHtcbiAgICAgIGUub24ocywgaSk7XG4gICAgfSksICgpID0+IHtcbiAgICAgIHQuZm9yRWFjaCgocykgPT4ge1xuICAgICAgICBlLm9mZihzLCBpKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0pLnBpcGUoTShlKSk7XG59XG5mdW5jdGlvbiBhZShlLCB0KSB7XG4gIHJldHVybiBuZXcgTygocikgPT4ge1xuICAgIGNvbnN0IGkgPSAoLi4ucykgPT4ge1xuICAgICAgci5uZXh0KHMpO1xuICAgIH07XG4gICAgcmV0dXJuIGUub24odCwgaSksICgpID0+IHtcbiAgICAgIGUub2ZmKHQsIGkpO1xuICAgIH07XG4gIH0pO1xufVxuZnVuY3Rpb24gWW8oZSkge1xuICByZXR1cm4gYWUoZSwgYi5Db25uZWN0aW9uU3RhdGVDaGFuZ2VkKS5waXBlKFxuICAgIEEoKFt0XSkgPT4gdCksXG4gICAgTShlLnN0YXRlKVxuICApO1xufVxuZnVuY3Rpb24gR28oZSkge1xuICByZXR1cm4gc2UoXG4gICAgZSxcbiAgICBiLlJvb21NZXRhZGF0YUNoYW5nZWQsXG4gICAgYi5Db25uZWN0aW9uU3RhdGVDaGFuZ2VkXG4gICkucGlwZShcbiAgICBBKChuKSA9PiAoeyBuYW1lOiBuLm5hbWUsIG1ldGFkYXRhOiBuLm1ldGFkYXRhIH0pKVxuICApO1xufVxuZnVuY3Rpb24gS28oZSkge1xuICByZXR1cm4gYWUoZSwgYi5BY3RpdmVTcGVha2Vyc0NoYW5nZWQpLnBpcGUoXG4gICAgQSgoW3RdKSA9PiB0KVxuICApO1xufVxuZnVuY3Rpb24gUW8oZSwgdCwgbiA9ICEwKSB7XG4gIHZhciByO1xuICBjb25zdCBpID0gKCkgPT4gQih0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBhID0geWllbGQgZ3QuZ2V0TG9jYWxEZXZpY2VzKGUsIG4pO1xuICAgICAgby5uZXh0KGEpO1xuICAgIH0gY2F0Y2ggKGEpIHtcbiAgICAgIHQgPT0gbnVsbCB8fCB0KGEpO1xuICAgIH1cbiAgfSksIG8gPSBuZXcgbmUoKSwgcyA9IG8ucGlwZShcbiAgICBFaSgoKSA9PiB7XG4gICAgICB2YXIgYTtcbiAgICAgIChhID0gbmF2aWdhdG9yID09IG51bGwgPyB2b2lkIDAgOiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKSA9PSBudWxsIHx8IGEucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRldmljZWNoYW5nZVwiLCBpKTtcbiAgICB9KVxuICApO1xuICBpZiAodHlwZW9mIHdpbmRvdyA8IFwidVwiKSB7XG4gICAgaWYgKCF3aW5kb3cuaXNTZWN1cmVDb250ZXh0KVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIkFjY2Vzc2luZyBtZWRpYSBkZXZpY2VzIGlzIGF2YWlsYWJsZSBvbmx5IGluIHNlY3VyZSBjb250ZXh0cyAoSFRUUFMgYW5kIGxvY2FsaG9zdCksIGluIHNvbWUgb3IgYWxsIHN1cHBvcnRpbmcgYnJvd3NlcnMuIFNlZTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL05hdmlnYXRvci9tZWRpYURldmljZXNcIlxuICAgICAgKTtcbiAgICAociA9IG5hdmlnYXRvciA9PSBudWxsID8gdm9pZCAwIDogbmF2aWdhdG9yLm1lZGlhRGV2aWNlcykgPT0gbnVsbCB8fCByLmFkZEV2ZW50TGlzdGVuZXIoXCJkZXZpY2VjaGFuZ2VcIiwgaSk7XG4gIH1cbiAgcmV0dXJuIERlKFxuICAgIGd0LmdldExvY2FsRGV2aWNlcyhlLCBuKS5jYXRjaCgoYSkgPT4gKHQgPT0gbnVsbCB8fCB0KGEpLCBbXSkpLFxuICAgIHNcbiAgKTtcbn1cbmZ1bmN0aW9uIFppKGUpIHtcbiAgcmV0dXJuIGFlKGUsIGIuRGF0YVJlY2VpdmVkKTtcbn1cbmZ1bmN0aW9uIGVvKGUpIHtcbiAgcmV0dXJuIGFlKGUsIGIuQ2hhdE1lc3NhZ2UpO1xufVxuZnVuY3Rpb24gdG8oZSkge1xuICByZXR1cm4gc2UoZSwgYi5BdWRpb1BsYXliYWNrU3RhdHVzQ2hhbmdlZCkucGlwZShcbiAgICBBKChuKSA9PiAoeyBjYW5QbGF5QXVkaW86IG4uY2FuUGxheWJhY2tBdWRpbyB9KSlcbiAgKTtcbn1cbmZ1bmN0aW9uIG5vKGUpIHtcbiAgcmV0dXJuIHNlKGUsIGIuVmlkZW9QbGF5YmFja1N0YXR1c0NoYW5nZWQpLnBpcGUoXG4gICAgQSgobikgPT4gKHsgY2FuUGxheVZpZGVvOiBuLmNhblBsYXliYWNrVmlkZW8gfSkpXG4gICk7XG59XG5mdW5jdGlvbiBybyhlLCB0KSB7XG4gIHJldHVybiBhZShlLCBiLkFjdGl2ZURldmljZUNoYW5nZWQpLnBpcGUoXG4gICAgdnQoKFtuXSkgPT4gbiA9PT0gdCksXG4gICAgQSgoW24sIHJdKSA9PiAoTC5kZWJ1ZyhcImFjdGl2ZURldmljZU9ic2VydmFibGUgfCBSb29tRXZlbnQuQWN0aXZlRGV2aWNlQ2hhbmdlZFwiLCB7IGtpbmQ6IG4sIGRldmljZUlkOiByIH0pLCByKSksXG4gICAgTShlLmdldEFjdGl2ZURldmljZSh0KSlcbiAgKTtcbn1cbmZ1bmN0aW9uIEpvKGUsIHQpIHtcbiAgcmV0dXJuIGFlKGUsIGIuUGFydGljaXBhbnRFbmNyeXB0aW9uU3RhdHVzQ2hhbmdlZCkucGlwZShcbiAgICB2dChcbiAgICAgIChbLCBuXSkgPT4gKHQgPT0gbnVsbCA/IHZvaWQgMCA6IHQuaWRlbnRpdHkpID09PSAobiA9PSBudWxsID8gdm9pZCAwIDogbi5pZGVudGl0eSkgfHwgIW4gJiYgKHQgPT0gbnVsbCA/IHZvaWQgMCA6IHQuaWRlbnRpdHkpID09PSBlLmxvY2FsUGFydGljaXBhbnQuaWRlbnRpdHlcbiAgICApLFxuICAgIEEoKFtuXSkgPT4gbiksXG4gICAgTShcbiAgICAgIHQgaW5zdGFuY2VvZiBvdCA/IHQuaXNFMkVFRW5hYmxlZCA6ICEhKHQgIT0gbnVsbCAmJiB0LmlzRW5jcnlwdGVkKVxuICAgIClcbiAgKTtcbn1cbmZ1bmN0aW9uIHFvKGUpIHtcbiAgcmV0dXJuIGFlKGUsIGIuUmVjb3JkaW5nU3RhdHVzQ2hhbmdlZCkucGlwZShcbiAgICBBKChbdF0pID0+IHQpLFxuICAgIE0oZS5pc1JlY29yZGluZylcbiAgKTtcbn1cbmZ1bmN0aW9uIG1lKGUsIC4uLnQpIHtcbiAgcmV0dXJuIG5ldyBPKChyKSA9PiB7XG4gICAgY29uc3QgaSA9ICgpID0+IHtcbiAgICAgIHIubmV4dChlKTtcbiAgICB9O1xuICAgIHJldHVybiB0LmZvckVhY2goKHMpID0+IHtcbiAgICAgIGUub24ocywgaSk7XG4gICAgfSksICgpID0+IHtcbiAgICAgIHQuZm9yRWFjaCgocykgPT4ge1xuICAgICAgICBlLm9mZihzLCBpKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0pLnBpcGUoTShlKSk7XG59XG5mdW5jdGlvbiBPbihlKSB7XG4gIHJldHVybiBtZShcbiAgICBlLFxuICAgIHkuVHJhY2tNdXRlZCxcbiAgICB5LlRyYWNrVW5tdXRlZCxcbiAgICB5LlBhcnRpY2lwYW50UGVybWlzc2lvbnNDaGFuZ2VkLFxuICAgIC8vIFBhcnRpY2lwYW50RXZlbnQuSXNTcGVha2luZ0NoYW5nZWQsXG4gICAgeS5UcmFja1B1Ymxpc2hlZCxcbiAgICB5LlRyYWNrVW5wdWJsaXNoZWQsXG4gICAgeS5Mb2NhbFRyYWNrUHVibGlzaGVkLFxuICAgIHkuTG9jYWxUcmFja1VucHVibGlzaGVkLFxuICAgIHkuTWVkaWFEZXZpY2VzRXJyb3IsXG4gICAgeS5UcmFja1N1YnNjcmlwdGlvblN0YXR1c0NoYW5nZWRcbiAgICAvLyBQYXJ0aWNpcGFudEV2ZW50LkNvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZCxcbiAgKS5waXBlKFxuICAgIEEoKG4pID0+IHtcbiAgICAgIGNvbnN0IHsgaXNNaWNyb3Bob25lRW5hYmxlZDogciwgaXNDYW1lcmFFbmFibGVkOiBpLCBpc1NjcmVlblNoYXJlRW5hYmxlZDogbyB9ID0gbiwgcyA9IG4uZ2V0VHJhY2tQdWJsaWNhdGlvbihSLlNvdXJjZS5NaWNyb3Bob25lKSwgYSA9IG4uZ2V0VHJhY2tQdWJsaWNhdGlvbihSLlNvdXJjZS5DYW1lcmEpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaXNDYW1lcmFFbmFibGVkOiBpLFxuICAgICAgICBpc01pY3JvcGhvbmVFbmFibGVkOiByLFxuICAgICAgICBpc1NjcmVlblNoYXJlRW5hYmxlZDogbyxcbiAgICAgICAgY2FtZXJhVHJhY2s6IGEsXG4gICAgICAgIG1pY3JvcGhvbmVUcmFjazogcyxcbiAgICAgICAgcGFydGljaXBhbnQ6IG5cbiAgICAgIH07XG4gICAgfSlcbiAgKTtcbn1cbmZ1bmN0aW9uIGlvKGUpIHtcbiAgcmV0dXJuIGUgPyBtZShcbiAgICBlLFxuICAgIHkuUGFydGljaXBhbnRNZXRhZGF0YUNoYW5nZWQsXG4gICAgeS5QYXJ0aWNpcGFudE5hbWVDaGFuZ2VkXG4gICkucGlwZShcbiAgICBBKCh7IG5hbWU6IG4sIGlkZW50aXR5OiByLCBtZXRhZGF0YTogaSB9KSA9PiAoe1xuICAgICAgbmFtZTogbixcbiAgICAgIGlkZW50aXR5OiByLFxuICAgICAgbWV0YWRhdGE6IGlcbiAgICB9KSksXG4gICAgTSh7XG4gICAgICBuYW1lOiBlLm5hbWUsXG4gICAgICBpZGVudGl0eTogZS5pZGVudGl0eSxcbiAgICAgIG1ldGFkYXRhOiBlLm1ldGFkYXRhXG4gICAgfSlcbiAgKSA6IHZvaWQgMDtcbn1cbmZ1bmN0aW9uIG9vKGUpIHtcbiAgcmV0dXJuIFZlKFxuICAgIGUsXG4gICAgeS5Db25uZWN0aW9uUXVhbGl0eUNoYW5nZWRcbiAgKS5waXBlKFxuICAgIEEoKFtuXSkgPT4gbiksXG4gICAgTShlLmNvbm5lY3Rpb25RdWFsaXR5KVxuICApO1xufVxuZnVuY3Rpb24gVmUoZSwgdCkge1xuICByZXR1cm4gbmV3IE8oKHIpID0+IHtcbiAgICBjb25zdCBpID0gKC4uLnMpID0+IHtcbiAgICAgIHIubmV4dChzKTtcbiAgICB9O1xuICAgIHJldHVybiBlLm9uKHQsIGkpLCAoKSA9PiB7XG4gICAgICBlLm9mZih0LCBpKTtcbiAgICB9O1xuICB9KTtcbn1cbmZ1bmN0aW9uIHNvKGUpIHtcbiAgdmFyIHQsIG4sIHIsIGk7XG4gIHJldHVybiBtZShcbiAgICBlLnBhcnRpY2lwYW50LFxuICAgIHkuVHJhY2tNdXRlZCxcbiAgICB5LlRyYWNrVW5tdXRlZCxcbiAgICB5LlRyYWNrU3Vic2NyaWJlZCxcbiAgICB5LlRyYWNrVW5zdWJzY3JpYmVkLFxuICAgIHkuTG9jYWxUcmFja1B1Ymxpc2hlZCxcbiAgICB5LkxvY2FsVHJhY2tVbnB1Ymxpc2hlZFxuICApLnBpcGUoXG4gICAgQSgobykgPT4ge1xuICAgICAgdmFyIHMsIGE7XG4gICAgICBjb25zdCBjID0gKHMgPSBlLnB1YmxpY2F0aW9uKSAhPSBudWxsID8gcyA6IG8uZ2V0VHJhY2tQdWJsaWNhdGlvbihlLnNvdXJjZSk7XG4gICAgICByZXR1cm4gKGEgPSBjID09IG51bGwgPyB2b2lkIDAgOiBjLmlzTXV0ZWQpICE9IG51bGwgPyBhIDogITA7XG4gICAgfSksXG4gICAgTShcbiAgICAgIChpID0gKHIgPSAodCA9IGUucHVibGljYXRpb24pID09IG51bGwgPyB2b2lkIDAgOiB0LmlzTXV0ZWQpICE9IG51bGwgPyByIDogKG4gPSBlLnBhcnRpY2lwYW50LmdldFRyYWNrUHVibGljYXRpb24oZS5zb3VyY2UpKSA9PSBudWxsID8gdm9pZCAwIDogbi5pc011dGVkKSAhPSBudWxsID8gaSA6ICEwXG4gICAgKVxuICApO1xufVxuZnVuY3Rpb24gWG8oZSkge1xuICByZXR1cm4gVmUoZSwgeS5Jc1NwZWFraW5nQ2hhbmdlZCkucGlwZShcbiAgICBBKChbdF0pID0+IHQpXG4gICk7XG59XG5mdW5jdGlvbiBabyhlLCB0ID0ge30pIHtcbiAgdmFyIG47XG4gIGxldCByO1xuICBjb25zdCBpID0gbmV3IE8oKGMpID0+IChyID0gYywgKCkgPT4gYS51bnN1YnNjcmliZSgpKSkucGlwZShNKEFycmF5LmZyb20oZS5yZW1vdGVQYXJ0aWNpcGFudHMudmFsdWVzKCkpKSksIG8gPSAobiA9IHQuYWRkaXRpb25hbFJvb21FdmVudHMpICE9IG51bGwgPyBuIDogeG4sIHMgPSBBcnJheS5mcm9tKFxuICAgIC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFtcbiAgICAgIGIuUGFydGljaXBhbnRDb25uZWN0ZWQsXG4gICAgICBiLlBhcnRpY2lwYW50RGlzY29ubmVjdGVkLFxuICAgICAgYi5Db25uZWN0aW9uU3RhdGVDaGFuZ2VkLFxuICAgICAgLi4ub1xuICAgIF0pXG4gICksIGEgPSBzZShlLCAuLi5zKS5zdWJzY3JpYmUoXG4gICAgKGMpID0+IHIgPT0gbnVsbCA/IHZvaWQgMCA6IHIubmV4dChBcnJheS5mcm9tKGMucmVtb3RlUGFydGljaXBhbnRzLnZhbHVlcygpKSlcbiAgKTtcbiAgcmV0dXJuIGUucmVtb3RlUGFydGljaXBhbnRzLnNpemUgPiAwICYmIChyID09IG51bGwgfHwgci5uZXh0KEFycmF5LmZyb20oZS5yZW1vdGVQYXJ0aWNpcGFudHMudmFsdWVzKCkpKSksIGk7XG59XG5mdW5jdGlvbiBlcyhlLCB0LCBuID0ge30pIHtcbiAgdmFyIHI7XG4gIGNvbnN0IGkgPSAociA9IG4uYWRkaXRpb25hbEV2ZW50cykgIT0gbnVsbCA/IHIgOiBFbjtcbiAgcmV0dXJuIHNlKFxuICAgIGUsXG4gICAgYi5QYXJ0aWNpcGFudENvbm5lY3RlZCxcbiAgICBiLlBhcnRpY2lwYW50RGlzY29ubmVjdGVkLFxuICAgIGIuQ29ubmVjdGlvblN0YXRlQ2hhbmdlZFxuICApLnBpcGUoXG4gICAgd24oKHMpID0+IHtcbiAgICAgIGNvbnN0IGEgPSBzLmdldFBhcnRpY2lwYW50QnlJZGVudGl0eSh0KTtcbiAgICAgIHJldHVybiBhID8gbWUoYSwgLi4uaSkgOiBuZXcgTygoYykgPT4gYy5uZXh0KHZvaWQgMCkpO1xuICAgIH0pLFxuICAgIE0oZS5nZXRQYXJ0aWNpcGFudEJ5SWRlbnRpdHkodCkpXG4gICk7XG59XG5mdW5jdGlvbiB0cyhlKSB7XG4gIHJldHVybiBWZShcbiAgICBlLFxuICAgIHkuUGFydGljaXBhbnRQZXJtaXNzaW9uc0NoYW5nZWRcbiAgKS5waXBlKFxuICAgIEEoKCkgPT4gZS5wZXJtaXNzaW9ucyksXG4gICAgTShlLnBlcm1pc3Npb25zKVxuICApO1xufVxuZnVuY3Rpb24gbnMoZSwgeyBraW5kOiB0LCBpZGVudGl0eTogbiB9LCByID0ge30pIHtcbiAgdmFyIGk7XG4gIGNvbnN0IG8gPSAoaSA9IHIuYWRkaXRpb25hbEV2ZW50cykgIT0gbnVsbCA/IGkgOiBFbiwgcyA9IChjKSA9PiB7XG4gICAgbGV0IHUgPSAhMDtcbiAgICByZXR1cm4gdCAmJiAodSA9IHUgJiYgYy5raW5kID09PSB0KSwgbiAmJiAodSA9IHUgJiYgYy5pZGVudGl0eSA9PT0gbiksIHU7XG4gIH07XG4gIHJldHVybiBzZShcbiAgICBlLFxuICAgIGIuUGFydGljaXBhbnRDb25uZWN0ZWQsXG4gICAgYi5QYXJ0aWNpcGFudERpc2Nvbm5lY3RlZCxcbiAgICBiLkNvbm5lY3Rpb25TdGF0ZUNoYW5nZWRcbiAgKS5waXBlKFxuICAgIHduKChjKSA9PiB7XG4gICAgICBjb25zdCB1ID0gQXJyYXkuZnJvbShjLnJlbW90ZVBhcnRpY2lwYW50cy52YWx1ZXMoKSkuZmluZChcbiAgICAgICAgKGwpID0+IHMobClcbiAgICAgICk7XG4gICAgICByZXR1cm4gdSA/IG1lKHUsIC4uLm8pIDogbmV3IE8oKGwpID0+IGwubmV4dCh2b2lkIDApKTtcbiAgICB9KSxcbiAgICBNKEFycmF5LmZyb20oZS5yZW1vdGVQYXJ0aWNpcGFudHMudmFsdWVzKCkpLmZpbmQoKGMpID0+IHMoYykpKVxuICApO1xufVxuZnVuY3Rpb24gcnMoZSkge1xuICByZXR1cm4gdHlwZW9mIGUgPiBcInVcIiA/IG5ldyBPKCkgOiBWZShlLCB5LkF0dHJpYnV0ZXNDaGFuZ2VkKS5waXBlKFxuICAgIEEoKFt0XSkgPT4gKHtcbiAgICAgIGNoYW5nZWQ6IHQsXG4gICAgICBhdHRyaWJ1dGVzOiBlLmF0dHJpYnV0ZXNcbiAgICB9KSksXG4gICAgTSh7IGNoYW5nZWQ6IGUuYXR0cmlidXRlcywgYXR0cmlidXRlczogZS5hdHRyaWJ1dGVzIH0pXG4gICk7XG59XG5mdW5jdGlvbiBpcyhlLCB0LCBuLCByLCBpKSB7XG4gIGNvbnN0IHsgbG9jYWxQYXJ0aWNpcGFudDogbyB9ID0gdCwgcyA9IChmLCBoKSA9PiB7XG4gICAgbGV0IGQgPSAhMTtcbiAgICBzd2l0Y2ggKGYpIHtcbiAgICAgIGNhc2UgUi5Tb3VyY2UuQ2FtZXJhOlxuICAgICAgICBkID0gaC5pc0NhbWVyYUVuYWJsZWQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBSLlNvdXJjZS5NaWNyb3Bob25lOlxuICAgICAgICBkID0gaC5pc01pY3JvcGhvbmVFbmFibGVkO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgUi5Tb3VyY2UuU2NyZWVuU2hhcmU6XG4gICAgICAgIGQgPSBoLmlzU2NyZWVuU2hhcmVFbmFibGVkO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIGQ7XG4gIH0sIGEgPSBPbihvKS5waXBlKFxuICAgIEEoKGYpID0+IHMoZSwgZi5wYXJ0aWNpcGFudCkpLFxuICAgIE0ocyhlLCBvKSlcbiAgKSwgYyA9IG5ldyBuZSgpLCB1ID0gKGYsIGgpID0+IEIodGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICB0cnkge1xuICAgICAgc3dpdGNoIChoID8/IChoID0gbiksIGMubmV4dCghMCksIGUpIHtcbiAgICAgICAgY2FzZSBSLlNvdXJjZS5DYW1lcmE6XG4gICAgICAgICAgcmV0dXJuIHlpZWxkIG8uc2V0Q2FtZXJhRW5hYmxlZChcbiAgICAgICAgICAgIGYgPz8gIW8uaXNDYW1lcmFFbmFibGVkLFxuICAgICAgICAgICAgaCxcbiAgICAgICAgICAgIHJcbiAgICAgICAgICApLCBvLmlzQ2FtZXJhRW5hYmxlZDtcbiAgICAgICAgY2FzZSBSLlNvdXJjZS5NaWNyb3Bob25lOlxuICAgICAgICAgIHJldHVybiB5aWVsZCBvLnNldE1pY3JvcGhvbmVFbmFibGVkKFxuICAgICAgICAgICAgZiA/PyAhby5pc01pY3JvcGhvbmVFbmFibGVkLFxuICAgICAgICAgICAgaCxcbiAgICAgICAgICAgIHJcbiAgICAgICAgICApLCBvLmlzTWljcm9waG9uZUVuYWJsZWQ7XG4gICAgICAgIGNhc2UgUi5Tb3VyY2UuU2NyZWVuU2hhcmU6XG4gICAgICAgICAgcmV0dXJuIHlpZWxkIG8uc2V0U2NyZWVuU2hhcmVFbmFibGVkKFxuICAgICAgICAgICAgZiA/PyAhby5pc1NjcmVlblNoYXJlRW5hYmxlZCxcbiAgICAgICAgICAgIGgsXG4gICAgICAgICAgICByXG4gICAgICAgICAgKSwgby5pc1NjcmVlblNoYXJlRW5hYmxlZDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVHJpZWQgdG8gdG9nZ2xlIHVuc3VwcG9ydGVkIHNvdXJjZVwiKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChkKSB7XG4gICAgICBpZiAoaSAmJiBkIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgaSA9PSBudWxsIHx8IGkoZCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZVxuICAgICAgICB0aHJvdyBkO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBjLm5leHQoITEpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiB7XG4gICAgY2xhc3NOYW1lOiBVKFwiYnV0dG9uXCIpLFxuICAgIHRvZ2dsZTogdSxcbiAgICBlbmFibGVkT2JzZXJ2ZXI6IGEsXG4gICAgcGVuZGluZ09ic2VydmVyOiBjLmFzT2JzZXJ2YWJsZSgpXG4gIH07XG59XG5mdW5jdGlvbiBvcygpIHtcbiAgbGV0IGUgPSAhMTtcbiAgY29uc3QgdCA9IG5ldyBuZSgpLCBuID0gbmV3IG5lKCksIHIgPSAobykgPT4gQih0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgIG4ubmV4dCghMCksIGUgPSBvID8/ICFlLCB0Lm5leHQoZSksIG4ubmV4dCghMSk7XG4gIH0pO1xuICByZXR1cm4ge1xuICAgIGNsYXNzTmFtZTogVShcImJ1dHRvblwiKSxcbiAgICB0b2dnbGU6IHIsXG4gICAgZW5hYmxlZE9ic2VydmVyOiB0LmFzT2JzZXJ2YWJsZSgpLFxuICAgIHBlbmRpbmdPYnNlcnZlcjogbi5hc09ic2VydmFibGUoKVxuICB9O1xufVxuZnVuY3Rpb24gc3MoZSwgdCwgbikge1xuICBjb25zdCByID0gbmV3IG9uKHZvaWQgMCksIGkgPSB0ID8gcm8odCwgZSkgOiByLmFzT2JzZXJ2YWJsZSgpLCBvID0gKGEsIC4uLmMpID0+IEIodGhpcywgW2EsIC4uLmNdLCBmdW5jdGlvbiogKHUsIGwgPSB7fSkge1xuICAgIHZhciBmLCBoLCBkO1xuICAgIGlmICh0KSB7XG4gICAgICBMLmRlYnVnKGBTd2l0Y2hpbmcgYWN0aXZlIGRldmljZSBvZiBraW5kIFwiJHtlfVwiIHdpdGggaWQgJHt1fS5gKSwgeWllbGQgdC5zd2l0Y2hBY3RpdmVEZXZpY2UoZSwgdSwgbC5leGFjdCk7XG4gICAgICBjb25zdCBtID0gKGYgPSB0LmdldEFjdGl2ZURldmljZShlKSkgIT0gbnVsbCA/IGYgOiB1O1xuICAgICAgbSAhPT0gdSAmJiB1ICE9PSBcImRlZmF1bHRcIiAmJiBMLmluZm8oXG4gICAgICAgIGBXZSB0cmllZCB0byBzZWxlY3QgdGhlIGRldmljZSB3aXRoIGlkICgke3V9KSwgYnV0IHRoZSBicm93c2VyIGRlY2lkZWQgdG8gc2VsZWN0IHRoZSBkZXZpY2Ugd2l0aCBpZCAoJHttfSkgaW5zdGVhZC5gXG4gICAgICApO1xuICAgICAgbGV0IHA7XG4gICAgICBlID09PSBcImF1ZGlvaW5wdXRcIiA/IHAgPSAoaCA9IHQubG9jYWxQYXJ0aWNpcGFudC5nZXRUcmFja1B1YmxpY2F0aW9uKFIuU291cmNlLk1pY3JvcGhvbmUpKSA9PSBudWxsID8gdm9pZCAwIDogaC50cmFjayA6IGUgPT09IFwidmlkZW9pbnB1dFwiICYmIChwID0gKGQgPSB0LmxvY2FsUGFydGljaXBhbnQuZ2V0VHJhY2tQdWJsaWNhdGlvbihSLlNvdXJjZS5DYW1lcmEpKSA9PSBudWxsID8gdm9pZCAwIDogZC50cmFjayk7XG4gICAgICBjb25zdCBnID0gdSA9PT0gXCJkZWZhdWx0XCIgJiYgIXAgfHwgdSA9PT0gXCJkZWZhdWx0XCIgJiYgKHAgPT0gbnVsbCA/IHZvaWQgMCA6IHAubWVkaWFTdHJlYW1UcmFjay5sYWJlbC5zdGFydHNXaXRoKFwiRGVmYXVsdFwiKSk7XG4gICAgICByLm5leHQoZyA/IHUgOiBtKTtcbiAgICB9IGVsc2UgaWYgKG4pIHtcbiAgICAgIHlpZWxkIG4uc2V0RGV2aWNlSWQobC5leGFjdCA/IHsgZXhhY3Q6IHUgfSA6IHUpO1xuICAgICAgY29uc3QgbSA9IHlpZWxkIG4uZ2V0RGV2aWNlSWQoKTtcbiAgICAgIHIubmV4dChcbiAgICAgICAgdSA9PT0gXCJkZWZhdWx0XCIgJiYgbi5tZWRpYVN0cmVhbVRyYWNrLmxhYmVsLnN0YXJ0c1dpdGgoXCJEZWZhdWx0XCIpID8gdSA6IG1cbiAgICAgICk7XG4gICAgfSBlbHNlIHIudmFsdWUgIT09IHUgJiYgKEwud2FybihcbiAgICAgIFwiZGV2aWNlIHN3aXRjaCBza2lwcGVkLCBwbGVhc2UgcHJvdmlkZSBlaXRoZXIgYSByb29tIG9yIGEgbG9jYWwgdHJhY2sgdG8gc3dpdGNoIG9uLiBcIlxuICAgICksIHIubmV4dCh1KSk7XG4gIH0pO1xuICByZXR1cm4ge1xuICAgIGNsYXNzTmFtZTogVShcIm1lZGlhLWRldmljZS1zZWxlY3RcIiksXG4gICAgYWN0aXZlRGV2aWNlT2JzZXJ2YWJsZTogaSxcbiAgICBzZXRBY3RpdmVNZWRpYURldmljZTogb1xuICB9O1xufVxuZnVuY3Rpb24gYXMoZSkge1xuICBjb25zdCB0ID0gKHIpID0+IHtcbiAgICBlLmRpc2Nvbm5lY3Qocik7XG4gIH07XG4gIHJldHVybiB7IGNsYXNzTmFtZTogVShcImRpc2Nvbm5lY3QtYnV0dG9uXCIpLCBkaXNjb25uZWN0OiB0IH07XG59XG5mdW5jdGlvbiBjcyhlKSB7XG4gIGNvbnN0IHQgPSBVKFwiY29ubmVjdGlvbi1xdWFsaXR5XCIpLCBuID0gb28oZSk7XG4gIHJldHVybiB7IGNsYXNzTmFtZTogdCwgY29ubmVjdGlvblF1YWxpdHlPYnNlcnZlcjogbiB9O1xufVxuZnVuY3Rpb24gdXMoZSkge1xuICBsZXQgdCA9IFwidHJhY2stbXV0ZWQtaW5kaWNhdG9yLWNhbWVyYVwiO1xuICBzd2l0Y2ggKGUuc291cmNlKSB7XG4gICAgY2FzZSBSLlNvdXJjZS5DYW1lcmE6XG4gICAgICB0ID0gXCJ0cmFjay1tdXRlZC1pbmRpY2F0b3ItY2FtZXJhXCI7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFIuU291cmNlLk1pY3JvcGhvbmU6XG4gICAgICB0ID0gXCJ0cmFjay1tdXRlZC1pbmRpY2F0b3ItbWljcm9waG9uZVwiO1xuICAgICAgYnJlYWs7XG4gIH1cbiAgY29uc3QgbiA9IFUodCksIHIgPSBzbyhlKTtcbiAgcmV0dXJuIHsgY2xhc3NOYW1lOiBuLCBtZWRpYU11dGVkT2JzZXJ2ZXI6IHIgfTtcbn1cbmZ1bmN0aW9uIGxzKGUpIHtcbiAgcmV0dXJuIHsgY2xhc3NOYW1lOiBcImxrLXBhcnRpY2lwYW50LW5hbWVcIiwgaW5mb09ic2VydmVyOiBpbyhlKSB9O1xufVxuZnVuY3Rpb24gZnMoKSB7XG4gIHJldHVybiB7XG4gICAgY2xhc3NOYW1lOiBVKFwicGFydGljaXBhbnQtdGlsZVwiKVxuICB9O1xufVxudmFyIE50ID0ge1xuICBDSEFUOiBcImxrLWNoYXQtdG9waWNcIixcbiAgQ0hBVF9VUERBVEU6IFwibGstY2hhdC11cGRhdGUtdG9waWNcIlxufTtcbmZ1bmN0aW9uIGl0KGUsIHQpIHtcbiAgcmV0dXJuIEIodGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiogKG4sIHIsIGkgPSB7fSkge1xuICAgIGNvbnN0IHsgcmVsaWFibGU6IG8sIGRlc3RpbmF0aW9uSWRlbnRpdGllczogcywgdG9waWM6IGEgfSA9IGk7XG4gICAgeWllbGQgbi5wdWJsaXNoRGF0YShyLCB7XG4gICAgICBkZXN0aW5hdGlvbklkZW50aXRpZXM6IHMsXG4gICAgICB0b3BpYzogYSxcbiAgICAgIHJlbGlhYmxlOiBvXG4gICAgfSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gYW8oZSwgdCwgbikge1xuICBjb25zdCByID0gQXJyYXkuaXNBcnJheSh0KSA/IHQgOiBbdF0sIGkgPSBaaShlKS5waXBlKFxuICAgIHZ0KFxuICAgICAgKFssICwgLCBjXSkgPT4gdCA9PT0gdm9pZCAwIHx8IGMgIT09IHZvaWQgMCAmJiByLmluY2x1ZGVzKGMpXG4gICAgKSxcbiAgICBBKChbYywgdSwgLCBsXSkgPT4ge1xuICAgICAgY29uc3QgZiA9IHtcbiAgICAgICAgcGF5bG9hZDogYyxcbiAgICAgICAgdG9waWM6IGwsXG4gICAgICAgIGZyb206IHVcbiAgICAgIH07XG4gICAgICByZXR1cm4gbiA9PSBudWxsIHx8IG4oZiksIGY7XG4gICAgfSlcbiAgKTtcbiAgbGV0IG87XG4gIGNvbnN0IHMgPSBuZXcgTygoYykgPT4ge1xuICAgIG8gPSBjO1xuICB9KTtcbiAgcmV0dXJuIHsgbWVzc2FnZU9ic2VydmFibGU6IGksIGlzU2VuZGluZ09ic2VydmFibGU6IHMsIHNlbmQ6IChjLCAuLi51KSA9PiBCKHRoaXMsIFtjLCAuLi51XSwgZnVuY3Rpb24qIChsLCBmID0ge30pIHtcbiAgICBvLm5leHQoITApO1xuICAgIHRyeSB7XG4gICAgICB5aWVsZCBpdChlLmxvY2FsUGFydGljaXBhbnQsIGwsIEsoeyB0b3BpYzogclswXSB9LCBmKSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIG8ubmV4dCghMSk7XG4gICAgfVxuICB9KSB9O1xufVxuZnVuY3Rpb24gY28oZSkge1xuICByZXR1cm4geyBjaGF0T2JzZXJ2YWJsZTogZW8oZSksIHNlbmQ6IChpKSA9PiBCKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgcmV0dXJuIHlpZWxkIGUubG9jYWxQYXJ0aWNpcGFudC5zZW5kQ2hhdE1lc3NhZ2UoaSk7XG4gIH0pLCBlZGl0OiAoaSwgbykgPT4gQih0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgIHJldHVybiB5aWVsZCBlLmxvY2FsUGFydGljaXBhbnQuZWRpdENoYXRNZXNzYWdlKGksIG8pO1xuICB9KSB9O1xufVxudmFyIHVvID0gbmV3IFRleHRFbmNvZGVyKCksIGxvID0gbmV3IFRleHREZWNvZGVyKCksIFBlID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSwgZm8gPSAoZSkgPT4gdW8uZW5jb2RlKEpTT04uc3RyaW5naWZ5KGUpKSwgcG8gPSAoZSkgPT4gSlNPTi5wYXJzZShsby5kZWNvZGUoZSkpO1xuZnVuY3Rpb24gZHMoZSwgdCkge1xuICB2YXIgbiwgcjtcbiAgY29uc3QgaSA9IG5ldyBuZSgpLCB7IG1lc3NhZ2VEZWNvZGVyOiBvLCBtZXNzYWdlRW5jb2RlcjogcywgY2hhbm5lbFRvcGljOiBhLCB1cGRhdGVDaGFubmVsVG9waWM6IGMgfSA9IHQgPz8ge30sIHUgPSBhID8/IE50LkNIQVQsIGwgPSBjID8/IE50LkNIQVRfVVBEQVRFO1xuICBsZXQgZiA9ICExO1xuICBQZS5oYXMoZSkgfHwgKGYgPSAhMCk7XG4gIGNvbnN0IGggPSAobiA9IFBlLmdldChlKSkgIT0gbnVsbCA/IG4gOiAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpLCBkID0gKHIgPSBoLmdldCh1KSkgIT0gbnVsbCA/IHIgOiBuZXcgbmUoKTtcbiAgaWYgKGguc2V0KHUsIGQpLCBQZS5zZXQoZSwgaCksIGYpIHtcbiAgICBjb25zdCB7IG1lc3NhZ2VPYnNlcnZhYmxlOiBDIH0gPSBhbyhlLCBbdSwgbF0pO1xuICAgIEMucGlwZShMdChpKSkuc3Vic2NyaWJlKGQpO1xuICB9XG4gIGNvbnN0IHsgY2hhdE9ic2VydmFibGU6IG0sIHNlbmQ6IHAgfSA9IGNvKGUpLCBnID0gbyA/PyBwbywgdiA9IHlpKFxuICAgIGQucGlwZShcbiAgICAgIEEoKEMpID0+IHtcbiAgICAgICAgY29uc3QgVCA9IGcoQy5wYXlsb2FkKSwgSSA9IHllKEsoe30sIFQpLCB7IGZyb206IEMuZnJvbSB9KTtcbiAgICAgICAgaWYgKCFobyhJKSlcbiAgICAgICAgICByZXR1cm4gSTtcbiAgICAgIH0pXG4gICAgKSxcbiAgICBtLnBpcGUoXG4gICAgICBBKChbQywgVF0pID0+IHllKEsoe30sIEMpLCB7IGZyb206IFQgfSkpXG4gICAgKVxuICApLnBpcGUoXG4gICAgVGkoKEMsIFQpID0+IHtcbiAgICAgIHZhciBJO1xuICAgICAgaWYgKCFUKVxuICAgICAgICByZXR1cm4gQztcbiAgICAgIGlmIChcImlkXCIgaW4gVCAmJiBDLmZpbmQoKE4pID0+IHtcbiAgICAgICAgdmFyIHcsIHg7XG4gICAgICAgIHJldHVybiAoKHcgPSBOLmZyb20pID09IG51bGwgPyB2b2lkIDAgOiB3LmlkZW50aXR5KSA9PT0gKCh4ID0gVC5mcm9tKSA9PSBudWxsID8gdm9pZCAwIDogeC5pZGVudGl0eSkgJiYgTi5pZCA9PT0gVC5pZDtcbiAgICAgIH0pKSB7XG4gICAgICAgIGNvbnN0IE4gPSBDLmZpbmRJbmRleCgodykgPT4gdy5pZCA9PT0gVC5pZCk7XG4gICAgICAgIGlmIChOID4gLTEpIHtcbiAgICAgICAgICBjb25zdCB3ID0gQ1tOXTtcbiAgICAgICAgICBDW05dID0geWUoSyh7fSwgVCksIHtcbiAgICAgICAgICAgIHRpbWVzdGFtcDogdy50aW1lc3RhbXAsXG4gICAgICAgICAgICBlZGl0VGltZXN0YW1wOiAoSSA9IFQuZWRpdFRpbWVzdGFtcCkgIT0gbnVsbCA/IEkgOiBULnRpbWVzdGFtcFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbLi4uQ107XG4gICAgICB9XG4gICAgICByZXR1cm4gWy4uLkMsIFRdO1xuICAgIH0sIFtdKSxcbiAgICBMdChpKVxuICApLCBTID0gbmV3IG9uKCExKSwgayA9IHMgPz8gZm8sIF8gPSAoQykgPT4gQih0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgIFMubmV4dCghMCk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IFQgPSB5aWVsZCBwKEMpLCBJID0gayh5ZShLKHt9LCBUKSwgeyBpZ25vcmU6ICEwIH0pKTtcbiAgICAgIHJldHVybiB5aWVsZCBpdChlLmxvY2FsUGFydGljaXBhbnQsIEksIHtcbiAgICAgICAgcmVsaWFibGU6ICEwLFxuICAgICAgICB0b3BpYzogdVxuICAgICAgfSksIFQ7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIFMubmV4dCghMSk7XG4gICAgfVxuICB9KSwgRSA9IChDLCBUKSA9PiBCKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgY29uc3QgSSA9IERhdGUubm93KCksIE4gPSB0eXBlb2YgVCA9PSBcInN0cmluZ1wiID8geyBpZDogVCwgbWVzc2FnZTogXCJcIiwgdGltZXN0YW1wOiBJIH0gOiBUO1xuICAgIFMubmV4dCghMCk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHcgPSB5aWVsZCBlLmxvY2FsUGFydGljaXBhbnQuZWRpdENoYXRNZXNzYWdlKEMsIE4pLCB4ID0gayh3KTtcbiAgICAgIHJldHVybiB5aWVsZCBpdChlLmxvY2FsUGFydGljaXBhbnQsIHgsIHtcbiAgICAgICAgdG9waWM6IGwsXG4gICAgICAgIHJlbGlhYmxlOiAhMFxuICAgICAgfSksIHc7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIFMubmV4dCghMSk7XG4gICAgfVxuICB9KTtcbiAgZnVuY3Rpb24gcmUoKSB7XG4gICAgaS5uZXh0KCksIGkuY29tcGxldGUoKSwgUGUuZGVsZXRlKGUpO1xuICB9XG4gIHJldHVybiBlLm9uY2UoYi5EaXNjb25uZWN0ZWQsIHJlKSwge1xuICAgIG1lc3NhZ2VPYnNlcnZhYmxlOiB2LFxuICAgIGlzU2VuZGluZ09ic2VydmFibGU6IFMsXG4gICAgc2VuZDogXyxcbiAgICB1cGRhdGU6IEVcbiAgfTtcbn1cbmZ1bmN0aW9uIGhvKGUpIHtcbiAgcmV0dXJuIGUuaWdub3JlID09ICEwO1xufVxuZnVuY3Rpb24gcHMoKSB7XG4gIGNvbnN0IGUgPSAobikgPT4gQih0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgIEwuaW5mbyhcIlN0YXJ0IEF1ZGlvIGZvciByb29tOiBcIiwgbiksIHlpZWxkIG4uc3RhcnRBdWRpbygpO1xuICB9KTtcbiAgcmV0dXJuIHsgY2xhc3NOYW1lOiBVKFwic3RhcnQtYXVkaW8tYnV0dG9uXCIpLCByb29tQXVkaW9QbGF5YmFja0FsbG93ZWRPYnNlcnZhYmxlOiB0bywgaGFuZGxlU3RhcnRBdWRpb1BsYXliYWNrOiBlIH07XG59XG5mdW5jdGlvbiBocygpIHtcbiAgY29uc3QgZSA9IChuKSA9PiBCKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgTC5pbmZvKFwiU3RhcnQgVmlkZW8gZm9yIHJvb206IFwiLCBuKSwgeWllbGQgbi5zdGFydFZpZGVvKCk7XG4gIH0pO1xuICByZXR1cm4geyBjbGFzc05hbWU6IFUoXCJzdGFydC1hdWRpby1idXR0b25cIiksIHJvb21WaWRlb1BsYXliYWNrQWxsb3dlZE9ic2VydmFibGU6IG5vLCBoYW5kbGVTdGFydFZpZGVvUGxheWJhY2s6IGUgfTtcbn1cbmZ1bmN0aW9uIHZzKCkge1xuICByZXR1cm4geyBjbGFzc05hbWU6IFtVKFwiYnV0dG9uXCIpLCBVKFwiY2hhdC10b2dnbGVcIildLmpvaW4oXCIgXCIpIH07XG59XG5mdW5jdGlvbiBtcygpIHtcbiAgcmV0dXJuIHsgY2xhc3NOYW1lOiBbVShcImJ1dHRvblwiKSwgVShcImZvY3VzLXRvZ2dsZS1idXR0b25cIildLmpvaW4oXCIgXCIpIH07XG59XG5mdW5jdGlvbiBncygpIHtcbiAgcmV0dXJuIHsgY2xhc3NOYW1lOiBcImxrLWNsZWFyLXBpbi1idXR0b24gbGstYnV0dG9uXCIgfTtcbn1cbmZ1bmN0aW9uIGJzKCkge1xuICByZXR1cm4geyBjbGFzc05hbWU6IFwibGstcm9vbS1jb250YWluZXJcIiB9O1xufVxuZnVuY3Rpb24gJHQoZSwgdCwgbiA9ICEwKSB7XG4gIGNvbnN0IGkgPSBbZS5sb2NhbFBhcnRpY2lwYW50LCAuLi5BcnJheS5mcm9tKGUucmVtb3RlUGFydGljaXBhbnRzLnZhbHVlcygpKV0sIG8gPSBbXTtcbiAgcmV0dXJuIGkuZm9yRWFjaCgocykgPT4ge1xuICAgIHQuZm9yRWFjaCgoYSkgPT4ge1xuICAgICAgY29uc3QgYyA9IEFycmF5LmZyb20oXG4gICAgICAgIHMudHJhY2tQdWJsaWNhdGlvbnMudmFsdWVzKClcbiAgICAgICkuZmlsdGVyKFxuICAgICAgICAodSkgPT4gdS5zb3VyY2UgPT09IGEgJiYgLy8gZWl0aGVyIHJldHVybiBhbGwgb3Igb25seSB0aGUgb25lcyB0aGF0IGFyZSBzdWJzY3JpYmVkXG4gICAgICAgICghbiB8fCB1LnRyYWNrKVxuICAgICAgKS5tYXAoKHUpID0+ICh7XG4gICAgICAgIHBhcnRpY2lwYW50OiBzLFxuICAgICAgICBwdWJsaWNhdGlvbjogdSxcbiAgICAgICAgc291cmNlOiB1LnNvdXJjZVxuICAgICAgfSkpO1xuICAgICAgby5wdXNoKC4uLmMpO1xuICAgIH0pO1xuICB9KSwgeyB0cmFja1JlZmVyZW5jZXM6IG8sIHBhcnRpY2lwYW50czogaSB9O1xufVxuZnVuY3Rpb24gVXQoZSwgdCwgbiA9ICExKSB7XG4gIGNvbnN0IHsgc291cmNlczogciwga2luZDogaSwgbmFtZTogbyB9ID0gdDtcbiAgcmV0dXJuIEFycmF5LmZyb20oZS50cmFja1B1YmxpY2F0aW9ucy52YWx1ZXMoKSkuZmlsdGVyKFxuICAgIChhKSA9PiAoIXIgfHwgci5pbmNsdWRlcyhhLnNvdXJjZSkpICYmICghaSB8fCBhLmtpbmQgPT09IGkpICYmICghbyB8fCBhLnRyYWNrTmFtZSA9PT0gbykgJiYgLy8gZWl0aGVyIHJldHVybiBhbGwgb3Igb25seSB0aGUgb25lcyB0aGF0IGFyZSBzdWJzY3JpYmVkXG4gICAgKCFuIHx8IGEudHJhY2spXG4gICkubWFwKChhKSA9PiAoe1xuICAgIHBhcnRpY2lwYW50OiBlLFxuICAgIHB1YmxpY2F0aW9uOiBhLFxuICAgIHNvdXJjZTogYS5zb3VyY2VcbiAgfSkpO1xufVxuZnVuY3Rpb24geXMoZSwgdCwgbikge1xuICB2YXIgciwgaTtcbiAgY29uc3QgbyA9IChyID0gbi5hZGRpdGlvbmFsUm9vbUV2ZW50cykgIT0gbnVsbCA/IHIgOiB4biwgcyA9IChpID0gbi5vbmx5U3Vic2NyaWJlZCkgIT0gbnVsbCA/IGkgOiAhMCwgYSA9IEFycmF5LmZyb20oXG4gICAgKC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFtcbiAgICAgIGIuUGFydGljaXBhbnRDb25uZWN0ZWQsXG4gICAgICBiLlBhcnRpY2lwYW50RGlzY29ubmVjdGVkLFxuICAgICAgYi5Db25uZWN0aW9uU3RhdGVDaGFuZ2VkLFxuICAgICAgYi5Mb2NhbFRyYWNrUHVibGlzaGVkLFxuICAgICAgYi5Mb2NhbFRyYWNrVW5wdWJsaXNoZWQsXG4gICAgICBiLlRyYWNrUHVibGlzaGVkLFxuICAgICAgYi5UcmFja1VucHVibGlzaGVkLFxuICAgICAgYi5UcmFja1N1YnNjcmlwdGlvblN0YXR1c0NoYW5nZWQsXG4gICAgICAuLi5vXG4gICAgXSkpLnZhbHVlcygpXG4gICk7XG4gIHJldHVybiBzZShlLCAuLi5hKS5waXBlKFxuICAgIEEoKHUpID0+IHtcbiAgICAgIGNvbnN0IGwgPSAkdCh1LCB0LCBzKTtcbiAgICAgIHJldHVybiBMLmRlYnVnKGBUcmFja1JlZmVyZW5jZVtdIHdhcyB1cGRhdGVkLiAobGVuZ3RoICR7bC50cmFja1JlZmVyZW5jZXMubGVuZ3RofSlgLCBsKSwgbDtcbiAgICB9KSxcbiAgICBNKCR0KGUsIHQsIHMpKVxuICApO1xufVxuZnVuY3Rpb24gd3MoZSwgdCkge1xuICByZXR1cm4gbWUoZSwgLi4uJGkpLnBpcGUoXG4gICAgQSgocikgPT4ge1xuICAgICAgY29uc3QgaSA9IFV0KHIsIHQpO1xuICAgICAgcmV0dXJuIEwuZGVidWcoYFRyYWNrUmVmZXJlbmNlW10gd2FzIHVwZGF0ZWQuIChsZW5ndGggJHtpLmxlbmd0aH0pYCwgaSksIGk7XG4gICAgfSksXG4gICAgTShVdChlLCB0KSlcbiAgKTtcbn1cbmZ1bmN0aW9uIExuKGUsIHQpIHtcbiAgcmV0dXJuIG5ldyBPKChyKSA9PiB7XG4gICAgY29uc3QgaSA9ICguLi5zKSA9PiB7XG4gICAgICByLm5leHQocyk7XG4gICAgfTtcbiAgICByZXR1cm4gZS5vbih0LCBpKSwgKCkgPT4ge1xuICAgICAgZS5vZmYodCwgaSk7XG4gICAgfTtcbiAgfSk7XG59XG5mdW5jdGlvbiBTcyhlKSB7XG4gIHJldHVybiBMbihlLCBGdC5UcmFuc2NyaXB0aW9uUmVjZWl2ZWQpO1xufVxuZnVuY3Rpb24geHMoZSkge1xuICByZXR1cm4gTG4oZSwgRnQuVGltZVN5bmNVcGRhdGUpLnBpcGUoXG4gICAgQSgoW3RdKSA9PiB0KVxuICApO1xufVxuZnVuY3Rpb24gRXMoZSwgdCA9IDFlMykge1xuICBpZiAoZSA9PT0gbnVsbCkgcmV0dXJuIGt0KCExKTtcbiAgY29uc3QgbiA9IHR0KGUsIFwibW91c2Vtb3ZlXCIsIHsgcGFzc2l2ZTogITAgfSkucGlwZShBKCgpID0+ICEwKSksIHIgPSBuLnBpcGUoXG4gICAgc2koe1xuICAgICAgZWFjaDogdCxcbiAgICAgIHdpdGg6ICgpID0+IERlKGt0KCExKSwgci5waXBlKENpKG4pKSlcbiAgICB9KSxcbiAgICBTaSgpXG4gICk7XG4gIHJldHVybiByO1xufVxuZnVuY3Rpb24gdm8oZSwgdCkge1xuICBpZiAodHlwZW9mIGxvY2FsU3RvcmFnZSA+IFwidVwiKSB7XG4gICAgTC5lcnJvcihcIkxvY2FsIHN0b3JhZ2UgaXMgbm90IGF2YWlsYWJsZS5cIik7XG4gICAgcmV0dXJuO1xuICB9XG4gIHRyeSB7XG4gICAgaWYgKHQpIHtcbiAgICAgIGNvbnN0IG4gPSBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHQpLmZpbHRlcigoWywgcl0pID0+IHIgIT09IFwiXCIpXG4gICAgICApO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oZSwgSlNPTi5zdHJpbmdpZnkobikpO1xuICAgIH1cbiAgfSBjYXRjaCAobikge1xuICAgIEwuZXJyb3IoYEVycm9yIHNldHRpbmcgaXRlbSB0byBsb2NhbCBzdG9yYWdlOiAke259YCk7XG4gIH1cbn1cbmZ1bmN0aW9uIG1vKGUpIHtcbiAgaWYgKHR5cGVvZiBsb2NhbFN0b3JhZ2UgPiBcInVcIikge1xuICAgIEwuZXJyb3IoXCJMb2NhbCBzdG9yYWdlIGlzIG5vdCBhdmFpbGFibGUuXCIpO1xuICAgIHJldHVybjtcbiAgfVxuICB0cnkge1xuICAgIGNvbnN0IHQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShlKTtcbiAgICBpZiAoIXQpIHtcbiAgICAgIEwud2FybihgSXRlbSB3aXRoIGtleSAke2V9IGRvZXMgbm90IGV4aXN0IGluIGxvY2FsIHN0b3JhZ2UuYCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJldHVybiBKU09OLnBhcnNlKHQpO1xuICB9IGNhdGNoICh0KSB7XG4gICAgTC5lcnJvcihgRXJyb3IgZ2V0dGluZyBpdGVtIGZyb20gbG9jYWwgc3RvcmFnZTogJHt0fWApO1xuICAgIHJldHVybjtcbiAgfVxufVxuZnVuY3Rpb24gZ28oZSkge1xuICByZXR1cm4ge1xuICAgIGxvYWQ6ICgpID0+IG1vKGUpLFxuICAgIHNhdmU6ICh0KSA9PiB2byhlLCB0KVxuICB9O1xufVxudmFyIGJvID0gYCR7U259LXVzZXItY2hvaWNlc2AsIGJlID0ge1xuICB2aWRlb0VuYWJsZWQ6ICEwLFxuICBhdWRpb0VuYWJsZWQ6ICEwLFxuICB2aWRlb0RldmljZUlkOiBcIlwiLFxuICBhdWRpb0RldmljZUlkOiBcIlwiLFxuICB1c2VybmFtZTogXCJcIlxufSwgeyBsb2FkOiB5bywgc2F2ZTogd28gfSA9IGdvKGJvKTtcbmZ1bmN0aW9uIFRzKGUsIHQgPSAhMSkge1xuICB0ICE9PSAhMCAmJiB3byhlKTtcbn1cbmZ1bmN0aW9uIENzKGUsIHQgPSAhMSkge1xuICB2YXIgbiwgciwgaSwgbywgcztcbiAgY29uc3QgYSA9IHtcbiAgICB2aWRlb0VuYWJsZWQ6IChuID0gZSA9PSBudWxsID8gdm9pZCAwIDogZS52aWRlb0VuYWJsZWQpICE9IG51bGwgPyBuIDogYmUudmlkZW9FbmFibGVkLFxuICAgIGF1ZGlvRW5hYmxlZDogKHIgPSBlID09IG51bGwgPyB2b2lkIDAgOiBlLmF1ZGlvRW5hYmxlZCkgIT0gbnVsbCA/IHIgOiBiZS5hdWRpb0VuYWJsZWQsXG4gICAgdmlkZW9EZXZpY2VJZDogKGkgPSBlID09IG51bGwgPyB2b2lkIDAgOiBlLnZpZGVvRGV2aWNlSWQpICE9IG51bGwgPyBpIDogYmUudmlkZW9EZXZpY2VJZCxcbiAgICBhdWRpb0RldmljZUlkOiAobyA9IGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUuYXVkaW9EZXZpY2VJZCkgIT0gbnVsbCA/IG8gOiBiZS5hdWRpb0RldmljZUlkLFxuICAgIHVzZXJuYW1lOiAocyA9IGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUudXNlcm5hbWUpICE9IG51bGwgPyBzIDogYmUudXNlcm5hbWVcbiAgfTtcbiAgaWYgKHQpXG4gICAgcmV0dXJuIGE7XG4gIHtcbiAgICBjb25zdCBjID0geW8oKTtcbiAgICByZXR1cm4gSyhLKHt9LCBhKSwgYyA/PyB7fSk7XG4gIH1cbn1cbmZ1bmN0aW9uIF9uKGUsIHQpIHtcbiAgaWYgKHQubXNnID09PSBcInNob3dfY2hhdFwiKVxuICAgIHJldHVybiB7IC4uLmUsIHNob3dDaGF0OiAhMCwgdW5yZWFkTWVzc2FnZXM6IDAgfTtcbiAgaWYgKHQubXNnID09PSBcImhpZGVfY2hhdFwiKVxuICAgIHJldHVybiB7IC4uLmUsIHNob3dDaGF0OiAhMSB9O1xuICBpZiAodC5tc2cgPT09IFwidG9nZ2xlX2NoYXRcIikge1xuICAgIGNvbnN0IG4gPSB7IC4uLmUsIHNob3dDaGF0OiAhZS5zaG93Q2hhdCB9O1xuICAgIHJldHVybiBuLnNob3dDaGF0ID09PSAhMCAmJiAobi51bnJlYWRNZXNzYWdlcyA9IDApLCBuO1xuICB9IGVsc2UgcmV0dXJuIHQubXNnID09PSBcInVucmVhZF9tc2dcIiA/IHsgLi4uZSwgdW5yZWFkTWVzc2FnZXM6IHQuY291bnQgfSA6IHQubXNnID09PSBcInRvZ2dsZV9zZXR0aW5nc1wiID8geyAuLi5lLCBzaG93U2V0dGluZ3M6ICFlLnNob3dTZXR0aW5ncyB9IDogeyAuLi5lIH07XG59XG5mdW5jdGlvbiBJbihlLCB0KSB7XG4gIHJldHVybiB0Lm1zZyA9PT0gXCJzZXRfcGluXCIgPyBbdC50cmFja1JlZmVyZW5jZV0gOiB0Lm1zZyA9PT0gXCJjbGVhcl9waW5cIiA/IFtdIDogeyAuLi5lIH07XG59XG5jb25zdCBEbiA9IEQuY3JlYXRlQ29udGV4dCh2b2lkIDApO1xuZnVuY3Rpb24gUHMoKSB7XG4gIGNvbnN0IGUgPSBELnVzZUNvbnRleHQoRG4pO1xuICBpZiAoIWUpXG4gICAgdGhyb3cgRXJyb3IoXCJUcmllZCB0byBhY2Nlc3MgTGF5b3V0Q29udGV4dCBjb250ZXh0IG91dHNpZGUgYSBMYXlvdXRDb250ZXh0UHJvdmlkZXIgcHJvdmlkZXIuXCIpO1xuICByZXR1cm4gZTtcbn1cbmZ1bmN0aW9uIEFzKGUpIHtcbiAgY29uc3QgdCA9IFNvKCk7XG4gIGlmIChlID8/IChlID0gdCksICFlKVxuICAgIHRocm93IEVycm9yKFwiVHJpZWQgdG8gYWNjZXNzIExheW91dENvbnRleHQgY29udGV4dCBvdXRzaWRlIGEgTGF5b3V0Q29udGV4dFByb3ZpZGVyIHByb3ZpZGVyLlwiKTtcbiAgcmV0dXJuIGU7XG59XG5mdW5jdGlvbiBrcygpIHtcbiAgY29uc3QgW2UsIHRdID0gRC51c2VSZWR1Y2VyKEluLCBUbiksIFtuLCByXSA9IEQudXNlUmVkdWNlcihfbiwgQ24pO1xuICByZXR1cm4ge1xuICAgIHBpbjogeyBkaXNwYXRjaDogdCwgc3RhdGU6IGUgfSxcbiAgICB3aWRnZXQ6IHsgZGlzcGF0Y2g6IHIsIHN0YXRlOiBuIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIE9zKGUpIHtcbiAgY29uc3QgW3QsIG5dID0gRC51c2VSZWR1Y2VyKEluLCBUbiksIFtyLCBpXSA9IEQudXNlUmVkdWNlcihfbiwgQ24pO1xuICByZXR1cm4gZSA/PyB7XG4gICAgcGluOiB7IGRpc3BhdGNoOiBuLCBzdGF0ZTogdCB9LFxuICAgIHdpZGdldDogeyBkaXNwYXRjaDogaSwgc3RhdGU6IHIgfVxuICB9O1xufVxuZnVuY3Rpb24gU28oKSB7XG4gIHJldHVybiBELnVzZUNvbnRleHQoRG4pO1xufVxuY29uc3QgTW4gPSBELmNyZWF0ZUNvbnRleHQoXG4gIHZvaWQgMFxuKTtcbmZ1bmN0aW9uIExzKCkge1xuICBjb25zdCBlID0gRC51c2VDb250ZXh0KE1uKTtcbiAgaWYgKCFlKVxuICAgIHRocm93IEVycm9yKFwidHJpZWQgdG8gYWNjZXNzIHRyYWNrIGNvbnRleHQgb3V0c2lkZSBvZiB0cmFjayBjb250ZXh0IHByb3ZpZGVyXCIpO1xuICByZXR1cm4gZTtcbn1cbmZ1bmN0aW9uIFJuKCkge1xuICByZXR1cm4gRC51c2VDb250ZXh0KE1uKTtcbn1cbmZ1bmN0aW9uIF9zKGUpIHtcbiAgY29uc3QgdCA9IFJuKCksIG4gPSBlID8/IHQ7XG4gIGlmICghbilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcIk5vIFRyYWNrUmVmLCBtYWtlIHN1cmUgeW91IGFyZSBpbnNpZGUgYSBUcmFja1JlZkNvbnRleHQgb3IgcGFzcyB0aGUgVHJhY2tSZWYgZXhwbGljaXRseVwiXG4gICAgKTtcbiAgcmV0dXJuIG47XG59XG5jb25zdCBObiA9IEQuY3JlYXRlQ29udGV4dCh2b2lkIDApO1xuZnVuY3Rpb24gSXMoKSB7XG4gIGNvbnN0IGUgPSBELnVzZUNvbnRleHQoTm4pO1xuICBpZiAoIWUpXG4gICAgdGhyb3cgRXJyb3IoXCJ0cmllZCB0byBhY2Nlc3MgcGFydGljaXBhbnQgY29udGV4dCBvdXRzaWRlIG9mIHBhcnRpY2lwYW50IGNvbnRleHQgcHJvdmlkZXJcIik7XG4gIHJldHVybiBlO1xufVxuZnVuY3Rpb24geG8oKSB7XG4gIHJldHVybiBELnVzZUNvbnRleHQoTm4pO1xufVxuZnVuY3Rpb24gRHMoZSkge1xuICBjb25zdCB0ID0geG8oKSwgbiA9IFJuKCksIHIgPSBlID8/IHQgPz8gKG4gPT0gbnVsbCA/IHZvaWQgMCA6IG4ucGFydGljaXBhbnQpO1xuICBpZiAoIXIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJObyBwYXJ0aWNpcGFudCBwcm92aWRlZCwgbWFrZSBzdXJlIHlvdSBhcmUgaW5zaWRlIGEgcGFydGljaXBhbnQgY29udGV4dCBvciBwYXNzIHRoZSBwYXJ0aWNpcGFudCBleHBsaWNpdGx5XCJcbiAgICApO1xuICByZXR1cm4gcjtcbn1cbmNvbnN0ICRuID0gRC5jcmVhdGVDb250ZXh0KHZvaWQgMCk7XG5mdW5jdGlvbiBNcygpIHtcbiAgY29uc3QgZSA9IEQudXNlQ29udGV4dCgkbik7XG4gIGlmICghZSlcbiAgICB0aHJvdyBFcnJvcihcInRyaWVkIHRvIGFjY2VzcyByb29tIGNvbnRleHQgb3V0c2lkZSBvZiBsaXZla2l0IHJvb20gY29tcG9uZW50XCIpO1xuICByZXR1cm4gZTtcbn1cbmZ1bmN0aW9uIEVvKCkge1xuICByZXR1cm4gRC51c2VDb250ZXh0KCRuKTtcbn1cbmZ1bmN0aW9uIFJzKGUpIHtcbiAgY29uc3QgdCA9IEVvKCksIG4gPSBlID8/IHQ7XG4gIGlmICghbilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcIk5vIHJvb20gcHJvdmlkZWQsIG1ha2Ugc3VyZSB5b3UgYXJlIGluc2lkZSBhIFJvb20gY29udGV4dCBvciBwYXNzIHRoZSByb29tIGV4cGxpY2l0bHlcIlxuICAgICk7XG4gIHJldHVybiBuO1xufVxuY29uc3QgVG8gPSBELmNyZWF0ZUNvbnRleHQodm9pZCAwKTtcbmZ1bmN0aW9uIE5zKGUpIHtcbiAgY29uc3QgdCA9IEQudXNlQ29udGV4dChUbyk7XG4gIGlmIChlID09PSAhMCkge1xuICAgIGlmICh0KVxuICAgICAgcmV0dXJuIHQ7XG4gICAgdGhyb3cgRXJyb3IoXCJ0cmllZCB0byBhY2Nlc3MgZmVhdHVyZSBjb250ZXh0LCBidXQgbm9uZSBpcyBwcmVzZW50XCIpO1xuICB9XG4gIHJldHVybiB0O1xufVxuZXhwb3J0IHtcbiAgVHMgYXMgJCxcbiAgSG8gYXMgQSxcbiAgeG8gYXMgQixcbiAgaW8gYXMgQyxcbiAgZnMgYXMgRCxcbiAgWm8gYXMgRSxcbiAgQXMgYXMgRixcbiAgJG8gYXMgRyxcbiAgZXMgYXMgSCxcbiAgbnMgYXMgSSxcbiAgR28gYXMgSixcbiAgS28gYXMgSyxcbiAgVG8gYXMgTCxcbiAgVm8gYXMgTSxcbiAgcHMgYXMgTixcbiAgaHMgYXMgTyxcbiAgdnMgYXMgUCxcbiAgdXMgYXMgUSxcbiAgJG4gYXMgUixcbiAgaXMgYXMgUyxcbiAgb3MgYXMgVCxcbiAgV2kgYXMgVSxcbiAgeXMgYXMgVixcbiAgV28gYXMgVyxcbiAgUnQgYXMgWCxcbiAgem8gYXMgWSxcbiAgZHMgYXMgWixcbiAgQ3MgYXMgXyxcbiAgUHMgYXMgYSxcbiAgSm8gYXMgYTAsXG4gIGogYXMgYTEsXG4gIHdzIGFzIGEyLFxuICB4cyBhcyBhMyxcbiAgU3MgYXMgYTQsXG4gIGpvIGFzIGE1LFxuICBGbyBhcyBhNixcbiAgcnMgYXMgYTcsXG4gIHFvIGFzIGE4LFxuICBSbiBhcyBhOSxcbiAgRG4gYXMgYWEsXG4gIGxzIGFzIGFiLFxuICBrbyBhcyBhYyxcbiAgd3IgYXMgYWQsXG4gIFNyIGFzIGFlLFxuICBObiBhcyBhZixcbiAgTW4gYXMgYWcsXG4gIE5zIGFzIGFoLFxuICBFcyBhcyBhaSxcbiAgT28gYXMgYWosXG4gIE9zIGFzIGFrLFxuICBNbyBhcyBhbCxcbiAgRG8gYXMgYW0sXG4gIF9vIGFzIGFuLFxuICBJbyBhcyBhbyxcbiAgYmUgYXMgYXAsXG4gIFVvIGFzIGFxLFxuICBrcyBhcyBhcixcbiAgUG8gYXMgYXMsXG4gIExvIGFzIGF0LFxuICBSbyBhcyBhdSxcbiAgTm8gYXMgYXYsXG4gIElzIGFzIGF3LFxuICBMcyBhcyBheCxcbiAgZ3MgYXMgYixcbiAgRHMgYXMgYyxcbiAgY3MgYXMgZCxcbiAgWW8gYXMgZSxcbiAgTXMgYXMgZixcbiAgYW8gYXMgZyxcbiAgYXMgYXMgaCxcbiAgX3MgYXMgaSxcbiAgU28gYXMgaixcbiAgbXMgYXMgayxcbiAgTCBhcyBsLFxuICBBbyBhcyBtLFxuICBGaSBhcyBuLFxuICBzbyBhcyBvLFxuICAkIGFzIHAsXG4gIFhvIGFzIHEsXG4gIHRvIGFzIHIsXG4gIGJzIGFzIHMsXG4gIE9uIGFzIHQsXG4gIFJzIGFzIHUsXG4gIHRzIGFzIHYsXG4gIEVvIGFzIHcsXG4gIFFvIGFzIHgsXG4gIHNzIGFzIHksXG4gIEJvIGFzIHpcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb250ZXh0cy1EamljS0pVei5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0/node_modules/@livekit/components-react/dist/contexts-DjicKJUz.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0/node_modules/@livekit/components-react/dist/hooks-C7Q76A3H.mjs":
/*!********************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0/node_modules/@livekit/components-react/dist/hooks-C7Q76A3H.mjs ***!
  \********************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   A: () => (/* binding */ Et),\n/* harmony export */   B: () => (/* binding */ Lt),\n/* harmony export */   C: () => (/* binding */ Ye),\n/* harmony export */   D: () => (/* binding */ St),\n/* harmony export */   E: () => (/* binding */ Mt),\n/* harmony export */   F: () => (/* binding */ je),\n/* harmony export */   G: () => (/* binding */ z),\n/* harmony export */   H: () => (/* binding */ Xe),\n/* harmony export */   I: () => (/* binding */ Ct),\n/* harmony export */   J: () => (/* binding */ It),\n/* harmony export */   K: () => (/* binding */ Dt),\n/* harmony export */   L: () => (/* binding */ Rt),\n/* harmony export */   M: () => (/* binding */ G),\n/* harmony export */   N: () => (/* binding */ Nt),\n/* harmony export */   O: () => (/* binding */ Ze),\n/* harmony export */   P: () => (/* binding */ qt),\n/* harmony export */   Q: () => (/* binding */ Qt),\n/* harmony export */   R: () => (/* binding */ Ht),\n/* harmony export */   S: () => (/* binding */ Xt),\n/* harmony export */   T: () => (/* binding */ it),\n/* harmony export */   U: () => (/* binding */ lt),\n/* harmony export */   V: () => (/* binding */ Kt),\n/* harmony export */   W: () => (/* binding */ ft),\n/* harmony export */   X: () => (/* binding */ Yt),\n/* harmony export */   Y: () => (/* binding */ Zt),\n/* harmony export */   a: () => (/* binding */ O),\n/* harmony export */   b: () => (/* binding */ Ut),\n/* harmony export */   c: () => (/* binding */ yt),\n/* harmony export */   d: () => (/* binding */ Pt),\n/* harmony export */   e: () => (/* binding */ Tt),\n/* harmony export */   f: () => (/* binding */ Vt),\n/* harmony export */   g: () => (/* binding */ Bt),\n/* harmony export */   h: () => (/* binding */ _t),\n/* harmony export */   i: () => (/* binding */ ht),\n/* harmony export */   j: () => (/* binding */ b),\n/* harmony export */   k: () => (/* binding */ Jt),\n/* harmony export */   l: () => (/* binding */ Ot),\n/* harmony export */   m: () => (/* binding */ xt),\n/* harmony export */   n: () => (/* binding */ kt),\n/* harmony export */   o: () => (/* binding */ At),\n/* harmony export */   p: () => (/* binding */ zt),\n/* harmony export */   q: () => (/* binding */ He),\n/* harmony export */   r: () => (/* binding */ Ke),\n/* harmony export */   s: () => (/* binding */ jt),\n/* harmony export */   t: () => (/* binding */ Wt),\n/* harmony export */   u: () => (/* binding */ vt),\n/* harmony export */   v: () => (/* binding */ Ft),\n/* harmony export */   w: () => (/* binding */ $t),\n/* harmony export */   x: () => (/* binding */ wt),\n/* harmony export */   y: () => (/* binding */ Gt),\n/* harmony export */   z: () => (/* binding */ gt)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/.pnpm/next@14.2.9_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./contexts-DjicKJUz.mjs */ \"(ssr)/./node_modules/.pnpm/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0/node_modules/@livekit/components-react/dist/contexts-DjicKJUz.mjs\");\n/* harmony import */ var _room_C0QEsGui_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./room-C0QEsGui.mjs */ \"(ssr)/./node_modules/.pnpm/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0/node_modules/@livekit/components-react/dist/room-C0QEsGui.mjs\");\n/* harmony import */ var livekit_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! livekit-client */ \"(ssr)/./node_modules/.pnpm/livekit-client@2.5.5/node_modules/livekit-client/dist/livekit-client.esm.mjs\");\n\n\n\n\nconst Qe = (e) => {\n  const n = react__WEBPACK_IMPORTED_MODULE_0__.useRef(e);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    n.current = e;\n  }), n;\n};\nfunction $e(e, n) {\n  const t = xe(), a = Qe(n);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect(() => {\n    let s = !1;\n    const c = e.current;\n    if (!c) return;\n    function o(u, i) {\n      s || a.current(u, i);\n    }\n    return t == null || t.subscribe(c, o), () => {\n      s = !0, t == null || t.unsubscribe(c, o);\n    };\n  }, [e.current, t, a]), t == null ? void 0 : t.observer;\n}\nfunction Ge() {\n  let e = !1, n = [];\n  const t = /* @__PURE__ */ new Map();\n  if (typeof window > \"u\")\n    return;\n  const a = new ResizeObserver((s, c) => {\n    n = n.concat(s), e || window.requestAnimationFrame(() => {\n      const o = /* @__PURE__ */ new Set();\n      for (let u = 0; u < n.length; u++) {\n        if (o.has(n[u].target)) continue;\n        o.add(n[u].target);\n        const i = t.get(n[u].target);\n        i == null || i.forEach((d) => d(n[u], c));\n      }\n      n = [], e = !1;\n    }), e = !0;\n  });\n  return {\n    observer: a,\n    subscribe(s, c) {\n      a.observe(s);\n      const o = t.get(s) ?? [];\n      o.push(c), t.set(s, o);\n    },\n    unsubscribe(s, c) {\n      const o = t.get(s) ?? [];\n      if (o.length === 1) {\n        a.unobserve(s), t.delete(s);\n        return;\n      }\n      const u = o.indexOf(c);\n      u !== -1 && o.splice(u, 1), t.set(s, o);\n    }\n  };\n}\nlet D;\nconst xe = () => D || (D = Ge()), He = (e) => {\n  const [n, t] = react__WEBPACK_IMPORTED_MODULE_0__.useState({ width: 0, height: 0 });\n  react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect(() => {\n    if (e.current) {\n      const { width: s, height: c } = e.current.getBoundingClientRect();\n      t({ width: s, height: c });\n    }\n  }, [e.current]);\n  const a = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (s) => t(s.contentRect),\n    []\n  );\n  return $e(e, a), n;\n};\nfunction b(e, n, t = !0) {\n  const [a, s] = react__WEBPACK_IMPORTED_MODULE_0__.useState(n);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (t && s(n), typeof window > \"u\" || !e) return;\n    const c = e.subscribe(s);\n    return () => c.unsubscribe();\n  }, [e, t]), a;\n}\nfunction gt(e) {\n  const n = (c) => typeof window < \"u\" ? window.matchMedia(c).matches : !1, [t, a] = react__WEBPACK_IMPORTED_MODULE_0__.useState(n(e));\n  function s() {\n    a(n(e));\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const c = window.matchMedia(e);\n    return s(), c.addListener ? c.addListener(s) : c.addEventListener(\"change\", s), () => {\n      c.removeListener ? c.removeListener(s) : c.removeEventListener(\"change\", s);\n    };\n  }, [e]), t;\n}\nfunction St(e) {\n  const n = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(e), t = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(async () => {\n    await n.startAudio();\n  }, [n]), a = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.r)(n),\n    [n]\n  ), { canPlayAudio: s } = b(a, {\n    canPlayAudio: n.canPlaybackAudio\n  });\n  return { canPlayAudio: s, startAudio: t };\n}\nfunction vt(e) {\n  const { state: n, dispatch: t } = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.a)().pin;\n  return { buttonProps: react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const { className: s } = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.b)();\n    return (0,_room_C0QEsGui_mjs__WEBPACK_IMPORTED_MODULE_3__.m)(e, {\n      className: s,\n      disabled: !(n != null && n.length),\n      onClick: () => {\n        t && t({ msg: \"clear_pin\" });\n      }\n    });\n  }, [e, t, n]) };\n}\nfunction ht(e = {}) {\n  const n = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.c)(e.participant), { className: t, connectionQualityObserver: a } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.d)(n),\n    [n]\n  ), s = b(a, livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionQuality.Unknown);\n  return { className: t, quality: s };\n}\nfunction O(e) {\n  const n = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(e), t = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.e)(n), [n]);\n  return b(t, n.state);\n}\nfunction Mt(e, n) {\n  const t = typeof e == \"function\" ? e : n, a = typeof e == \"string\" ? e : void 0, s = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.f)(), { send: c, messageObservable: o, isSendingObservable: u } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.g)(s, a, t),\n    [s, a, t]\n  ), i = b(o, void 0), d = b(u, !1);\n  return {\n    message: i,\n    send: c,\n    isSending: d\n  };\n}\nfunction yt(e) {\n  const n = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.f)(), t = O(n);\n  return { buttonProps: react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const { className: s, disconnect: c } = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.h)(n);\n    return (0,_room_C0QEsGui_mjs__WEBPACK_IMPORTED_MODULE_3__.m)(e, {\n      className: s,\n      onClick: () => c(e.stopTracks ?? !0),\n      disabled: t === livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Disconnected\n    });\n  }, [n, e, t]) };\n}\nfunction je(e) {\n  if (e.publication instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.LocalTrackPublication) {\n    const n = e.publication.track;\n    if (n) {\n      const { facingMode: t } = (0,livekit_client__WEBPACK_IMPORTED_MODULE_1__.facingModeFromLocalTrack)(n);\n      return t;\n    }\n  }\n  return \"undefined\";\n}\nfunction Pt({ trackRef: e, props: n }) {\n  const t = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.i)(e), a = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.j)(), { className: s } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.k)(), []), c = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.m)(t, a == null ? void 0 : a.pin.state), [t, a == null ? void 0 : a.pin.state]);\n  return { mergedProps: react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_room_C0QEsGui_mjs__WEBPACK_IMPORTED_MODULE_3__.m)(n, {\n      className: s,\n      onClick: (u) => {\n        var i, d, l, f, p;\n        (i = n.onClick) == null || i.call(n, u), c ? (l = a == null ? void 0 : (d = a.pin).dispatch) == null || l.call(d, {\n          msg: \"clear_pin\"\n        }) : (p = a == null ? void 0 : (f = a.pin).dispatch) == null || p.call(f, {\n          msg: \"set_pin\",\n          trackReference: t\n        });\n      }\n    }),\n    [n, s, t, c, a == null ? void 0 : a.pin]\n  ), inFocus: c };\n}\nfunction kt(e, n, t = {}) {\n  const a = t.gridLayouts ?? _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.G, { width: s, height: c } = He(e), o = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.n)(a, n, s, c);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    e.current && o && (e.current.style.setProperty(\"--lk-col-count\", o == null ? void 0 : o.columns.toString()), e.current.style.setProperty(\"--lk-row-count\", o == null ? void 0 : o.rows.toString()));\n  }, [e, o]), {\n    layout: o,\n    containerWidth: s,\n    containerHeight: c\n  };\n}\nfunction z(e, n = {}) {\n  var u, i;\n  const t = typeof e == \"string\" ? n.participant : e.participant, a = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.c)(t), s = typeof e == \"string\" ? { participant: a, source: e } : e, [c, o] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    !!((u = s.publication) != null && u.isMuted || (i = a.getTrackPublication(s.source)) != null && i.isMuted)\n  );\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const d = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.o)(s).subscribe(o);\n    return () => d.unsubscribe();\n  }, [(0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.p)(s)]), c;\n}\nfunction Xe(e) {\n  const n = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.c)(e), t = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.q)(n), [n]);\n  return b(t, n.isSpeaking);\n}\nfunction Ye(e = {}) {\n  const n = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(e.room), [t, a] = react__WEBPACK_IMPORTED_MODULE_0__.useState(n.localParticipant), [s, c] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    t.isMicrophoneEnabled\n  ), [o, u] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    t.isMicrophoneEnabled\n  ), [i, d] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    t.lastMicrophoneError\n  ), [l, f] = react__WEBPACK_IMPORTED_MODULE_0__.useState(t.lastCameraError), [p, m] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    t.isMicrophoneEnabled\n  ), [g, S] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    void 0\n  ), [M, v] = react__WEBPACK_IMPORTED_MODULE_0__.useState(void 0), P = (h) => {\n    u(h.isCameraEnabled), c(h.isMicrophoneEnabled), m(h.isScreenShareEnabled), v(h.cameraTrack), S(h.microphoneTrack), d(h.participant.lastMicrophoneError), f(h.participant.lastCameraError), a(h.participant);\n  };\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const h = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.t)(n.localParticipant).subscribe(P);\n    return () => h.unsubscribe();\n  }, [n]), {\n    isMicrophoneEnabled: s,\n    isScreenShareEnabled: p,\n    isCameraEnabled: o,\n    microphoneTrack: g,\n    cameraTrack: M,\n    lastMicrophoneError: i,\n    lastCameraError: l,\n    localParticipant: t\n  };\n}\nfunction Et() {\n  const e = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.f)(), n = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.v)(e.localParticipant),\n    [e]\n  );\n  return b(n, e.localParticipant.permissions);\n}\nfunction Tt({\n  kind: e,\n  room: n,\n  track: t,\n  requestPermissions: a,\n  onError: s\n}) {\n  const c = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.w)(), o = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.x)(e, s, a),\n    [e, a, s]\n  ), u = b(o, []), [i, d] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\"\"), { className: l, activeDeviceObservable: f, setActiveMediaDevice: p } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.y)(e, n ?? c, t),\n    [e, n, c, t]\n  );\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const m = f.subscribe((g) => {\n      _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.l.info(\"setCurrentDeviceId\", g), g && d(g);\n    });\n    return () => {\n      m == null || m.unsubscribe();\n    };\n  }, [f]), { devices: u, className: l, activeDeviceId: i, setActiveMediaDevice: p };\n}\nfunction wt({\n  kind: e,\n  onError: n\n}) {\n  const t = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.x)(e, n),\n    [e, n]\n  );\n  return b(t, []);\n}\nfunction Ke(e, n, t = {}) {\n  const a = react__WEBPACK_IMPORTED_MODULE_0__.useRef([]), s = react__WEBPACK_IMPORTED_MODULE_0__.useRef(-1), c = n !== s.current, o = typeof t.customSortFunction == \"function\" ? t.customSortFunction(e) : (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.z)(e);\n  let u = [...o];\n  if (c === !1)\n    try {\n      u = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.A)(a.current, o, n);\n    } catch (i) {\n      _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.l.error(\"Error while running updatePages(): \", i);\n    }\n  return c ? a.current = o : a.current = u, s.current = n, u;\n}\nfunction At(e, n) {\n  const [t, a] = react__WEBPACK_IMPORTED_MODULE_0__.useState(1), s = Math.max(Math.ceil(n.length / e), 1);\n  t > s && a(s);\n  const c = t * e, o = c - e, u = (f) => {\n    a((p) => f === \"next\" ? p === s ? p : p + 1 : p === 1 ? p : p - 1);\n  }, i = (f) => {\n    f > s ? a(s) : f < 1 ? a(1) : a(f);\n  }, l = Ke(n, e).slice(o, c);\n  return {\n    totalPageCount: s,\n    nextPage: () => u(\"next\"),\n    prevPage: () => u(\"previous\"),\n    setPage: i,\n    firstItemIndex: o,\n    lastItemIndex: c,\n    tracks: l,\n    currentPage: t\n  };\n}\nfunction Ct(e = {}) {\n  let n = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.B)();\n  e.participant && (n = e.participant);\n  const t = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.C)(n), [n]), { identity: a, name: s, metadata: c } = b(t, {\n    name: n == null ? void 0 : n.name,\n    identity: n == null ? void 0 : n.identity,\n    metadata: n == null ? void 0 : n.metadata\n  });\n  return { identity: a, name: s, metadata: c };\n}\nfunction It(e = {}) {\n  const n = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.c)(e.participant), t = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.v)(n), [n]);\n  return b(t, n.permissions);\n}\nfunction Ot({\n  trackRef: e,\n  onParticipantClick: n,\n  disableSpeakingIndicator: t,\n  htmlProps: a\n}) {\n  const s = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.i)(e), c = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const { className: p } = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.D)();\n    return (0,_room_C0QEsGui_mjs__WEBPACK_IMPORTED_MODULE_3__.m)(a, {\n      className: p,\n      onClick: (m) => {\n        var g;\n        if ((g = a.onClick) == null || g.call(a, m), typeof n == \"function\") {\n          const S = s.publication ?? s.participant.getTrackPublication(s.source);\n          n({ participant: s.participant, track: S });\n        }\n      }\n    });\n  }, [\n    a,\n    n,\n    s.publication,\n    s.source,\n    s.participant\n  ]), o = s.participant.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone), u = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => ({\n    participant: s.participant,\n    source: livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone,\n    publication: o\n  }), [o, s.participant]), i = z(s), d = z(u), l = Xe(s.participant), f = je(s);\n  return {\n    elementProps: {\n      \"data-lk-audio-muted\": d,\n      \"data-lk-video-muted\": i,\n      \"data-lk-speaking\": t === !0 ? !1 : l,\n      \"data-lk-local-participant\": s.participant.isLocal,\n      \"data-lk-source\": s.source,\n      \"data-lk-facing-mode\": f,\n      ...c\n    }\n  };\n}\nfunction G(e = {}) {\n  const n = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(e.room), [t, a] = react__WEBPACK_IMPORTED_MODULE_0__.useState([]);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const s = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.E)(n, {\n      additionalRoomEvents: e.updateOnlyOn\n    }).subscribe(a);\n    return () => s.unsubscribe();\n  }, [n, JSON.stringify(e.updateOnlyOn)]), t;\n}\nfunction Dt(e = {}) {\n  const n = G(e), { localParticipant: t } = Ye(e);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => [t, ...n],\n    [t, n]\n  );\n}\nfunction Lt(e) {\n  return e = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.F)(e), react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (e == null ? void 0 : e.pin.state) !== void 0 && e.pin.state.length >= 1 ? e.pin.state : [], [e.pin.state]);\n}\nfunction Rt(e, n = {}) {\n  const t = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.f)(), [a] = react__WEBPACK_IMPORTED_MODULE_0__.useState(n.updateOnlyOn), s = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => typeof e == \"string\" ? (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.H)(t, e, {\n    additionalEvents: a\n  }) : (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.I)(t, e, {\n    additionalEvents: a\n  }), [t, JSON.stringify(e), a]), [c, o] = react__WEBPACK_IMPORTED_MODULE_0__.useState({\n    p: void 0\n  });\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const u = s.subscribe((i) => o({ p: i }));\n    return () => u.unsubscribe();\n  }, [s]), c.p;\n}\nfunction Ft(e = {}) {\n  const n = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(e.room), t = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.J)(n), [n]), { name: a, metadata: s } = b(t, {\n    name: n.name,\n    metadata: n.metadata\n  });\n  return { name: a, metadata: s };\n}\nfunction Ze() {\n  const e = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.f)(), n = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.K)(e), [e]);\n  return b(n, e.activeSpeakers);\n}\nfunction Nt(e) {\n  const [n, t] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.M)(e)\n  ), a = Ze();\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    t((0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.M)(e));\n  }, [a, e]), n;\n}\nfunction Vt({ room: e, props: n }) {\n  const t = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(e), { className: a, roomAudioPlaybackAllowedObservable: s, handleStartAudioPlayback: c } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.N)(),\n    []\n  ), o = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => s(t),\n    [t, s]\n  ), { canPlayAudio: u } = b(o, {\n    canPlayAudio: t.canPlaybackAudio\n  });\n  return { mergedProps: react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_room_C0QEsGui_mjs__WEBPACK_IMPORTED_MODULE_3__.m)(n, {\n      className: a,\n      onClick: () => {\n        c(t);\n      },\n      style: { display: u ? \"none\" : \"block\" }\n    }),\n    [n, a, u, c, t]\n  ), canPlayAudio: u };\n}\nfunction Bt({ room: e, props: n }) {\n  const t = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(e), { className: a, roomVideoPlaybackAllowedObservable: s, handleStartVideoPlayback: c } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.O)(),\n    []\n  ), o = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => s(t),\n    [t, s]\n  ), { canPlayVideo: u } = b(o, {\n    canPlayVideo: t.canPlaybackVideo\n  });\n  return { mergedProps: react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_room_C0QEsGui_mjs__WEBPACK_IMPORTED_MODULE_3__.m)(n, {\n      className: a,\n      onClick: () => {\n        c(t);\n      },\n      style: { display: u ? \"none\" : \"block\" }\n    }),\n    [n, a, u, c, t]\n  ), canPlayVideo: u };\n}\nfunction zt(e, n = {}) {\n  const t = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null), a = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null), s = n.minSwipeDistance ?? 50, c = (i) => {\n    a.current = null, t.current = i.targetTouches[0].clientX;\n  }, o = (i) => {\n    a.current = i.targetTouches[0].clientX;\n  }, u = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    if (!t.current || !a.current)\n      return;\n    const i = t.current - a.current, d = i > s, l = i < -s;\n    d && n.onLeftSwipe && n.onLeftSwipe(), l && n.onRightSwipe && n.onRightSwipe();\n  }, [s, n]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const i = e.current;\n    return i && (i.addEventListener(\"touchstart\", c, { passive: !0 }), i.addEventListener(\"touchmove\", o, { passive: !0 }), i.addEventListener(\"touchend\", u, { passive: !0 })), () => {\n      i && (i.removeEventListener(\"touchstart\", c), i.removeEventListener(\"touchmove\", o), i.removeEventListener(\"touchend\", u));\n    };\n  }, [e, u]);\n}\nfunction Ut({ props: e }) {\n  const { dispatch: n, state: t } = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.a)().widget, { className: a } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.P)(), []);\n  return { mergedProps: react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_room_C0QEsGui_mjs__WEBPACK_IMPORTED_MODULE_3__.m)(e, {\n    className: a,\n    onClick: () => {\n      n && n({ msg: \"toggle_chat\" });\n    },\n    \"aria-pressed\": t != null && t.showChat ? \"true\" : \"false\",\n    \"data-lk-unread-msgs\": t ? t.unreadMessages < 10 ? t.unreadMessages.toFixed(0) : \"9+\" : \"0\"\n  }), [e, a, n, t]) };\n}\nfunction qt(e, n, t = {}) {\n  const [a, s] = react__WEBPACK_IMPORTED_MODULE_0__.useState(void 0);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var o;\n    if (e === void 0)\n      throw Error(\"token endpoint needs to be defined\");\n    if (((o = t.userInfo) == null ? void 0 : o.identity) === void 0)\n      return;\n    (async () => {\n      _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.l.debug(\"fetching token\");\n      const u = new URLSearchParams({ ...t.userInfo, roomName: n }), i = await fetch(`${e}?${u.toString()}`);\n      if (!i.ok) {\n        _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.l.error(\n          `Could not fetch token. Server responded with status ${i.status}: ${i.statusText}`\n        );\n        return;\n      }\n      const { accessToken: d } = await i.json();\n      s(d);\n    })();\n  }, [e, n, JSON.stringify(t)]), a;\n}\nfunction Jt(e) {\n  var c, o;\n  const n = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.i)(e), { className: t, mediaMutedObserver: a } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.Q)(n),\n    [(0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.p)(n)]\n  );\n  return { isMuted: b(\n    a,\n    !!((c = n.publication) != null && c.isMuted || (o = n.participant.getTrackPublication(n.source)) != null && o.isMuted)\n  ), className: t };\n}\nfunction _t({\n  source: e,\n  onChange: n,\n  initialState: t,\n  captureOptions: a,\n  publishOptions: s,\n  onDeviceError: c,\n  ...o\n}) {\n  var P;\n  const u = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.w)(), i = (P = u == null ? void 0 : u.localParticipant) == null ? void 0 : P.getTrackPublication(e), d = react__WEBPACK_IMPORTED_MODULE_0__.useRef(!1), { toggle: l, className: f, pendingObserver: p, enabledObserver: m } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => u ? (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.S)(e, u, a, s, c) : (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.T)(),\n    [u, e, JSON.stringify(a), s]\n  ), g = b(p, !1), S = b(m, t ?? !!(i != null && i.isEnabled));\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    n == null || n(S, d.current), d.current = !1;\n  }, [S, n]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    t !== void 0 && (_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.l.debug(\"forcing initial toggle state\", e, t), l(t));\n  }, []);\n  const M = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_room_C0QEsGui_mjs__WEBPACK_IMPORTED_MODULE_3__.m)(o, { className: f }), [o, f]), v = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (h) => {\n      var C;\n      d.current = !0, l().catch(() => d.current = !1), (C = o.onClick) == null || C.call(o, h);\n    },\n    [o, l]\n  );\n  return {\n    toggle: l,\n    enabled: S,\n    pending: g,\n    track: i,\n    buttonProps: {\n      ...M,\n      \"aria-pressed\": S,\n      \"data-lk-source\": e,\n      \"data-lk-enabled\": S,\n      disabled: g,\n      onClick: v\n    }\n  };\n}\nfunction Wt(e = [\n  livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera,\n  livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone,\n  livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.ScreenShare,\n  livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.ScreenShareAudio,\n  livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Unknown\n], n = {}) {\n  const t = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(n.room), [a, s] = react__WEBPACK_IMPORTED_MODULE_0__.useState([]), [c, o] = react__WEBPACK_IMPORTED_MODULE_0__.useState([]), u = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => e.map((d) => (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.U)(d) ? d.source : d), [JSON.stringify(e)]);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const d = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.V)(t, u, {\n      additionalRoomEvents: n.updateOnlyOn,\n      onlySubscribed: n.onlySubscribed\n    }).subscribe(({ trackReferences: l, participants: f }) => {\n      _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.l.debug(\"setting track bundles\", l, f), s(l), o(f);\n    });\n    return () => d.unsubscribe();\n  }, [\n    t,\n    JSON.stringify(n.onlySubscribed),\n    JSON.stringify(n.updateOnlyOn),\n    JSON.stringify(e)\n  ]), react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    if ((0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.W)(e)) {\n      const d = tt(e, c), l = Array.from(a);\n      return c.forEach((f) => {\n        d.has(f.identity) && (d.get(f.identity) ?? []).forEach((m) => {\n          if (a.find(\n            ({ participant: S, publication: M }) => f.identity === S.identity && M.source === m\n          ))\n            return;\n          _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.l.debug(\n            `Add ${m} placeholder for participant ${f.identity}.`\n          );\n          const g = {\n            participant: f,\n            source: m\n          };\n          l.push(g);\n        });\n      }), l;\n    } else\n      return a;\n  }, [a, c, e]);\n}\nfunction et(e, n) {\n  const t = new Set(e);\n  for (const a of n)\n    t.delete(a);\n  return t;\n}\nfunction tt(e, n) {\n  const t = /* @__PURE__ */ new Map();\n  if ((0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.W)(e)) {\n    const a = e.filter((s) => s.withPlaceholder).map((s) => s.source);\n    n.forEach((s) => {\n      const c = s.getTrackPublications().map((u) => {\n        var i;\n        return (i = u.track) == null ? void 0 : i.source;\n      }).filter((u) => u !== void 0), o = Array.from(\n        et(new Set(a), new Set(c))\n      );\n      o.length > 0 && t.set(s.identity, o);\n    });\n  }\n  return t;\n}\nfunction nt(e) {\n  const [n, t] = react__WEBPACK_IMPORTED_MODULE_0__.useState((0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.X)(e)), { trackObserver: a } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.Y)(e), [e.participant.sid ?? e.participant.identity, e.source]);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const s = a.subscribe((c) => {\n      t(c);\n    });\n    return () => s == null ? void 0 : s.unsubscribe();\n  }, [a]), {\n    participant: e.participant,\n    source: e.source ?? livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Unknown,\n    publication: n\n  };\n}\nfunction Qt(e, n) {\n  const t = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.c)(n);\n  return nt({ name: e, participant: t });\n}\nfunction $t(e) {\n  const n = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.f)(), t = O(n), a = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => t === livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Disconnected,\n    [t]\n  ), s = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.Z)(n, e),\n    [n, e, a]\n  ), c = b(s.isSendingObservable, !1), o = b(s.messageObservable, []);\n  return { send: s.send, update: s.update, chatMessages: o, isSending: c };\n}\nfunction Gt(e = {}) {\n  const [n, t] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__._)(e.defaults, e.preventLoad ?? !1)\n  ), a = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((i) => {\n    t((d) => ({ ...d, audioEnabled: i }));\n  }, []), s = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((i) => {\n    t((d) => ({ ...d, videoEnabled: i }));\n  }, []), c = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((i) => {\n    t((d) => ({ ...d, audioDeviceId: i }));\n  }, []), o = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((i) => {\n    t((d) => ({ ...d, videoDeviceId: i }));\n  }, []), u = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((i) => {\n    t((d) => ({ ...d, username: i }));\n  }, []);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.$)(n, e.preventSave ?? !1);\n  }, [n, e.preventSave]), {\n    userChoices: n,\n    saveAudioInputEnabled: a,\n    saveVideoInputEnabled: s,\n    saveAudioInputDeviceId: c,\n    saveVideoInputDeviceId: o,\n    saveUsername: u\n  };\n}\nfunction xt(e, n = {}) {\n  const t = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.c)(e), a = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(n.room), s = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.a0)(a, t), [a, t]);\n  return b(\n    s,\n    t instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.LocalParticipant ? t.isE2EEEnabled : !!(t != null && t.isEncrypted)\n  );\n}\nfunction Ht(e, n = { fftSize: 32, smoothingTimeConstant: 0 }) {\n  const t = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.a1)(e) ? e.publication.track : e, [a, s] = react__WEBPACK_IMPORTED_MODULE_0__.useState(0);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!t || !t.mediaStream)\n      return;\n    const { cleanup: c, analyser: o } = (0,livekit_client__WEBPACK_IMPORTED_MODULE_1__.createAudioAnalyser)(t, n), u = o.frequencyBinCount, i = new Uint8Array(u), l = setInterval(() => {\n      o.getByteFrequencyData(i);\n      let f = 0;\n      for (let p = 0; p < i.length; p++) {\n        const m = i[p];\n        f += m * m;\n      }\n      s(Math.sqrt(f / i.length) / 255);\n    }, 1e3 / 30);\n    return () => {\n      c(), clearInterval(l);\n    };\n  }, [t, t == null ? void 0 : t.mediaStream, JSON.stringify(n)]), a;\n}\nconst st = (e) => {\n  const n = (t) => {\n    let c = 1 - Math.max(-100, Math.min(-10, t)) * -1 / 100;\n    return c = Math.sqrt(c), c;\n  };\n  return e.map((t) => t === -1 / 0 ? 0 : n(t));\n}, at = {\n  bands: 5,\n  loPass: 100,\n  hiPass: 600,\n  updateInterval: 32,\n  analyserOptions: { fftSize: 2048 }\n};\nfunction jt(e, n = {}) {\n  var o;\n  const t = e instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track ? e : (o = e == null ? void 0 : e.publication) == null ? void 0 : o.track, a = { ...at, ...n }, [s, c] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    new Array(a.bands).fill(0)\n  );\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!t || !(t != null && t.mediaStream))\n      return;\n    const { analyser: u, cleanup: i } = (0,livekit_client__WEBPACK_IMPORTED_MODULE_1__.createAudioAnalyser)(t, a.analyserOptions), d = u.frequencyBinCount, l = new Float32Array(d), p = setInterval(() => {\n      u.getFloatFrequencyData(l);\n      let m = new Float32Array(l.length);\n      for (let v = 0; v < l.length; v++)\n        m[v] = l[v];\n      m = m.slice(n.loPass, n.hiPass);\n      const g = st(m), S = Math.ceil(g.length / a.bands), M = [];\n      for (let v = 0; v < a.bands; v++) {\n        const P = g.slice(v * S, (v + 1) * S).reduce((h, C) => h += C, 0);\n        M.push(P / S);\n      }\n      c(M);\n    }, a.updateInterval);\n    return () => {\n      i(), clearInterval(p);\n    };\n  }, [t, t == null ? void 0 : t.mediaStream, JSON.stringify(n)]), s;\n}\nconst rt = {\n  barCount: 120,\n  volMultiplier: 5,\n  updateInterval: 20\n};\nfunction Xt(e, n = {}) {\n  var l;\n  const t = e instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track ? e : (l = e == null ? void 0 : e.publication) == null ? void 0 : l.track, a = { ...rt, ...n }, s = react__WEBPACK_IMPORTED_MODULE_0__.useRef(new Float32Array()), c = react__WEBPACK_IMPORTED_MODULE_0__.useRef(performance.now()), o = react__WEBPACK_IMPORTED_MODULE_0__.useRef(0), [u, i] = react__WEBPACK_IMPORTED_MODULE_0__.useState([]), d = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((f) => {\n    i(\n      Array.from(\n        ot(f, a.barCount).map((p) => Math.sqrt(p) * a.volMultiplier)\n        // wave.slice(0, opts.barCount).map((v) => sigmoid(v * opts.volMultiplier, 0.08, 0.2)),\n      )\n    );\n  }, []);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!t || !(t != null && t.mediaStream))\n      return;\n    const { analyser: f, cleanup: p } = (0,livekit_client__WEBPACK_IMPORTED_MODULE_1__.createAudioAnalyser)(t, {\n      fftSize: U(a.barCount)\n    }), m = U(a.barCount), g = new Float32Array(m), S = () => {\n      if (M = requestAnimationFrame(S), f.getFloatTimeDomainData(g), s.current.map((v, P) => v + g[P]), o.current += 1, performance.now() - c.current >= a.updateInterval) {\n        const v = g.map((P) => P / o.current);\n        d(v), c.current = performance.now(), o.current = 0;\n      }\n    };\n    let M = requestAnimationFrame(S);\n    return () => {\n      p(), cancelAnimationFrame(M);\n    };\n  }, [t, t == null ? void 0 : t.mediaStream, JSON.stringify(n), d]), {\n    bars: u\n  };\n}\nfunction U(e) {\n  return e < 32 ? 32 : ct(e);\n}\nfunction ct(e) {\n  let n = 2;\n  for (; e >>= 1; )\n    n <<= 1;\n  return n;\n}\nfunction ot(e, n) {\n  const t = Math.floor(e.length / n), a = new Float32Array(n);\n  for (let s = 0; s < n; s++) {\n    const c = t * s;\n    let o = 0;\n    for (let u = 0; u < t; u++)\n      o = o + Math.abs(e[c + u]);\n    a[s] = o / t;\n  }\n  return a;\n}\nfunction it(e, n) {\n  const t = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.f)(), a = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.B)(), s = n ? t.getParticipantByIdentity(n) : a, c = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => s ? (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.a2)(s, { sources: e }) : void 0,\n    [s == null ? void 0 : s.sid, s == null ? void 0 : s.identity, JSON.stringify(e)]\n  );\n  return b(c, []);\n}\nfunction ut(e) {\n  var t, a, s;\n  const n = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => {\n      var c;\n      return (c = e == null ? void 0 : e.publication) != null && c.track ? (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.a3)(e == null ? void 0 : e.publication.track) : void 0;\n    },\n    [(t = e == null ? void 0 : e.publication) == null ? void 0 : t.track]\n  );\n  return b(n, {\n    timestamp: Date.now(),\n    rtpTimestamp: (s = (a = e == null ? void 0 : e.publication) == null ? void 0 : a.track) == null ? void 0 : s.rtpTimestamp\n  });\n}\nconst dt = {\n  bufferSize: 100\n  // maxAge: 2_000,\n};\nfunction lt(e, n) {\n  const t = { ...dt, ...n }, [a, s] = react__WEBPACK_IMPORTED_MODULE_0__.useState([]), c = ut(e), o = (u) => {\n    var i;\n    (i = t.onTranscription) == null || i.call(t, u), s(\n      (d) => (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.a5)(\n        d,\n        // when first receiving a segment, add the current media timestamp to it\n        u.map((l) => (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.a6)(l, c)),\n        t.bufferSize\n      )\n    );\n  };\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!(e != null && e.publication))\n      return;\n    const u = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.a4)(e.publication).subscribe((i) => {\n      o(...i);\n    });\n    return () => {\n      u.unsubscribe();\n    };\n  }, [e && (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.p)(e), o]), { segments: a };\n}\nfunction ft(e = {}) {\n  const n = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.B)(), t = e.participant ?? n, a = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    // weird typescript constraint\n    () => t ? (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.a7)(t) : (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.a7)(t),\n    [t]\n  );\n  return b(a, {\n    attributes: t == null ? void 0 : t.attributes\n  });\n}\nfunction Yt(e, n = {}) {\n  const t = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.c)(n.participant), [a, s] = react__WEBPACK_IMPORTED_MODULE_0__.useState(t.attributes[e]);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!t)\n      return;\n    const c = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.a7)(t).subscribe((o) => {\n      o.changed[e] !== void 0 && s(o.attributes[e]);\n    });\n    return () => {\n      c.unsubscribe();\n    };\n  }, [t, e]), a;\n}\nconst q = \"lk.agent.state\";\nfunction Kt() {\n  const e = G().find((o) => o.kind === livekit_client__WEBPACK_IMPORTED_MODULE_1__.ParticipantKind.AGENT), n = it([livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone], e == null ? void 0 : e.identity)[0], { segments: t } = lt(n), a = O(), { attributes: s } = ft({ participant: e }), c = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => a === livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Disconnected ? \"disconnected\" : a === livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Connecting || !e || !(s != null && s[q]) ? \"connecting\" : s[q], [s, e, a]);\n  return {\n    agent: e,\n    state: c,\n    audioTrack: n,\n    agentTranscriptions: t,\n    agentAttributes: s\n  };\n}\nfunction Zt(e) {\n  const n = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(e), t = O(n), a = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.a8)(n), [n, t]);\n  return b(a, n.isRecording);\n}\n\n//# sourceMappingURL=hooks-C7Q76A3H.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxpdmVraXQrY29tcG9uZW50cy1yZWFjdEAyX2VkZmZiMGQ3YjM1ZjdkZTlhY2VjNjY3ZWVlZjE2NGMwL25vZGVfbW9kdWxlcy9AbGl2ZWtpdC9jb21wb25lbnRzLXJlYWN0L2Rpc3QvaG9va3MtQzdRNzZBM0gubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBMkI7QUFDOGhCO0FBQzVnQjtBQUNvTDtBQUNqTztBQUNBLFlBQVkseUNBQVE7QUFDcEIsU0FBUyw0Q0FBVztBQUNwQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxTQUFTLGtEQUFpQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGNBQWM7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsMkNBQVUsR0FBRyxxQkFBcUI7QUFDbkQsRUFBRSxrREFBaUI7QUFDbkI7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQyxVQUFVLHFCQUFxQjtBQUMvQjtBQUNBLEdBQUc7QUFDSCxZQUFZLDhDQUFhO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiwyQ0FBVTtBQUMzQixTQUFTLDRDQUFXO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EscUZBQXFGLDJDQUFVO0FBQy9GO0FBQ0E7QUFDQTtBQUNBLFNBQVMsNENB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RSxpQkFBaUIsaURBQUMsNERBQTRELGNBQWMsb0JBQW9CLGdCQUFnQixPQUFPLGdCQUFnQixPQUFPLDBDQUFTLGFBQWEsMkRBQUMsdUNBQXVDLDJEQUFDO0FBQ3RRO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVkseURBQUMsbUJBQW1CLDBDQUFTLE9BQU8sMERBQUU7QUFDbEQ7QUFDQTtBQXFERTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdm9pY2UtYXNzaXN0YW50Mi8uL25vZGVfbW9kdWxlcy8ucG5wbS9AbGl2ZWtpdCtjb21wb25lbnRzLXJlYWN0QDJfZWRmZmIwZDdiMzVmN2RlOWFjZWM2NjdlZWVmMTY0YzAvbm9kZV9tb2R1bGVzL0BsaXZla2l0L2NvbXBvbmVudHMtcmVhY3QvZGlzdC9ob29rcy1DN1E3NkEzSC5tanM/ODY5MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyByIGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdSBhcyBrLCByIGFzIHgsIGEgYXMgSiwgYiBhcyBILCBjIGFzIHcsIGQgYXMgaiwgZSBhcyBYLCBmIGFzIEEsIGcgYXMgWSwgaCBhcyBLLCBpIGFzIFIsIGogYXMgWiwgayBhcyBlZSwgbSBhcyB0ZSwgRyBhcyBuZSwgbiBhcyBzZSwgbyBhcyBhZSwgcCBhcyBGLCBxIGFzIHJlLCB0IGFzIGNlLCB2IGFzIF8sIHcgYXMgVywgeCBhcyBRLCB5IGFzIG9lLCBsIGFzIFQsIHogYXMgaWUsIEEgYXMgdWUsIEIgYXMgTiwgQyBhcyBkZSwgRCBhcyBsZSwgRSBhcyBmZSwgRiBhcyBwZSwgSCBhcyBiZSwgSSBhcyBtZSwgSiBhcyBnZSwgSyBhcyBTZSwgTSBhcyBCLCBOIGFzIHZlLCBPIGFzIGhlLCBQIGFzIE1lLCBRIGFzIHllLCBTIGFzIFBlLCBUIGFzIGtlLCBVIGFzIEVlLCBWIGFzIFRlLCBXIGFzICQsIFggYXMgd2UsIFkgYXMgQWUsIFogYXMgQ2UsIF8gYXMgSWUsICQgYXMgT2UsIGEwIGFzIERlLCBhMSBhcyBMZSwgYTIgYXMgUmUsIGEzIGFzIEZlLCBhNCBhcyBOZSwgYTUgYXMgVmUsIGE2IGFzIEJlLCBhNyBhcyBMLCBhOCBhcyB6ZSB9IGZyb20gXCIuL2NvbnRleHRzLURqaWNLSlV6Lm1qc1wiO1xuaW1wb3J0IHsgbSBhcyBFIH0gZnJvbSBcIi4vcm9vbS1DMFFFc0d1aS5tanNcIjtcbmltcG9ydCB7IENvbm5lY3Rpb25RdWFsaXR5IGFzIFVlLCBDb25uZWN0aW9uU3RhdGUgYXMgSSwgTG9jYWxUcmFja1B1YmxpY2F0aW9uIGFzIHFlLCBmYWNpbmdNb2RlRnJvbUxvY2FsVHJhY2sgYXMgSmUsIFRyYWNrIGFzIHksIExvY2FsUGFydGljaXBhbnQgYXMgX2UsIGNyZWF0ZUF1ZGlvQW5hbHlzZXIgYXMgViwgUGFydGljaXBhbnRLaW5kIGFzIFdlIH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5jb25zdCBRZSA9IChlKSA9PiB7XG4gIGNvbnN0IG4gPSByLnVzZVJlZihlKTtcbiAgcmV0dXJuIHIudXNlRWZmZWN0KCgpID0+IHtcbiAgICBuLmN1cnJlbnQgPSBlO1xuICB9KSwgbjtcbn07XG5mdW5jdGlvbiAkZShlLCBuKSB7XG4gIGNvbnN0IHQgPSB4ZSgpLCBhID0gUWUobik7XG4gIHJldHVybiByLnVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IHMgPSAhMTtcbiAgICBjb25zdCBjID0gZS5jdXJyZW50O1xuICAgIGlmICghYykgcmV0dXJuO1xuICAgIGZ1bmN0aW9uIG8odSwgaSkge1xuICAgICAgcyB8fCBhLmN1cnJlbnQodSwgaSk7XG4gICAgfVxuICAgIHJldHVybiB0ID09IG51bGwgfHwgdC5zdWJzY3JpYmUoYywgbyksICgpID0+IHtcbiAgICAgIHMgPSAhMCwgdCA9PSBudWxsIHx8IHQudW5zdWJzY3JpYmUoYywgbyk7XG4gICAgfTtcbiAgfSwgW2UuY3VycmVudCwgdCwgYV0pLCB0ID09IG51bGwgPyB2b2lkIDAgOiB0Lm9ic2VydmVyO1xufVxuZnVuY3Rpb24gR2UoKSB7XG4gIGxldCBlID0gITEsIG4gPSBbXTtcbiAgY29uc3QgdCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIGlmICh0eXBlb2Ygd2luZG93ID4gXCJ1XCIpXG4gICAgcmV0dXJuO1xuICBjb25zdCBhID0gbmV3IFJlc2l6ZU9ic2VydmVyKChzLCBjKSA9PiB7XG4gICAgbiA9IG4uY29uY2F0KHMpLCBlIHx8IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgY29uc3QgbyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgICBmb3IgKGxldCB1ID0gMDsgdSA8IG4ubGVuZ3RoOyB1KyspIHtcbiAgICAgICAgaWYgKG8uaGFzKG5bdV0udGFyZ2V0KSkgY29udGludWU7XG4gICAgICAgIG8uYWRkKG5bdV0udGFyZ2V0KTtcbiAgICAgICAgY29uc3QgaSA9IHQuZ2V0KG5bdV0udGFyZ2V0KTtcbiAgICAgICAgaSA9PSBudWxsIHx8IGkuZm9yRWFjaCgoZCkgPT4gZChuW3VdLCBjKSk7XG4gICAgICB9XG4gICAgICBuID0gW10sIGUgPSAhMTtcbiAgICB9KSwgZSA9ICEwO1xuICB9KTtcbiAgcmV0dXJuIHtcbiAgICBvYnNlcnZlcjogYSxcbiAgICBzdWJzY3JpYmUocywgYykge1xuICAgICAgYS5vYnNlcnZlKHMpO1xuICAgICAgY29uc3QgbyA9IHQuZ2V0KHMpID8/IFtdO1xuICAgICAgby5wdXNoKGMpLCB0LnNldChzLCBvKTtcbiAgICB9LFxuICAgIHVuc3Vic2NyaWJlKHMsIGMpIHtcbiAgICAgIGNvbnN0IG8gPSB0LmdldChzKSA/PyBbXTtcbiAgICAgIGlmIChvLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBhLnVub2JzZXJ2ZShzKSwgdC5kZWxldGUocyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHUgPSBvLmluZGV4T2YoYyk7XG4gICAgICB1ICE9PSAtMSAmJiBvLnNwbGljZSh1LCAxKSwgdC5zZXQocywgbyk7XG4gICAgfVxuICB9O1xufVxubGV0IEQ7XG5jb25zdCB4ZSA9ICgpID0+IEQgfHwgKEQgPSBHZSgpKSwgSGUgPSAoZSkgPT4ge1xuICBjb25zdCBbbiwgdF0gPSByLnVzZVN0YXRlKHsgd2lkdGg6IDAsIGhlaWdodDogMCB9KTtcbiAgci51c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChlLmN1cnJlbnQpIHtcbiAgICAgIGNvbnN0IHsgd2lkdGg6IHMsIGhlaWdodDogYyB9ID0gZS5jdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgdCh7IHdpZHRoOiBzLCBoZWlnaHQ6IGMgfSk7XG4gICAgfVxuICB9LCBbZS5jdXJyZW50XSk7XG4gIGNvbnN0IGEgPSByLnVzZUNhbGxiYWNrKFxuICAgIChzKSA9PiB0KHMuY29udGVudFJlY3QpLFxuICAgIFtdXG4gICk7XG4gIHJldHVybiAkZShlLCBhKSwgbjtcbn07XG5mdW5jdGlvbiBiKGUsIG4sIHQgPSAhMCkge1xuICBjb25zdCBbYSwgc10gPSByLnVzZVN0YXRlKG4pO1xuICByZXR1cm4gci51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0ICYmIHMobiksIHR5cGVvZiB3aW5kb3cgPiBcInVcIiB8fCAhZSkgcmV0dXJuO1xuICAgIGNvbnN0IGMgPSBlLnN1YnNjcmliZShzKTtcbiAgICByZXR1cm4gKCkgPT4gYy51bnN1YnNjcmliZSgpO1xuICB9LCBbZSwgdF0pLCBhO1xufVxuZnVuY3Rpb24gZ3QoZSkge1xuICBjb25zdCBuID0gKGMpID0+IHR5cGVvZiB3aW5kb3cgPCBcInVcIiA/IHdpbmRvdy5tYXRjaE1lZGlhKGMpLm1hdGNoZXMgOiAhMSwgW3QsIGFdID0gci51c2VTdGF0ZShuKGUpKTtcbiAgZnVuY3Rpb24gcygpIHtcbiAgICBhKG4oZSkpO1xuICB9XG4gIHJldHVybiByLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgYyA9IHdpbmRvdy5tYXRjaE1lZGlhKGUpO1xuICAgIHJldHVybiBzKCksIGMuYWRkTGlzdGVuZXIgPyBjLmFkZExpc3RlbmVyKHMpIDogYy5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIHMpLCAoKSA9PiB7XG4gICAgICBjLnJlbW92ZUxpc3RlbmVyID8gYy5yZW1vdmVMaXN0ZW5lcihzKSA6IGMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBzKTtcbiAgICB9O1xuICB9LCBbZV0pLCB0O1xufVxuZnVuY3Rpb24gU3QoZSkge1xuICBjb25zdCBuID0gayhlKSwgdCA9IHIudXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IG4uc3RhcnRBdWRpbygpO1xuICB9LCBbbl0pLCBhID0gci51c2VNZW1vKFxuICAgICgpID0+IHgobiksXG4gICAgW25dXG4gICksIHsgY2FuUGxheUF1ZGlvOiBzIH0gPSBiKGEsIHtcbiAgICBjYW5QbGF5QXVkaW86IG4uY2FuUGxheWJhY2tBdWRpb1xuICB9KTtcbiAgcmV0dXJuIHsgY2FuUGxheUF1ZGlvOiBzLCBzdGFydEF1ZGlvOiB0IH07XG59XG5mdW5jdGlvbiB2dChlKSB7XG4gIGNvbnN0IHsgc3RhdGU6IG4sIGRpc3BhdGNoOiB0IH0gPSBKKCkucGluO1xuICByZXR1cm4geyBidXR0b25Qcm9wczogci51c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCB7IGNsYXNzTmFtZTogcyB9ID0gSCgpO1xuICAgIHJldHVybiBFKGUsIHtcbiAgICAgIGNsYXNzTmFtZTogcyxcbiAgICAgIGRpc2FibGVkOiAhKG4gIT0gbnVsbCAmJiBuLmxlbmd0aCksXG4gICAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICAgIHQgJiYgdCh7IG1zZzogXCJjbGVhcl9waW5cIiB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgW2UsIHQsIG5dKSB9O1xufVxuZnVuY3Rpb24gaHQoZSA9IHt9KSB7XG4gIGNvbnN0IG4gPSB3KGUucGFydGljaXBhbnQpLCB7IGNsYXNzTmFtZTogdCwgY29ubmVjdGlvblF1YWxpdHlPYnNlcnZlcjogYSB9ID0gci51c2VNZW1vKFxuICAgICgpID0+IGoobiksXG4gICAgW25dXG4gICksIHMgPSBiKGEsIFVlLlVua25vd24pO1xuICByZXR1cm4geyBjbGFzc05hbWU6IHQsIHF1YWxpdHk6IHMgfTtcbn1cbmZ1bmN0aW9uIE8oZSkge1xuICBjb25zdCBuID0gayhlKSwgdCA9IHIudXNlTWVtbygoKSA9PiBYKG4pLCBbbl0pO1xuICByZXR1cm4gYih0LCBuLnN0YXRlKTtcbn1cbmZ1bmN0aW9uIE10KGUsIG4pIHtcbiAgY29uc3QgdCA9IHR5cGVvZiBlID09IFwiZnVuY3Rpb25cIiA/IGUgOiBuLCBhID0gdHlwZW9mIGUgPT0gXCJzdHJpbmdcIiA/IGUgOiB2b2lkIDAsIHMgPSBBKCksIHsgc2VuZDogYywgbWVzc2FnZU9ic2VydmFibGU6IG8sIGlzU2VuZGluZ09ic2VydmFibGU6IHUgfSA9IHIudXNlTWVtbyhcbiAgICAoKSA9PiBZKHMsIGEsIHQpLFxuICAgIFtzLCBhLCB0XVxuICApLCBpID0gYihvLCB2b2lkIDApLCBkID0gYih1LCAhMSk7XG4gIHJldHVybiB7XG4gICAgbWVzc2FnZTogaSxcbiAgICBzZW5kOiBjLFxuICAgIGlzU2VuZGluZzogZFxuICB9O1xufVxuZnVuY3Rpb24geXQoZSkge1xuICBjb25zdCBuID0gQSgpLCB0ID0gTyhuKTtcbiAgcmV0dXJuIHsgYnV0dG9uUHJvcHM6IHIudXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgeyBjbGFzc05hbWU6IHMsIGRpc2Nvbm5lY3Q6IGMgfSA9IEsobik7XG4gICAgcmV0dXJuIEUoZSwge1xuICAgICAgY2xhc3NOYW1lOiBzLFxuICAgICAgb25DbGljazogKCkgPT4gYyhlLnN0b3BUcmFja3MgPz8gITApLFxuICAgICAgZGlzYWJsZWQ6IHQgPT09IEkuRGlzY29ubmVjdGVkXG4gICAgfSk7XG4gIH0sIFtuLCBlLCB0XSkgfTtcbn1cbmZ1bmN0aW9uIGplKGUpIHtcbiAgaWYgKGUucHVibGljYXRpb24gaW5zdGFuY2VvZiBxZSkge1xuICAgIGNvbnN0IG4gPSBlLnB1YmxpY2F0aW9uLnRyYWNrO1xuICAgIGlmIChuKSB7XG4gICAgICBjb25zdCB7IGZhY2luZ01vZGU6IHQgfSA9IEplKG4pO1xuICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICB9XG4gIHJldHVybiBcInVuZGVmaW5lZFwiO1xufVxuZnVuY3Rpb24gUHQoeyB0cmFja1JlZjogZSwgcHJvcHM6IG4gfSkge1xuICBjb25zdCB0ID0gUihlKSwgYSA9IFooKSwgeyBjbGFzc05hbWU6IHMgfSA9IHIudXNlTWVtbygoKSA9PiBlZSgpLCBbXSksIGMgPSByLnVzZU1lbW8oKCkgPT4gdGUodCwgYSA9PSBudWxsID8gdm9pZCAwIDogYS5waW4uc3RhdGUpLCBbdCwgYSA9PSBudWxsID8gdm9pZCAwIDogYS5waW4uc3RhdGVdKTtcbiAgcmV0dXJuIHsgbWVyZ2VkUHJvcHM6IHIudXNlTWVtbyhcbiAgICAoKSA9PiBFKG4sIHtcbiAgICAgIGNsYXNzTmFtZTogcyxcbiAgICAgIG9uQ2xpY2s6ICh1KSA9PiB7XG4gICAgICAgIHZhciBpLCBkLCBsLCBmLCBwO1xuICAgICAgICAoaSA9IG4ub25DbGljaykgPT0gbnVsbCB8fCBpLmNhbGwobiwgdSksIGMgPyAobCA9IGEgPT0gbnVsbCA/IHZvaWQgMCA6IChkID0gYS5waW4pLmRpc3BhdGNoKSA9PSBudWxsIHx8IGwuY2FsbChkLCB7XG4gICAgICAgICAgbXNnOiBcImNsZWFyX3BpblwiXG4gICAgICAgIH0pIDogKHAgPSBhID09IG51bGwgPyB2b2lkIDAgOiAoZiA9IGEucGluKS5kaXNwYXRjaCkgPT0gbnVsbCB8fCBwLmNhbGwoZiwge1xuICAgICAgICAgIG1zZzogXCJzZXRfcGluXCIsXG4gICAgICAgICAgdHJhY2tSZWZlcmVuY2U6IHRcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSksXG4gICAgW24sIHMsIHQsIGMsIGEgPT0gbnVsbCA/IHZvaWQgMCA6IGEucGluXVxuICApLCBpbkZvY3VzOiBjIH07XG59XG5mdW5jdGlvbiBrdChlLCBuLCB0ID0ge30pIHtcbiAgY29uc3QgYSA9IHQuZ3JpZExheW91dHMgPz8gbmUsIHsgd2lkdGg6IHMsIGhlaWdodDogYyB9ID0gSGUoZSksIG8gPSBzZShhLCBuLCBzLCBjKTtcbiAgcmV0dXJuIHIudXNlRWZmZWN0KCgpID0+IHtcbiAgICBlLmN1cnJlbnQgJiYgbyAmJiAoZS5jdXJyZW50LnN0eWxlLnNldFByb3BlcnR5KFwiLS1say1jb2wtY291bnRcIiwgbyA9PSBudWxsID8gdm9pZCAwIDogby5jb2x1bW5zLnRvU3RyaW5nKCkpLCBlLmN1cnJlbnQuc3R5bGUuc2V0UHJvcGVydHkoXCItLWxrLXJvdy1jb3VudFwiLCBvID09IG51bGwgPyB2b2lkIDAgOiBvLnJvd3MudG9TdHJpbmcoKSkpO1xuICB9LCBbZSwgb10pLCB7XG4gICAgbGF5b3V0OiBvLFxuICAgIGNvbnRhaW5lcldpZHRoOiBzLFxuICAgIGNvbnRhaW5lckhlaWdodDogY1xuICB9O1xufVxuZnVuY3Rpb24geihlLCBuID0ge30pIHtcbiAgdmFyIHUsIGk7XG4gIGNvbnN0IHQgPSB0eXBlb2YgZSA9PSBcInN0cmluZ1wiID8gbi5wYXJ0aWNpcGFudCA6IGUucGFydGljaXBhbnQsIGEgPSB3KHQpLCBzID0gdHlwZW9mIGUgPT0gXCJzdHJpbmdcIiA/IHsgcGFydGljaXBhbnQ6IGEsIHNvdXJjZTogZSB9IDogZSwgW2MsIG9dID0gci51c2VTdGF0ZShcbiAgICAhISgodSA9IHMucHVibGljYXRpb24pICE9IG51bGwgJiYgdS5pc011dGVkIHx8IChpID0gYS5nZXRUcmFja1B1YmxpY2F0aW9uKHMuc291cmNlKSkgIT0gbnVsbCAmJiBpLmlzTXV0ZWQpXG4gICk7XG4gIHJldHVybiByLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgZCA9IGFlKHMpLnN1YnNjcmliZShvKTtcbiAgICByZXR1cm4gKCkgPT4gZC51bnN1YnNjcmliZSgpO1xuICB9LCBbRihzKV0pLCBjO1xufVxuZnVuY3Rpb24gWGUoZSkge1xuICBjb25zdCBuID0gdyhlKSwgdCA9IHIudXNlTWVtbygoKSA9PiByZShuKSwgW25dKTtcbiAgcmV0dXJuIGIodCwgbi5pc1NwZWFraW5nKTtcbn1cbmZ1bmN0aW9uIFllKGUgPSB7fSkge1xuICBjb25zdCBuID0gayhlLnJvb20pLCBbdCwgYV0gPSByLnVzZVN0YXRlKG4ubG9jYWxQYXJ0aWNpcGFudCksIFtzLCBjXSA9IHIudXNlU3RhdGUoXG4gICAgdC5pc01pY3JvcGhvbmVFbmFibGVkXG4gICksIFtvLCB1XSA9IHIudXNlU3RhdGUoXG4gICAgdC5pc01pY3JvcGhvbmVFbmFibGVkXG4gICksIFtpLCBkXSA9IHIudXNlU3RhdGUoXG4gICAgdC5sYXN0TWljcm9waG9uZUVycm9yXG4gICksIFtsLCBmXSA9IHIudXNlU3RhdGUodC5sYXN0Q2FtZXJhRXJyb3IpLCBbcCwgbV0gPSByLnVzZVN0YXRlKFxuICAgIHQuaXNNaWNyb3Bob25lRW5hYmxlZFxuICApLCBbZywgU10gPSByLnVzZVN0YXRlKFxuICAgIHZvaWQgMFxuICApLCBbTSwgdl0gPSByLnVzZVN0YXRlKHZvaWQgMCksIFAgPSAoaCkgPT4ge1xuICAgIHUoaC5pc0NhbWVyYUVuYWJsZWQpLCBjKGguaXNNaWNyb3Bob25lRW5hYmxlZCksIG0oaC5pc1NjcmVlblNoYXJlRW5hYmxlZCksIHYoaC5jYW1lcmFUcmFjayksIFMoaC5taWNyb3Bob25lVHJhY2spLCBkKGgucGFydGljaXBhbnQubGFzdE1pY3JvcGhvbmVFcnJvciksIGYoaC5wYXJ0aWNpcGFudC5sYXN0Q2FtZXJhRXJyb3IpLCBhKGgucGFydGljaXBhbnQpO1xuICB9O1xuICByZXR1cm4gci51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGggPSBjZShuLmxvY2FsUGFydGljaXBhbnQpLnN1YnNjcmliZShQKTtcbiAgICByZXR1cm4gKCkgPT4gaC51bnN1YnNjcmliZSgpO1xuICB9LCBbbl0pLCB7XG4gICAgaXNNaWNyb3Bob25lRW5hYmxlZDogcyxcbiAgICBpc1NjcmVlblNoYXJlRW5hYmxlZDogcCxcbiAgICBpc0NhbWVyYUVuYWJsZWQ6IG8sXG4gICAgbWljcm9waG9uZVRyYWNrOiBnLFxuICAgIGNhbWVyYVRyYWNrOiBNLFxuICAgIGxhc3RNaWNyb3Bob25lRXJyb3I6IGksXG4gICAgbGFzdENhbWVyYUVycm9yOiBsLFxuICAgIGxvY2FsUGFydGljaXBhbnQ6IHRcbiAgfTtcbn1cbmZ1bmN0aW9uIEV0KCkge1xuICBjb25zdCBlID0gQSgpLCBuID0gci51c2VNZW1vKFxuICAgICgpID0+IF8oZS5sb2NhbFBhcnRpY2lwYW50KSxcbiAgICBbZV1cbiAgKTtcbiAgcmV0dXJuIGIobiwgZS5sb2NhbFBhcnRpY2lwYW50LnBlcm1pc3Npb25zKTtcbn1cbmZ1bmN0aW9uIFR0KHtcbiAga2luZDogZSxcbiAgcm9vbTogbixcbiAgdHJhY2s6IHQsXG4gIHJlcXVlc3RQZXJtaXNzaW9uczogYSxcbiAgb25FcnJvcjogc1xufSkge1xuICBjb25zdCBjID0gVygpLCBvID0gci51c2VNZW1vKFxuICAgICgpID0+IFEoZSwgcywgYSksXG4gICAgW2UsIGEsIHNdXG4gICksIHUgPSBiKG8sIFtdKSwgW2ksIGRdID0gci51c2VTdGF0ZShcIlwiKSwgeyBjbGFzc05hbWU6IGwsIGFjdGl2ZURldmljZU9ic2VydmFibGU6IGYsIHNldEFjdGl2ZU1lZGlhRGV2aWNlOiBwIH0gPSByLnVzZU1lbW8oXG4gICAgKCkgPT4gb2UoZSwgbiA/PyBjLCB0KSxcbiAgICBbZSwgbiwgYywgdF1cbiAgKTtcbiAgcmV0dXJuIHIudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBtID0gZi5zdWJzY3JpYmUoKGcpID0+IHtcbiAgICAgIFQuaW5mbyhcInNldEN1cnJlbnREZXZpY2VJZFwiLCBnKSwgZyAmJiBkKGcpO1xuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBtID09IG51bGwgfHwgbS51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gIH0sIFtmXSksIHsgZGV2aWNlczogdSwgY2xhc3NOYW1lOiBsLCBhY3RpdmVEZXZpY2VJZDogaSwgc2V0QWN0aXZlTWVkaWFEZXZpY2U6IHAgfTtcbn1cbmZ1bmN0aW9uIHd0KHtcbiAga2luZDogZSxcbiAgb25FcnJvcjogblxufSkge1xuICBjb25zdCB0ID0gci51c2VNZW1vKFxuICAgICgpID0+IFEoZSwgbiksXG4gICAgW2UsIG5dXG4gICk7XG4gIHJldHVybiBiKHQsIFtdKTtcbn1cbmZ1bmN0aW9uIEtlKGUsIG4sIHQgPSB7fSkge1xuICBjb25zdCBhID0gci51c2VSZWYoW10pLCBzID0gci51c2VSZWYoLTEpLCBjID0gbiAhPT0gcy5jdXJyZW50LCBvID0gdHlwZW9mIHQuY3VzdG9tU29ydEZ1bmN0aW9uID09IFwiZnVuY3Rpb25cIiA/IHQuY3VzdG9tU29ydEZ1bmN0aW9uKGUpIDogaWUoZSk7XG4gIGxldCB1ID0gWy4uLm9dO1xuICBpZiAoYyA9PT0gITEpXG4gICAgdHJ5IHtcbiAgICAgIHUgPSB1ZShhLmN1cnJlbnQsIG8sIG4pO1xuICAgIH0gY2F0Y2ggKGkpIHtcbiAgICAgIFQuZXJyb3IoXCJFcnJvciB3aGlsZSBydW5uaW5nIHVwZGF0ZVBhZ2VzKCk6IFwiLCBpKTtcbiAgICB9XG4gIHJldHVybiBjID8gYS5jdXJyZW50ID0gbyA6IGEuY3VycmVudCA9IHUsIHMuY3VycmVudCA9IG4sIHU7XG59XG5mdW5jdGlvbiBBdChlLCBuKSB7XG4gIGNvbnN0IFt0LCBhXSA9IHIudXNlU3RhdGUoMSksIHMgPSBNYXRoLm1heChNYXRoLmNlaWwobi5sZW5ndGggLyBlKSwgMSk7XG4gIHQgPiBzICYmIGEocyk7XG4gIGNvbnN0IGMgPSB0ICogZSwgbyA9IGMgLSBlLCB1ID0gKGYpID0+IHtcbiAgICBhKChwKSA9PiBmID09PSBcIm5leHRcIiA/IHAgPT09IHMgPyBwIDogcCArIDEgOiBwID09PSAxID8gcCA6IHAgLSAxKTtcbiAgfSwgaSA9IChmKSA9PiB7XG4gICAgZiA+IHMgPyBhKHMpIDogZiA8IDEgPyBhKDEpIDogYShmKTtcbiAgfSwgbCA9IEtlKG4sIGUpLnNsaWNlKG8sIGMpO1xuICByZXR1cm4ge1xuICAgIHRvdGFsUGFnZUNvdW50OiBzLFxuICAgIG5leHRQYWdlOiAoKSA9PiB1KFwibmV4dFwiKSxcbiAgICBwcmV2UGFnZTogKCkgPT4gdShcInByZXZpb3VzXCIpLFxuICAgIHNldFBhZ2U6IGksXG4gICAgZmlyc3RJdGVtSW5kZXg6IG8sXG4gICAgbGFzdEl0ZW1JbmRleDogYyxcbiAgICB0cmFja3M6IGwsXG4gICAgY3VycmVudFBhZ2U6IHRcbiAgfTtcbn1cbmZ1bmN0aW9uIEN0KGUgPSB7fSkge1xuICBsZXQgbiA9IE4oKTtcbiAgZS5wYXJ0aWNpcGFudCAmJiAobiA9IGUucGFydGljaXBhbnQpO1xuICBjb25zdCB0ID0gci51c2VNZW1vKCgpID0+IGRlKG4pLCBbbl0pLCB7IGlkZW50aXR5OiBhLCBuYW1lOiBzLCBtZXRhZGF0YTogYyB9ID0gYih0LCB7XG4gICAgbmFtZTogbiA9PSBudWxsID8gdm9pZCAwIDogbi5uYW1lLFxuICAgIGlkZW50aXR5OiBuID09IG51bGwgPyB2b2lkIDAgOiBuLmlkZW50aXR5LFxuICAgIG1ldGFkYXRhOiBuID09IG51bGwgPyB2b2lkIDAgOiBuLm1ldGFkYXRhXG4gIH0pO1xuICByZXR1cm4geyBpZGVudGl0eTogYSwgbmFtZTogcywgbWV0YWRhdGE6IGMgfTtcbn1cbmZ1bmN0aW9uIEl0KGUgPSB7fSkge1xuICBjb25zdCBuID0gdyhlLnBhcnRpY2lwYW50KSwgdCA9IHIudXNlTWVtbygoKSA9PiBfKG4pLCBbbl0pO1xuICByZXR1cm4gYih0LCBuLnBlcm1pc3Npb25zKTtcbn1cbmZ1bmN0aW9uIE90KHtcbiAgdHJhY2tSZWY6IGUsXG4gIG9uUGFydGljaXBhbnRDbGljazogbixcbiAgZGlzYWJsZVNwZWFraW5nSW5kaWNhdG9yOiB0LFxuICBodG1sUHJvcHM6IGFcbn0pIHtcbiAgY29uc3QgcyA9IFIoZSksIGMgPSByLnVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHsgY2xhc3NOYW1lOiBwIH0gPSBsZSgpO1xuICAgIHJldHVybiBFKGEsIHtcbiAgICAgIGNsYXNzTmFtZTogcCxcbiAgICAgIG9uQ2xpY2s6IChtKSA9PiB7XG4gICAgICAgIHZhciBnO1xuICAgICAgICBpZiAoKGcgPSBhLm9uQ2xpY2spID09IG51bGwgfHwgZy5jYWxsKGEsIG0pLCB0eXBlb2YgbiA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBjb25zdCBTID0gcy5wdWJsaWNhdGlvbiA/PyBzLnBhcnRpY2lwYW50LmdldFRyYWNrUHVibGljYXRpb24ocy5zb3VyY2UpO1xuICAgICAgICAgIG4oeyBwYXJ0aWNpcGFudDogcy5wYXJ0aWNpcGFudCwgdHJhY2s6IFMgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgW1xuICAgIGEsXG4gICAgbixcbiAgICBzLnB1YmxpY2F0aW9uLFxuICAgIHMuc291cmNlLFxuICAgIHMucGFydGljaXBhbnRcbiAgXSksIG8gPSBzLnBhcnRpY2lwYW50LmdldFRyYWNrUHVibGljYXRpb24oeS5Tb3VyY2UuTWljcm9waG9uZSksIHUgPSByLnVzZU1lbW8oKCkgPT4gKHtcbiAgICBwYXJ0aWNpcGFudDogcy5wYXJ0aWNpcGFudCxcbiAgICBzb3VyY2U6IHkuU291cmNlLk1pY3JvcGhvbmUsXG4gICAgcHVibGljYXRpb246IG9cbiAgfSksIFtvLCBzLnBhcnRpY2lwYW50XSksIGkgPSB6KHMpLCBkID0geih1KSwgbCA9IFhlKHMucGFydGljaXBhbnQpLCBmID0gamUocyk7XG4gIHJldHVybiB7XG4gICAgZWxlbWVudFByb3BzOiB7XG4gICAgICBcImRhdGEtbGstYXVkaW8tbXV0ZWRcIjogZCxcbiAgICAgIFwiZGF0YS1say12aWRlby1tdXRlZFwiOiBpLFxuICAgICAgXCJkYXRhLWxrLXNwZWFraW5nXCI6IHQgPT09ICEwID8gITEgOiBsLFxuICAgICAgXCJkYXRhLWxrLWxvY2FsLXBhcnRpY2lwYW50XCI6IHMucGFydGljaXBhbnQuaXNMb2NhbCxcbiAgICAgIFwiZGF0YS1say1zb3VyY2VcIjogcy5zb3VyY2UsXG4gICAgICBcImRhdGEtbGstZmFjaW5nLW1vZGVcIjogZixcbiAgICAgIC4uLmNcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBHKGUgPSB7fSkge1xuICBjb25zdCBuID0gayhlLnJvb20pLCBbdCwgYV0gPSByLnVzZVN0YXRlKFtdKTtcbiAgcmV0dXJuIHIudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBzID0gZmUobiwge1xuICAgICAgYWRkaXRpb25hbFJvb21FdmVudHM6IGUudXBkYXRlT25seU9uXG4gICAgfSkuc3Vic2NyaWJlKGEpO1xuICAgIHJldHVybiAoKSA9PiBzLnVuc3Vic2NyaWJlKCk7XG4gIH0sIFtuLCBKU09OLnN0cmluZ2lmeShlLnVwZGF0ZU9ubHlPbildKSwgdDtcbn1cbmZ1bmN0aW9uIER0KGUgPSB7fSkge1xuICBjb25zdCBuID0gRyhlKSwgeyBsb2NhbFBhcnRpY2lwYW50OiB0IH0gPSBZZShlKTtcbiAgcmV0dXJuIHIudXNlTWVtbyhcbiAgICAoKSA9PiBbdCwgLi4ubl0sXG4gICAgW3QsIG5dXG4gICk7XG59XG5mdW5jdGlvbiBMdChlKSB7XG4gIHJldHVybiBlID0gcGUoZSksIHIudXNlTWVtbygoKSA9PiAoZSA9PSBudWxsID8gdm9pZCAwIDogZS5waW4uc3RhdGUpICE9PSB2b2lkIDAgJiYgZS5waW4uc3RhdGUubGVuZ3RoID49IDEgPyBlLnBpbi5zdGF0ZSA6IFtdLCBbZS5waW4uc3RhdGVdKTtcbn1cbmZ1bmN0aW9uIFJ0KGUsIG4gPSB7fSkge1xuICBjb25zdCB0ID0gQSgpLCBbYV0gPSByLnVzZVN0YXRlKG4udXBkYXRlT25seU9uKSwgcyA9IHIudXNlTWVtbygoKSA9PiB0eXBlb2YgZSA9PSBcInN0cmluZ1wiID8gYmUodCwgZSwge1xuICAgIGFkZGl0aW9uYWxFdmVudHM6IGFcbiAgfSkgOiBtZSh0LCBlLCB7XG4gICAgYWRkaXRpb25hbEV2ZW50czogYVxuICB9KSwgW3QsIEpTT04uc3RyaW5naWZ5KGUpLCBhXSksIFtjLCBvXSA9IHIudXNlU3RhdGUoe1xuICAgIHA6IHZvaWQgMFxuICB9KTtcbiAgcmV0dXJuIHIudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCB1ID0gcy5zdWJzY3JpYmUoKGkpID0+IG8oeyBwOiBpIH0pKTtcbiAgICByZXR1cm4gKCkgPT4gdS51bnN1YnNjcmliZSgpO1xuICB9LCBbc10pLCBjLnA7XG59XG5mdW5jdGlvbiBGdChlID0ge30pIHtcbiAgY29uc3QgbiA9IGsoZS5yb29tKSwgdCA9IHIudXNlTWVtbygoKSA9PiBnZShuKSwgW25dKSwgeyBuYW1lOiBhLCBtZXRhZGF0YTogcyB9ID0gYih0LCB7XG4gICAgbmFtZTogbi5uYW1lLFxuICAgIG1ldGFkYXRhOiBuLm1ldGFkYXRhXG4gIH0pO1xuICByZXR1cm4geyBuYW1lOiBhLCBtZXRhZGF0YTogcyB9O1xufVxuZnVuY3Rpb24gWmUoKSB7XG4gIGNvbnN0IGUgPSBBKCksIG4gPSByLnVzZU1lbW8oKCkgPT4gU2UoZSksIFtlXSk7XG4gIHJldHVybiBiKG4sIGUuYWN0aXZlU3BlYWtlcnMpO1xufVxuZnVuY3Rpb24gTnQoZSkge1xuICBjb25zdCBbbiwgdF0gPSByLnVzZVN0YXRlKFxuICAgIEIoZSlcbiAgKSwgYSA9IFplKCk7XG4gIHJldHVybiByLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdChCKGUpKTtcbiAgfSwgW2EsIGVdKSwgbjtcbn1cbmZ1bmN0aW9uIFZ0KHsgcm9vbTogZSwgcHJvcHM6IG4gfSkge1xuICBjb25zdCB0ID0gayhlKSwgeyBjbGFzc05hbWU6IGEsIHJvb21BdWRpb1BsYXliYWNrQWxsb3dlZE9ic2VydmFibGU6IHMsIGhhbmRsZVN0YXJ0QXVkaW9QbGF5YmFjazogYyB9ID0gci51c2VNZW1vKFxuICAgICgpID0+IHZlKCksXG4gICAgW11cbiAgKSwgbyA9IHIudXNlTWVtbyhcbiAgICAoKSA9PiBzKHQpLFxuICAgIFt0LCBzXVxuICApLCB7IGNhblBsYXlBdWRpbzogdSB9ID0gYihvLCB7XG4gICAgY2FuUGxheUF1ZGlvOiB0LmNhblBsYXliYWNrQXVkaW9cbiAgfSk7XG4gIHJldHVybiB7IG1lcmdlZFByb3BzOiByLnVzZU1lbW8oXG4gICAgKCkgPT4gRShuLCB7XG4gICAgICBjbGFzc05hbWU6IGEsXG4gICAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICAgIGModCk7XG4gICAgICB9LFxuICAgICAgc3R5bGU6IHsgZGlzcGxheTogdSA/IFwibm9uZVwiIDogXCJibG9ja1wiIH1cbiAgICB9KSxcbiAgICBbbiwgYSwgdSwgYywgdF1cbiAgKSwgY2FuUGxheUF1ZGlvOiB1IH07XG59XG5mdW5jdGlvbiBCdCh7IHJvb206IGUsIHByb3BzOiBuIH0pIHtcbiAgY29uc3QgdCA9IGsoZSksIHsgY2xhc3NOYW1lOiBhLCByb29tVmlkZW9QbGF5YmFja0FsbG93ZWRPYnNlcnZhYmxlOiBzLCBoYW5kbGVTdGFydFZpZGVvUGxheWJhY2s6IGMgfSA9IHIudXNlTWVtbyhcbiAgICAoKSA9PiBoZSgpLFxuICAgIFtdXG4gICksIG8gPSByLnVzZU1lbW8oXG4gICAgKCkgPT4gcyh0KSxcbiAgICBbdCwgc11cbiAgKSwgeyBjYW5QbGF5VmlkZW86IHUgfSA9IGIobywge1xuICAgIGNhblBsYXlWaWRlbzogdC5jYW5QbGF5YmFja1ZpZGVvXG4gIH0pO1xuICByZXR1cm4geyBtZXJnZWRQcm9wczogci51c2VNZW1vKFxuICAgICgpID0+IEUobiwge1xuICAgICAgY2xhc3NOYW1lOiBhLFxuICAgICAgb25DbGljazogKCkgPT4ge1xuICAgICAgICBjKHQpO1xuICAgICAgfSxcbiAgICAgIHN0eWxlOiB7IGRpc3BsYXk6IHUgPyBcIm5vbmVcIiA6IFwiYmxvY2tcIiB9XG4gICAgfSksXG4gICAgW24sIGEsIHUsIGMsIHRdXG4gICksIGNhblBsYXlWaWRlbzogdSB9O1xufVxuZnVuY3Rpb24genQoZSwgbiA9IHt9KSB7XG4gIGNvbnN0IHQgPSByLnVzZVJlZihudWxsKSwgYSA9IHIudXNlUmVmKG51bGwpLCBzID0gbi5taW5Td2lwZURpc3RhbmNlID8/IDUwLCBjID0gKGkpID0+IHtcbiAgICBhLmN1cnJlbnQgPSBudWxsLCB0LmN1cnJlbnQgPSBpLnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WDtcbiAgfSwgbyA9IChpKSA9PiB7XG4gICAgYS5jdXJyZW50ID0gaS50YXJnZXRUb3VjaGVzWzBdLmNsaWVudFg7XG4gIH0sIHUgPSByLnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoIXQuY3VycmVudCB8fCAhYS5jdXJyZW50KVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGkgPSB0LmN1cnJlbnQgLSBhLmN1cnJlbnQsIGQgPSBpID4gcywgbCA9IGkgPCAtcztcbiAgICBkICYmIG4ub25MZWZ0U3dpcGUgJiYgbi5vbkxlZnRTd2lwZSgpLCBsICYmIG4ub25SaWdodFN3aXBlICYmIG4ub25SaWdodFN3aXBlKCk7XG4gIH0sIFtzLCBuXSk7XG4gIHIudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBpID0gZS5jdXJyZW50O1xuICAgIHJldHVybiBpICYmIChpLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIGMsIHsgcGFzc2l2ZTogITAgfSksIGkuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCBvLCB7IHBhc3NpdmU6ICEwIH0pLCBpLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCB1LCB7IHBhc3NpdmU6ICEwIH0pKSwgKCkgPT4ge1xuICAgICAgaSAmJiAoaS5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCBjKSwgaS5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIG8pLCBpLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCB1KSk7XG4gICAgfTtcbiAgfSwgW2UsIHVdKTtcbn1cbmZ1bmN0aW9uIFV0KHsgcHJvcHM6IGUgfSkge1xuICBjb25zdCB7IGRpc3BhdGNoOiBuLCBzdGF0ZTogdCB9ID0gSigpLndpZGdldCwgeyBjbGFzc05hbWU6IGEgfSA9IHIudXNlTWVtbygoKSA9PiBNZSgpLCBbXSk7XG4gIHJldHVybiB7IG1lcmdlZFByb3BzOiByLnVzZU1lbW8oKCkgPT4gRShlLCB7XG4gICAgY2xhc3NOYW1lOiBhLFxuICAgIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgIG4gJiYgbih7IG1zZzogXCJ0b2dnbGVfY2hhdFwiIH0pO1xuICAgIH0sXG4gICAgXCJhcmlhLXByZXNzZWRcIjogdCAhPSBudWxsICYmIHQuc2hvd0NoYXQgPyBcInRydWVcIiA6IFwiZmFsc2VcIixcbiAgICBcImRhdGEtbGstdW5yZWFkLW1zZ3NcIjogdCA/IHQudW5yZWFkTWVzc2FnZXMgPCAxMCA/IHQudW5yZWFkTWVzc2FnZXMudG9GaXhlZCgwKSA6IFwiOStcIiA6IFwiMFwiXG4gIH0pLCBbZSwgYSwgbiwgdF0pIH07XG59XG5mdW5jdGlvbiBxdChlLCBuLCB0ID0ge30pIHtcbiAgY29uc3QgW2EsIHNdID0gci51c2VTdGF0ZSh2b2lkIDApO1xuICByZXR1cm4gci51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHZhciBvO1xuICAgIGlmIChlID09PSB2b2lkIDApXG4gICAgICB0aHJvdyBFcnJvcihcInRva2VuIGVuZHBvaW50IG5lZWRzIHRvIGJlIGRlZmluZWRcIik7XG4gICAgaWYgKCgobyA9IHQudXNlckluZm8pID09IG51bGwgPyB2b2lkIDAgOiBvLmlkZW50aXR5KSA9PT0gdm9pZCAwKVxuICAgICAgcmV0dXJuO1xuICAgIChhc3luYyAoKSA9PiB7XG4gICAgICBULmRlYnVnKFwiZmV0Y2hpbmcgdG9rZW5cIik7XG4gICAgICBjb25zdCB1ID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7IC4uLnQudXNlckluZm8sIHJvb21OYW1lOiBuIH0pLCBpID0gYXdhaXQgZmV0Y2goYCR7ZX0/JHt1LnRvU3RyaW5nKCl9YCk7XG4gICAgICBpZiAoIWkub2spIHtcbiAgICAgICAgVC5lcnJvcihcbiAgICAgICAgICBgQ291bGQgbm90IGZldGNoIHRva2VuLiBTZXJ2ZXIgcmVzcG9uZGVkIHdpdGggc3RhdHVzICR7aS5zdGF0dXN9OiAke2kuc3RhdHVzVGV4dH1gXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgYWNjZXNzVG9rZW46IGQgfSA9IGF3YWl0IGkuanNvbigpO1xuICAgICAgcyhkKTtcbiAgICB9KSgpO1xuICB9LCBbZSwgbiwgSlNPTi5zdHJpbmdpZnkodCldKSwgYTtcbn1cbmZ1bmN0aW9uIEp0KGUpIHtcbiAgdmFyIGMsIG87XG4gIGNvbnN0IG4gPSBSKGUpLCB7IGNsYXNzTmFtZTogdCwgbWVkaWFNdXRlZE9ic2VydmVyOiBhIH0gPSByLnVzZU1lbW8oXG4gICAgKCkgPT4geWUobiksXG4gICAgW0YobildXG4gICk7XG4gIHJldHVybiB7IGlzTXV0ZWQ6IGIoXG4gICAgYSxcbiAgICAhISgoYyA9IG4ucHVibGljYXRpb24pICE9IG51bGwgJiYgYy5pc011dGVkIHx8IChvID0gbi5wYXJ0aWNpcGFudC5nZXRUcmFja1B1YmxpY2F0aW9uKG4uc291cmNlKSkgIT0gbnVsbCAmJiBvLmlzTXV0ZWQpXG4gICksIGNsYXNzTmFtZTogdCB9O1xufVxuZnVuY3Rpb24gX3Qoe1xuICBzb3VyY2U6IGUsXG4gIG9uQ2hhbmdlOiBuLFxuICBpbml0aWFsU3RhdGU6IHQsXG4gIGNhcHR1cmVPcHRpb25zOiBhLFxuICBwdWJsaXNoT3B0aW9uczogcyxcbiAgb25EZXZpY2VFcnJvcjogYyxcbiAgLi4ub1xufSkge1xuICB2YXIgUDtcbiAgY29uc3QgdSA9IFcoKSwgaSA9IChQID0gdSA9PSBudWxsID8gdm9pZCAwIDogdS5sb2NhbFBhcnRpY2lwYW50KSA9PSBudWxsID8gdm9pZCAwIDogUC5nZXRUcmFja1B1YmxpY2F0aW9uKGUpLCBkID0gci51c2VSZWYoITEpLCB7IHRvZ2dsZTogbCwgY2xhc3NOYW1lOiBmLCBwZW5kaW5nT2JzZXJ2ZXI6IHAsIGVuYWJsZWRPYnNlcnZlcjogbSB9ID0gci51c2VNZW1vKFxuICAgICgpID0+IHUgPyBQZShlLCB1LCBhLCBzLCBjKSA6IGtlKCksXG4gICAgW3UsIGUsIEpTT04uc3RyaW5naWZ5KGEpLCBzXVxuICApLCBnID0gYihwLCAhMSksIFMgPSBiKG0sIHQgPz8gISEoaSAhPSBudWxsICYmIGkuaXNFbmFibGVkKSk7XG4gIHIudXNlRWZmZWN0KCgpID0+IHtcbiAgICBuID09IG51bGwgfHwgbihTLCBkLmN1cnJlbnQpLCBkLmN1cnJlbnQgPSAhMTtcbiAgfSwgW1MsIG5dKSwgci51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHQgIT09IHZvaWQgMCAmJiAoVC5kZWJ1ZyhcImZvcmNpbmcgaW5pdGlhbCB0b2dnbGUgc3RhdGVcIiwgZSwgdCksIGwodCkpO1xuICB9LCBbXSk7XG4gIGNvbnN0IE0gPSByLnVzZU1lbW8oKCkgPT4gRShvLCB7IGNsYXNzTmFtZTogZiB9KSwgW28sIGZdKSwgdiA9IHIudXNlQ2FsbGJhY2soXG4gICAgKGgpID0+IHtcbiAgICAgIHZhciBDO1xuICAgICAgZC5jdXJyZW50ID0gITAsIGwoKS5jYXRjaCgoKSA9PiBkLmN1cnJlbnQgPSAhMSksIChDID0gby5vbkNsaWNrKSA9PSBudWxsIHx8IEMuY2FsbChvLCBoKTtcbiAgICB9LFxuICAgIFtvLCBsXVxuICApO1xuICByZXR1cm4ge1xuICAgIHRvZ2dsZTogbCxcbiAgICBlbmFibGVkOiBTLFxuICAgIHBlbmRpbmc6IGcsXG4gICAgdHJhY2s6IGksXG4gICAgYnV0dG9uUHJvcHM6IHtcbiAgICAgIC4uLk0sXG4gICAgICBcImFyaWEtcHJlc3NlZFwiOiBTLFxuICAgICAgXCJkYXRhLWxrLXNvdXJjZVwiOiBlLFxuICAgICAgXCJkYXRhLWxrLWVuYWJsZWRcIjogUyxcbiAgICAgIGRpc2FibGVkOiBnLFxuICAgICAgb25DbGljazogdlxuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIFd0KGUgPSBbXG4gIHkuU291cmNlLkNhbWVyYSxcbiAgeS5Tb3VyY2UuTWljcm9waG9uZSxcbiAgeS5Tb3VyY2UuU2NyZWVuU2hhcmUsXG4gIHkuU291cmNlLlNjcmVlblNoYXJlQXVkaW8sXG4gIHkuU291cmNlLlVua25vd25cbl0sIG4gPSB7fSkge1xuICBjb25zdCB0ID0gayhuLnJvb20pLCBbYSwgc10gPSByLnVzZVN0YXRlKFtdKSwgW2MsIG9dID0gci51c2VTdGF0ZShbXSksIHUgPSByLnVzZU1lbW8oKCkgPT4gZS5tYXAoKGQpID0+IEVlKGQpID8gZC5zb3VyY2UgOiBkKSwgW0pTT04uc3RyaW5naWZ5KGUpXSk7XG4gIHJldHVybiByLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgZCA9IFRlKHQsIHUsIHtcbiAgICAgIGFkZGl0aW9uYWxSb29tRXZlbnRzOiBuLnVwZGF0ZU9ubHlPbixcbiAgICAgIG9ubHlTdWJzY3JpYmVkOiBuLm9ubHlTdWJzY3JpYmVkXG4gICAgfSkuc3Vic2NyaWJlKCh7IHRyYWNrUmVmZXJlbmNlczogbCwgcGFydGljaXBhbnRzOiBmIH0pID0+IHtcbiAgICAgIFQuZGVidWcoXCJzZXR0aW5nIHRyYWNrIGJ1bmRsZXNcIiwgbCwgZiksIHMobCksIG8oZik7XG4gICAgfSk7XG4gICAgcmV0dXJuICgpID0+IGQudW5zdWJzY3JpYmUoKTtcbiAgfSwgW1xuICAgIHQsXG4gICAgSlNPTi5zdHJpbmdpZnkobi5vbmx5U3Vic2NyaWJlZCksXG4gICAgSlNPTi5zdHJpbmdpZnkobi51cGRhdGVPbmx5T24pLFxuICAgIEpTT04uc3RyaW5naWZ5KGUpXG4gIF0pLCByLnVzZU1lbW8oKCkgPT4ge1xuICAgIGlmICgkKGUpKSB7XG4gICAgICBjb25zdCBkID0gdHQoZSwgYyksIGwgPSBBcnJheS5mcm9tKGEpO1xuICAgICAgcmV0dXJuIGMuZm9yRWFjaCgoZikgPT4ge1xuICAgICAgICBkLmhhcyhmLmlkZW50aXR5KSAmJiAoZC5nZXQoZi5pZGVudGl0eSkgPz8gW10pLmZvckVhY2goKG0pID0+IHtcbiAgICAgICAgICBpZiAoYS5maW5kKFxuICAgICAgICAgICAgKHsgcGFydGljaXBhbnQ6IFMsIHB1YmxpY2F0aW9uOiBNIH0pID0+IGYuaWRlbnRpdHkgPT09IFMuaWRlbnRpdHkgJiYgTS5zb3VyY2UgPT09IG1cbiAgICAgICAgICApKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIFQuZGVidWcoXG4gICAgICAgICAgICBgQWRkICR7bX0gcGxhY2Vob2xkZXIgZm9yIHBhcnRpY2lwYW50ICR7Zi5pZGVudGl0eX0uYFxuICAgICAgICAgICk7XG4gICAgICAgICAgY29uc3QgZyA9IHtcbiAgICAgICAgICAgIHBhcnRpY2lwYW50OiBmLFxuICAgICAgICAgICAgc291cmNlOiBtXG4gICAgICAgICAgfTtcbiAgICAgICAgICBsLnB1c2goZyk7XG4gICAgICAgIH0pO1xuICAgICAgfSksIGw7XG4gICAgfSBlbHNlXG4gICAgICByZXR1cm4gYTtcbiAgfSwgW2EsIGMsIGVdKTtcbn1cbmZ1bmN0aW9uIGV0KGUsIG4pIHtcbiAgY29uc3QgdCA9IG5ldyBTZXQoZSk7XG4gIGZvciAoY29uc3QgYSBvZiBuKVxuICAgIHQuZGVsZXRlKGEpO1xuICByZXR1cm4gdDtcbn1cbmZ1bmN0aW9uIHR0KGUsIG4pIHtcbiAgY29uc3QgdCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIGlmICgkKGUpKSB7XG4gICAgY29uc3QgYSA9IGUuZmlsdGVyKChzKSA9PiBzLndpdGhQbGFjZWhvbGRlcikubWFwKChzKSA9PiBzLnNvdXJjZSk7XG4gICAgbi5mb3JFYWNoKChzKSA9PiB7XG4gICAgICBjb25zdCBjID0gcy5nZXRUcmFja1B1YmxpY2F0aW9ucygpLm1hcCgodSkgPT4ge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgcmV0dXJuIChpID0gdS50cmFjaykgPT0gbnVsbCA/IHZvaWQgMCA6IGkuc291cmNlO1xuICAgICAgfSkuZmlsdGVyKCh1KSA9PiB1ICE9PSB2b2lkIDApLCBvID0gQXJyYXkuZnJvbShcbiAgICAgICAgZXQobmV3IFNldChhKSwgbmV3IFNldChjKSlcbiAgICAgICk7XG4gICAgICBvLmxlbmd0aCA+IDAgJiYgdC5zZXQocy5pZGVudGl0eSwgbyk7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHQ7XG59XG5mdW5jdGlvbiBudChlKSB7XG4gIGNvbnN0IFtuLCB0XSA9IHIudXNlU3RhdGUod2UoZSkpLCB7IHRyYWNrT2JzZXJ2ZXI6IGEgfSA9IHIudXNlTWVtbygoKSA9PiBBZShlKSwgW2UucGFydGljaXBhbnQuc2lkID8/IGUucGFydGljaXBhbnQuaWRlbnRpdHksIGUuc291cmNlXSk7XG4gIHJldHVybiByLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgcyA9IGEuc3Vic2NyaWJlKChjKSA9PiB7XG4gICAgICB0KGMpO1xuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiBzID09IG51bGwgPyB2b2lkIDAgOiBzLnVuc3Vic2NyaWJlKCk7XG4gIH0sIFthXSksIHtcbiAgICBwYXJ0aWNpcGFudDogZS5wYXJ0aWNpcGFudCxcbiAgICBzb3VyY2U6IGUuc291cmNlID8/IHkuU291cmNlLlVua25vd24sXG4gICAgcHVibGljYXRpb246IG5cbiAgfTtcbn1cbmZ1bmN0aW9uIFF0KGUsIG4pIHtcbiAgY29uc3QgdCA9IHcobik7XG4gIHJldHVybiBudCh7IG5hbWU6IGUsIHBhcnRpY2lwYW50OiB0IH0pO1xufVxuZnVuY3Rpb24gJHQoZSkge1xuICBjb25zdCBuID0gQSgpLCB0ID0gTyhuKSwgYSA9IHIudXNlTWVtbyhcbiAgICAoKSA9PiB0ID09PSBJLkRpc2Nvbm5lY3RlZCxcbiAgICBbdF1cbiAgKSwgcyA9IHIudXNlTWVtbyhcbiAgICAoKSA9PiBDZShuLCBlKSxcbiAgICBbbiwgZSwgYV1cbiAgKSwgYyA9IGIocy5pc1NlbmRpbmdPYnNlcnZhYmxlLCAhMSksIG8gPSBiKHMubWVzc2FnZU9ic2VydmFibGUsIFtdKTtcbiAgcmV0dXJuIHsgc2VuZDogcy5zZW5kLCB1cGRhdGU6IHMudXBkYXRlLCBjaGF0TWVzc2FnZXM6IG8sIGlzU2VuZGluZzogYyB9O1xufVxuZnVuY3Rpb24gR3QoZSA9IHt9KSB7XG4gIGNvbnN0IFtuLCB0XSA9IHIudXNlU3RhdGUoXG4gICAgSWUoZS5kZWZhdWx0cywgZS5wcmV2ZW50TG9hZCA/PyAhMSlcbiAgKSwgYSA9IHIudXNlQ2FsbGJhY2soKGkpID0+IHtcbiAgICB0KChkKSA9PiAoeyAuLi5kLCBhdWRpb0VuYWJsZWQ6IGkgfSkpO1xuICB9LCBbXSksIHMgPSByLnVzZUNhbGxiYWNrKChpKSA9PiB7XG4gICAgdCgoZCkgPT4gKHsgLi4uZCwgdmlkZW9FbmFibGVkOiBpIH0pKTtcbiAgfSwgW10pLCBjID0gci51c2VDYWxsYmFjaygoaSkgPT4ge1xuICAgIHQoKGQpID0+ICh7IC4uLmQsIGF1ZGlvRGV2aWNlSWQ6IGkgfSkpO1xuICB9LCBbXSksIG8gPSByLnVzZUNhbGxiYWNrKChpKSA9PiB7XG4gICAgdCgoZCkgPT4gKHsgLi4uZCwgdmlkZW9EZXZpY2VJZDogaSB9KSk7XG4gIH0sIFtdKSwgdSA9IHIudXNlQ2FsbGJhY2soKGkpID0+IHtcbiAgICB0KChkKSA9PiAoeyAuLi5kLCB1c2VybmFtZTogaSB9KSk7XG4gIH0sIFtdKTtcbiAgcmV0dXJuIHIudXNlRWZmZWN0KCgpID0+IHtcbiAgICBPZShuLCBlLnByZXZlbnRTYXZlID8/ICExKTtcbiAgfSwgW24sIGUucHJldmVudFNhdmVdKSwge1xuICAgIHVzZXJDaG9pY2VzOiBuLFxuICAgIHNhdmVBdWRpb0lucHV0RW5hYmxlZDogYSxcbiAgICBzYXZlVmlkZW9JbnB1dEVuYWJsZWQ6IHMsXG4gICAgc2F2ZUF1ZGlvSW5wdXREZXZpY2VJZDogYyxcbiAgICBzYXZlVmlkZW9JbnB1dERldmljZUlkOiBvLFxuICAgIHNhdmVVc2VybmFtZTogdVxuICB9O1xufVxuZnVuY3Rpb24geHQoZSwgbiA9IHt9KSB7XG4gIGNvbnN0IHQgPSB3KGUpLCBhID0gayhuLnJvb20pLCBzID0gci51c2VNZW1vKCgpID0+IERlKGEsIHQpLCBbYSwgdF0pO1xuICByZXR1cm4gYihcbiAgICBzLFxuICAgIHQgaW5zdGFuY2VvZiBfZSA/IHQuaXNFMkVFRW5hYmxlZCA6ICEhKHQgIT0gbnVsbCAmJiB0LmlzRW5jcnlwdGVkKVxuICApO1xufVxuZnVuY3Rpb24gSHQoZSwgbiA9IHsgZmZ0U2l6ZTogMzIsIHNtb290aGluZ1RpbWVDb25zdGFudDogMCB9KSB7XG4gIGNvbnN0IHQgPSBMZShlKSA/IGUucHVibGljYXRpb24udHJhY2sgOiBlLCBbYSwgc10gPSByLnVzZVN0YXRlKDApO1xuICByZXR1cm4gci51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdCB8fCAhdC5tZWRpYVN0cmVhbSlcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCB7IGNsZWFudXA6IGMsIGFuYWx5c2VyOiBvIH0gPSBWKHQsIG4pLCB1ID0gby5mcmVxdWVuY3lCaW5Db3VudCwgaSA9IG5ldyBVaW50OEFycmF5KHUpLCBsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgby5nZXRCeXRlRnJlcXVlbmN5RGF0YShpKTtcbiAgICAgIGxldCBmID0gMDtcbiAgICAgIGZvciAobGV0IHAgPSAwOyBwIDwgaS5sZW5ndGg7IHArKykge1xuICAgICAgICBjb25zdCBtID0gaVtwXTtcbiAgICAgICAgZiArPSBtICogbTtcbiAgICAgIH1cbiAgICAgIHMoTWF0aC5zcXJ0KGYgLyBpLmxlbmd0aCkgLyAyNTUpO1xuICAgIH0sIDFlMyAvIDMwKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgYygpLCBjbGVhckludGVydmFsKGwpO1xuICAgIH07XG4gIH0sIFt0LCB0ID09IG51bGwgPyB2b2lkIDAgOiB0Lm1lZGlhU3RyZWFtLCBKU09OLnN0cmluZ2lmeShuKV0pLCBhO1xufVxuY29uc3Qgc3QgPSAoZSkgPT4ge1xuICBjb25zdCBuID0gKHQpID0+IHtcbiAgICBsZXQgYyA9IDEgLSBNYXRoLm1heCgtMTAwLCBNYXRoLm1pbigtMTAsIHQpKSAqIC0xIC8gMTAwO1xuICAgIHJldHVybiBjID0gTWF0aC5zcXJ0KGMpLCBjO1xuICB9O1xuICByZXR1cm4gZS5tYXAoKHQpID0+IHQgPT09IC0xIC8gMCA/IDAgOiBuKHQpKTtcbn0sIGF0ID0ge1xuICBiYW5kczogNSxcbiAgbG9QYXNzOiAxMDAsXG4gIGhpUGFzczogNjAwLFxuICB1cGRhdGVJbnRlcnZhbDogMzIsXG4gIGFuYWx5c2VyT3B0aW9uczogeyBmZnRTaXplOiAyMDQ4IH1cbn07XG5mdW5jdGlvbiBqdChlLCBuID0ge30pIHtcbiAgdmFyIG87XG4gIGNvbnN0IHQgPSBlIGluc3RhbmNlb2YgeSA/IGUgOiAobyA9IGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUucHVibGljYXRpb24pID09IG51bGwgPyB2b2lkIDAgOiBvLnRyYWNrLCBhID0geyAuLi5hdCwgLi4ubiB9LCBbcywgY10gPSByLnVzZVN0YXRlKFxuICAgIG5ldyBBcnJheShhLmJhbmRzKS5maWxsKDApXG4gICk7XG4gIHJldHVybiByLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCF0IHx8ICEodCAhPSBudWxsICYmIHQubWVkaWFTdHJlYW0pKVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IHsgYW5hbHlzZXI6IHUsIGNsZWFudXA6IGkgfSA9IFYodCwgYS5hbmFseXNlck9wdGlvbnMpLCBkID0gdS5mcmVxdWVuY3lCaW5Db3VudCwgbCA9IG5ldyBGbG9hdDMyQXJyYXkoZCksIHAgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB1LmdldEZsb2F0RnJlcXVlbmN5RGF0YShsKTtcbiAgICAgIGxldCBtID0gbmV3IEZsb2F0MzJBcnJheShsLmxlbmd0aCk7XG4gICAgICBmb3IgKGxldCB2ID0gMDsgdiA8IGwubGVuZ3RoOyB2KyspXG4gICAgICAgIG1bdl0gPSBsW3ZdO1xuICAgICAgbSA9IG0uc2xpY2Uobi5sb1Bhc3MsIG4uaGlQYXNzKTtcbiAgICAgIGNvbnN0IGcgPSBzdChtKSwgUyA9IE1hdGguY2VpbChnLmxlbmd0aCAvIGEuYmFuZHMpLCBNID0gW107XG4gICAgICBmb3IgKGxldCB2ID0gMDsgdiA8IGEuYmFuZHM7IHYrKykge1xuICAgICAgICBjb25zdCBQID0gZy5zbGljZSh2ICogUywgKHYgKyAxKSAqIFMpLnJlZHVjZSgoaCwgQykgPT4gaCArPSBDLCAwKTtcbiAgICAgICAgTS5wdXNoKFAgLyBTKTtcbiAgICAgIH1cbiAgICAgIGMoTSk7XG4gICAgfSwgYS51cGRhdGVJbnRlcnZhbCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGkoKSwgY2xlYXJJbnRlcnZhbChwKTtcbiAgICB9O1xuICB9LCBbdCwgdCA9PSBudWxsID8gdm9pZCAwIDogdC5tZWRpYVN0cmVhbSwgSlNPTi5zdHJpbmdpZnkobildKSwgcztcbn1cbmNvbnN0IHJ0ID0ge1xuICBiYXJDb3VudDogMTIwLFxuICB2b2xNdWx0aXBsaWVyOiA1LFxuICB1cGRhdGVJbnRlcnZhbDogMjBcbn07XG5mdW5jdGlvbiBYdChlLCBuID0ge30pIHtcbiAgdmFyIGw7XG4gIGNvbnN0IHQgPSBlIGluc3RhbmNlb2YgeSA/IGUgOiAobCA9IGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUucHVibGljYXRpb24pID09IG51bGwgPyB2b2lkIDAgOiBsLnRyYWNrLCBhID0geyAuLi5ydCwgLi4ubiB9LCBzID0gci51c2VSZWYobmV3IEZsb2F0MzJBcnJheSgpKSwgYyA9IHIudXNlUmVmKHBlcmZvcm1hbmNlLm5vdygpKSwgbyA9IHIudXNlUmVmKDApLCBbdSwgaV0gPSByLnVzZVN0YXRlKFtdKSwgZCA9IHIudXNlQ2FsbGJhY2soKGYpID0+IHtcbiAgICBpKFxuICAgICAgQXJyYXkuZnJvbShcbiAgICAgICAgb3QoZiwgYS5iYXJDb3VudCkubWFwKChwKSA9PiBNYXRoLnNxcnQocCkgKiBhLnZvbE11bHRpcGxpZXIpXG4gICAgICAgIC8vIHdhdmUuc2xpY2UoMCwgb3B0cy5iYXJDb3VudCkubWFwKCh2KSA9PiBzaWdtb2lkKHYgKiBvcHRzLnZvbE11bHRpcGxpZXIsIDAuMDgsIDAuMikpLFxuICAgICAgKVxuICAgICk7XG4gIH0sIFtdKTtcbiAgcmV0dXJuIHIudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXQgfHwgISh0ICE9IG51bGwgJiYgdC5tZWRpYVN0cmVhbSkpXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgeyBhbmFseXNlcjogZiwgY2xlYW51cDogcCB9ID0gVih0LCB7XG4gICAgICBmZnRTaXplOiBVKGEuYmFyQ291bnQpXG4gICAgfSksIG0gPSBVKGEuYmFyQ291bnQpLCBnID0gbmV3IEZsb2F0MzJBcnJheShtKSwgUyA9ICgpID0+IHtcbiAgICAgIGlmIChNID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKFMpLCBmLmdldEZsb2F0VGltZURvbWFpbkRhdGEoZyksIHMuY3VycmVudC5tYXAoKHYsIFApID0+IHYgKyBnW1BdKSwgby5jdXJyZW50ICs9IDEsIHBlcmZvcm1hbmNlLm5vdygpIC0gYy5jdXJyZW50ID49IGEudXBkYXRlSW50ZXJ2YWwpIHtcbiAgICAgICAgY29uc3QgdiA9IGcubWFwKChQKSA9PiBQIC8gby5jdXJyZW50KTtcbiAgICAgICAgZCh2KSwgYy5jdXJyZW50ID0gcGVyZm9ybWFuY2Uubm93KCksIG8uY3VycmVudCA9IDA7XG4gICAgICB9XG4gICAgfTtcbiAgICBsZXQgTSA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShTKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgcCgpLCBjYW5jZWxBbmltYXRpb25GcmFtZShNKTtcbiAgICB9O1xuICB9LCBbdCwgdCA9PSBudWxsID8gdm9pZCAwIDogdC5tZWRpYVN0cmVhbSwgSlNPTi5zdHJpbmdpZnkobiksIGRdKSwge1xuICAgIGJhcnM6IHVcbiAgfTtcbn1cbmZ1bmN0aW9uIFUoZSkge1xuICByZXR1cm4gZSA8IDMyID8gMzIgOiBjdChlKTtcbn1cbmZ1bmN0aW9uIGN0KGUpIHtcbiAgbGV0IG4gPSAyO1xuICBmb3IgKDsgZSA+Pj0gMTsgKVxuICAgIG4gPDw9IDE7XG4gIHJldHVybiBuO1xufVxuZnVuY3Rpb24gb3QoZSwgbikge1xuICBjb25zdCB0ID0gTWF0aC5mbG9vcihlLmxlbmd0aCAvIG4pLCBhID0gbmV3IEZsb2F0MzJBcnJheShuKTtcbiAgZm9yIChsZXQgcyA9IDA7IHMgPCBuOyBzKyspIHtcbiAgICBjb25zdCBjID0gdCAqIHM7XG4gICAgbGV0IG8gPSAwO1xuICAgIGZvciAobGV0IHUgPSAwOyB1IDwgdDsgdSsrKVxuICAgICAgbyA9IG8gKyBNYXRoLmFicyhlW2MgKyB1XSk7XG4gICAgYVtzXSA9IG8gLyB0O1xuICB9XG4gIHJldHVybiBhO1xufVxuZnVuY3Rpb24gaXQoZSwgbikge1xuICBjb25zdCB0ID0gQSgpLCBhID0gTigpLCBzID0gbiA/IHQuZ2V0UGFydGljaXBhbnRCeUlkZW50aXR5KG4pIDogYSwgYyA9IHIudXNlTWVtbyhcbiAgICAoKSA9PiBzID8gUmUocywgeyBzb3VyY2VzOiBlIH0pIDogdm9pZCAwLFxuICAgIFtzID09IG51bGwgPyB2b2lkIDAgOiBzLnNpZCwgcyA9PSBudWxsID8gdm9pZCAwIDogcy5pZGVudGl0eSwgSlNPTi5zdHJpbmdpZnkoZSldXG4gICk7XG4gIHJldHVybiBiKGMsIFtdKTtcbn1cbmZ1bmN0aW9uIHV0KGUpIHtcbiAgdmFyIHQsIGEsIHM7XG4gIGNvbnN0IG4gPSByLnVzZU1lbW8oXG4gICAgKCkgPT4ge1xuICAgICAgdmFyIGM7XG4gICAgICByZXR1cm4gKGMgPSBlID09IG51bGwgPyB2b2lkIDAgOiBlLnB1YmxpY2F0aW9uKSAhPSBudWxsICYmIGMudHJhY2sgPyBGZShlID09IG51bGwgPyB2b2lkIDAgOiBlLnB1YmxpY2F0aW9uLnRyYWNrKSA6IHZvaWQgMDtcbiAgICB9LFxuICAgIFsodCA9IGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUucHVibGljYXRpb24pID09IG51bGwgPyB2b2lkIDAgOiB0LnRyYWNrXVxuICApO1xuICByZXR1cm4gYihuLCB7XG4gICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgIHJ0cFRpbWVzdGFtcDogKHMgPSAoYSA9IGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUucHVibGljYXRpb24pID09IG51bGwgPyB2b2lkIDAgOiBhLnRyYWNrKSA9PSBudWxsID8gdm9pZCAwIDogcy5ydHBUaW1lc3RhbXBcbiAgfSk7XG59XG5jb25zdCBkdCA9IHtcbiAgYnVmZmVyU2l6ZTogMTAwXG4gIC8vIG1heEFnZTogMl8wMDAsXG59O1xuZnVuY3Rpb24gbHQoZSwgbikge1xuICBjb25zdCB0ID0geyAuLi5kdCwgLi4ubiB9LCBbYSwgc10gPSByLnVzZVN0YXRlKFtdKSwgYyA9IHV0KGUpLCBvID0gKHUpID0+IHtcbiAgICB2YXIgaTtcbiAgICAoaSA9IHQub25UcmFuc2NyaXB0aW9uKSA9PSBudWxsIHx8IGkuY2FsbCh0LCB1KSwgcyhcbiAgICAgIChkKSA9PiBWZShcbiAgICAgICAgZCxcbiAgICAgICAgLy8gd2hlbiBmaXJzdCByZWNlaXZpbmcgYSBzZWdtZW50LCBhZGQgdGhlIGN1cnJlbnQgbWVkaWEgdGltZXN0YW1wIHRvIGl0XG4gICAgICAgIHUubWFwKChsKSA9PiBCZShsLCBjKSksXG4gICAgICAgIHQuYnVmZmVyU2l6ZVxuICAgICAgKVxuICAgICk7XG4gIH07XG4gIHJldHVybiByLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCEoZSAhPSBudWxsICYmIGUucHVibGljYXRpb24pKVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IHUgPSBOZShlLnB1YmxpY2F0aW9uKS5zdWJzY3JpYmUoKGkpID0+IHtcbiAgICAgIG8oLi4uaSk7XG4gICAgfSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHUudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICB9LCBbZSAmJiBGKGUpLCBvXSksIHsgc2VnbWVudHM6IGEgfTtcbn1cbmZ1bmN0aW9uIGZ0KGUgPSB7fSkge1xuICBjb25zdCBuID0gTigpLCB0ID0gZS5wYXJ0aWNpcGFudCA/PyBuLCBhID0gci51c2VNZW1vKFxuICAgIC8vIHdlaXJkIHR5cGVzY3JpcHQgY29uc3RyYWludFxuICAgICgpID0+IHQgPyBMKHQpIDogTCh0KSxcbiAgICBbdF1cbiAgKTtcbiAgcmV0dXJuIGIoYSwge1xuICAgIGF0dHJpYnV0ZXM6IHQgPT0gbnVsbCA/IHZvaWQgMCA6IHQuYXR0cmlidXRlc1xuICB9KTtcbn1cbmZ1bmN0aW9uIFl0KGUsIG4gPSB7fSkge1xuICBjb25zdCB0ID0gdyhuLnBhcnRpY2lwYW50KSwgW2EsIHNdID0gci51c2VTdGF0ZSh0LmF0dHJpYnV0ZXNbZV0pO1xuICByZXR1cm4gci51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghdClcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBjID0gTCh0KS5zdWJzY3JpYmUoKG8pID0+IHtcbiAgICAgIG8uY2hhbmdlZFtlXSAhPT0gdm9pZCAwICYmIHMoby5hdHRyaWJ1dGVzW2VdKTtcbiAgICB9KTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgYy51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gIH0sIFt0LCBlXSksIGE7XG59XG5jb25zdCBxID0gXCJsay5hZ2VudC5zdGF0ZVwiO1xuZnVuY3Rpb24gS3QoKSB7XG4gIGNvbnN0IGUgPSBHKCkuZmluZCgobykgPT4gby5raW5kID09PSBXZS5BR0VOVCksIG4gPSBpdChbeS5Tb3VyY2UuTWljcm9waG9uZV0sIGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUuaWRlbnRpdHkpWzBdLCB7IHNlZ21lbnRzOiB0IH0gPSBsdChuKSwgYSA9IE8oKSwgeyBhdHRyaWJ1dGVzOiBzIH0gPSBmdCh7IHBhcnRpY2lwYW50OiBlIH0pLCBjID0gci51c2VNZW1vKCgpID0+IGEgPT09IEkuRGlzY29ubmVjdGVkID8gXCJkaXNjb25uZWN0ZWRcIiA6IGEgPT09IEkuQ29ubmVjdGluZyB8fCAhZSB8fCAhKHMgIT0gbnVsbCAmJiBzW3FdKSA/IFwiY29ubmVjdGluZ1wiIDogc1txXSwgW3MsIGUsIGFdKTtcbiAgcmV0dXJuIHtcbiAgICBhZ2VudDogZSxcbiAgICBzdGF0ZTogYyxcbiAgICBhdWRpb1RyYWNrOiBuLFxuICAgIGFnZW50VHJhbnNjcmlwdGlvbnM6IHQsXG4gICAgYWdlbnRBdHRyaWJ1dGVzOiBzXG4gIH07XG59XG5mdW5jdGlvbiBadChlKSB7XG4gIGNvbnN0IG4gPSBrKGUpLCB0ID0gTyhuKSwgYSA9IHIudXNlTWVtbygoKSA9PiB6ZShuKSwgW24sIHRdKTtcbiAgcmV0dXJuIGIoYSwgbi5pc1JlY29yZGluZyk7XG59XG5leHBvcnQge1xuICBFdCBhcyBBLFxuICBMdCBhcyBCLFxuICBZZSBhcyBDLFxuICBTdCBhcyBELFxuICBNdCBhcyBFLFxuICBqZSBhcyBGLFxuICB6IGFzIEcsXG4gIFhlIGFzIEgsXG4gIEN0IGFzIEksXG4gIEl0IGFzIEosXG4gIER0IGFzIEssXG4gIFJ0IGFzIEwsXG4gIEcgYXMgTSxcbiAgTnQgYXMgTixcbiAgWmUgYXMgTyxcbiAgcXQgYXMgUCxcbiAgUXQgYXMgUSxcbiAgSHQgYXMgUixcbiAgWHQgYXMgUyxcbiAgaXQgYXMgVCxcbiAgbHQgYXMgVSxcbiAgS3QgYXMgVixcbiAgZnQgYXMgVyxcbiAgWXQgYXMgWCxcbiAgWnQgYXMgWSxcbiAgTyBhcyBhLFxuICBVdCBhcyBiLFxuICB5dCBhcyBjLFxuICBQdCBhcyBkLFxuICBUdCBhcyBlLFxuICBWdCBhcyBmLFxuICBCdCBhcyBnLFxuICBfdCBhcyBoLFxuICBodCBhcyBpLFxuICBiIGFzIGosXG4gIEp0IGFzIGssXG4gIE90IGFzIGwsXG4gIHh0IGFzIG0sXG4gIGt0IGFzIG4sXG4gIEF0IGFzIG8sXG4gIHp0IGFzIHAsXG4gIEhlIGFzIHEsXG4gIEtlIGFzIHIsXG4gIGp0IGFzIHMsXG4gIFd0IGFzIHQsXG4gIHZ0IGFzIHUsXG4gIEZ0IGFzIHYsXG4gICR0IGFzIHcsXG4gIHd0IGFzIHgsXG4gIEd0IGFzIHksXG4gIGd0IGFzIHpcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ob29rcy1DN1E3NkEzSC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0/node_modules/@livekit/components-react/dist/hooks-C7Q76A3H.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0/node_modules/@livekit/components-react/dist/krisp.mjs":
/*!***********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0/node_modules/@livekit/components-react/dist/krisp.mjs ***!
  \***********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useKrispNoiseFilter: () => (/* binding */ b)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/.pnpm/next@14.2.9_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var livekit_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! livekit-client */ \"(ssr)/./node_modules/.pnpm/livekit-client@2.5.5/node_modules/livekit-client/dist/livekit-client.esm.mjs\");\n/* harmony import */ var _hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./hooks-C7Q76A3H.mjs */ \"(ssr)/./node_modules/.pnpm/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0/node_modules/@livekit/components-react/dist/hooks-C7Q76A3H.mjs\");\n\n\n\nfunction b(n = {}) {\n  const [o, f] = react__WEBPACK_IMPORTED_MODULE_0__.useState(!1), [u, a] = react__WEBPACK_IMPORTED_MODULE_0__.useState(!1), [p, l] = react__WEBPACK_IMPORTED_MODULE_0__.useState(!1);\n  let e = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.C)().microphoneTrack;\n  const [t, d] = react__WEBPACK_IMPORTED_MODULE_0__.useState();\n  n.trackRef && (e = n.trackRef.publication);\n  const k = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(async (r) => {\n    if (r) {\n      const { KrispNoiseFilter: s, isKrispNoiseFilterSupported: c } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.5\").then(__webpack_require__.bind(__webpack_require__, /*! @livekit/krisp-noise-filter */ \"(ssr)/./node_modules/.pnpm/@livekit+krisp-noise-filter@0.2.12_livekit-client@2.5.5/node_modules/@livekit/krisp-noise-filter/dist/index.js\"));\n      if (!c()) {\n        console.warn(\"Krisp noise filter is not supported in this browser\");\n        return;\n      }\n      t || d(s(n.filterOptions));\n    }\n    f((s) => (s !== r && a(!0), r));\n  }, []);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var r;\n    if (e && e.track instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.LocalAudioTrack && t) {\n      const s = e.track.getProcessor();\n      s && s.name === \"livekit-noise-filter\" ? (a(!0), s.setEnabled(o).finally(() => {\n        a(!1), l(o);\n      })) : !s && o && (a(!0), (r = e == null ? void 0 : e.track) == null || r.setProcessor(t).then(() => t.setEnabled(o)).then(() => {\n        l(!0);\n      }).catch((c) => {\n        l(!1), console.error(c);\n      }).finally(() => {\n        a(!1);\n      }));\n    }\n  }, [o, e, t]), {\n    setNoiseFilterEnabled: k,\n    isNoiseFilterEnabled: p,\n    isNoiseFilterPending: u,\n    processor: t\n  };\n}\n\n//# sourceMappingURL=krisp.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxpdmVraXQrY29tcG9uZW50cy1yZWFjdEAyX2VkZmZiMGQ3YjM1ZjdkZTlhY2VjNjY3ZWVlZjE2NGMwL25vZGVfbW9kdWxlcy9AbGl2ZWtpdC9jb21wb25lbnRzLXJlYWN0L2Rpc3Qva3Jpc3AubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBMkI7QUFDMkI7QUFDUjtBQUM5QyxpQkFBaUI7QUFDakIsaUJBQWlCLDJDQUFVLGVBQWUsMkNBQVUsZUFBZSwyQ0FBVTtBQUM3RSxVQUFVLHNEQUFDO0FBQ1gsaUJBQWlCLDJDQUFVO0FBQzNCO0FBQ0EsWUFBWSw4Q0FBYTtBQUN6QjtBQUNBLGNBQWMsc0RBQXNELFFBQVEsa1ZBQXFDO0FBQ2pIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILFNBQVMsNENBQVc7QUFDcEI7QUFDQSxnQ0FBZ0MsMkRBQUM7QUFDakM7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92b2ljZS1hc3Npc3RhbnQyLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0BsaXZla2l0K2NvbXBvbmVudHMtcmVhY3RAMl9lZGZmYjBkN2IzNWY3ZGU5YWNlYzY2N2VlZWYxNjRjMC9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1yZWFjdC9kaXN0L2tyaXNwLm1qcz8yYWM0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGkgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBMb2NhbEF1ZGlvVHJhY2sgYXMgbSB9IGZyb20gXCJsaXZla2l0LWNsaWVudFwiO1xuaW1wb3J0IHsgQyBhcyBFIH0gZnJvbSBcIi4vaG9va3MtQzdRNzZBM0gubWpzXCI7XG5mdW5jdGlvbiBiKG4gPSB7fSkge1xuICBjb25zdCBbbywgZl0gPSBpLnVzZVN0YXRlKCExKSwgW3UsIGFdID0gaS51c2VTdGF0ZSghMSksIFtwLCBsXSA9IGkudXNlU3RhdGUoITEpO1xuICBsZXQgZSA9IEUoKS5taWNyb3Bob25lVHJhY2s7XG4gIGNvbnN0IFt0LCBkXSA9IGkudXNlU3RhdGUoKTtcbiAgbi50cmFja1JlZiAmJiAoZSA9IG4udHJhY2tSZWYucHVibGljYXRpb24pO1xuICBjb25zdCBrID0gaS51c2VDYWxsYmFjayhhc3luYyAocikgPT4ge1xuICAgIGlmIChyKSB7XG4gICAgICBjb25zdCB7IEtyaXNwTm9pc2VGaWx0ZXI6IHMsIGlzS3Jpc3BOb2lzZUZpbHRlclN1cHBvcnRlZDogYyB9ID0gYXdhaXQgaW1wb3J0KFwiQGxpdmVraXQva3Jpc3Atbm9pc2UtZmlsdGVyXCIpO1xuICAgICAgaWYgKCFjKCkpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiS3Jpc3Agbm9pc2UgZmlsdGVyIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0IHx8IGQocyhuLmZpbHRlck9wdGlvbnMpKTtcbiAgICB9XG4gICAgZigocykgPT4gKHMgIT09IHIgJiYgYSghMCksIHIpKTtcbiAgfSwgW10pO1xuICByZXR1cm4gaS51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHZhciByO1xuICAgIGlmIChlICYmIGUudHJhY2sgaW5zdGFuY2VvZiBtICYmIHQpIHtcbiAgICAgIGNvbnN0IHMgPSBlLnRyYWNrLmdldFByb2Nlc3NvcigpO1xuICAgICAgcyAmJiBzLm5hbWUgPT09IFwibGl2ZWtpdC1ub2lzZS1maWx0ZXJcIiA/IChhKCEwKSwgcy5zZXRFbmFibGVkKG8pLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBhKCExKSwgbChvKTtcbiAgICAgIH0pKSA6ICFzICYmIG8gJiYgKGEoITApLCAociA9IGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUudHJhY2spID09IG51bGwgfHwgci5zZXRQcm9jZXNzb3IodCkudGhlbigoKSA9PiB0LnNldEVuYWJsZWQobykpLnRoZW4oKCkgPT4ge1xuICAgICAgICBsKCEwKTtcbiAgICAgIH0pLmNhdGNoKChjKSA9PiB7XG4gICAgICAgIGwoITEpLCBjb25zb2xlLmVycm9yKGMpO1xuICAgICAgfSkuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIGEoITEpO1xuICAgICAgfSkpO1xuICAgIH1cbiAgfSwgW28sIGUsIHRdKSwge1xuICAgIHNldE5vaXNlRmlsdGVyRW5hYmxlZDogayxcbiAgICBpc05vaXNlRmlsdGVyRW5hYmxlZDogcCxcbiAgICBpc05vaXNlRmlsdGVyUGVuZGluZzogdSxcbiAgICBwcm9jZXNzb3I6IHRcbiAgfTtcbn1cbmV4cG9ydCB7XG4gIGIgYXMgdXNlS3Jpc3BOb2lzZUZpbHRlclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWtyaXNwLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0/node_modules/@livekit/components-react/dist/krisp.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0/node_modules/@livekit/components-react/dist/prefabs.mjs":
/*!*************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0/node_modules/@livekit/components-react/dist/prefabs.mjs ***!
  \*************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AudioConference: () => (/* binding */ at),\n/* harmony export */   Chat: () => (/* binding */ ee),\n/* harmony export */   ControlBar: () => (/* binding */ te),\n/* harmony export */   MediaDeviceMenu: () => (/* binding */ O),\n/* harmony export */   PreJoin: () => (/* binding */ et),\n/* harmony export */   VideoConference: () => (/* binding */ tt),\n/* harmony export */   VoiceAssistantControlBar: () => (/* binding */ nt),\n/* harmony export */   usePreviewDevice: () => (/* binding */ Ze),\n/* harmony export */   usePreviewTracks: () => (/* binding */ ze)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/.pnpm/next@14.2.9_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components-BO8CL-ek.mjs */ \"(ssr)/./node_modules/.pnpm/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0/node_modules/@livekit/components-react/dist/components-BO8CL-ek.mjs\");\n/* harmony import */ var _hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./hooks-C7Q76A3H.mjs */ \"(ssr)/./node_modules/.pnpm/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0/node_modules/@livekit/components-react/dist/hooks-C7Q76A3H.mjs\");\n/* harmony import */ var _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./contexts-DjicKJUz.mjs */ \"(ssr)/./node_modules/.pnpm/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0/node_modules/@livekit/components-react/dist/contexts-DjicKJUz.mjs\");\n/* harmony import */ var livekit_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! livekit-client */ \"(ssr)/./node_modules/.pnpm/livekit-client@2.5.5/node_modules/livekit-client/dist/livekit-client.esm.mjs\");\n/* harmony import */ var _room_C0QEsGui_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./room-C0QEsGui.mjs */ \"(ssr)/./node_modules/.pnpm/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0/node_modules/@livekit/components-react/dist/room-C0QEsGui.mjs\");\n\n\n\n\n\n\nfunction ee({\n  messageFormatter: a,\n  messageDecoder: l,\n  messageEncoder: i,\n  channelTopic: c,\n  ...E\n}) {\n  const p = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null), m = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null), u = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => ({ messageDecoder: l, messageEncoder: i, channelTopic: c }), [l, i, c]), { send: d, chatMessages: g, isSending: t } = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.w)(u), r = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.j)(), o = react__WEBPACK_IMPORTED_MODULE_0__.useRef(0);\n  async function S(n) {\n    n.preventDefault(), p.current && p.current.value.trim() !== \"\" && d && (await d(p.current.value), p.current.value = \"\", p.current.focus());\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var n;\n    m && ((n = m.current) == null || n.scrollTo({ top: m.current.scrollHeight }));\n  }, [m, g]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var s, v, f, b, w;\n    if (!r || g.length === 0)\n      return;\n    if ((s = r.widget.state) != null && s.showChat && g.length > 0 && o.current !== ((v = g[g.length - 1]) == null ? void 0 : v.timestamp)) {\n      o.current = (f = g[g.length - 1]) == null ? void 0 : f.timestamp;\n      return;\n    }\n    const n = g.filter(\n      (L) => !o.current || L.timestamp > o.current\n    ).length, { widget: h } = r;\n    n > 0 && ((b = h.state) == null ? void 0 : b.unreadMessages) !== n && ((w = h.dispatch) == null || w.call(h, { msg: \"unread_msg\", count: n }));\n  }, [g, r == null ? void 0 : r.widget]), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ...E, className: \"lk-chat\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-chat-header\" }, \"Messages\", /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.C, { className: \"lk-close-button\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.S, null))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"ul\", { className: \"lk-list lk-chat-messages\", ref: m }, E.children ? g.map(\n    (n, h) => (0,_components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.c)(E.children, {\n      entry: n,\n      key: n.id ?? h,\n      messageFormatter: a\n    })\n  ) : g.map((n, h, s) => {\n    const v = h >= 1 && s[h - 1].from === n.from, f = h >= 1 && n.timestamp - s[h - 1].timestamp < 6e4;\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      _components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.a,\n      {\n        key: n.id ?? h,\n        hideName: v,\n        hideTimestamp: v === !1 ? !1 : f,\n        entry: n,\n        messageFormatter: a\n      }\n    );\n  })), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"form\", { className: \"lk-chat-form\", onSubmit: S }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"input\",\n    {\n      className: \"lk-form-control lk-chat-form-input\",\n      disabled: t,\n      ref: p,\n      type: \"text\",\n      placeholder: \"Enter a message...\",\n      onInput: (n) => n.stopPropagation(),\n      onKeyDown: (n) => n.stopPropagation(),\n      onKeyUp: (n) => n.stopPropagation()\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { type: \"submit\", className: \"lk-button lk-chat-form-button\", disabled: t }, \"Send\")));\n}\nfunction O({\n  kind: a,\n  initialSelection: l,\n  onActiveDeviceChange: i,\n  tracks: c,\n  requestPermissions: E = !1,\n  ...p\n}) {\n  const [m, u] = react__WEBPACK_IMPORTED_MODULE_0__.useState(!1), [d, g] = react__WEBPACK_IMPORTED_MODULE_0__.useState([]), [t, r] = react__WEBPACK_IMPORTED_MODULE_0__.useState(!0), [o, S] = react__WEBPACK_IMPORTED_MODULE_0__.useState(E), n = (f, b) => {\n    _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.l.debug(\"handle device change\"), u(!1), i == null || i(f, b);\n  }, h = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null), s = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n  react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect(() => {\n    m && S(!0);\n  }, [m]), react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect(() => {\n    h.current && s.current && (d || t) && (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.an)(h.current, s.current).then(({ x: f, y: b }) => {\n      s.current && Object.assign(s.current.style, { left: `${f}px`, top: `${b}px` });\n    }), r(!1);\n  }, [h, s, d, t]);\n  const v = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (f) => {\n      s.current && f.target !== h.current && m && (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.ao)(s.current, f) && u(!1);\n    },\n    [m, s, h]\n  );\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => (document.addEventListener(\"click\", v), window.addEventListener(\"resize\", () => r(!0)), () => {\n    document.removeEventListener(\"click\", v), window.removeEventListener(\"resize\", () => r(!0));\n  }), [v, r]), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"button\",\n    {\n      className: \"lk-button lk-button-menu\",\n      \"aria-pressed\": m,\n      ...p,\n      onClick: () => u(!m),\n      ref: h\n    },\n    p.children\n  ), !p.disabled && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"div\",\n    {\n      className: \"lk-device-menu\",\n      ref: s,\n      style: { visibility: m ? \"visible\" : \"hidden\" }\n    },\n    a ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      _components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.M,\n      {\n        initialSelection: l,\n        onActiveDeviceChange: (f) => n(a, f),\n        onDeviceListChange: g,\n        kind: a,\n        track: c == null ? void 0 : c[a],\n        requestPermissions: o\n      }\n    ) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-device-menu-heading\" }, \"Audio inputs\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      _components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.M,\n      {\n        kind: \"audioinput\",\n        onActiveDeviceChange: (f) => n(\"audioinput\", f),\n        onDeviceListChange: g,\n        track: c == null ? void 0 : c.audioinput,\n        requestPermissions: o\n      }\n    ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-device-menu-heading\" }, \"Video inputs\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      _components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.M,\n      {\n        kind: \"videoinput\",\n        onActiveDeviceChange: (f) => n(\"videoinput\", f),\n        onDeviceListChange: g,\n        track: c == null ? void 0 : c.videoinput,\n        requestPermissions: o\n      }\n    ))\n  ));\n}\nfunction W() {\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    (0,_components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.w)();\n  }, []);\n}\nfunction ze(a, l) {\n  const [i, c] = react__WEBPACK_IMPORTED_MODULE_0__.useState(), E = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => new livekit_client__WEBPACK_IMPORTED_MODULE_1__.Mutex(), []);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    let p = !1, m = [];\n    return E.lock().then(async (u) => {\n      try {\n        (a.audio || a.video) && (m = await (0,livekit_client__WEBPACK_IMPORTED_MODULE_1__.createLocalTracks)(a), p ? m.forEach((d) => d.stop()) : c(m));\n      } catch (d) {\n        l && d instanceof Error ? l(d) : _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.l.error(d);\n      } finally {\n        u();\n      }\n    }), () => {\n      p = !0, m.forEach((u) => {\n        u.stop();\n      });\n    };\n  }, [JSON.stringify(a), l, E]), i;\n}\nfunction Ze(a, l, i) {\n  const [c, E] = react__WEBPACK_IMPORTED_MODULE_0__.useState(null), [p, m] = react__WEBPACK_IMPORTED_MODULE_0__.useState(!1), u = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.x)({ kind: i }), [d, g] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    void 0\n  ), [t, r] = react__WEBPACK_IMPORTED_MODULE_0__.useState(), [o, S] = react__WEBPACK_IMPORTED_MODULE_0__.useState(l);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    S(l);\n  }, [l]);\n  const n = async (v, f) => {\n    try {\n      const b = f === \"videoinput\" ? await (0,livekit_client__WEBPACK_IMPORTED_MODULE_1__.createLocalVideoTrack)({\n        deviceId: v,\n        resolution: livekit_client__WEBPACK_IMPORTED_MODULE_1__.VideoPresets.h720.resolution\n      }) : await (0,livekit_client__WEBPACK_IMPORTED_MODULE_1__.createLocalAudioTrack)({ deviceId: v }), w = await b.getDeviceId();\n      w && v !== w && (s.current = w, S(w)), r(b);\n    } catch (b) {\n      b instanceof Error && E(b);\n    }\n  }, h = async (v, f) => {\n    await v.setDeviceId(f), s.current = f;\n  }, s = react__WEBPACK_IMPORTED_MODULE_0__.useRef(o);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    a && !t && !c && !p && (_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.l.debug(\"creating track\", i), m(!0), n(o, i).finally(() => {\n      m(!1);\n    }));\n  }, [a, t, c, p]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    t && (a ? d != null && d.deviceId && s.current !== (d == null ? void 0 : d.deviceId) ? (_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.l.debug(`switching ${i} device from`, s.current, d.deviceId), h(t, d.deviceId)) : (_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.l.debug(`unmuting local ${i} track`), t.unmute()) : (_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.l.debug(`muting ${i} track`), t.mute().then(() => _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.l.debug(t.mediaStreamTrack))));\n  }, [t, d, a, i]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => () => {\n    t && (_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.l.debug(`stopping local ${i} track`), t.stop(), t.mute());\n  }, []), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    g(u == null ? void 0 : u.find((v) => v.deviceId === o));\n  }, [o, u]), {\n    selectedDevice: d,\n    localTrack: t,\n    deviceError: c\n  };\n}\nfunction et({\n  defaults: a = {},\n  onValidate: l,\n  onSubmit: i,\n  onError: c,\n  debug: E,\n  joinLabel: p = \"Join Room\",\n  micLabel: m = \"Microphone\",\n  camLabel: u = \"Camera\",\n  userLabel: d = \"Username\",\n  persistUserChoices: g = !0,\n  ...t\n}) {\n  const [r, o] = react__WEBPACK_IMPORTED_MODULE_0__.useState(_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.ap), S = {\n    ...a.audioDeviceId !== void 0 && { audioDeviceId: a.audioDeviceId },\n    ...a.videoDeviceId !== void 0 && { videoDeviceId: a.videoDeviceId },\n    ...a.audioEnabled !== void 0 && { audioEnabled: a.audioEnabled },\n    ...a.videoEnabled !== void 0 && { videoEnabled: a.videoEnabled },\n    ...a.username !== void 0 && { username: a.username }\n  }, {\n    userChoices: n,\n    saveAudioInputDeviceId: h,\n    saveAudioInputEnabled: s,\n    saveVideoInputDeviceId: v,\n    saveVideoInputEnabled: f,\n    saveUsername: b\n  } = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.y)({\n    defaults: S,\n    preventSave: !g,\n    preventLoad: !g\n  }), [w, L] = react__WEBPACK_IMPORTED_MODULE_0__.useState(n.audioEnabled), [I, D] = react__WEBPACK_IMPORTED_MODULE_0__.useState(n.videoEnabled), [T, $] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    n.audioDeviceId\n  ), [k, N] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    n.videoDeviceId\n  ), [V, ae] = react__WEBPACK_IMPORTED_MODULE_0__.useState(n.username);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    s(w);\n  }, [w, s]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    f(I);\n  }, [I, f]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    h(T);\n  }, [T, h]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    v(k);\n  }, [k, v]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    b(V);\n  }, [V, b]);\n  const A = ze(\n    {\n      audio: w ? { deviceId: n.audioDeviceId } : !1,\n      video: I ? { deviceId: n.videoDeviceId } : !1\n    },\n    c\n  ), U = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null), M = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => A == null ? void 0 : A.filter((C) => C.kind === livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Kind.Video)[0],\n    [A]\n  ), ne = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    if (M) {\n      const { facingMode: C } = (0,livekit_client__WEBPACK_IMPORTED_MODULE_1__.facingModeFromLocalTrack)(M);\n      return C;\n    } else\n      return \"undefined\";\n  }, [M]), j = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => A == null ? void 0 : A.filter((C) => C.kind === livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Kind.Audio)[0],\n    [A]\n  );\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => (U.current && M && (M.unmute(), M.attach(U.current)), () => {\n    M == null || M.detach();\n  }), [M]);\n  const [ce, se] = react__WEBPACK_IMPORTED_MODULE_0__.useState(), _ = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (C) => typeof l == \"function\" ? l(C) : C.username !== \"\",\n    [l]\n  );\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const C = {\n      username: V,\n      videoEnabled: I,\n      videoDeviceId: k,\n      audioEnabled: w,\n      audioDeviceId: T\n    };\n    o(C), se(_(C));\n  }, [V, I, _, w, T, k]);\n  function ie(C) {\n    C.preventDefault(), _(r) ? typeof i == \"function\" && i(r) : _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.l.warn(\"Validation failed with: \", r);\n  }\n  return W(), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-prejoin\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-video-container\" }, M && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"video\", { ref: U, width: \"1280\", height: \"720\", \"data-lk-facing-mode\": ne }), (!M || !I) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-camera-off-note\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.b, null))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group-container\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group audio\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    _components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.T,\n    {\n      initialState: w,\n      source: livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone,\n      onChange: (C) => L(C)\n    },\n    m\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group-menu\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    O,\n    {\n      initialSelection: T,\n      kind: \"audioinput\",\n      disabled: !j,\n      tracks: { audioinput: j },\n      onActiveDeviceChange: (C, F) => $(F)\n    }\n  ))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group video\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    _components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.T,\n    {\n      initialState: I,\n      source: livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera,\n      onChange: (C) => D(C)\n    },\n    u\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group-menu\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    O,\n    {\n      initialSelection: k,\n      kind: \"videoinput\",\n      disabled: !M,\n      tracks: { videoinput: M },\n      onActiveDeviceChange: (C, F) => N(F)\n    }\n  )))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"form\", { className: \"lk-username-container\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"input\",\n    {\n      className: \"lk-form-control\",\n      id: \"username\",\n      name: \"username\",\n      type: \"text\",\n      defaultValue: V,\n      placeholder: d,\n      onChange: (C) => ae(C.target.value),\n      autoComplete: \"off\"\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"button\",\n    {\n      className: \"lk-button lk-join-button\",\n      type: \"submit\",\n      onClick: ie,\n      disabled: !ce\n    },\n    p\n  )), E && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"strong\", null, \"User Choices:\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"ul\", { className: \"lk-list\", style: { overflow: \"hidden\", maxWidth: \"15rem\" } }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"li\", null, \"Username: \", `${r.username}`), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"li\", null, \"Video Enabled: \", `${r.videoEnabled}`), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"li\", null, \"Audio Enabled: \", `${r.audioEnabled}`), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"li\", null, \"Video Device: \", `${r.videoDeviceId}`), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"li\", null, \"Audio Device: \", `${r.audioDeviceId}`))));\n}\nfunction Ke({ props: a }) {\n  const { dispatch: l, state: i } = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.a)().widget, c = \"lk-button lk-settings-toggle\";\n  return { mergedProps: react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_room_C0QEsGui_mjs__WEBPACK_IMPORTED_MODULE_5__.m)(a, {\n    className: c,\n    onClick: () => {\n      l && l({ msg: \"toggle_settings\" });\n    },\n    \"aria-pressed\": i != null && i.showSettings ? \"true\" : \"false\"\n  }), [a, c, l, i]) };\n}\nconst Ge = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function(l, i) {\n    const { mergedProps: c } = Ke({ props: l });\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { ref: i, ...c }, l.children);\n  }\n);\nfunction te({\n  variation: a,\n  controls: l,\n  saveUserChoices: i = !0,\n  onDeviceError: c,\n  ...E\n}) {\n  var $;\n  const [p, m] = react__WEBPACK_IMPORTED_MODULE_0__.useState(!1), u = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.j)();\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var k, N;\n    ((k = u == null ? void 0 : u.widget.state) == null ? void 0 : k.showChat) !== void 0 && m((N = u == null ? void 0 : u.widget.state) == null ? void 0 : N.showChat);\n  }, [($ = u == null ? void 0 : u.widget.state) == null ? void 0 : $.showChat]);\n  const g = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.z)(`(max-width: ${p ? 1e3 : 760}px)`) ? \"minimal\" : \"verbose\";\n  a ?? (a = g);\n  const t = { leave: !0, ...l }, r = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.A)();\n  r ? (t.camera ?? (t.camera = r.canPublish), t.microphone ?? (t.microphone = r.canPublish), t.screenShare ?? (t.screenShare = r.canPublish), t.chat ?? (t.chat = r.canPublishData && (l == null ? void 0 : l.chat))) : (t.camera = !1, t.chat = !1, t.microphone = !1, t.screenShare = !1);\n  const o = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => a === \"minimal\" || a === \"verbose\",\n    [a]\n  ), S = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => a === \"textOnly\" || a === \"verbose\",\n    [a]\n  ), n = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.aq)(), [h, s] = react__WEBPACK_IMPORTED_MODULE_0__.useState(!1), v = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (k) => {\n      s(k);\n    },\n    [s]\n  ), f = (0,_components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.m)({ className: \"lk-control-bar\" }, E), {\n    saveAudioInputEnabled: b,\n    saveVideoInputEnabled: w,\n    saveAudioInputDeviceId: L,\n    saveVideoInputDeviceId: I\n  } = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.y)({ preventSave: !i }), D = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (k, N) => N ? b(k) : null,\n    [b]\n  ), T = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (k, N) => N ? w(k) : null,\n    [w]\n  );\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ...f }, t.microphone && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    _components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.T,\n    {\n      source: livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone,\n      showIcon: o,\n      onChange: D,\n      onDeviceError: (k) => c == null ? void 0 : c({ source: livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone, error: k })\n    },\n    S && \"Microphone\"\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group-menu\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    O,\n    {\n      kind: \"audioinput\",\n      onActiveDeviceChange: (k, N) => L(N ?? \"\")\n    }\n  ))), t.camera && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    _components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.T,\n    {\n      source: livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera,\n      showIcon: o,\n      onChange: T,\n      onDeviceError: (k) => c == null ? void 0 : c({ source: livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera, error: k })\n    },\n    S && \"Camera\"\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group-menu\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    O,\n    {\n      kind: \"videoinput\",\n      onActiveDeviceChange: (k, N) => I(N ?? \"\")\n    }\n  ))), t.screenShare && n && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    _components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.T,\n    {\n      source: livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.ScreenShare,\n      captureOptions: { audio: !0, selfBrowserSurface: \"include\" },\n      showIcon: o,\n      onChange: v,\n      onDeviceError: (k) => c == null ? void 0 : c({ source: livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.ScreenShare, error: k })\n    },\n    S && (h ? \"Stop screen share\" : \"Share screen\")\n  ), t.chat && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.C, null, o && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.d, null), S && \"Chat\"), t.settings && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Ge, null, o && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.e, null), S && \"Settings\"), t.leave && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.D, null, o && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.f, null), S && \"Leave\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.g, null));\n}\nfunction tt({\n  chatMessageFormatter: a,\n  chatMessageDecoder: l,\n  chatMessageEncoder: i,\n  SettingsComponent: c,\n  ...E\n}) {\n  var n, h;\n  const [p, m] = react__WEBPACK_IMPORTED_MODULE_0__.useState({\n    showChat: !1,\n    unreadMessages: 0,\n    showSettings: !1\n  }), u = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null), d = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.t)(\n    [\n      { source: livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera, withPlaceholder: !0 },\n      { source: livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.ScreenShare, withPlaceholder: !1 }\n    ],\n    { updateOnlyOn: [livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.ActiveSpeakersChanged], onlySubscribed: !1 }\n  ), g = (s) => {\n    _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.l.debug(\"updating widget state\", s), m(s);\n  }, t = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.ar)(), r = d.filter(_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.a1).filter((s) => s.publication.source === livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.ScreenShare), o = (n = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.B)(t)) == null ? void 0 : n[0], S = d.filter((s) => !(0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.as)(s, o));\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var s, v, f, b, w, L;\n    if (r.some((I) => I.publication.isSubscribed) && u.current === null ? (_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.l.debug(\"Auto set screen share focus:\", { newScreenShareTrack: r[0] }), (v = (s = t.pin).dispatch) == null || v.call(s, { msg: \"set_pin\", trackReference: r[0] }), u.current = r[0]) : u.current && !r.some(\n      (I) => {\n        var D, T;\n        return I.publication.trackSid === ((T = (D = u.current) == null ? void 0 : D.publication) == null ? void 0 : T.trackSid);\n      }\n    ) && (_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.l.debug(\"Auto clearing screen share focus.\"), (b = (f = t.pin).dispatch) == null || b.call(f, { msg: \"clear_pin\" }), u.current = null), o && !(0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.a1)(o)) {\n      const I = d.find(\n        (D) => D.participant.identity === o.participant.identity && D.source === o.source\n      );\n      I !== o && (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.a1)(I) && ((L = (w = t.pin).dispatch) == null || L.call(w, { msg: \"set_pin\", trackReference: I }));\n    }\n  }, [\n    r.map((s) => `${s.publication.trackSid}_${s.publication.isSubscribed}`).join(),\n    (h = o == null ? void 0 : o.publication) == null ? void 0 : h.trackSid,\n    d\n  ]), W(), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-video-conference\", ...E }, (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_3__.at)() && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    _components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.L,\n    {\n      value: t,\n      onWidgetChange: g\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-video-conference-inner\" }, o ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-focus-layout-wrapper\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.F, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.h, { tracks: S }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.P, null)), o && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.i, { trackRef: o }))) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-grid-layout-wrapper\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.G, { tracks: d }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.P, null))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(te, { controls: { chat: !0, settings: !!c } })),\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      ee,\n      {\n        style: { display: p.showChat ? \"grid\" : \"none\" },\n        messageFormatter: a,\n        messageEncoder: i,\n        messageDecoder: l\n      }\n    ),\n    c && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      \"div\",\n      {\n        className: \"lk-settings-menu-modal\",\n        style: { display: p.showSettings ? \"block\" : \"none\" }\n      },\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(c, null)\n    )\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.R, null), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.j, null));\n}\nfunction at({ ...a }) {\n  const [l, i] = react__WEBPACK_IMPORTED_MODULE_0__.useState({\n    showChat: !1,\n    unreadMessages: 0\n  }), c = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.t)([livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone]);\n  return W(), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.L, { onWidgetChange: i }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-audio-conference\", ...a }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-audio-conference-stage\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.k, { tracks: c }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.l, null))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    te,\n    {\n      controls: { microphone: !0, screenShare: !1, camera: !1, chat: !0 }\n    }\n  ), l.showChat && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ee, null)));\n}\nfunction nt({\n  controls: a,\n  saveUserChoices: l = !0,\n  onDeviceError: i,\n  ...c\n}) {\n  const E = { leave: !0, microphone: !0, ...a }, p = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.A)(), { microphoneTrack: m, localParticipant: u } = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.C)(), d = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => ({\n    participant: u,\n    source: livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone,\n    publication: m\n  }), [u, m]);\n  p ? E.microphone ?? (E.microphone = p.canPublish) : E.microphone = !1;\n  const g = (0,_components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.m)({ className: \"lk-agent-control-bar\" }, c), { saveAudioInputEnabled: t, saveAudioInputDeviceId: r } = (0,_hooks_C7Q76A3H_mjs__WEBPACK_IMPORTED_MODULE_2__.y)({\n    preventSave: !l\n  }), o = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (S, n) => {\n      n && t(S);\n    },\n    [t]\n  );\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ...g }, E.microphone && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    _components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.T,\n    {\n      source: livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone,\n      showIcon: !0,\n      onChange: o,\n      onDeviceError: (S) => i == null ? void 0 : i({ source: livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone, error: S })\n    },\n    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.B, { trackRef: d, barCount: 7, options: { minHeight: 5 } })\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-button-group-menu\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    O,\n    {\n      kind: \"audioinput\",\n      onActiveDeviceChange: (S, n) => r(n ?? \"\")\n    }\n  ))), E.leave && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.D, null, \"Disconnect\"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_BO8CL_ek_mjs__WEBPACK_IMPORTED_MODULE_4__.g, null));\n}\n\n//# sourceMappingURL=prefabs.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxpdmVraXQrY29tcG9uZW50cy1yZWFjdEAyX2VkZmZiMGQ3YjM1ZjdkZTlhY2VjNjY3ZWVlZjE2NGMwL25vZGVfbW9kdWxlcy9AbGl2ZWtpdC9jb21wb25lbnRzLXJlYWN0L2Rpc3QvcHJlZmFicy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTJCO0FBQ3lPO0FBQ3pKO0FBQ3NDO0FBQ2dFO0FBQ25LO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxZQUFZLHlDQUFRLFlBQVkseUNBQVEsWUFBWSwwQ0FBUyxVQUFVLHVEQUF1RCxpQkFBaUIseUNBQXlDLEVBQUUsc0RBQUUsU0FBUyx5REFBQyxRQUFRLHlDQUFRO0FBQ3ROO0FBQ0E7QUFDQTtBQUNBLFNBQVMsNENBQVc7QUFDcEI7QUFDQSxrREFBa0QsNkJBQTZCO0FBQy9FLEdBQUcsV0FBVyw0Q0FBVztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsWUFBWTtBQUM1QixtSEFBbUgsNkJBQTZCO0FBQ2hKLEdBQUcsdURBQXVELGdEQUFlLFVBQVUsNEJBQTRCLGtCQUFrQixnREFBZSxVQUFVLDZCQUE2Qiw4QkFBOEIsZ0RBQWUsQ0FBQyx1REFBQyxJQUFJLDhCQUE4QixrQkFBa0IsZ0RBQWUsQ0FBQyx1REFBRSwyQkFBMkIsZ0RBQWUsU0FBUywrQ0FBK0M7QUFDOVksY0FBYywyREFBRTtBQUNoQjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLDJCQUEyQixnREFBZTtBQUMxQyxNQUFNLHVEQUFFO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsb0JBQW9CLGdEQUFlLFdBQVcsd0NBQXdDLGtCQUFrQixnREFBZTtBQUMxSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUNBLGtCQUFrQjtBQUNsQjtBQUNBLG1DQUFtQyxnREFBZTtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsY0FBYyxpQ0FBaUMsTUFBTSxzREFBQyxNQUFNLDBDQUEwQyxFQUFFLHNEQUFFLFFBQVEsMENBQVM7QUFDM0g7QUFDQSxZQUFZLGlEQUFDO0FBQ2I7QUFDQSxHQUFHO0FBQ0g7QUFDQSxZQUFZLDJEQUFDLEdBQUcsbUNBQW1DLFFBQVEsc0RBQXNELEVBQUUsc0RBQUM7QUFDcEg7QUFDQSxHQUFHLE9BQU8sOENBQWE7QUFDdkI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EseUJBQXlCLGdEQUFlLFVBQVUsTUFBTSxrQ0FBa0MsZ0RBQWUsVUFBVSw4QkFBOEIsa0JBQWtCLGdEQUFlO0FBQ2xMLElBQUksdURBQUM7QUFDTDtBQUNBLGNBQWMsaURBQUM7QUFDZjtBQUNBO0FBQ0EscURBQXFELFFBQVEsaURBQUMsOEJBQThCO0FBQzVGLEtBQUs7QUFDTCxvQkFBb0IsZ0RBQWUsQ0FBQyx1REFBRSxJQUFJLHFDQUFxQyxnQkFBZ0I7QUFDL0YscUJBQXFCLGdEQUFlLFVBQVUsbUNBQW1DLGtCQUFrQixnREFBZTtBQUNsSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLGdEQUFlLENBQUMsdURBQUMsdUNBQXVDLGdEQUFlLENBQUMsdURBQUM7QUFDM0c7QUFXRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdm9pY2UtYXNzaXN0YW50Mi8uL25vZGVfbW9kdWxlcy8ucG5wbS9AbGl2ZWtpdCtjb21wb25lbnRzLXJlYWN0QDJfZWRmZmIwZDdiMzVmN2RlOWFjZWM2NjdlZWVmMTY0YzAvbm9kZV9tb2R1bGVzL0BsaXZla2l0L2NvbXBvbmVudHMtcmVhY3QvZGlzdC9wcmVmYWJzLm1qcz9mODE5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGUgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBDIGFzIEssIFMgYXMgcmUsIGMgYXMgb2UsIGEgYXMgdWUsIE0gYXMgQiwgdyBhcyBsZSwgYiBhcyBkZSwgVCBhcyBSLCBtIGFzIEcsIGQgYXMgbWUsIGUgYXMgZmUsIEQgYXMgSiwgZiBhcyBoZSwgZyBhcyBILCBMIGFzIFEsIEcgYXMgcGUsIFAgYXMgeiwgRiBhcyBnZSwgaCBhcyB2ZSwgaSBhcyBFZSwgUiBhcyBTZSwgaiBhcyBrZSwgayBhcyBiZSwgbCBhcyBDZSwgQiBhcyB3ZSB9IGZyb20gXCIuL2NvbXBvbmVudHMtQk84Q0wtZWsubWpzXCI7XG5pbXBvcnQgeyB3IGFzIEllLCB4IGFzIHllLCB5IGFzIHgsIHogYXMgTWUsIEEgYXMgWCwgdCBhcyBZLCBCIGFzIE5lLCBDIGFzIFBlIH0gZnJvbSBcIi4vaG9va3MtQzdRNzZBM0gubWpzXCI7XG5pbXBvcnQgeyBqIGFzIFosIGFuIGFzIFRlLCBhbyBhcyBEZSwgbCBhcyBQLCBhcCBhcyBMZSwgYSBhcyBBZSwgYXEgYXMgUmUsIGFyIGFzIFZlLCBhMSBhcyBxLCBhcyBhcyBPZSwgYXQgYXMgJGUgfSBmcm9tIFwiLi9jb250ZXh0cy1EamljS0pVei5tanNcIjtcbmltcG9ydCB7IE11dGV4IGFzIFVlLCBjcmVhdGVMb2NhbFRyYWNrcyBhcyBfZSwgVHJhY2sgYXMgeSwgZmFjaW5nTW9kZUZyb21Mb2NhbFRyYWNrIGFzIEZlLCBjcmVhdGVMb2NhbFZpZGVvVHJhY2sgYXMgQmUsIFZpZGVvUHJlc2V0cyBhcyBxZSwgY3JlYXRlTG9jYWxBdWRpb1RyYWNrIGFzIHhlLCBSb29tRXZlbnQgYXMgV2UgfSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcbmltcG9ydCB7IG0gYXMgamUgfSBmcm9tIFwiLi9yb29tLUMwUUVzR3VpLm1qc1wiO1xuZnVuY3Rpb24gZWUoe1xuICBtZXNzYWdlRm9ybWF0dGVyOiBhLFxuICBtZXNzYWdlRGVjb2RlcjogbCxcbiAgbWVzc2FnZUVuY29kZXI6IGksXG4gIGNoYW5uZWxUb3BpYzogYyxcbiAgLi4uRVxufSkge1xuICBjb25zdCBwID0gZS51c2VSZWYobnVsbCksIG0gPSBlLnVzZVJlZihudWxsKSwgdSA9IGUudXNlTWVtbygoKSA9PiAoeyBtZXNzYWdlRGVjb2RlcjogbCwgbWVzc2FnZUVuY29kZXI6IGksIGNoYW5uZWxUb3BpYzogYyB9KSwgW2wsIGksIGNdKSwgeyBzZW5kOiBkLCBjaGF0TWVzc2FnZXM6IGcsIGlzU2VuZGluZzogdCB9ID0gSWUodSksIHIgPSBaKCksIG8gPSBlLnVzZVJlZigwKTtcbiAgYXN5bmMgZnVuY3Rpb24gUyhuKSB7XG4gICAgbi5wcmV2ZW50RGVmYXVsdCgpLCBwLmN1cnJlbnQgJiYgcC5jdXJyZW50LnZhbHVlLnRyaW0oKSAhPT0gXCJcIiAmJiBkICYmIChhd2FpdCBkKHAuY3VycmVudC52YWx1ZSksIHAuY3VycmVudC52YWx1ZSA9IFwiXCIsIHAuY3VycmVudC5mb2N1cygpKTtcbiAgfVxuICByZXR1cm4gZS51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHZhciBuO1xuICAgIG0gJiYgKChuID0gbS5jdXJyZW50KSA9PSBudWxsIHx8IG4uc2Nyb2xsVG8oeyB0b3A6IG0uY3VycmVudC5zY3JvbGxIZWlnaHQgfSkpO1xuICB9LCBbbSwgZ10pLCBlLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdmFyIHMsIHYsIGYsIGIsIHc7XG4gICAgaWYgKCFyIHx8IGcubGVuZ3RoID09PSAwKVxuICAgICAgcmV0dXJuO1xuICAgIGlmICgocyA9IHIud2lkZ2V0LnN0YXRlKSAhPSBudWxsICYmIHMuc2hvd0NoYXQgJiYgZy5sZW5ndGggPiAwICYmIG8uY3VycmVudCAhPT0gKCh2ID0gZ1tnLmxlbmd0aCAtIDFdKSA9PSBudWxsID8gdm9pZCAwIDogdi50aW1lc3RhbXApKSB7XG4gICAgICBvLmN1cnJlbnQgPSAoZiA9IGdbZy5sZW5ndGggLSAxXSkgPT0gbnVsbCA/IHZvaWQgMCA6IGYudGltZXN0YW1wO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBuID0gZy5maWx0ZXIoXG4gICAgICAoTCkgPT4gIW8uY3VycmVudCB8fCBMLnRpbWVzdGFtcCA+IG8uY3VycmVudFxuICAgICkubGVuZ3RoLCB7IHdpZGdldDogaCB9ID0gcjtcbiAgICBuID4gMCAmJiAoKGIgPSBoLnN0YXRlKSA9PSBudWxsID8gdm9pZCAwIDogYi51bnJlYWRNZXNzYWdlcykgIT09IG4gJiYgKCh3ID0gaC5kaXNwYXRjaCkgPT0gbnVsbCB8fCB3LmNhbGwoaCwgeyBtc2c6IFwidW5yZWFkX21zZ1wiLCBjb3VudDogbiB9KSk7XG4gIH0sIFtnLCByID09IG51bGwgPyB2b2lkIDAgOiByLndpZGdldF0pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgLi4uRSwgY2xhc3NOYW1lOiBcImxrLWNoYXRcIiB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLWNoYXQtaGVhZGVyXCIgfSwgXCJNZXNzYWdlc1wiLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KEssIHsgY2xhc3NOYW1lOiBcImxrLWNsb3NlLWJ1dHRvblwiIH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQocmUsIG51bGwpKSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJ1bFwiLCB7IGNsYXNzTmFtZTogXCJsay1saXN0IGxrLWNoYXQtbWVzc2FnZXNcIiwgcmVmOiBtIH0sIEUuY2hpbGRyZW4gPyBnLm1hcChcbiAgICAobiwgaCkgPT4gb2UoRS5jaGlsZHJlbiwge1xuICAgICAgZW50cnk6IG4sXG4gICAgICBrZXk6IG4uaWQgPz8gaCxcbiAgICAgIG1lc3NhZ2VGb3JtYXR0ZXI6IGFcbiAgICB9KVxuICApIDogZy5tYXAoKG4sIGgsIHMpID0+IHtcbiAgICBjb25zdCB2ID0gaCA+PSAxICYmIHNbaCAtIDFdLmZyb20gPT09IG4uZnJvbSwgZiA9IGggPj0gMSAmJiBuLnRpbWVzdGFtcCAtIHNbaCAtIDFdLnRpbWVzdGFtcCA8IDZlNDtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgICAgIHVlLFxuICAgICAge1xuICAgICAgICBrZXk6IG4uaWQgPz8gaCxcbiAgICAgICAgaGlkZU5hbWU6IHYsXG4gICAgICAgIGhpZGVUaW1lc3RhbXA6IHYgPT09ICExID8gITEgOiBmLFxuICAgICAgICBlbnRyeTogbixcbiAgICAgICAgbWVzc2FnZUZvcm1hdHRlcjogYVxuICAgICAgfVxuICAgICk7XG4gIH0pKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImZvcm1cIiwgeyBjbGFzc05hbWU6IFwibGstY2hhdC1mb3JtXCIsIG9uU3VibWl0OiBTIH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gICAgXCJpbnB1dFwiLFxuICAgIHtcbiAgICAgIGNsYXNzTmFtZTogXCJsay1mb3JtLWNvbnRyb2wgbGstY2hhdC1mb3JtLWlucHV0XCIsXG4gICAgICBkaXNhYmxlZDogdCxcbiAgICAgIHJlZjogcCxcbiAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgcGxhY2Vob2xkZXI6IFwiRW50ZXIgYSBtZXNzYWdlLi4uXCIsXG4gICAgICBvbklucHV0OiAobikgPT4gbi5zdG9wUHJvcGFnYXRpb24oKSxcbiAgICAgIG9uS2V5RG93bjogKG4pID0+IG4uc3RvcFByb3BhZ2F0aW9uKCksXG4gICAgICBvbktleVVwOiAobikgPT4gbi5zdG9wUHJvcGFnYXRpb24oKVxuICAgIH1cbiAgKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7IHR5cGU6IFwic3VibWl0XCIsIGNsYXNzTmFtZTogXCJsay1idXR0b24gbGstY2hhdC1mb3JtLWJ1dHRvblwiLCBkaXNhYmxlZDogdCB9LCBcIlNlbmRcIikpKTtcbn1cbmZ1bmN0aW9uIE8oe1xuICBraW5kOiBhLFxuICBpbml0aWFsU2VsZWN0aW9uOiBsLFxuICBvbkFjdGl2ZURldmljZUNoYW5nZTogaSxcbiAgdHJhY2tzOiBjLFxuICByZXF1ZXN0UGVybWlzc2lvbnM6IEUgPSAhMSxcbiAgLi4ucFxufSkge1xuICBjb25zdCBbbSwgdV0gPSBlLnVzZVN0YXRlKCExKSwgW2QsIGddID0gZS51c2VTdGF0ZShbXSksIFt0LCByXSA9IGUudXNlU3RhdGUoITApLCBbbywgU10gPSBlLnVzZVN0YXRlKEUpLCBuID0gKGYsIGIpID0+IHtcbiAgICBQLmRlYnVnKFwiaGFuZGxlIGRldmljZSBjaGFuZ2VcIiksIHUoITEpLCBpID09IG51bGwgfHwgaShmLCBiKTtcbiAgfSwgaCA9IGUudXNlUmVmKG51bGwpLCBzID0gZS51c2VSZWYobnVsbCk7XG4gIGUudXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBtICYmIFMoITApO1xuICB9LCBbbV0pLCBlLnVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgaC5jdXJyZW50ICYmIHMuY3VycmVudCAmJiAoZCB8fCB0KSAmJiBUZShoLmN1cnJlbnQsIHMuY3VycmVudCkudGhlbigoeyB4OiBmLCB5OiBiIH0pID0+IHtcbiAgICAgIHMuY3VycmVudCAmJiBPYmplY3QuYXNzaWduKHMuY3VycmVudC5zdHlsZSwgeyBsZWZ0OiBgJHtmfXB4YCwgdG9wOiBgJHtifXB4YCB9KTtcbiAgICB9KSwgcighMSk7XG4gIH0sIFtoLCBzLCBkLCB0XSk7XG4gIGNvbnN0IHYgPSBlLnVzZUNhbGxiYWNrKFxuICAgIChmKSA9PiB7XG4gICAgICBzLmN1cnJlbnQgJiYgZi50YXJnZXQgIT09IGguY3VycmVudCAmJiBtICYmIERlKHMuY3VycmVudCwgZikgJiYgdSghMSk7XG4gICAgfSxcbiAgICBbbSwgcywgaF1cbiAgKTtcbiAgcmV0dXJuIGUudXNlRWZmZWN0KCgpID0+IChkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdiksIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsICgpID0+IHIoITApKSwgKCkgPT4ge1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB2KSwgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgKCkgPT4gcighMCkpO1xuICB9KSwgW3YsIHJdKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChlLkZyYWdtZW50LCBudWxsLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICAgIFwiYnV0dG9uXCIsXG4gICAge1xuICAgICAgY2xhc3NOYW1lOiBcImxrLWJ1dHRvbiBsay1idXR0b24tbWVudVwiLFxuICAgICAgXCJhcmlhLXByZXNzZWRcIjogbSxcbiAgICAgIC4uLnAsXG4gICAgICBvbkNsaWNrOiAoKSA9PiB1KCFtKSxcbiAgICAgIHJlZjogaFxuICAgIH0sXG4gICAgcC5jaGlsZHJlblxuICApLCAhcC5kaXNhYmxlZCAmJiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICAgIFwiZGl2XCIsXG4gICAge1xuICAgICAgY2xhc3NOYW1lOiBcImxrLWRldmljZS1tZW51XCIsXG4gICAgICByZWY6IHMsXG4gICAgICBzdHlsZTogeyB2aXNpYmlsaXR5OiBtID8gXCJ2aXNpYmxlXCIgOiBcImhpZGRlblwiIH1cbiAgICB9LFxuICAgIGEgPyAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICAgICAgQixcbiAgICAgIHtcbiAgICAgICAgaW5pdGlhbFNlbGVjdGlvbjogbCxcbiAgICAgICAgb25BY3RpdmVEZXZpY2VDaGFuZ2U6IChmKSA9PiBuKGEsIGYpLFxuICAgICAgICBvbkRldmljZUxpc3RDaGFuZ2U6IGcsXG4gICAgICAgIGtpbmQ6IGEsXG4gICAgICAgIHRyYWNrOiBjID09IG51bGwgPyB2b2lkIDAgOiBjW2FdLFxuICAgICAgICByZXF1ZXN0UGVybWlzc2lvbnM6IG9cbiAgICAgIH1cbiAgICApIDogLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChlLkZyYWdtZW50LCBudWxsLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLWRldmljZS1tZW51LWhlYWRpbmdcIiB9LCBcIkF1ZGlvIGlucHV0c1wiKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgICAgIEIsXG4gICAgICB7XG4gICAgICAgIGtpbmQ6IFwiYXVkaW9pbnB1dFwiLFxuICAgICAgICBvbkFjdGl2ZURldmljZUNoYW5nZTogKGYpID0+IG4oXCJhdWRpb2lucHV0XCIsIGYpLFxuICAgICAgICBvbkRldmljZUxpc3RDaGFuZ2U6IGcsXG4gICAgICAgIHRyYWNrOiBjID09IG51bGwgPyB2b2lkIDAgOiBjLmF1ZGlvaW5wdXQsXG4gICAgICAgIHJlcXVlc3RQZXJtaXNzaW9uczogb1xuICAgICAgfVxuICAgICksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstZGV2aWNlLW1lbnUtaGVhZGluZ1wiIH0sIFwiVmlkZW8gaW5wdXRzXCIpLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICAgICAgQixcbiAgICAgIHtcbiAgICAgICAga2luZDogXCJ2aWRlb2lucHV0XCIsXG4gICAgICAgIG9uQWN0aXZlRGV2aWNlQ2hhbmdlOiAoZikgPT4gbihcInZpZGVvaW5wdXRcIiwgZiksXG4gICAgICAgIG9uRGV2aWNlTGlzdENoYW5nZTogZyxcbiAgICAgICAgdHJhY2s6IGMgPT0gbnVsbCA/IHZvaWQgMCA6IGMudmlkZW9pbnB1dCxcbiAgICAgICAgcmVxdWVzdFBlcm1pc3Npb25zOiBvXG4gICAgICB9XG4gICAgKSlcbiAgKSk7XG59XG5mdW5jdGlvbiBXKCkge1xuICBlLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGUoKTtcbiAgfSwgW10pO1xufVxuZnVuY3Rpb24gemUoYSwgbCkge1xuICBjb25zdCBbaSwgY10gPSBlLnVzZVN0YXRlKCksIEUgPSBlLnVzZU1lbW8oKCkgPT4gbmV3IFVlKCksIFtdKTtcbiAgcmV0dXJuIGUudXNlRWZmZWN0KCgpID0+IHtcbiAgICBsZXQgcCA9ICExLCBtID0gW107XG4gICAgcmV0dXJuIEUubG9jaygpLnRoZW4oYXN5bmMgKHUpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIChhLmF1ZGlvIHx8IGEudmlkZW8pICYmIChtID0gYXdhaXQgX2UoYSksIHAgPyBtLmZvckVhY2goKGQpID0+IGQuc3RvcCgpKSA6IGMobSkpO1xuICAgICAgfSBjYXRjaCAoZCkge1xuICAgICAgICBsICYmIGQgaW5zdGFuY2VvZiBFcnJvciA/IGwoZCkgOiBQLmVycm9yKGQpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgdSgpO1xuICAgICAgfVxuICAgIH0pLCAoKSA9PiB7XG4gICAgICBwID0gITAsIG0uZm9yRWFjaCgodSkgPT4ge1xuICAgICAgICB1LnN0b3AoKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0sIFtKU09OLnN0cmluZ2lmeShhKSwgbCwgRV0pLCBpO1xufVxuZnVuY3Rpb24gWmUoYSwgbCwgaSkge1xuICBjb25zdCBbYywgRV0gPSBlLnVzZVN0YXRlKG51bGwpLCBbcCwgbV0gPSBlLnVzZVN0YXRlKCExKSwgdSA9IHllKHsga2luZDogaSB9KSwgW2QsIGddID0gZS51c2VTdGF0ZShcbiAgICB2b2lkIDBcbiAgKSwgW3QsIHJdID0gZS51c2VTdGF0ZSgpLCBbbywgU10gPSBlLnVzZVN0YXRlKGwpO1xuICBlLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgUyhsKTtcbiAgfSwgW2xdKTtcbiAgY29uc3QgbiA9IGFzeW5jICh2LCBmKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGIgPSBmID09PSBcInZpZGVvaW5wdXRcIiA/IGF3YWl0IEJlKHtcbiAgICAgICAgZGV2aWNlSWQ6IHYsXG4gICAgICAgIHJlc29sdXRpb246IHFlLmg3MjAucmVzb2x1dGlvblxuICAgICAgfSkgOiBhd2FpdCB4ZSh7IGRldmljZUlkOiB2IH0pLCB3ID0gYXdhaXQgYi5nZXREZXZpY2VJZCgpO1xuICAgICAgdyAmJiB2ICE9PSB3ICYmIChzLmN1cnJlbnQgPSB3LCBTKHcpKSwgcihiKTtcbiAgICB9IGNhdGNoIChiKSB7XG4gICAgICBiIGluc3RhbmNlb2YgRXJyb3IgJiYgRShiKTtcbiAgICB9XG4gIH0sIGggPSBhc3luYyAodiwgZikgPT4ge1xuICAgIGF3YWl0IHYuc2V0RGV2aWNlSWQoZiksIHMuY3VycmVudCA9IGY7XG4gIH0sIHMgPSBlLnVzZVJlZihvKTtcbiAgcmV0dXJuIGUudXNlRWZmZWN0KCgpID0+IHtcbiAgICBhICYmICF0ICYmICFjICYmICFwICYmIChQLmRlYnVnKFwiY3JlYXRpbmcgdHJhY2tcIiwgaSksIG0oITApLCBuKG8sIGkpLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgbSghMSk7XG4gICAgfSkpO1xuICB9LCBbYSwgdCwgYywgcF0pLCBlLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdCAmJiAoYSA/IGQgIT0gbnVsbCAmJiBkLmRldmljZUlkICYmIHMuY3VycmVudCAhPT0gKGQgPT0gbnVsbCA/IHZvaWQgMCA6IGQuZGV2aWNlSWQpID8gKFAuZGVidWcoYHN3aXRjaGluZyAke2l9IGRldmljZSBmcm9tYCwgcy5jdXJyZW50LCBkLmRldmljZUlkKSwgaCh0LCBkLmRldmljZUlkKSkgOiAoUC5kZWJ1ZyhgdW5tdXRpbmcgbG9jYWwgJHtpfSB0cmFja2ApLCB0LnVubXV0ZSgpKSA6IChQLmRlYnVnKGBtdXRpbmcgJHtpfSB0cmFja2ApLCB0Lm11dGUoKS50aGVuKCgpID0+IFAuZGVidWcodC5tZWRpYVN0cmVhbVRyYWNrKSkpKTtcbiAgfSwgW3QsIGQsIGEsIGldKSwgZS51c2VFZmZlY3QoKCkgPT4gKCkgPT4ge1xuICAgIHQgJiYgKFAuZGVidWcoYHN0b3BwaW5nIGxvY2FsICR7aX0gdHJhY2tgKSwgdC5zdG9wKCksIHQubXV0ZSgpKTtcbiAgfSwgW10pLCBlLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZyh1ID09IG51bGwgPyB2b2lkIDAgOiB1LmZpbmQoKHYpID0+IHYuZGV2aWNlSWQgPT09IG8pKTtcbiAgfSwgW28sIHVdKSwge1xuICAgIHNlbGVjdGVkRGV2aWNlOiBkLFxuICAgIGxvY2FsVHJhY2s6IHQsXG4gICAgZGV2aWNlRXJyb3I6IGNcbiAgfTtcbn1cbmZ1bmN0aW9uIGV0KHtcbiAgZGVmYXVsdHM6IGEgPSB7fSxcbiAgb25WYWxpZGF0ZTogbCxcbiAgb25TdWJtaXQ6IGksXG4gIG9uRXJyb3I6IGMsXG4gIGRlYnVnOiBFLFxuICBqb2luTGFiZWw6IHAgPSBcIkpvaW4gUm9vbVwiLFxuICBtaWNMYWJlbDogbSA9IFwiTWljcm9waG9uZVwiLFxuICBjYW1MYWJlbDogdSA9IFwiQ2FtZXJhXCIsXG4gIHVzZXJMYWJlbDogZCA9IFwiVXNlcm5hbWVcIixcbiAgcGVyc2lzdFVzZXJDaG9pY2VzOiBnID0gITAsXG4gIC4uLnRcbn0pIHtcbiAgY29uc3QgW3IsIG9dID0gZS51c2VTdGF0ZShMZSksIFMgPSB7XG4gICAgLi4uYS5hdWRpb0RldmljZUlkICE9PSB2b2lkIDAgJiYgeyBhdWRpb0RldmljZUlkOiBhLmF1ZGlvRGV2aWNlSWQgfSxcbiAgICAuLi5hLnZpZGVvRGV2aWNlSWQgIT09IHZvaWQgMCAmJiB7IHZpZGVvRGV2aWNlSWQ6IGEudmlkZW9EZXZpY2VJZCB9LFxuICAgIC4uLmEuYXVkaW9FbmFibGVkICE9PSB2b2lkIDAgJiYgeyBhdWRpb0VuYWJsZWQ6IGEuYXVkaW9FbmFibGVkIH0sXG4gICAgLi4uYS52aWRlb0VuYWJsZWQgIT09IHZvaWQgMCAmJiB7IHZpZGVvRW5hYmxlZDogYS52aWRlb0VuYWJsZWQgfSxcbiAgICAuLi5hLnVzZXJuYW1lICE9PSB2b2lkIDAgJiYgeyB1c2VybmFtZTogYS51c2VybmFtZSB9XG4gIH0sIHtcbiAgICB1c2VyQ2hvaWNlczogbixcbiAgICBzYXZlQXVkaW9JbnB1dERldmljZUlkOiBoLFxuICAgIHNhdmVBdWRpb0lucHV0RW5hYmxlZDogcyxcbiAgICBzYXZlVmlkZW9JbnB1dERldmljZUlkOiB2LFxuICAgIHNhdmVWaWRlb0lucHV0RW5hYmxlZDogZixcbiAgICBzYXZlVXNlcm5hbWU6IGJcbiAgfSA9IHgoe1xuICAgIGRlZmF1bHRzOiBTLFxuICAgIHByZXZlbnRTYXZlOiAhZyxcbiAgICBwcmV2ZW50TG9hZDogIWdcbiAgfSksIFt3LCBMXSA9IGUudXNlU3RhdGUobi5hdWRpb0VuYWJsZWQpLCBbSSwgRF0gPSBlLnVzZVN0YXRlKG4udmlkZW9FbmFibGVkKSwgW1QsICRdID0gZS51c2VTdGF0ZShcbiAgICBuLmF1ZGlvRGV2aWNlSWRcbiAgKSwgW2ssIE5dID0gZS51c2VTdGF0ZShcbiAgICBuLnZpZGVvRGV2aWNlSWRcbiAgKSwgW1YsIGFlXSA9IGUudXNlU3RhdGUobi51c2VybmFtZSk7XG4gIGUudXNlRWZmZWN0KCgpID0+IHtcbiAgICBzKHcpO1xuICB9LCBbdywgc10pLCBlLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZihJKTtcbiAgfSwgW0ksIGZdKSwgZS51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGgoVCk7XG4gIH0sIFtULCBoXSksIGUudXNlRWZmZWN0KCgpID0+IHtcbiAgICB2KGspO1xuICB9LCBbaywgdl0pLCBlLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgYihWKTtcbiAgfSwgW1YsIGJdKTtcbiAgY29uc3QgQSA9IHplKFxuICAgIHtcbiAgICAgIGF1ZGlvOiB3ID8geyBkZXZpY2VJZDogbi5hdWRpb0RldmljZUlkIH0gOiAhMSxcbiAgICAgIHZpZGVvOiBJID8geyBkZXZpY2VJZDogbi52aWRlb0RldmljZUlkIH0gOiAhMVxuICAgIH0sXG4gICAgY1xuICApLCBVID0gZS51c2VSZWYobnVsbCksIE0gPSBlLnVzZU1lbW8oXG4gICAgKCkgPT4gQSA9PSBudWxsID8gdm9pZCAwIDogQS5maWx0ZXIoKEMpID0+IEMua2luZCA9PT0geS5LaW5kLlZpZGVvKVswXSxcbiAgICBbQV1cbiAgKSwgbmUgPSBlLnVzZU1lbW8oKCkgPT4ge1xuICAgIGlmIChNKSB7XG4gICAgICBjb25zdCB7IGZhY2luZ01vZGU6IEMgfSA9IEZlKE0pO1xuICAgICAgcmV0dXJuIEM7XG4gICAgfSBlbHNlXG4gICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIjtcbiAgfSwgW01dKSwgaiA9IGUudXNlTWVtbyhcbiAgICAoKSA9PiBBID09IG51bGwgPyB2b2lkIDAgOiBBLmZpbHRlcigoQykgPT4gQy5raW5kID09PSB5LktpbmQuQXVkaW8pWzBdLFxuICAgIFtBXVxuICApO1xuICBlLnVzZUVmZmVjdCgoKSA9PiAoVS5jdXJyZW50ICYmIE0gJiYgKE0udW5tdXRlKCksIE0uYXR0YWNoKFUuY3VycmVudCkpLCAoKSA9PiB7XG4gICAgTSA9PSBudWxsIHx8IE0uZGV0YWNoKCk7XG4gIH0pLCBbTV0pO1xuICBjb25zdCBbY2UsIHNlXSA9IGUudXNlU3RhdGUoKSwgXyA9IGUudXNlQ2FsbGJhY2soXG4gICAgKEMpID0+IHR5cGVvZiBsID09IFwiZnVuY3Rpb25cIiA/IGwoQykgOiBDLnVzZXJuYW1lICE9PSBcIlwiLFxuICAgIFtsXVxuICApO1xuICBlLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgQyA9IHtcbiAgICAgIHVzZXJuYW1lOiBWLFxuICAgICAgdmlkZW9FbmFibGVkOiBJLFxuICAgICAgdmlkZW9EZXZpY2VJZDogayxcbiAgICAgIGF1ZGlvRW5hYmxlZDogdyxcbiAgICAgIGF1ZGlvRGV2aWNlSWQ6IFRcbiAgICB9O1xuICAgIG8oQyksIHNlKF8oQykpO1xuICB9LCBbViwgSSwgXywgdywgVCwga10pO1xuICBmdW5jdGlvbiBpZShDKSB7XG4gICAgQy5wcmV2ZW50RGVmYXVsdCgpLCBfKHIpID8gdHlwZW9mIGkgPT0gXCJmdW5jdGlvblwiICYmIGkocikgOiBQLndhcm4oXCJWYWxpZGF0aW9uIGZhaWxlZCB3aXRoOiBcIiwgcik7XG4gIH1cbiAgcmV0dXJuIFcoKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJsay1wcmVqb2luXCIsIC4uLnQgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJsay12aWRlby1jb250YWluZXJcIiB9LCBNICYmIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJ2aWRlb1wiLCB7IHJlZjogVSwgd2lkdGg6IFwiMTI4MFwiLCBoZWlnaHQ6IFwiNzIwXCIsIFwiZGF0YS1say1mYWNpbmctbW9kZVwiOiBuZSB9KSwgKCFNIHx8ICFJKSAmJiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLWNhbWVyYS1vZmYtbm90ZVwiIH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoZGUsIG51bGwpKSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstYnV0dG9uLWdyb3VwLWNvbnRhaW5lclwiIH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstYnV0dG9uLWdyb3VwIGF1ZGlvXCIgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgICBSLFxuICAgIHtcbiAgICAgIGluaXRpYWxTdGF0ZTogdyxcbiAgICAgIHNvdXJjZTogeS5Tb3VyY2UuTWljcm9waG9uZSxcbiAgICAgIG9uQ2hhbmdlOiAoQykgPT4gTChDKVxuICAgIH0sXG4gICAgbVxuICApLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLWJ1dHRvbi1ncm91cC1tZW51XCIgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgICBPLFxuICAgIHtcbiAgICAgIGluaXRpYWxTZWxlY3Rpb246IFQsXG4gICAgICBraW5kOiBcImF1ZGlvaW5wdXRcIixcbiAgICAgIGRpc2FibGVkOiAhaixcbiAgICAgIHRyYWNrczogeyBhdWRpb2lucHV0OiBqIH0sXG4gICAgICBvbkFjdGl2ZURldmljZUNoYW5nZTogKEMsIEYpID0+ICQoRilcbiAgICB9XG4gICkpKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJsay1idXR0b24tZ3JvdXAgdmlkZW9cIiB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICAgIFIsXG4gICAge1xuICAgICAgaW5pdGlhbFN0YXRlOiBJLFxuICAgICAgc291cmNlOiB5LlNvdXJjZS5DYW1lcmEsXG4gICAgICBvbkNoYW5nZTogKEMpID0+IEQoQylcbiAgICB9LFxuICAgIHVcbiAgKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJsay1idXR0b24tZ3JvdXAtbWVudVwiIH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gICAgTyxcbiAgICB7XG4gICAgICBpbml0aWFsU2VsZWN0aW9uOiBrLFxuICAgICAga2luZDogXCJ2aWRlb2lucHV0XCIsXG4gICAgICBkaXNhYmxlZDogIU0sXG4gICAgICB0cmFja3M6IHsgdmlkZW9pbnB1dDogTSB9LFxuICAgICAgb25BY3RpdmVEZXZpY2VDaGFuZ2U6IChDLCBGKSA9PiBOKEYpXG4gICAgfVxuICApKSkpLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZm9ybVwiLCB7IGNsYXNzTmFtZTogXCJsay11c2VybmFtZS1jb250YWluZXJcIiB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICAgIFwiaW5wdXRcIixcbiAgICB7XG4gICAgICBjbGFzc05hbWU6IFwibGstZm9ybS1jb250cm9sXCIsXG4gICAgICBpZDogXCJ1c2VybmFtZVwiLFxuICAgICAgbmFtZTogXCJ1c2VybmFtZVwiLFxuICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICBkZWZhdWx0VmFsdWU6IFYsXG4gICAgICBwbGFjZWhvbGRlcjogZCxcbiAgICAgIG9uQ2hhbmdlOiAoQykgPT4gYWUoQy50YXJnZXQudmFsdWUpLFxuICAgICAgYXV0b0NvbXBsZXRlOiBcIm9mZlwiXG4gICAgfVxuICApLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICAgIFwiYnV0dG9uXCIsXG4gICAge1xuICAgICAgY2xhc3NOYW1lOiBcImxrLWJ1dHRvbiBsay1qb2luLWJ1dHRvblwiLFxuICAgICAgdHlwZTogXCJzdWJtaXRcIixcbiAgICAgIG9uQ2xpY2s6IGllLFxuICAgICAgZGlzYWJsZWQ6ICFjZVxuICAgIH0sXG4gICAgcFxuICApKSwgRSAmJiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGUuRnJhZ21lbnQsIG51bGwsIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzdHJvbmdcIiwgbnVsbCwgXCJVc2VyIENob2ljZXM6XCIpLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwidWxcIiwgeyBjbGFzc05hbWU6IFwibGstbGlzdFwiLCBzdHlsZTogeyBvdmVyZmxvdzogXCJoaWRkZW5cIiwgbWF4V2lkdGg6IFwiMTVyZW1cIiB9IH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJsaVwiLCBudWxsLCBcIlVzZXJuYW1lOiBcIiwgYCR7ci51c2VybmFtZX1gKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImxpXCIsIG51bGwsIFwiVmlkZW8gRW5hYmxlZDogXCIsIGAke3IudmlkZW9FbmFibGVkfWApLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwibGlcIiwgbnVsbCwgXCJBdWRpbyBFbmFibGVkOiBcIiwgYCR7ci5hdWRpb0VuYWJsZWR9YCksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJsaVwiLCBudWxsLCBcIlZpZGVvIERldmljZTogXCIsIGAke3IudmlkZW9EZXZpY2VJZH1gKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImxpXCIsIG51bGwsIFwiQXVkaW8gRGV2aWNlOiBcIiwgYCR7ci5hdWRpb0RldmljZUlkfWApKSkpO1xufVxuZnVuY3Rpb24gS2UoeyBwcm9wczogYSB9KSB7XG4gIGNvbnN0IHsgZGlzcGF0Y2g6IGwsIHN0YXRlOiBpIH0gPSBBZSgpLndpZGdldCwgYyA9IFwibGstYnV0dG9uIGxrLXNldHRpbmdzLXRvZ2dsZVwiO1xuICByZXR1cm4geyBtZXJnZWRQcm9wczogZS51c2VNZW1vKCgpID0+IGplKGEsIHtcbiAgICBjbGFzc05hbWU6IGMsXG4gICAgb25DbGljazogKCkgPT4ge1xuICAgICAgbCAmJiBsKHsgbXNnOiBcInRvZ2dsZV9zZXR0aW5nc1wiIH0pO1xuICAgIH0sXG4gICAgXCJhcmlhLXByZXNzZWRcIjogaSAhPSBudWxsICYmIGkuc2hvd1NldHRpbmdzID8gXCJ0cnVlXCIgOiBcImZhbHNlXCJcbiAgfSksIFthLCBjLCBsLCBpXSkgfTtcbn1cbmNvbnN0IEdlID0gLyogQF9fUFVSRV9fICovIGUuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24obCwgaSkge1xuICAgIGNvbnN0IHsgbWVyZ2VkUHJvcHM6IGMgfSA9IEtlKHsgcHJvcHM6IGwgfSk7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgeyByZWY6IGksIC4uLmMgfSwgbC5jaGlsZHJlbik7XG4gIH1cbik7XG5mdW5jdGlvbiB0ZSh7XG4gIHZhcmlhdGlvbjogYSxcbiAgY29udHJvbHM6IGwsXG4gIHNhdmVVc2VyQ2hvaWNlczogaSA9ICEwLFxuICBvbkRldmljZUVycm9yOiBjLFxuICAuLi5FXG59KSB7XG4gIHZhciAkO1xuICBjb25zdCBbcCwgbV0gPSBlLnVzZVN0YXRlKCExKSwgdSA9IFooKTtcbiAgZS51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHZhciBrLCBOO1xuICAgICgoayA9IHUgPT0gbnVsbCA/IHZvaWQgMCA6IHUud2lkZ2V0LnN0YXRlKSA9PSBudWxsID8gdm9pZCAwIDogay5zaG93Q2hhdCkgIT09IHZvaWQgMCAmJiBtKChOID0gdSA9PSBudWxsID8gdm9pZCAwIDogdS53aWRnZXQuc3RhdGUpID09IG51bGwgPyB2b2lkIDAgOiBOLnNob3dDaGF0KTtcbiAgfSwgWygkID0gdSA9PSBudWxsID8gdm9pZCAwIDogdS53aWRnZXQuc3RhdGUpID09IG51bGwgPyB2b2lkIDAgOiAkLnNob3dDaGF0XSk7XG4gIGNvbnN0IGcgPSBNZShgKG1heC13aWR0aDogJHtwID8gMWUzIDogNzYwfXB4KWApID8gXCJtaW5pbWFsXCIgOiBcInZlcmJvc2VcIjtcbiAgYSA/PyAoYSA9IGcpO1xuICBjb25zdCB0ID0geyBsZWF2ZTogITAsIC4uLmwgfSwgciA9IFgoKTtcbiAgciA/ICh0LmNhbWVyYSA/PyAodC5jYW1lcmEgPSByLmNhblB1Ymxpc2gpLCB0Lm1pY3JvcGhvbmUgPz8gKHQubWljcm9waG9uZSA9IHIuY2FuUHVibGlzaCksIHQuc2NyZWVuU2hhcmUgPz8gKHQuc2NyZWVuU2hhcmUgPSByLmNhblB1Ymxpc2gpLCB0LmNoYXQgPz8gKHQuY2hhdCA9IHIuY2FuUHVibGlzaERhdGEgJiYgKGwgPT0gbnVsbCA/IHZvaWQgMCA6IGwuY2hhdCkpKSA6ICh0LmNhbWVyYSA9ICExLCB0LmNoYXQgPSAhMSwgdC5taWNyb3Bob25lID0gITEsIHQuc2NyZWVuU2hhcmUgPSAhMSk7XG4gIGNvbnN0IG8gPSBlLnVzZU1lbW8oXG4gICAgKCkgPT4gYSA9PT0gXCJtaW5pbWFsXCIgfHwgYSA9PT0gXCJ2ZXJib3NlXCIsXG4gICAgW2FdXG4gICksIFMgPSBlLnVzZU1lbW8oXG4gICAgKCkgPT4gYSA9PT0gXCJ0ZXh0T25seVwiIHx8IGEgPT09IFwidmVyYm9zZVwiLFxuICAgIFthXVxuICApLCBuID0gUmUoKSwgW2gsIHNdID0gZS51c2VTdGF0ZSghMSksIHYgPSBlLnVzZUNhbGxiYWNrKFxuICAgIChrKSA9PiB7XG4gICAgICBzKGspO1xuICAgIH0sXG4gICAgW3NdXG4gICksIGYgPSBHKHsgY2xhc3NOYW1lOiBcImxrLWNvbnRyb2wtYmFyXCIgfSwgRSksIHtcbiAgICBzYXZlQXVkaW9JbnB1dEVuYWJsZWQ6IGIsXG4gICAgc2F2ZVZpZGVvSW5wdXRFbmFibGVkOiB3LFxuICAgIHNhdmVBdWRpb0lucHV0RGV2aWNlSWQ6IEwsXG4gICAgc2F2ZVZpZGVvSW5wdXREZXZpY2VJZDogSVxuICB9ID0geCh7IHByZXZlbnRTYXZlOiAhaSB9KSwgRCA9IGUudXNlQ2FsbGJhY2soXG4gICAgKGssIE4pID0+IE4gPyBiKGspIDogbnVsbCxcbiAgICBbYl1cbiAgKSwgVCA9IGUudXNlQ2FsbGJhY2soXG4gICAgKGssIE4pID0+IE4gPyB3KGspIDogbnVsbCxcbiAgICBbd11cbiAgKTtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyAuLi5mIH0sIHQubWljcm9waG9uZSAmJiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLWJ1dHRvbi1ncm91cFwiIH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gICAgUixcbiAgICB7XG4gICAgICBzb3VyY2U6IHkuU291cmNlLk1pY3JvcGhvbmUsXG4gICAgICBzaG93SWNvbjogbyxcbiAgICAgIG9uQ2hhbmdlOiBELFxuICAgICAgb25EZXZpY2VFcnJvcjogKGspID0+IGMgPT0gbnVsbCA/IHZvaWQgMCA6IGMoeyBzb3VyY2U6IHkuU291cmNlLk1pY3JvcGhvbmUsIGVycm9yOiBrIH0pXG4gICAgfSxcbiAgICBTICYmIFwiTWljcm9waG9uZVwiXG4gICksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstYnV0dG9uLWdyb3VwLW1lbnVcIiB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICAgIE8sXG4gICAge1xuICAgICAga2luZDogXCJhdWRpb2lucHV0XCIsXG4gICAgICBvbkFjdGl2ZURldmljZUNoYW5nZTogKGssIE4pID0+IEwoTiA/PyBcIlwiKVxuICAgIH1cbiAgKSkpLCB0LmNhbWVyYSAmJiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLWJ1dHRvbi1ncm91cFwiIH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gICAgUixcbiAgICB7XG4gICAgICBzb3VyY2U6IHkuU291cmNlLkNhbWVyYSxcbiAgICAgIHNob3dJY29uOiBvLFxuICAgICAgb25DaGFuZ2U6IFQsXG4gICAgICBvbkRldmljZUVycm9yOiAoaykgPT4gYyA9PSBudWxsID8gdm9pZCAwIDogYyh7IHNvdXJjZTogeS5Tb3VyY2UuQ2FtZXJhLCBlcnJvcjogayB9KVxuICAgIH0sXG4gICAgUyAmJiBcIkNhbWVyYVwiXG4gICksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstYnV0dG9uLWdyb3VwLW1lbnVcIiB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICAgIE8sXG4gICAge1xuICAgICAga2luZDogXCJ2aWRlb2lucHV0XCIsXG4gICAgICBvbkFjdGl2ZURldmljZUNoYW5nZTogKGssIE4pID0+IEkoTiA/PyBcIlwiKVxuICAgIH1cbiAgKSkpLCB0LnNjcmVlblNoYXJlICYmIG4gJiYgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgICBSLFxuICAgIHtcbiAgICAgIHNvdXJjZTogeS5Tb3VyY2UuU2NyZWVuU2hhcmUsXG4gICAgICBjYXB0dXJlT3B0aW9uczogeyBhdWRpbzogITAsIHNlbGZCcm93c2VyU3VyZmFjZTogXCJpbmNsdWRlXCIgfSxcbiAgICAgIHNob3dJY29uOiBvLFxuICAgICAgb25DaGFuZ2U6IHYsXG4gICAgICBvbkRldmljZUVycm9yOiAoaykgPT4gYyA9PSBudWxsID8gdm9pZCAwIDogYyh7IHNvdXJjZTogeS5Tb3VyY2UuU2NyZWVuU2hhcmUsIGVycm9yOiBrIH0pXG4gICAgfSxcbiAgICBTICYmIChoID8gXCJTdG9wIHNjcmVlbiBzaGFyZVwiIDogXCJTaGFyZSBzY3JlZW5cIilcbiAgKSwgdC5jaGF0ICYmIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoSywgbnVsbCwgbyAmJiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KG1lLCBudWxsKSwgUyAmJiBcIkNoYXRcIiksIHQuc2V0dGluZ3MgJiYgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChHZSwgbnVsbCwgbyAmJiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGZlLCBudWxsKSwgUyAmJiBcIlNldHRpbmdzXCIpLCB0LmxlYXZlICYmIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoSiwgbnVsbCwgbyAmJiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGhlLCBudWxsKSwgUyAmJiBcIkxlYXZlXCIpLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KEgsIG51bGwpKTtcbn1cbmZ1bmN0aW9uIHR0KHtcbiAgY2hhdE1lc3NhZ2VGb3JtYXR0ZXI6IGEsXG4gIGNoYXRNZXNzYWdlRGVjb2RlcjogbCxcbiAgY2hhdE1lc3NhZ2VFbmNvZGVyOiBpLFxuICBTZXR0aW5nc0NvbXBvbmVudDogYyxcbiAgLi4uRVxufSkge1xuICB2YXIgbiwgaDtcbiAgY29uc3QgW3AsIG1dID0gZS51c2VTdGF0ZSh7XG4gICAgc2hvd0NoYXQ6ICExLFxuICAgIHVucmVhZE1lc3NhZ2VzOiAwLFxuICAgIHNob3dTZXR0aW5nczogITFcbiAgfSksIHUgPSBlLnVzZVJlZihudWxsKSwgZCA9IFkoXG4gICAgW1xuICAgICAgeyBzb3VyY2U6IHkuU291cmNlLkNhbWVyYSwgd2l0aFBsYWNlaG9sZGVyOiAhMCB9LFxuICAgICAgeyBzb3VyY2U6IHkuU291cmNlLlNjcmVlblNoYXJlLCB3aXRoUGxhY2Vob2xkZXI6ICExIH1cbiAgICBdLFxuICAgIHsgdXBkYXRlT25seU9uOiBbV2UuQWN0aXZlU3BlYWtlcnNDaGFuZ2VkXSwgb25seVN1YnNjcmliZWQ6ICExIH1cbiAgKSwgZyA9IChzKSA9PiB7XG4gICAgUC5kZWJ1ZyhcInVwZGF0aW5nIHdpZGdldCBzdGF0ZVwiLCBzKSwgbShzKTtcbiAgfSwgdCA9IFZlKCksIHIgPSBkLmZpbHRlcihxKS5maWx0ZXIoKHMpID0+IHMucHVibGljYXRpb24uc291cmNlID09PSB5LlNvdXJjZS5TY3JlZW5TaGFyZSksIG8gPSAobiA9IE5lKHQpKSA9PSBudWxsID8gdm9pZCAwIDogblswXSwgUyA9IGQuZmlsdGVyKChzKSA9PiAhT2UocywgbykpO1xuICByZXR1cm4gZS51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHZhciBzLCB2LCBmLCBiLCB3LCBMO1xuICAgIGlmIChyLnNvbWUoKEkpID0+IEkucHVibGljYXRpb24uaXNTdWJzY3JpYmVkKSAmJiB1LmN1cnJlbnQgPT09IG51bGwgPyAoUC5kZWJ1ZyhcIkF1dG8gc2V0IHNjcmVlbiBzaGFyZSBmb2N1czpcIiwgeyBuZXdTY3JlZW5TaGFyZVRyYWNrOiByWzBdIH0pLCAodiA9IChzID0gdC5waW4pLmRpc3BhdGNoKSA9PSBudWxsIHx8IHYuY2FsbChzLCB7IG1zZzogXCJzZXRfcGluXCIsIHRyYWNrUmVmZXJlbmNlOiByWzBdIH0pLCB1LmN1cnJlbnQgPSByWzBdKSA6IHUuY3VycmVudCAmJiAhci5zb21lKFxuICAgICAgKEkpID0+IHtcbiAgICAgICAgdmFyIEQsIFQ7XG4gICAgICAgIHJldHVybiBJLnB1YmxpY2F0aW9uLnRyYWNrU2lkID09PSAoKFQgPSAoRCA9IHUuY3VycmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IEQucHVibGljYXRpb24pID09IG51bGwgPyB2b2lkIDAgOiBULnRyYWNrU2lkKTtcbiAgICAgIH1cbiAgICApICYmIChQLmRlYnVnKFwiQXV0byBjbGVhcmluZyBzY3JlZW4gc2hhcmUgZm9jdXMuXCIpLCAoYiA9IChmID0gdC5waW4pLmRpc3BhdGNoKSA9PSBudWxsIHx8IGIuY2FsbChmLCB7IG1zZzogXCJjbGVhcl9waW5cIiB9KSwgdS5jdXJyZW50ID0gbnVsbCksIG8gJiYgIXEobykpIHtcbiAgICAgIGNvbnN0IEkgPSBkLmZpbmQoXG4gICAgICAgIChEKSA9PiBELnBhcnRpY2lwYW50LmlkZW50aXR5ID09PSBvLnBhcnRpY2lwYW50LmlkZW50aXR5ICYmIEQuc291cmNlID09PSBvLnNvdXJjZVxuICAgICAgKTtcbiAgICAgIEkgIT09IG8gJiYgcShJKSAmJiAoKEwgPSAodyA9IHQucGluKS5kaXNwYXRjaCkgPT0gbnVsbCB8fCBMLmNhbGwodywgeyBtc2c6IFwic2V0X3BpblwiLCB0cmFja1JlZmVyZW5jZTogSSB9KSk7XG4gICAgfVxuICB9LCBbXG4gICAgci5tYXAoKHMpID0+IGAke3MucHVibGljYXRpb24udHJhY2tTaWR9XyR7cy5wdWJsaWNhdGlvbi5pc1N1YnNjcmliZWR9YCkuam9pbigpLFxuICAgIChoID0gbyA9PSBudWxsID8gdm9pZCAwIDogby5wdWJsaWNhdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IGgudHJhY2tTaWQsXG4gICAgZFxuICBdKSwgVygpLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLXZpZGVvLWNvbmZlcmVuY2VcIiwgLi4uRSB9LCAkZSgpICYmIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gICAgUSxcbiAgICB7XG4gICAgICB2YWx1ZTogdCxcbiAgICAgIG9uV2lkZ2V0Q2hhbmdlOiBnXG4gICAgfSxcbiAgICAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLXZpZGVvLWNvbmZlcmVuY2UtaW5uZXJcIiB9LCBvID8gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJsay1mb2N1cy1sYXlvdXQtd3JhcHBlclwiIH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoZ2UsIG51bGwsIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQodmUsIHsgdHJhY2tzOiBTIH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoeiwgbnVsbCkpLCBvICYmIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoRWUsIHsgdHJhY2tSZWY6IG8gfSkpKSA6IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstZ3JpZC1sYXlvdXQtd3JhcHBlclwiIH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQocGUsIHsgdHJhY2tzOiBkIH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoeiwgbnVsbCkpKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudCh0ZSwgeyBjb250cm9sczogeyBjaGF0OiAhMCwgc2V0dGluZ3M6ICEhYyB9IH0pKSxcbiAgICAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICAgICAgZWUsXG4gICAgICB7XG4gICAgICAgIHN0eWxlOiB7IGRpc3BsYXk6IHAuc2hvd0NoYXQgPyBcImdyaWRcIiA6IFwibm9uZVwiIH0sXG4gICAgICAgIG1lc3NhZ2VGb3JtYXR0ZXI6IGEsXG4gICAgICAgIG1lc3NhZ2VFbmNvZGVyOiBpLFxuICAgICAgICBtZXNzYWdlRGVjb2RlcjogbFxuICAgICAgfVxuICAgICksXG4gICAgYyAmJiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICAgICAgXCJkaXZcIixcbiAgICAgIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcImxrLXNldHRpbmdzLW1lbnUtbW9kYWxcIixcbiAgICAgICAgc3R5bGU6IHsgZGlzcGxheTogcC5zaG93U2V0dGluZ3MgPyBcImJsb2NrXCIgOiBcIm5vbmVcIiB9XG4gICAgICB9LFxuICAgICAgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChjLCBudWxsKVxuICAgIClcbiAgKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChTZSwgbnVsbCksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoa2UsIG51bGwpKTtcbn1cbmZ1bmN0aW9uIGF0KHsgLi4uYSB9KSB7XG4gIGNvbnN0IFtsLCBpXSA9IGUudXNlU3RhdGUoe1xuICAgIHNob3dDaGF0OiAhMSxcbiAgICB1bnJlYWRNZXNzYWdlczogMFxuICB9KSwgYyA9IFkoW3kuU291cmNlLk1pY3JvcGhvbmVdKTtcbiAgcmV0dXJuIFcoKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChRLCB7IG9uV2lkZ2V0Q2hhbmdlOiBpIH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstYXVkaW8tY29uZmVyZW5jZVwiLCAuLi5hIH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstYXVkaW8tY29uZmVyZW5jZS1zdGFnZVwiIH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoYmUsIHsgdHJhY2tzOiBjIH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoQ2UsIG51bGwpKSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gICAgdGUsXG4gICAge1xuICAgICAgY29udHJvbHM6IHsgbWljcm9waG9uZTogITAsIHNjcmVlblNoYXJlOiAhMSwgY2FtZXJhOiAhMSwgY2hhdDogITAgfVxuICAgIH1cbiAgKSwgbC5zaG93Q2hhdCAmJiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGVlLCBudWxsKSkpO1xufVxuZnVuY3Rpb24gbnQoe1xuICBjb250cm9sczogYSxcbiAgc2F2ZVVzZXJDaG9pY2VzOiBsID0gITAsXG4gIG9uRGV2aWNlRXJyb3I6IGksXG4gIC4uLmNcbn0pIHtcbiAgY29uc3QgRSA9IHsgbGVhdmU6ICEwLCBtaWNyb3Bob25lOiAhMCwgLi4uYSB9LCBwID0gWCgpLCB7IG1pY3JvcGhvbmVUcmFjazogbSwgbG9jYWxQYXJ0aWNpcGFudDogdSB9ID0gUGUoKSwgZCA9IGUudXNlTWVtbygoKSA9PiAoe1xuICAgIHBhcnRpY2lwYW50OiB1LFxuICAgIHNvdXJjZTogeS5Tb3VyY2UuTWljcm9waG9uZSxcbiAgICBwdWJsaWNhdGlvbjogbVxuICB9KSwgW3UsIG1dKTtcbiAgcCA/IEUubWljcm9waG9uZSA/PyAoRS5taWNyb3Bob25lID0gcC5jYW5QdWJsaXNoKSA6IEUubWljcm9waG9uZSA9ICExO1xuICBjb25zdCBnID0gRyh7IGNsYXNzTmFtZTogXCJsay1hZ2VudC1jb250cm9sLWJhclwiIH0sIGMpLCB7IHNhdmVBdWRpb0lucHV0RW5hYmxlZDogdCwgc2F2ZUF1ZGlvSW5wdXREZXZpY2VJZDogciB9ID0geCh7XG4gICAgcHJldmVudFNhdmU6ICFsXG4gIH0pLCBvID0gZS51c2VDYWxsYmFjayhcbiAgICAoUywgbikgPT4ge1xuICAgICAgbiAmJiB0KFMpO1xuICAgIH0sXG4gICAgW3RdXG4gICk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgLi4uZyB9LCBFLm1pY3JvcGhvbmUgJiYgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJsay1idXR0b24tZ3JvdXBcIiB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICAgIFIsXG4gICAge1xuICAgICAgc291cmNlOiB5LlNvdXJjZS5NaWNyb3Bob25lLFxuICAgICAgc2hvd0ljb246ICEwLFxuICAgICAgb25DaGFuZ2U6IG8sXG4gICAgICBvbkRldmljZUVycm9yOiAoUykgPT4gaSA9PSBudWxsID8gdm9pZCAwIDogaSh7IHNvdXJjZTogeS5Tb3VyY2UuTWljcm9waG9uZSwgZXJyb3I6IFMgfSlcbiAgICB9LFxuICAgIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQod2UsIHsgdHJhY2tSZWY6IGQsIGJhckNvdW50OiA3LCBvcHRpb25zOiB7IG1pbkhlaWdodDogNSB9IH0pXG4gICksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstYnV0dG9uLWdyb3VwLW1lbnVcIiB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICAgIE8sXG4gICAge1xuICAgICAga2luZDogXCJhdWRpb2lucHV0XCIsXG4gICAgICBvbkFjdGl2ZURldmljZUNoYW5nZTogKFMsIG4pID0+IHIobiA/PyBcIlwiKVxuICAgIH1cbiAgKSkpLCBFLmxlYXZlICYmIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoSiwgbnVsbCwgXCJEaXNjb25uZWN0XCIpLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KEgsIG51bGwpKTtcbn1cbmV4cG9ydCB7XG4gIGF0IGFzIEF1ZGlvQ29uZmVyZW5jZSxcbiAgZWUgYXMgQ2hhdCxcbiAgdGUgYXMgQ29udHJvbEJhcixcbiAgTyBhcyBNZWRpYURldmljZU1lbnUsXG4gIGV0IGFzIFByZUpvaW4sXG4gIHR0IGFzIFZpZGVvQ29uZmVyZW5jZSxcbiAgbnQgYXMgVm9pY2VBc3Npc3RhbnRDb250cm9sQmFyLFxuICBaZSBhcyB1c2VQcmV2aWV3RGV2aWNlLFxuICB6ZSBhcyB1c2VQcmV2aWV3VHJhY2tzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJlZmFicy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0/node_modules/@livekit/components-react/dist/prefabs.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0/node_modules/@livekit/components-react/dist/room-C0QEsGui.mjs":
/*!*******************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0/node_modules/@livekit/components-react/dist/room-C0QEsGui.mjs ***!
  \*******************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   L: () => (/* binding */ z),\n/* harmony export */   c: () => (/* binding */ j),\n/* harmony export */   m: () => (/* binding */ U),\n/* harmony export */   u: () => (/* binding */ T)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/.pnpm/next@14.2.9_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./contexts-DjicKJUz.mjs */ \"(ssr)/./node_modules/.pnpm/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0/node_modules/@livekit/components-react/dist/contexts-DjicKJUz.mjs\");\n/* harmony import */ var livekit_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! livekit-client */ \"(ssr)/./node_modules/.pnpm/livekit-client@2.5.5/node_modules/livekit-client/dist/livekit-client.esm.mjs\");\n\n\n\nfunction L(n) {\n  var e, o, t = \"\";\n  if (typeof n == \"string\" || typeof n == \"number\") t += n;\n  else if (typeof n == \"object\") if (Array.isArray(n)) {\n    var r = n.length;\n    for (e = 0; e < r; e++) n[e] && (o = L(n[e])) && (t && (t += \" \"), t += o);\n  } else for (o in n) n[o] && (t && (t += \" \"), t += o);\n  return t;\n}\nfunction j() {\n  for (var n, e, o = 0, t = \"\", r = arguments.length; o < r; o++) (n = arguments[o]) && (e = L(n)) && (t && (t += \" \"), t += e);\n  return t;\n}\nfunction O(...n) {\n  return (...e) => {\n    for (const o of n)\n      if (typeof o == \"function\")\n        try {\n          o(...e);\n        } catch (t) {\n          console.error(t);\n        }\n  };\n}\nfunction U(...n) {\n  const e = { ...n[0] };\n  for (let o = 1; o < n.length; o++) {\n    const t = n[o];\n    for (const r in t) {\n      const l = e[r], f = t[r];\n      typeof l == \"function\" && typeof f == \"function\" && // This is a lot faster than a regex.\n      r[0] === \"o\" && r[1] === \"n\" && r.charCodeAt(2) >= /* 'A' */\n      65 && r.charCodeAt(2) <= /* 'Z' */\n      90 ? e[r] = O(l, f) : (r === \"className\" || r === \"UNSAFE_className\") && typeof l == \"string\" && typeof f == \"string\" ? e[r] = j(l, f) : e[r] = f !== void 0 ? f : l;\n    }\n  }\n  return e;\n}\nconst J = {\n  connect: !0,\n  audio: !1,\n  video: !1\n};\nfunction T(n) {\n  const {\n    token: e,\n    serverUrl: o,\n    options: t,\n    room: r,\n    connectOptions: l,\n    connect: f,\n    audio: p,\n    video: g,\n    screen: v,\n    onConnected: E,\n    onDisconnected: R,\n    onError: c,\n    onMediaDeviceFailure: h,\n    onEncryptionError: y,\n    simulateParticipants: S,\n    ...P\n  } = { ...J, ...n };\n  t && r && _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.l.warn(\n    \"when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.\"\n  );\n  const [i, D] = react__WEBPACK_IMPORTED_MODULE_0__.useState();\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    D(r ?? new livekit_client__WEBPACK_IMPORTED_MODULE_1__.Room(t));\n  }, [r]);\n  const A = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const { className: s } = (0,_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.s)();\n    return U(P, { className: s });\n  }, [P]);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!i) return;\n    const s = () => {\n      const m = i.localParticipant;\n      _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.l.debug(\"trying to publish local tracks\"), Promise.all([\n        m.setMicrophoneEnabled(!!p, typeof p != \"boolean\" ? p : void 0),\n        m.setCameraEnabled(!!g, typeof g != \"boolean\" ? g : void 0),\n        m.setScreenShareEnabled(!!v, typeof v != \"boolean\" ? v : void 0)\n      ]).catch((C) => {\n        _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.l.warn(C), c == null || c(C);\n      });\n    }, b = (m) => {\n      const C = livekit_client__WEBPACK_IMPORTED_MODULE_1__.MediaDeviceFailure.getFailure(m);\n      h == null || h(C);\n    }, k = (m) => {\n      y == null || y(m);\n    };\n    return i.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.SignalConnected, s).on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.MediaDevicesError, b).on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.EncryptionError, k), () => {\n      i.off(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.SignalConnected, s).off(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.MediaDevicesError, b).off(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.EncryptionError, k);\n    };\n  }, [i, p, g, v, c, y, h]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (i) {\n      if (S) {\n        i.simulateParticipants({\n          participants: {\n            count: S\n          },\n          publish: {\n            audio: !0,\n            useRealTracks: !0\n          }\n        });\n        return;\n      }\n      if (!e) {\n        _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.l.debug(\"no token yet\");\n        return;\n      }\n      if (!o) {\n        _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.l.warn(\"no livekit url provided\"), c == null || c(Error(\"no livekit url provided\"));\n        return;\n      }\n      f ? (_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.l.debug(\"connecting\"), i.connect(o, e, l).catch((s) => {\n        _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.l.warn(s), c == null || c(s);\n      })) : (_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.l.debug(\"disconnecting because connect is false\"), i.disconnect());\n    }\n  }, [\n    f,\n    e,\n    JSON.stringify(l),\n    i,\n    c,\n    o,\n    S\n  ]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!i) return;\n    const s = (b) => {\n      switch (b) {\n        case livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Disconnected:\n          R && R();\n          break;\n        case livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Connected:\n          E && E();\n          break;\n      }\n    };\n    return i.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.ConnectionStateChanged, s), () => {\n      i.off(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.ConnectionStateChanged, s);\n    };\n  }, [e, E, R, i]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (i)\n      return () => {\n        _contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.l.info(\"disconnecting on onmount\"), i.disconnect();\n      };\n  }, [i]), { room: i, htmlProps: A };\n}\nconst z = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(function(e, o) {\n  const { room: t, htmlProps: r } = T(e);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ref: o, ...r }, t && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.R.Provider, { value: t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_DjicKJUz_mjs__WEBPACK_IMPORTED_MODULE_2__.L.Provider, { value: e.featureFlags }, e.children)));\n});\n\n//# sourceMappingURL=room-C0QEsGui.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGxpdmVraXQrY29tcG9uZW50cy1yZWFjdEAyX2VkZmZiMGQ3YjM1ZjdkZTlhY2VjNjY3ZWVlZjE2NGMwL25vZGVfbW9kdWxlcy9AbGl2ZWtpdC9jb21wb25lbnRzLXJlYWN0L2Rpc3Qvcm9vbS1DMFFFc0d1aS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUEyQjtBQUM4QztBQUNpQztBQUMxRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLE9BQU87QUFDdkIsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxPQUFPO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZCxrQkFBa0IsY0FBYztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksSUFBSTtBQUNSLFlBQVkscURBQUM7QUFDYjtBQUNBO0FBQ0EsaUJBQWlCLDJDQUFVO0FBQzNCLEVBQUUsNENBQVc7QUFDYixlQUFlLGdEQUFDO0FBQ2hCLEdBQUc7QUFDSCxZQUFZLDBDQUFTO0FBQ3JCLFlBQVksZUFBZSxFQUFFLHlEQUFDO0FBQzlCLGtCQUFrQixjQUFjO0FBQ2hDLEdBQUc7QUFDSCxTQUFTLDRDQUFXO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBLE1BQU0scURBQUM7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEscURBQUM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMLGdCQUFnQiw4REFBQztBQUNqQjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsZ0JBQWdCLHFEQUFDLHdCQUF3QixxREFBQywwQkFBMEIscURBQUM7QUFDckUsWUFBWSxxREFBQyx5QkFBeUIscURBQUMsMkJBQTJCLHFEQUFDO0FBQ25FO0FBQ0EsR0FBRywwQkFBMEIsNENBQVc7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHFEQUFDO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxxREFBQztBQUNUO0FBQ0E7QUFDQSxXQUFXLHFEQUFDO0FBQ1osUUFBUSxxREFBQztBQUNULE9BQU8sTUFBTSxxREFBQztBQUNkO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSw0Q0FBVztBQUNqQjtBQUNBO0FBQ0E7QUFDQSxhQUFhLDJEQUFDO0FBQ2Q7QUFDQTtBQUNBLGFBQWEsMkRBQUM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixxREFBQztBQUNqQixZQUFZLHFEQUFDO0FBQ2I7QUFDQSxHQUFHLGlCQUFpQiw0Q0FBVztBQUMvQjtBQUNBO0FBQ0EsUUFBUSxxREFBQztBQUNUO0FBQ0EsR0FBRyxVQUFVO0FBQ2I7QUFDQSwwQkFBMEIsNkNBQVk7QUFDdEMsVUFBVSx3QkFBd0I7QUFDbEMseUJBQXlCLGdEQUFlLFVBQVUsY0FBYyx1QkFBdUIsZ0RBQWUsQ0FBQyxxREFBQyxhQUFhLFVBQVUsa0JBQWtCLGdEQUFlLENBQUMscURBQUMsYUFBYSx1QkFBdUI7QUFDdE0sQ0FBQztBQU1DO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92b2ljZS1hc3Npc3RhbnQyLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0BsaXZla2l0K2NvbXBvbmVudHMtcmVhY3RAMl9lZGZmYjBkN2IzNWY3ZGU5YWNlYzY2N2VlZWYxNjRjMC9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1yZWFjdC9kaXN0L3Jvb20tQzBRRXNHdWkubWpzP2U2OTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgYSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGwgYXMgdSwgcyBhcyBGLCBSIGFzIEssIEwgYXMgTSB9IGZyb20gXCIuL2NvbnRleHRzLURqaWNLSlV6Lm1qc1wiO1xuaW1wb3J0IHsgUm9vbSBhcyBOLCBSb29tRXZlbnQgYXMgZCwgTWVkaWFEZXZpY2VGYWlsdXJlIGFzIHgsIENvbm5lY3Rpb25TdGF0ZSBhcyB3IH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5mdW5jdGlvbiBMKG4pIHtcbiAgdmFyIGUsIG8sIHQgPSBcIlwiO1xuICBpZiAodHlwZW9mIG4gPT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgbiA9PSBcIm51bWJlclwiKSB0ICs9IG47XG4gIGVsc2UgaWYgKHR5cGVvZiBuID09IFwib2JqZWN0XCIpIGlmIChBcnJheS5pc0FycmF5KG4pKSB7XG4gICAgdmFyIHIgPSBuLmxlbmd0aDtcbiAgICBmb3IgKGUgPSAwOyBlIDwgcjsgZSsrKSBuW2VdICYmIChvID0gTChuW2VdKSkgJiYgKHQgJiYgKHQgKz0gXCIgXCIpLCB0ICs9IG8pO1xuICB9IGVsc2UgZm9yIChvIGluIG4pIG5bb10gJiYgKHQgJiYgKHQgKz0gXCIgXCIpLCB0ICs9IG8pO1xuICByZXR1cm4gdDtcbn1cbmZ1bmN0aW9uIGooKSB7XG4gIGZvciAodmFyIG4sIGUsIG8gPSAwLCB0ID0gXCJcIiwgciA9IGFyZ3VtZW50cy5sZW5ndGg7IG8gPCByOyBvKyspIChuID0gYXJndW1lbnRzW29dKSAmJiAoZSA9IEwobikpICYmICh0ICYmICh0ICs9IFwiIFwiKSwgdCArPSBlKTtcbiAgcmV0dXJuIHQ7XG59XG5mdW5jdGlvbiBPKC4uLm4pIHtcbiAgcmV0dXJuICguLi5lKSA9PiB7XG4gICAgZm9yIChjb25zdCBvIG9mIG4pXG4gICAgICBpZiAodHlwZW9mIG8gPT0gXCJmdW5jdGlvblwiKVxuICAgICAgICB0cnkge1xuICAgICAgICAgIG8oLi4uZSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKHQpO1xuICAgICAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBVKC4uLm4pIHtcbiAgY29uc3QgZSA9IHsgLi4ublswXSB9O1xuICBmb3IgKGxldCBvID0gMTsgbyA8IG4ubGVuZ3RoOyBvKyspIHtcbiAgICBjb25zdCB0ID0gbltvXTtcbiAgICBmb3IgKGNvbnN0IHIgaW4gdCkge1xuICAgICAgY29uc3QgbCA9IGVbcl0sIGYgPSB0W3JdO1xuICAgICAgdHlwZW9mIGwgPT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBmID09IFwiZnVuY3Rpb25cIiAmJiAvLyBUaGlzIGlzIGEgbG90IGZhc3RlciB0aGFuIGEgcmVnZXguXG4gICAgICByWzBdID09PSBcIm9cIiAmJiByWzFdID09PSBcIm5cIiAmJiByLmNoYXJDb2RlQXQoMikgPj0gLyogJ0EnICovXG4gICAgICA2NSAmJiByLmNoYXJDb2RlQXQoMikgPD0gLyogJ1onICovXG4gICAgICA5MCA/IGVbcl0gPSBPKGwsIGYpIDogKHIgPT09IFwiY2xhc3NOYW1lXCIgfHwgciA9PT0gXCJVTlNBRkVfY2xhc3NOYW1lXCIpICYmIHR5cGVvZiBsID09IFwic3RyaW5nXCIgJiYgdHlwZW9mIGYgPT0gXCJzdHJpbmdcIiA/IGVbcl0gPSBqKGwsIGYpIDogZVtyXSA9IGYgIT09IHZvaWQgMCA/IGYgOiBsO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZTtcbn1cbmNvbnN0IEogPSB7XG4gIGNvbm5lY3Q6ICEwLFxuICBhdWRpbzogITEsXG4gIHZpZGVvOiAhMVxufTtcbmZ1bmN0aW9uIFQobikge1xuICBjb25zdCB7XG4gICAgdG9rZW46IGUsXG4gICAgc2VydmVyVXJsOiBvLFxuICAgIG9wdGlvbnM6IHQsXG4gICAgcm9vbTogcixcbiAgICBjb25uZWN0T3B0aW9uczogbCxcbiAgICBjb25uZWN0OiBmLFxuICAgIGF1ZGlvOiBwLFxuICAgIHZpZGVvOiBnLFxuICAgIHNjcmVlbjogdixcbiAgICBvbkNvbm5lY3RlZDogRSxcbiAgICBvbkRpc2Nvbm5lY3RlZDogUixcbiAgICBvbkVycm9yOiBjLFxuICAgIG9uTWVkaWFEZXZpY2VGYWlsdXJlOiBoLFxuICAgIG9uRW5jcnlwdGlvbkVycm9yOiB5LFxuICAgIHNpbXVsYXRlUGFydGljaXBhbnRzOiBTLFxuICAgIC4uLlBcbiAgfSA9IHsgLi4uSiwgLi4ubiB9O1xuICB0ICYmIHIgJiYgdS53YXJuKFxuICAgIFwid2hlbiB1c2luZyBhIG1hbnVhbGx5IGNyZWF0ZWQgcm9vbSwgdGhlIG9wdGlvbnMgb2JqZWN0IHdpbGwgYmUgaWdub3JlZC4gc2V0IHRoZSBkZXNpcmVkIG9wdGlvbnMgZGlyZWN0bHkgd2hlbiBjcmVhdGluZyB0aGUgcm9vbSBpbnN0ZWFkLlwiXG4gICk7XG4gIGNvbnN0IFtpLCBEXSA9IGEudXNlU3RhdGUoKTtcbiAgYS51c2VFZmZlY3QoKCkgPT4ge1xuICAgIEQociA/PyBuZXcgTih0KSk7XG4gIH0sIFtyXSk7XG4gIGNvbnN0IEEgPSBhLnVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHsgY2xhc3NOYW1lOiBzIH0gPSBGKCk7XG4gICAgcmV0dXJuIFUoUCwgeyBjbGFzc05hbWU6IHMgfSk7XG4gIH0sIFtQXSk7XG4gIHJldHVybiBhLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFpKSByZXR1cm47XG4gICAgY29uc3QgcyA9ICgpID0+IHtcbiAgICAgIGNvbnN0IG0gPSBpLmxvY2FsUGFydGljaXBhbnQ7XG4gICAgICB1LmRlYnVnKFwidHJ5aW5nIHRvIHB1Ymxpc2ggbG9jYWwgdHJhY2tzXCIpLCBQcm9taXNlLmFsbChbXG4gICAgICAgIG0uc2V0TWljcm9waG9uZUVuYWJsZWQoISFwLCB0eXBlb2YgcCAhPSBcImJvb2xlYW5cIiA/IHAgOiB2b2lkIDApLFxuICAgICAgICBtLnNldENhbWVyYUVuYWJsZWQoISFnLCB0eXBlb2YgZyAhPSBcImJvb2xlYW5cIiA/IGcgOiB2b2lkIDApLFxuICAgICAgICBtLnNldFNjcmVlblNoYXJlRW5hYmxlZCghIXYsIHR5cGVvZiB2ICE9IFwiYm9vbGVhblwiID8gdiA6IHZvaWQgMClcbiAgICAgIF0pLmNhdGNoKChDKSA9PiB7XG4gICAgICAgIHUud2FybihDKSwgYyA9PSBudWxsIHx8IGMoQyk7XG4gICAgICB9KTtcbiAgICB9LCBiID0gKG0pID0+IHtcbiAgICAgIGNvbnN0IEMgPSB4LmdldEZhaWx1cmUobSk7XG4gICAgICBoID09IG51bGwgfHwgaChDKTtcbiAgICB9LCBrID0gKG0pID0+IHtcbiAgICAgIHkgPT0gbnVsbCB8fCB5KG0pO1xuICAgIH07XG4gICAgcmV0dXJuIGkub24oZC5TaWduYWxDb25uZWN0ZWQsIHMpLm9uKGQuTWVkaWFEZXZpY2VzRXJyb3IsIGIpLm9uKGQuRW5jcnlwdGlvbkVycm9yLCBrKSwgKCkgPT4ge1xuICAgICAgaS5vZmYoZC5TaWduYWxDb25uZWN0ZWQsIHMpLm9mZihkLk1lZGlhRGV2aWNlc0Vycm9yLCBiKS5vZmYoZC5FbmNyeXB0aW9uRXJyb3IsIGspO1xuICAgIH07XG4gIH0sIFtpLCBwLCBnLCB2LCBjLCB5LCBoXSksIGEudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaSkge1xuICAgICAgaWYgKFMpIHtcbiAgICAgICAgaS5zaW11bGF0ZVBhcnRpY2lwYW50cyh7XG4gICAgICAgICAgcGFydGljaXBhbnRzOiB7XG4gICAgICAgICAgICBjb3VudDogU1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcHVibGlzaDoge1xuICAgICAgICAgICAgYXVkaW86ICEwLFxuICAgICAgICAgICAgdXNlUmVhbFRyYWNrczogITBcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoIWUpIHtcbiAgICAgICAgdS5kZWJ1ZyhcIm5vIHRva2VuIHlldFwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKCFvKSB7XG4gICAgICAgIHUud2FybihcIm5vIGxpdmVraXQgdXJsIHByb3ZpZGVkXCIpLCBjID09IG51bGwgfHwgYyhFcnJvcihcIm5vIGxpdmVraXQgdXJsIHByb3ZpZGVkXCIpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZiA/ICh1LmRlYnVnKFwiY29ubmVjdGluZ1wiKSwgaS5jb25uZWN0KG8sIGUsIGwpLmNhdGNoKChzKSA9PiB7XG4gICAgICAgIHUud2FybihzKSwgYyA9PSBudWxsIHx8IGMocyk7XG4gICAgICB9KSkgOiAodS5kZWJ1ZyhcImRpc2Nvbm5lY3RpbmcgYmVjYXVzZSBjb25uZWN0IGlzIGZhbHNlXCIpLCBpLmRpc2Nvbm5lY3QoKSk7XG4gICAgfVxuICB9LCBbXG4gICAgZixcbiAgICBlLFxuICAgIEpTT04uc3RyaW5naWZ5KGwpLFxuICAgIGksXG4gICAgYyxcbiAgICBvLFxuICAgIFNcbiAgXSksIGEudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWkpIHJldHVybjtcbiAgICBjb25zdCBzID0gKGIpID0+IHtcbiAgICAgIHN3aXRjaCAoYikge1xuICAgICAgICBjYXNlIHcuRGlzY29ubmVjdGVkOlxuICAgICAgICAgIFIgJiYgUigpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIHcuQ29ubmVjdGVkOlxuICAgICAgICAgIEUgJiYgRSgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIGkub24oZC5Db25uZWN0aW9uU3RhdGVDaGFuZ2VkLCBzKSwgKCkgPT4ge1xuICAgICAgaS5vZmYoZC5Db25uZWN0aW9uU3RhdGVDaGFuZ2VkLCBzKTtcbiAgICB9O1xuICB9LCBbZSwgRSwgUiwgaV0pLCBhLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGkpXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICB1LmluZm8oXCJkaXNjb25uZWN0aW5nIG9uIG9ubW91bnRcIiksIGkuZGlzY29ubmVjdCgpO1xuICAgICAgfTtcbiAgfSwgW2ldKSwgeyByb29tOiBpLCBodG1sUHJvcHM6IEEgfTtcbn1cbmNvbnN0IHogPSAvKiBAX19QVVJFX18gKi8gYS5mb3J3YXJkUmVmKGZ1bmN0aW9uKGUsIG8pIHtcbiAgY29uc3QgeyByb29tOiB0LCBodG1sUHJvcHM6IHIgfSA9IFQoZSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gYS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgcmVmOiBvLCAuLi5yIH0sIHQgJiYgLyogQF9fUFVSRV9fICovIGEuY3JlYXRlRWxlbWVudChLLlByb3ZpZGVyLCB7IHZhbHVlOiB0IH0sIC8qIEBfX1BVUkVfXyAqLyBhLmNyZWF0ZUVsZW1lbnQoTS5Qcm92aWRlciwgeyB2YWx1ZTogZS5mZWF0dXJlRmxhZ3MgfSwgZS5jaGlsZHJlbikpKTtcbn0pO1xuZXhwb3J0IHtcbiAgeiBhcyBMLFxuICBqIGFzIGMsXG4gIFUgYXMgbSxcbiAgVCBhcyB1XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cm9vbS1DMFFFc0d1aS5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@livekit+components-react@2_edffb0d7b35f7de9acec667eeef164c0/node_modules/@livekit/components-react/dist/room-C0QEsGui.mjs\n");

/***/ })

};
;